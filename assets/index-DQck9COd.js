var gP=Object.defineProperty;var vP=(t,e,n)=>e in t?gP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Uv=(t,e,n)=>vP(t,typeof e!="symbol"?e+"":e,n);function yP(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var tr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ww={exports:{}},$u={},Hw={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pa=Symbol.for("react.element"),xP=Symbol.for("react.portal"),wP=Symbol.for("react.fragment"),bP=Symbol.for("react.strict_mode"),SP=Symbol.for("react.profiler"),kP=Symbol.for("react.provider"),CP=Symbol.for("react.context"),EP=Symbol.for("react.forward_ref"),_P=Symbol.for("react.suspense"),NP=Symbol.for("react.memo"),TP=Symbol.for("react.lazy"),Wv=Symbol.iterator;function PP(t){return t===null||typeof t!="object"?null:(t=Wv&&t[Wv]||t["@@iterator"],typeof t=="function"?t:null)}var qw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Kw=Object.assign,Yw={};function ko(t,e,n){this.props=t,this.context=e,this.refs=Yw,this.updater=n||qw}ko.prototype.isReactComponent={};ko.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ko.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Gw(){}Gw.prototype=ko.prototype;function fm(t,e,n){this.props=t,this.context=e,this.refs=Yw,this.updater=n||qw}var pm=fm.prototype=new Gw;pm.constructor=fm;Kw(pm,ko.prototype);pm.isPureReactComponent=!0;var Hv=Array.isArray,Zw=Object.prototype.hasOwnProperty,mm={current:null},Xw={key:!0,ref:!0,__self:!0,__source:!0};function Qw(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Zw.call(e,r)&&!Xw.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:pa,type:t,key:s,ref:o,props:i,_owner:mm.current}}function jP(t,e){return{$$typeof:pa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function gm(t){return typeof t=="object"&&t!==null&&t.$$typeof===pa}function AP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var qv=/\/+/g;function Qd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?AP(""+t.key):e.toString(36)}function yc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case pa:case xP:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Qd(o,0):r,Hv(i)?(n="",t!=null&&(n=t.replace(qv,"$&/")+"/"),yc(i,e,n,"",function(c){return c})):i!=null&&(gm(i)&&(i=jP(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(qv,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Hv(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+Qd(s,l);o+=yc(s,e,n,a,i)}else if(a=PP(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+Qd(s,l++),o+=yc(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ma(t,e,n){if(t==null)return t;var r=[],i=0;return yc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function MP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var jt={current:null},xc={transition:null},RP={ReactCurrentDispatcher:jt,ReactCurrentBatchConfig:xc,ReactCurrentOwner:mm};function Jw(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:Ma,forEach:function(t,e,n){Ma(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ma(t,function(){e++}),e},toArray:function(t){return Ma(t,function(e){return e})||[]},only:function(t){if(!gm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Se.Component=ko;Se.Fragment=wP;Se.Profiler=SP;Se.PureComponent=fm;Se.StrictMode=bP;Se.Suspense=_P;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RP;Se.act=Jw;Se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Kw({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=mm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)Zw.call(e,a)&&!Xw.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:pa,type:t.type,key:i,ref:s,props:r,_owner:o}};Se.createContext=function(t){return t={$$typeof:CP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:kP,_context:t},t.Consumer=t};Se.createElement=Qw;Se.createFactory=function(t){var e=Qw.bind(null,t);return e.type=t,e};Se.createRef=function(){return{current:null}};Se.forwardRef=function(t){return{$$typeof:EP,render:t}};Se.isValidElement=gm;Se.lazy=function(t){return{$$typeof:TP,_payload:{_status:-1,_result:t},_init:MP}};Se.memo=function(t,e){return{$$typeof:NP,type:t,compare:e===void 0?null:e}};Se.startTransition=function(t){var e=xc.transition;xc.transition={};try{t()}finally{xc.transition=e}};Se.unstable_act=Jw;Se.useCallback=function(t,e){return jt.current.useCallback(t,e)};Se.useContext=function(t){return jt.current.useContext(t)};Se.useDebugValue=function(){};Se.useDeferredValue=function(t){return jt.current.useDeferredValue(t)};Se.useEffect=function(t,e){return jt.current.useEffect(t,e)};Se.useId=function(){return jt.current.useId()};Se.useImperativeHandle=function(t,e,n){return jt.current.useImperativeHandle(t,e,n)};Se.useInsertionEffect=function(t,e){return jt.current.useInsertionEffect(t,e)};Se.useLayoutEffect=function(t,e){return jt.current.useLayoutEffect(t,e)};Se.useMemo=function(t,e){return jt.current.useMemo(t,e)};Se.useReducer=function(t,e,n){return jt.current.useReducer(t,e,n)};Se.useRef=function(t){return jt.current.useRef(t)};Se.useState=function(t){return jt.current.useState(t)};Se.useSyncExternalStore=function(t,e,n){return jt.current.useSyncExternalStore(t,e,n)};Se.useTransition=function(){return jt.current.useTransition()};Se.version="18.3.1";Hw.exports=Se;var y=Hw.exports;const Me=lr(y),eb=yP({__proto__:null,default:Me},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IP=y,OP=Symbol.for("react.element"),LP=Symbol.for("react.fragment"),zP=Object.prototype.hasOwnProperty,DP=IP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$P={key:!0,ref:!0,__self:!0,__source:!0};function tb(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)zP.call(e,r)&&!$P.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:OP,type:t,key:s,ref:o,props:i,_owner:DP.current}}$u.Fragment=LP;$u.jsx=tb;$u.jsxs=tb;Ww.exports=$u;var d=Ww.exports,Sf={},nb={exports:{}},rn={},rb={exports:{}},ib={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,D){var E=j.length;j.push(D);e:for(;0<E;){var W=E-1>>>1,ee=j[W];if(0<i(ee,D))j[W]=D,j[E]=ee,E=W;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var D=j[0],E=j.pop();if(E!==D){j[0]=E;e:for(var W=0,ee=j.length,N=ee>>>1;W<N;){var se=2*(W+1)-1,be=j[se],he=se+1,J=j[he];if(0>i(be,E))he<ee&&0>i(J,be)?(j[W]=J,j[he]=E,W=he):(j[W]=be,j[se]=E,W=se);else if(he<ee&&0>i(J,E))j[W]=J,j[he]=E,W=he;else break e}}return D}function i(j,D){var E=j.sortIndex-D.sortIndex;return E!==0?E:j.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],c=[],u=1,h=null,f=3,p=!1,g=!1,m=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(j){for(var D=n(c);D!==null;){if(D.callback===null)r(c);else if(D.startTime<=j)r(c),D.sortIndex=D.expirationTime,e(a,D);else break;D=n(c)}}function S(j){if(m=!1,b(j),!g)if(n(a)!==null)g=!0,L(k);else{var D=n(c);D!==null&&z(S,D.startTime-j)}}function k(j,D){g=!1,m&&(m=!1,v(P),P=-1),p=!0;var E=f;try{for(b(D),h=n(a);h!==null&&(!(h.expirationTime>D)||j&&!T());){var W=h.callback;if(typeof W=="function"){h.callback=null,f=h.priorityLevel;var ee=W(h.expirationTime<=D);D=t.unstable_now(),typeof ee=="function"?h.callback=ee:h===n(a)&&r(a),b(D)}else r(a);h=n(a)}if(h!==null)var N=!0;else{var se=n(c);se!==null&&z(S,se.startTime-D),N=!1}return N}finally{h=null,f=E,p=!1}}var C=!1,_=null,P=-1,O=5,A=-1;function T(){return!(t.unstable_now()-A<O)}function R(){if(_!==null){var j=t.unstable_now();A=j;var D=!0;try{D=_(!0,j)}finally{D?$():(C=!1,_=null)}}else C=!1}var $;if(typeof x=="function")$=function(){x(R)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,I=M.port2;M.port1.onmessage=R,$=function(){I.postMessage(null)}}else $=function(){w(R,0)};function L(j){_=j,C||(C=!0,$())}function z(j,D){P=w(function(){j(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,L(k))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(j){switch(f){case 1:case 2:case 3:var D=3;break;default:D=f}var E=f;f=D;try{return j()}finally{f=E}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,D){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var E=f;f=j;try{return D()}finally{f=E}},t.unstable_scheduleCallback=function(j,D,E){var W=t.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?W+E:W):E=W,j){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=E+ee,j={id:u++,callback:D,priorityLevel:j,startTime:E,expirationTime:ee,sortIndex:-1},E>W?(j.sortIndex=E,e(c,j),n(a)===null&&j===n(c)&&(m?(v(P),P=-1):m=!0,z(S,E-W))):(j.sortIndex=ee,e(a,j),g||p||(g=!0,L(k))),j},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(j){var D=f;return function(){var E=f;f=D;try{return j.apply(this,arguments)}finally{f=E}}}})(ib);rb.exports=ib;var FP=rb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BP=y,nn=FP;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sb=new Set,_l={};function ds(t,e){lo(t,e),lo(t+"Capture",e)}function lo(t,e){for(_l[t]=e,t=0;t<e.length;t++)sb.add(e[t])}var Nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kf=Object.prototype.hasOwnProperty,VP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Kv={},Yv={};function UP(t){return kf.call(Yv,t)?!0:kf.call(Kv,t)?!1:VP.test(t)?Yv[t]=!0:(Kv[t]=!0,!1)}function WP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function HP(t,e,n,r){if(e===null||typeof e>"u"||WP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function At(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ht[t]=new At(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ht[e]=new At(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ht[t]=new At(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ht[t]=new At(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ht[t]=new At(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ht[t]=new At(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ht[t]=new At(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ht[t]=new At(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ht[t]=new At(t,5,!1,t.toLowerCase(),null,!1,!1)});var vm=/[\-:]([a-z])/g;function ym(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vm,ym);ht[e]=new At(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vm,ym);ht[e]=new At(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vm,ym);ht[e]=new At(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ht[t]=new At(t,1,!1,t.toLowerCase(),null,!1,!1)});ht.xlinkHref=new At("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ht[t]=new At(t,1,!1,t.toLowerCase(),null,!0,!0)});function xm(t,e,n,r){var i=ht.hasOwnProperty(e)?ht[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(HP(e,n,i,r)&&(n=null),r||i===null?UP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ir=BP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ra=Symbol.for("react.element"),Ts=Symbol.for("react.portal"),Ps=Symbol.for("react.fragment"),wm=Symbol.for("react.strict_mode"),Cf=Symbol.for("react.profiler"),ob=Symbol.for("react.provider"),lb=Symbol.for("react.context"),bm=Symbol.for("react.forward_ref"),Ef=Symbol.for("react.suspense"),_f=Symbol.for("react.suspense_list"),Sm=Symbol.for("react.memo"),Gr=Symbol.for("react.lazy"),ab=Symbol.for("react.offscreen"),Gv=Symbol.iterator;function Do(t){return t===null||typeof t!="object"?null:(t=Gv&&t[Gv]||t["@@iterator"],typeof t=="function"?t:null)}var Ke=Object.assign,Jd;function Jo(t){if(Jd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Jd=e&&e[1]||""}return`
`+Jd+t}var eh=!1;function th(t,e){if(!t||eh)return"";eh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{eh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Jo(t):""}function qP(t){switch(t.tag){case 5:return Jo(t.type);case 16:return Jo("Lazy");case 13:return Jo("Suspense");case 19:return Jo("SuspenseList");case 0:case 2:case 15:return t=th(t.type,!1),t;case 11:return t=th(t.type.render,!1),t;case 1:return t=th(t.type,!0),t;default:return""}}function Nf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ps:return"Fragment";case Ts:return"Portal";case Cf:return"Profiler";case wm:return"StrictMode";case Ef:return"Suspense";case _f:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case lb:return(t.displayName||"Context")+".Consumer";case ob:return(t._context.displayName||"Context")+".Provider";case bm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Sm:return e=t.displayName||null,e!==null?e:Nf(t.type)||"Memo";case Gr:e=t._payload,t=t._init;try{return Nf(t(e))}catch{}}return null}function KP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nf(e);case 8:return e===wm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function YP(t){var e=cb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ia(t){t._valueTracker||(t._valueTracker=YP(t))}function ub(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=cb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Bc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Tf(t,e){var n=e.checked;return Ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Zv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=fi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function db(t,e){e=e.checked,e!=null&&xm(t,"checked",e,!1)}function Pf(t,e){db(t,e);var n=fi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?jf(t,e.type,n):e.hasOwnProperty("defaultValue")&&jf(t,e.type,fi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Xv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function jf(t,e,n){(e!=="number"||Bc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var el=Array.isArray;function Us(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+fi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Af(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Qv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(el(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fi(n)}}function hb(t,e){var n=fi(e.value),r=fi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Jv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function fb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?fb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Oa,pb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Oa=Oa||document.createElement("div"),Oa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Oa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Nl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var cl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},GP=["Webkit","ms","Moz","O"];Object.keys(cl).forEach(function(t){GP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),cl[e]=cl[t]})});function mb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||cl.hasOwnProperty(t)&&cl[t]?(""+e).trim():e+"px"}function gb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=mb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var ZP=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rf(t,e){if(e){if(ZP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function If(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Of=null;function km(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Lf=null,Ws=null,Hs=null;function ey(t){if(t=va(t)){if(typeof Lf!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=Wu(e),Lf(t.stateNode,t.type,e))}}function vb(t){Ws?Hs?Hs.push(t):Hs=[t]:Ws=t}function yb(){if(Ws){var t=Ws,e=Hs;if(Hs=Ws=null,ey(t),e)for(t=0;t<e.length;t++)ey(e[t])}}function xb(t,e){return t(e)}function wb(){}var nh=!1;function bb(t,e,n){if(nh)return t(e,n);nh=!0;try{return xb(t,e,n)}finally{nh=!1,(Ws!==null||Hs!==null)&&(wb(),yb())}}function Tl(t,e){var n=t.stateNode;if(n===null)return null;var r=Wu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var zf=!1;if(Nr)try{var $o={};Object.defineProperty($o,"passive",{get:function(){zf=!0}}),window.addEventListener("test",$o,$o),window.removeEventListener("test",$o,$o)}catch{zf=!1}function XP(t,e,n,r,i,s,o,l,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var ul=!1,Vc=null,Uc=!1,Df=null,QP={onError:function(t){ul=!0,Vc=t}};function JP(t,e,n,r,i,s,o,l,a){ul=!1,Vc=null,XP.apply(QP,arguments)}function e2(t,e,n,r,i,s,o,l,a){if(JP.apply(this,arguments),ul){if(ul){var c=Vc;ul=!1,Vc=null}else throw Error(Y(198));Uc||(Uc=!0,Df=c)}}function hs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Sb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ty(t){if(hs(t)!==t)throw Error(Y(188))}function t2(t){var e=t.alternate;if(!e){if(e=hs(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return ty(i),t;if(s===r)return ty(i),e;s=s.sibling}throw Error(Y(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function kb(t){return t=t2(t),t!==null?Cb(t):null}function Cb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Cb(t);if(e!==null)return e;t=t.sibling}return null}var Eb=nn.unstable_scheduleCallback,ny=nn.unstable_cancelCallback,n2=nn.unstable_shouldYield,r2=nn.unstable_requestPaint,Ze=nn.unstable_now,i2=nn.unstable_getCurrentPriorityLevel,Cm=nn.unstable_ImmediatePriority,_b=nn.unstable_UserBlockingPriority,Wc=nn.unstable_NormalPriority,s2=nn.unstable_LowPriority,Nb=nn.unstable_IdlePriority,Fu=null,Zn=null;function o2(t){if(Zn&&typeof Zn.onCommitFiberRoot=="function")try{Zn.onCommitFiberRoot(Fu,t,void 0,(t.current.flags&128)===128)}catch{}}var _n=Math.clz32?Math.clz32:c2,l2=Math.log,a2=Math.LN2;function c2(t){return t>>>=0,t===0?32:31-(l2(t)/a2|0)|0}var La=64,za=4194304;function tl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Hc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=tl(l):(s&=o,s!==0&&(r=tl(s)))}else o=n&~i,o!==0?r=tl(o):s!==0&&(r=tl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-_n(e),i=1<<n,r|=t[n],e&=~i;return r}function u2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function d2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-_n(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=u2(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function $f(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Tb(){var t=La;return La<<=1,!(La&4194240)&&(La=64),t}function rh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ma(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-_n(e),t[e]=n}function h2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-_n(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Em(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-_n(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ae=0;function Pb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jb,_m,Ab,Mb,Rb,Ff=!1,Da=[],ni=null,ri=null,ii=null,Pl=new Map,jl=new Map,Xr=[],f2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ry(t,e){switch(t){case"focusin":case"focusout":ni=null;break;case"dragenter":case"dragleave":ri=null;break;case"mouseover":case"mouseout":ii=null;break;case"pointerover":case"pointerout":Pl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":jl.delete(e.pointerId)}}function Fo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=va(e),e!==null&&_m(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function p2(t,e,n,r,i){switch(e){case"focusin":return ni=Fo(ni,t,e,n,r,i),!0;case"dragenter":return ri=Fo(ri,t,e,n,r,i),!0;case"mouseover":return ii=Fo(ii,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pl.set(s,Fo(Pl.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,jl.set(s,Fo(jl.get(s)||null,t,e,n,r,i)),!0}return!1}function Ib(t){var e=Di(t.target);if(e!==null){var n=hs(e);if(n!==null){if(e=n.tag,e===13){if(e=Sb(n),e!==null){t.blockedOn=e,Rb(t.priority,function(){Ab(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Bf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Of=r,n.target.dispatchEvent(r),Of=null}else return e=va(n),e!==null&&_m(e),t.blockedOn=n,!1;e.shift()}return!0}function iy(t,e,n){wc(t)&&n.delete(e)}function m2(){Ff=!1,ni!==null&&wc(ni)&&(ni=null),ri!==null&&wc(ri)&&(ri=null),ii!==null&&wc(ii)&&(ii=null),Pl.forEach(iy),jl.forEach(iy)}function Bo(t,e){t.blockedOn===e&&(t.blockedOn=null,Ff||(Ff=!0,nn.unstable_scheduleCallback(nn.unstable_NormalPriority,m2)))}function Al(t){function e(i){return Bo(i,t)}if(0<Da.length){Bo(Da[0],t);for(var n=1;n<Da.length;n++){var r=Da[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ni!==null&&Bo(ni,t),ri!==null&&Bo(ri,t),ii!==null&&Bo(ii,t),Pl.forEach(e),jl.forEach(e),n=0;n<Xr.length;n++)r=Xr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Xr.length&&(n=Xr[0],n.blockedOn===null);)Ib(n),n.blockedOn===null&&Xr.shift()}var qs=Ir.ReactCurrentBatchConfig,qc=!0;function g2(t,e,n,r){var i=Ae,s=qs.transition;qs.transition=null;try{Ae=1,Nm(t,e,n,r)}finally{Ae=i,qs.transition=s}}function v2(t,e,n,r){var i=Ae,s=qs.transition;qs.transition=null;try{Ae=4,Nm(t,e,n,r)}finally{Ae=i,qs.transition=s}}function Nm(t,e,n,r){if(qc){var i=Bf(t,e,n,r);if(i===null)fh(t,e,r,Kc,n),ry(t,r);else if(p2(i,t,e,n,r))r.stopPropagation();else if(ry(t,r),e&4&&-1<f2.indexOf(t)){for(;i!==null;){var s=va(i);if(s!==null&&jb(s),s=Bf(t,e,n,r),s===null&&fh(t,e,r,Kc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else fh(t,e,r,null,n)}}var Kc=null;function Bf(t,e,n,r){if(Kc=null,t=km(r),t=Di(t),t!==null)if(e=hs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Sb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Kc=t,null}function Ob(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(i2()){case Cm:return 1;case _b:return 4;case Wc:case s2:return 16;case Nb:return 536870912;default:return 16}default:return 16}}var Jr=null,Tm=null,bc=null;function Lb(){if(bc)return bc;var t,e=Tm,n=e.length,r,i="value"in Jr?Jr.value:Jr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return bc=i.slice(t,1<r?1-r:void 0)}function Sc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function $a(){return!0}function sy(){return!1}function sn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?$a:sy,this.isPropagationStopped=sy,this}return Ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$a)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$a)},persist:function(){},isPersistent:$a}),e}var Co={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pm=sn(Co),ga=Ke({},Co,{view:0,detail:0}),y2=sn(ga),ih,sh,Vo,Bu=Ke({},ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vo&&(Vo&&t.type==="mousemove"?(ih=t.screenX-Vo.screenX,sh=t.screenY-Vo.screenY):sh=ih=0,Vo=t),ih)},movementY:function(t){return"movementY"in t?t.movementY:sh}}),oy=sn(Bu),x2=Ke({},Bu,{dataTransfer:0}),w2=sn(x2),b2=Ke({},ga,{relatedTarget:0}),oh=sn(b2),S2=Ke({},Co,{animationName:0,elapsedTime:0,pseudoElement:0}),k2=sn(S2),C2=Ke({},Co,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),E2=sn(C2),_2=Ke({},Co,{data:0}),ly=sn(_2),N2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},T2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},P2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function j2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=P2[t])?!!e[t]:!1}function jm(){return j2}var A2=Ke({},ga,{key:function(t){if(t.key){var e=N2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Sc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?T2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jm,charCode:function(t){return t.type==="keypress"?Sc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Sc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),M2=sn(A2),R2=Ke({},Bu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ay=sn(R2),I2=Ke({},ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jm}),O2=sn(I2),L2=Ke({},Co,{propertyName:0,elapsedTime:0,pseudoElement:0}),z2=sn(L2),D2=Ke({},Bu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$2=sn(D2),F2=[9,13,27,32],Am=Nr&&"CompositionEvent"in window,dl=null;Nr&&"documentMode"in document&&(dl=document.documentMode);var B2=Nr&&"TextEvent"in window&&!dl,zb=Nr&&(!Am||dl&&8<dl&&11>=dl),cy=" ",uy=!1;function Db(t,e){switch(t){case"keyup":return F2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $b(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var js=!1;function V2(t,e){switch(t){case"compositionend":return $b(e);case"keypress":return e.which!==32?null:(uy=!0,cy);case"textInput":return t=e.data,t===cy&&uy?null:t;default:return null}}function U2(t,e){if(js)return t==="compositionend"||!Am&&Db(t,e)?(t=Lb(),bc=Tm=Jr=null,js=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return zb&&e.locale!=="ko"?null:e.data;default:return null}}var W2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!W2[t.type]:e==="textarea"}function Fb(t,e,n,r){vb(r),e=Yc(e,"onChange"),0<e.length&&(n=new Pm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var hl=null,Ml=null;function H2(t){Xb(t,0)}function Vu(t){var e=Rs(t);if(ub(e))return t}function q2(t,e){if(t==="change")return e}var Bb=!1;if(Nr){var lh;if(Nr){var ah="oninput"in document;if(!ah){var hy=document.createElement("div");hy.setAttribute("oninput","return;"),ah=typeof hy.oninput=="function"}lh=ah}else lh=!1;Bb=lh&&(!document.documentMode||9<document.documentMode)}function fy(){hl&&(hl.detachEvent("onpropertychange",Vb),Ml=hl=null)}function Vb(t){if(t.propertyName==="value"&&Vu(Ml)){var e=[];Fb(e,Ml,t,km(t)),bb(H2,e)}}function K2(t,e,n){t==="focusin"?(fy(),hl=e,Ml=n,hl.attachEvent("onpropertychange",Vb)):t==="focusout"&&fy()}function Y2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vu(Ml)}function G2(t,e){if(t==="click")return Vu(e)}function Z2(t,e){if(t==="input"||t==="change")return Vu(e)}function X2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var jn=typeof Object.is=="function"?Object.is:X2;function Rl(t,e){if(jn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!kf.call(e,i)||!jn(t[i],e[i]))return!1}return!0}function py(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function my(t,e){var n=py(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=py(n)}}function Ub(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ub(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Wb(){for(var t=window,e=Bc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Bc(t.document)}return e}function Mm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Q2(t){var e=Wb(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Ub(n.ownerDocument.documentElement,n)){if(r!==null&&Mm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=my(n,s);var o=my(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var J2=Nr&&"documentMode"in document&&11>=document.documentMode,As=null,Vf=null,fl=null,Uf=!1;function gy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uf||As==null||As!==Bc(r)||(r=As,"selectionStart"in r&&Mm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),fl&&Rl(fl,r)||(fl=r,r=Yc(Vf,"onSelect"),0<r.length&&(e=new Pm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=As)))}function Fa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ms={animationend:Fa("Animation","AnimationEnd"),animationiteration:Fa("Animation","AnimationIteration"),animationstart:Fa("Animation","AnimationStart"),transitionend:Fa("Transition","TransitionEnd")},ch={},Hb={};Nr&&(Hb=document.createElement("div").style,"AnimationEvent"in window||(delete Ms.animationend.animation,delete Ms.animationiteration.animation,delete Ms.animationstart.animation),"TransitionEvent"in window||delete Ms.transitionend.transition);function Uu(t){if(ch[t])return ch[t];if(!Ms[t])return t;var e=Ms[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Hb)return ch[t]=e[n];return t}var qb=Uu("animationend"),Kb=Uu("animationiteration"),Yb=Uu("animationstart"),Gb=Uu("transitionend"),Zb=new Map,vy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ki(t,e){Zb.set(t,e),ds(e,[t])}for(var uh=0;uh<vy.length;uh++){var dh=vy[uh],ej=dh.toLowerCase(),tj=dh[0].toUpperCase()+dh.slice(1);ki(ej,"on"+tj)}ki(qb,"onAnimationEnd");ki(Kb,"onAnimationIteration");ki(Yb,"onAnimationStart");ki("dblclick","onDoubleClick");ki("focusin","onFocus");ki("focusout","onBlur");ki(Gb,"onTransitionEnd");lo("onMouseEnter",["mouseout","mouseover"]);lo("onMouseLeave",["mouseout","mouseover"]);lo("onPointerEnter",["pointerout","pointerover"]);lo("onPointerLeave",["pointerout","pointerover"]);ds("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ds("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ds("onBeforeInput",["compositionend","keypress","textInput","paste"]);ds("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ds("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ds("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nj=new Set("cancel close invalid load scroll toggle".split(" ").concat(nl));function yy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,e2(r,e,void 0,t),t.currentTarget=null}function Xb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;yy(i,l,c),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,c=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;yy(i,l,c),s=a}}}if(Uc)throw t=Df,Uc=!1,Df=null,t}function $e(t,e){var n=e[Yf];n===void 0&&(n=e[Yf]=new Set);var r=t+"__bubble";n.has(r)||(Qb(e,t,2,!1),n.add(r))}function hh(t,e,n){var r=0;e&&(r|=4),Qb(n,t,r,e)}var Ba="_reactListening"+Math.random().toString(36).slice(2);function Il(t){if(!t[Ba]){t[Ba]=!0,sb.forEach(function(n){n!=="selectionchange"&&(nj.has(n)||hh(n,!1,t),hh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ba]||(e[Ba]=!0,hh("selectionchange",!1,e))}}function Qb(t,e,n,r){switch(Ob(e)){case 1:var i=g2;break;case 4:i=v2;break;default:i=Nm}n=i.bind(null,e,n,t),i=void 0,!zf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function fh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Di(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}bb(function(){var c=s,u=km(n),h=[];e:{var f=Zb.get(t);if(f!==void 0){var p=Pm,g=t;switch(t){case"keypress":if(Sc(n)===0)break e;case"keydown":case"keyup":p=M2;break;case"focusin":g="focus",p=oh;break;case"focusout":g="blur",p=oh;break;case"beforeblur":case"afterblur":p=oh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=oy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=w2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=O2;break;case qb:case Kb:case Yb:p=k2;break;case Gb:p=z2;break;case"scroll":p=y2;break;case"wheel":p=$2;break;case"copy":case"cut":case"paste":p=E2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=ay}var m=(e&4)!==0,w=!m&&t==="scroll",v=m?f!==null?f+"Capture":null:f;m=[];for(var x=c,b;x!==null;){b=x;var S=b.stateNode;if(b.tag===5&&S!==null&&(b=S,v!==null&&(S=Tl(x,v),S!=null&&m.push(Ol(x,S,b)))),w)break;x=x.return}0<m.length&&(f=new p(f,g,null,n,u),h.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Of&&(g=n.relatedTarget||n.fromElement)&&(Di(g)||g[Tr]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=c,g=g?Di(g):null,g!==null&&(w=hs(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=c),p!==g)){if(m=oy,S="onMouseLeave",v="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(m=ay,S="onPointerLeave",v="onPointerEnter",x="pointer"),w=p==null?f:Rs(p),b=g==null?f:Rs(g),f=new m(S,x+"leave",p,n,u),f.target=w,f.relatedTarget=b,S=null,Di(u)===c&&(m=new m(v,x+"enter",g,n,u),m.target=b,m.relatedTarget=w,S=m),w=S,p&&g)t:{for(m=p,v=g,x=0,b=m;b;b=ys(b))x++;for(b=0,S=v;S;S=ys(S))b++;for(;0<x-b;)m=ys(m),x--;for(;0<b-x;)v=ys(v),b--;for(;x--;){if(m===v||v!==null&&m===v.alternate)break t;m=ys(m),v=ys(v)}m=null}else m=null;p!==null&&xy(h,f,p,m,!1),g!==null&&w!==null&&xy(h,w,g,m,!0)}}e:{if(f=c?Rs(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var k=q2;else if(dy(f))if(Bb)k=Z2;else{k=Y2;var C=K2}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=G2);if(k&&(k=k(t,c))){Fb(h,k,n,u);break e}C&&C(t,f,c),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&jf(f,"number",f.value)}switch(C=c?Rs(c):window,t){case"focusin":(dy(C)||C.contentEditable==="true")&&(As=C,Vf=c,fl=null);break;case"focusout":fl=Vf=As=null;break;case"mousedown":Uf=!0;break;case"contextmenu":case"mouseup":case"dragend":Uf=!1,gy(h,n,u);break;case"selectionchange":if(J2)break;case"keydown":case"keyup":gy(h,n,u)}var _;if(Am)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else js?Db(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(zb&&n.locale!=="ko"&&(js||P!=="onCompositionStart"?P==="onCompositionEnd"&&js&&(_=Lb()):(Jr=u,Tm="value"in Jr?Jr.value:Jr.textContent,js=!0)),C=Yc(c,P),0<C.length&&(P=new ly(P,t,null,n,u),h.push({event:P,listeners:C}),_?P.data=_:(_=$b(n),_!==null&&(P.data=_)))),(_=B2?V2(t,n):U2(t,n))&&(c=Yc(c,"onBeforeInput"),0<c.length&&(u=new ly("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=_))}Xb(h,e)})}function Ol(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Yc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Tl(t,n),s!=null&&r.unshift(Ol(t,s,i)),s=Tl(t,e),s!=null&&r.push(Ol(t,s,i))),t=t.return}return r}function ys(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xy(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,i?(a=Tl(n,s),a!=null&&o.unshift(Ol(n,a,l))):i||(a=Tl(n,s),a!=null&&o.push(Ol(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var rj=/\r\n?/g,ij=/\u0000|\uFFFD/g;function wy(t){return(typeof t=="string"?t:""+t).replace(rj,`
`).replace(ij,"")}function Va(t,e,n){if(e=wy(e),wy(t)!==e&&n)throw Error(Y(425))}function Gc(){}var Wf=null,Hf=null;function qf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Kf=typeof setTimeout=="function"?setTimeout:void 0,sj=typeof clearTimeout=="function"?clearTimeout:void 0,by=typeof Promise=="function"?Promise:void 0,oj=typeof queueMicrotask=="function"?queueMicrotask:typeof by<"u"?function(t){return by.resolve(null).then(t).catch(lj)}:Kf;function lj(t){setTimeout(function(){throw t})}function ph(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Al(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Al(e)}function si(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Sy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Eo=Math.random().toString(36).slice(2),qn="__reactFiber$"+Eo,Ll="__reactProps$"+Eo,Tr="__reactContainer$"+Eo,Yf="__reactEvents$"+Eo,aj="__reactListeners$"+Eo,cj="__reactHandles$"+Eo;function Di(t){var e=t[qn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Tr]||n[qn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Sy(t);t!==null;){if(n=t[qn])return n;t=Sy(t)}return e}t=n,n=t.parentNode}return null}function va(t){return t=t[qn]||t[Tr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Rs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function Wu(t){return t[Ll]||null}var Gf=[],Is=-1;function Ci(t){return{current:t}}function Be(t){0>Is||(t.current=Gf[Is],Gf[Is]=null,Is--)}function Le(t,e){Is++,Gf[Is]=t.current,t.current=e}var pi={},wt=Ci(pi),zt=Ci(!1),Yi=pi;function ao(t,e){var n=t.type.contextTypes;if(!n)return pi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Dt(t){return t=t.childContextTypes,t!=null}function Zc(){Be(zt),Be(wt)}function ky(t,e,n){if(wt.current!==pi)throw Error(Y(168));Le(wt,e),Le(zt,n)}function Jb(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Y(108,KP(t)||"Unknown",i));return Ke({},n,r)}function Xc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||pi,Yi=wt.current,Le(wt,t),Le(zt,zt.current),!0}function Cy(t,e,n){var r=t.stateNode;if(!r)throw Error(Y(169));n?(t=Jb(t,e,Yi),r.__reactInternalMemoizedMergedChildContext=t,Be(zt),Be(wt),Le(wt,t)):Be(zt),Le(zt,n)}var vr=null,Hu=!1,mh=!1;function e1(t){vr===null?vr=[t]:vr.push(t)}function uj(t){Hu=!0,e1(t)}function Ei(){if(!mh&&vr!==null){mh=!0;var t=0,e=Ae;try{var n=vr;for(Ae=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}vr=null,Hu=!1}catch(i){throw vr!==null&&(vr=vr.slice(t+1)),Eb(Cm,Ei),i}finally{Ae=e,mh=!1}}return null}var Os=[],Ls=0,Qc=null,Jc=0,an=[],cn=0,Gi=null,wr=1,br="";function Ii(t,e){Os[Ls++]=Jc,Os[Ls++]=Qc,Qc=t,Jc=e}function t1(t,e,n){an[cn++]=wr,an[cn++]=br,an[cn++]=Gi,Gi=t;var r=wr;t=br;var i=32-_n(r)-1;r&=~(1<<i),n+=1;var s=32-_n(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,wr=1<<32-_n(e)+i|n<<i|r,br=s+t}else wr=1<<s|n<<i|r,br=t}function Rm(t){t.return!==null&&(Ii(t,1),t1(t,1,0))}function Im(t){for(;t===Qc;)Qc=Os[--Ls],Os[Ls]=null,Jc=Os[--Ls],Os[Ls]=null;for(;t===Gi;)Gi=an[--cn],an[cn]=null,br=an[--cn],an[cn]=null,wr=an[--cn],an[cn]=null}var Qt=null,Gt=null,Ve=!1,kn=null;function n1(t,e){var n=dn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ey(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qt=t,Gt=si(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qt=t,Gt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Gi!==null?{id:wr,overflow:br}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=dn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qt=t,Gt=null,!0):!1;default:return!1}}function Zf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Xf(t){if(Ve){var e=Gt;if(e){var n=e;if(!Ey(t,e)){if(Zf(t))throw Error(Y(418));e=si(n.nextSibling);var r=Qt;e&&Ey(t,e)?n1(r,n):(t.flags=t.flags&-4097|2,Ve=!1,Qt=t)}}else{if(Zf(t))throw Error(Y(418));t.flags=t.flags&-4097|2,Ve=!1,Qt=t}}}function _y(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qt=t}function Ua(t){if(t!==Qt)return!1;if(!Ve)return _y(t),Ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!qf(t.type,t.memoizedProps)),e&&(e=Gt)){if(Zf(t))throw r1(),Error(Y(418));for(;e;)n1(t,e),e=si(e.nextSibling)}if(_y(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Gt=si(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Gt=null}}else Gt=Qt?si(t.stateNode.nextSibling):null;return!0}function r1(){for(var t=Gt;t;)t=si(t.nextSibling)}function co(){Gt=Qt=null,Ve=!1}function Om(t){kn===null?kn=[t]:kn.push(t)}var dj=Ir.ReactCurrentBatchConfig;function Uo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function Wa(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ny(t){var e=t._init;return e(t._payload)}function i1(t){function e(v,x){if(t){var b=v.deletions;b===null?(v.deletions=[x],v.flags|=16):b.push(x)}}function n(v,x){if(!t)return null;for(;x!==null;)e(v,x),x=x.sibling;return null}function r(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function i(v,x){return v=ci(v,x),v.index=0,v.sibling=null,v}function s(v,x,b){return v.index=b,t?(b=v.alternate,b!==null?(b=b.index,b<x?(v.flags|=2,x):b):(v.flags|=2,x)):(v.flags|=1048576,x)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,x,b,S){return x===null||x.tag!==6?(x=Sh(b,v.mode,S),x.return=v,x):(x=i(x,b),x.return=v,x)}function a(v,x,b,S){var k=b.type;return k===Ps?u(v,x,b.props.children,S,b.key):x!==null&&(x.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Gr&&Ny(k)===x.type)?(S=i(x,b.props),S.ref=Uo(v,x,b),S.return=v,S):(S=Pc(b.type,b.key,b.props,null,v.mode,S),S.ref=Uo(v,x,b),S.return=v,S)}function c(v,x,b,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=kh(b,v.mode,S),x.return=v,x):(x=i(x,b.children||[]),x.return=v,x)}function u(v,x,b,S,k){return x===null||x.tag!==7?(x=Ui(b,v.mode,S,k),x.return=v,x):(x=i(x,b),x.return=v,x)}function h(v,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Sh(""+x,v.mode,b),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ra:return b=Pc(x.type,x.key,x.props,null,v.mode,b),b.ref=Uo(v,null,x),b.return=v,b;case Ts:return x=kh(x,v.mode,b),x.return=v,x;case Gr:var S=x._init;return h(v,S(x._payload),b)}if(el(x)||Do(x))return x=Ui(x,v.mode,b,null),x.return=v,x;Wa(v,x)}return null}function f(v,x,b,S){var k=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return k!==null?null:l(v,x,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ra:return b.key===k?a(v,x,b,S):null;case Ts:return b.key===k?c(v,x,b,S):null;case Gr:return k=b._init,f(v,x,k(b._payload),S)}if(el(b)||Do(b))return k!==null?null:u(v,x,b,S,null);Wa(v,b)}return null}function p(v,x,b,S,k){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(b)||null,l(x,v,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ra:return v=v.get(S.key===null?b:S.key)||null,a(x,v,S,k);case Ts:return v=v.get(S.key===null?b:S.key)||null,c(x,v,S,k);case Gr:var C=S._init;return p(v,x,b,C(S._payload),k)}if(el(S)||Do(S))return v=v.get(b)||null,u(x,v,S,k,null);Wa(x,S)}return null}function g(v,x,b,S){for(var k=null,C=null,_=x,P=x=0,O=null;_!==null&&P<b.length;P++){_.index>P?(O=_,_=null):O=_.sibling;var A=f(v,_,b[P],S);if(A===null){_===null&&(_=O);break}t&&_&&A.alternate===null&&e(v,_),x=s(A,x,P),C===null?k=A:C.sibling=A,C=A,_=O}if(P===b.length)return n(v,_),Ve&&Ii(v,P),k;if(_===null){for(;P<b.length;P++)_=h(v,b[P],S),_!==null&&(x=s(_,x,P),C===null?k=_:C.sibling=_,C=_);return Ve&&Ii(v,P),k}for(_=r(v,_);P<b.length;P++)O=p(_,v,P,b[P],S),O!==null&&(t&&O.alternate!==null&&_.delete(O.key===null?P:O.key),x=s(O,x,P),C===null?k=O:C.sibling=O,C=O);return t&&_.forEach(function(T){return e(v,T)}),Ve&&Ii(v,P),k}function m(v,x,b,S){var k=Do(b);if(typeof k!="function")throw Error(Y(150));if(b=k.call(b),b==null)throw Error(Y(151));for(var C=k=null,_=x,P=x=0,O=null,A=b.next();_!==null&&!A.done;P++,A=b.next()){_.index>P?(O=_,_=null):O=_.sibling;var T=f(v,_,A.value,S);if(T===null){_===null&&(_=O);break}t&&_&&T.alternate===null&&e(v,_),x=s(T,x,P),C===null?k=T:C.sibling=T,C=T,_=O}if(A.done)return n(v,_),Ve&&Ii(v,P),k;if(_===null){for(;!A.done;P++,A=b.next())A=h(v,A.value,S),A!==null&&(x=s(A,x,P),C===null?k=A:C.sibling=A,C=A);return Ve&&Ii(v,P),k}for(_=r(v,_);!A.done;P++,A=b.next())A=p(_,v,P,A.value,S),A!==null&&(t&&A.alternate!==null&&_.delete(A.key===null?P:A.key),x=s(A,x,P),C===null?k=A:C.sibling=A,C=A);return t&&_.forEach(function(R){return e(v,R)}),Ve&&Ii(v,P),k}function w(v,x,b,S){if(typeof b=="object"&&b!==null&&b.type===Ps&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Ra:e:{for(var k=b.key,C=x;C!==null;){if(C.key===k){if(k=b.type,k===Ps){if(C.tag===7){n(v,C.sibling),x=i(C,b.props.children),x.return=v,v=x;break e}}else if(C.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Gr&&Ny(k)===C.type){n(v,C.sibling),x=i(C,b.props),x.ref=Uo(v,C,b),x.return=v,v=x;break e}n(v,C);break}else e(v,C);C=C.sibling}b.type===Ps?(x=Ui(b.props.children,v.mode,S,b.key),x.return=v,v=x):(S=Pc(b.type,b.key,b.props,null,v.mode,S),S.ref=Uo(v,x,b),S.return=v,v=S)}return o(v);case Ts:e:{for(C=b.key;x!==null;){if(x.key===C)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){n(v,x.sibling),x=i(x,b.children||[]),x.return=v,v=x;break e}else{n(v,x);break}else e(v,x);x=x.sibling}x=kh(b,v.mode,S),x.return=v,v=x}return o(v);case Gr:return C=b._init,w(v,x,C(b._payload),S)}if(el(b))return g(v,x,b,S);if(Do(b))return m(v,x,b,S);Wa(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(n(v,x.sibling),x=i(x,b),x.return=v,v=x):(n(v,x),x=Sh(b,v.mode,S),x.return=v,v=x),o(v)):n(v,x)}return w}var uo=i1(!0),s1=i1(!1),eu=Ci(null),tu=null,zs=null,Lm=null;function zm(){Lm=zs=tu=null}function Dm(t){var e=eu.current;Be(eu),t._currentValue=e}function Qf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ks(t,e){tu=t,Lm=zs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Lt=!0),t.firstContext=null)}function fn(t){var e=t._currentValue;if(Lm!==t)if(t={context:t,memoizedValue:e,next:null},zs===null){if(tu===null)throw Error(Y(308));zs=t,tu.dependencies={lanes:0,firstContext:t}}else zs=zs.next=t;return e}var $i=null;function $m(t){$i===null?$i=[t]:$i.push(t)}function o1(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,$m(e)):(n.next=i.next,i.next=n),e.interleaved=n,Pr(t,r)}function Pr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Zr=!1;function Fm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function l1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function _r(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function oi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ee&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Pr(t,n)}return i=r.interleaved,i===null?(e.next=e,$m(r)):(e.next=i.next,i.next=e),r.interleaved=e,Pr(t,n)}function kc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Em(t,n)}}function Ty(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function nu(t,e,n,r){var i=t.updateQueue;Zr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,c=a.next;a.next=null,o===null?s=c:o.next=c,o=a;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=c:l.next=c,u.lastBaseUpdate=a))}if(s!==null){var h=i.baseState;o=0,u=c=a=null,l=s;do{var f=l.lane,p=l.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=t,m=l;switch(f=e,p=n,m.tag){case 1:if(g=m.payload,typeof g=="function"){h=g.call(p,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,f=typeof g=="function"?g.call(p,h,f):g,f==null)break e;h=Ke({},h,f);break e;case 2:Zr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(c=u=p,a=h):u=u.next=p,o|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(a=h),i.baseState=a,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Xi|=o,t.lanes=o,t.memoizedState=h}}function Py(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Y(191,i));i.call(r)}}}var ya={},Xn=Ci(ya),zl=Ci(ya),Dl=Ci(ya);function Fi(t){if(t===ya)throw Error(Y(174));return t}function Bm(t,e){switch(Le(Dl,e),Le(zl,t),Le(Xn,ya),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Mf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Mf(e,t)}Be(Xn),Le(Xn,e)}function ho(){Be(Xn),Be(zl),Be(Dl)}function a1(t){Fi(Dl.current);var e=Fi(Xn.current),n=Mf(e,t.type);e!==n&&(Le(zl,t),Le(Xn,n))}function Vm(t){zl.current===t&&(Be(Xn),Be(zl))}var We=Ci(0);function ru(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gh=[];function Um(){for(var t=0;t<gh.length;t++)gh[t]._workInProgressVersionPrimary=null;gh.length=0}var Cc=Ir.ReactCurrentDispatcher,vh=Ir.ReactCurrentBatchConfig,Zi=0,He=null,rt=null,ot=null,iu=!1,pl=!1,$l=0,hj=0;function pt(){throw Error(Y(321))}function Wm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!jn(t[n],e[n]))return!1;return!0}function Hm(t,e,n,r,i,s){if(Zi=s,He=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Cc.current=t===null||t.memoizedState===null?gj:vj,t=n(r,i),pl){s=0;do{if(pl=!1,$l=0,25<=s)throw Error(Y(301));s+=1,ot=rt=null,e.updateQueue=null,Cc.current=yj,t=n(r,i)}while(pl)}if(Cc.current=su,e=rt!==null&&rt.next!==null,Zi=0,ot=rt=He=null,iu=!1,e)throw Error(Y(300));return t}function qm(){var t=$l!==0;return $l=0,t}function Wn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?He.memoizedState=ot=t:ot=ot.next=t,ot}function pn(){if(rt===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=rt.next;var e=ot===null?He.memoizedState:ot.next;if(e!==null)ot=e,rt=t;else{if(t===null)throw Error(Y(310));rt=t,t={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},ot===null?He.memoizedState=ot=t:ot=ot.next=t}return ot}function Fl(t,e){return typeof e=="function"?e(t):e}function yh(t){var e=pn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=rt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,c=s;do{var u=c.lane;if((Zi&u)===u)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=h,o=r):a=a.next=h,He.lanes|=u,Xi|=u}c=c.next}while(c!==null&&c!==s);a===null?o=r:a.next=l,jn(r,e.memoizedState)||(Lt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,He.lanes|=s,Xi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function xh(t){var e=pn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);jn(s,e.memoizedState)||(Lt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function c1(){}function u1(t,e){var n=He,r=pn(),i=e(),s=!jn(r.memoizedState,i);if(s&&(r.memoizedState=i,Lt=!0),r=r.queue,Km(f1.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ot!==null&&ot.memoizedState.tag&1){if(n.flags|=2048,Bl(9,h1.bind(null,n,r,i,e),void 0,null),lt===null)throw Error(Y(349));Zi&30||d1(n,e,i)}return i}function d1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function h1(t,e,n,r){e.value=n,e.getSnapshot=r,p1(e)&&m1(t)}function f1(t,e,n){return n(function(){p1(e)&&m1(t)})}function p1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!jn(t,n)}catch{return!0}}function m1(t){var e=Pr(t,1);e!==null&&Nn(e,t,1,-1)}function jy(t){var e=Wn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fl,lastRenderedState:t},e.queue=t,t=t.dispatch=mj.bind(null,He,t),[e.memoizedState,t]}function Bl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function g1(){return pn().memoizedState}function Ec(t,e,n,r){var i=Wn();He.flags|=t,i.memoizedState=Bl(1|e,n,void 0,r===void 0?null:r)}function qu(t,e,n,r){var i=pn();r=r===void 0?null:r;var s=void 0;if(rt!==null){var o=rt.memoizedState;if(s=o.destroy,r!==null&&Wm(r,o.deps)){i.memoizedState=Bl(e,n,s,r);return}}He.flags|=t,i.memoizedState=Bl(1|e,n,s,r)}function Ay(t,e){return Ec(8390656,8,t,e)}function Km(t,e){return qu(2048,8,t,e)}function v1(t,e){return qu(4,2,t,e)}function y1(t,e){return qu(4,4,t,e)}function x1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function w1(t,e,n){return n=n!=null?n.concat([t]):null,qu(4,4,x1.bind(null,e,t),n)}function Ym(){}function b1(t,e){var n=pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function S1(t,e){var n=pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function k1(t,e,n){return Zi&21?(jn(n,e)||(n=Tb(),He.lanes|=n,Xi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Lt=!0),t.memoizedState=n)}function fj(t,e){var n=Ae;Ae=n!==0&&4>n?n:4,t(!0);var r=vh.transition;vh.transition={};try{t(!1),e()}finally{Ae=n,vh.transition=r}}function C1(){return pn().memoizedState}function pj(t,e,n){var r=ai(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},E1(t))_1(e,n);else if(n=o1(t,e,n,r),n!==null){var i=Ct();Nn(n,t,r,i),N1(n,e,r)}}function mj(t,e,n){var r=ai(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(E1(t))_1(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,jn(l,o)){var a=e.interleaved;a===null?(i.next=i,$m(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=o1(t,e,i,r),n!==null&&(i=Ct(),Nn(n,t,r,i),N1(n,e,r))}}function E1(t){var e=t.alternate;return t===He||e!==null&&e===He}function _1(t,e){pl=iu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function N1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Em(t,n)}}var su={readContext:fn,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},gj={readContext:fn,useCallback:function(t,e){return Wn().memoizedState=[t,e===void 0?null:e],t},useContext:fn,useEffect:Ay,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ec(4194308,4,x1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ec(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ec(4,2,t,e)},useMemo:function(t,e){var n=Wn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Wn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=pj.bind(null,He,t),[r.memoizedState,t]},useRef:function(t){var e=Wn();return t={current:t},e.memoizedState=t},useState:jy,useDebugValue:Ym,useDeferredValue:function(t){return Wn().memoizedState=t},useTransition:function(){var t=jy(!1),e=t[0];return t=fj.bind(null,t[1]),Wn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=He,i=Wn();if(Ve){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),lt===null)throw Error(Y(349));Zi&30||d1(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Ay(f1.bind(null,r,s,t),[t]),r.flags|=2048,Bl(9,h1.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Wn(),e=lt.identifierPrefix;if(Ve){var n=br,r=wr;n=(r&~(1<<32-_n(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=$l++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=hj++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},vj={readContext:fn,useCallback:b1,useContext:fn,useEffect:Km,useImperativeHandle:w1,useInsertionEffect:v1,useLayoutEffect:y1,useMemo:S1,useReducer:yh,useRef:g1,useState:function(){return yh(Fl)},useDebugValue:Ym,useDeferredValue:function(t){var e=pn();return k1(e,rt.memoizedState,t)},useTransition:function(){var t=yh(Fl)[0],e=pn().memoizedState;return[t,e]},useMutableSource:c1,useSyncExternalStore:u1,useId:C1,unstable_isNewReconciler:!1},yj={readContext:fn,useCallback:b1,useContext:fn,useEffect:Km,useImperativeHandle:w1,useInsertionEffect:v1,useLayoutEffect:y1,useMemo:S1,useReducer:xh,useRef:g1,useState:function(){return xh(Fl)},useDebugValue:Ym,useDeferredValue:function(t){var e=pn();return rt===null?e.memoizedState=t:k1(e,rt.memoizedState,t)},useTransition:function(){var t=xh(Fl)[0],e=pn().memoizedState;return[t,e]},useMutableSource:c1,useSyncExternalStore:u1,useId:C1,unstable_isNewReconciler:!1};function bn(t,e){if(t&&t.defaultProps){e=Ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Jf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ku={isMounted:function(t){return(t=t._reactInternals)?hs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ct(),i=ai(t),s=_r(r,i);s.payload=e,n!=null&&(s.callback=n),e=oi(t,s,i),e!==null&&(Nn(e,t,i,r),kc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ct(),i=ai(t),s=_r(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=oi(t,s,i),e!==null&&(Nn(e,t,i,r),kc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ct(),r=ai(t),i=_r(n,r);i.tag=2,e!=null&&(i.callback=e),e=oi(t,i,r),e!==null&&(Nn(e,t,r,n),kc(e,t,r))}};function My(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Rl(n,r)||!Rl(i,s):!0}function T1(t,e,n){var r=!1,i=pi,s=e.contextType;return typeof s=="object"&&s!==null?s=fn(s):(i=Dt(e)?Yi:wt.current,r=e.contextTypes,s=(r=r!=null)?ao(t,i):pi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ku,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Ry(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ku.enqueueReplaceState(e,e.state,null)}function ep(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Fm(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=fn(s):(s=Dt(e)?Yi:wt.current,i.context=ao(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Jf(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ku.enqueueReplaceState(i,i.state,null),nu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function fo(t,e){try{var n="",r=e;do n+=qP(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function wh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function tp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var xj=typeof WeakMap=="function"?WeakMap:Map;function P1(t,e,n){n=_r(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){lu||(lu=!0,dp=r),tp(t,e)},n}function j1(t,e,n){n=_r(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){tp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){tp(t,e),typeof r!="function"&&(li===null?li=new Set([this]):li.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Iy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new xj;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Rj.bind(null,t,e,n),e.then(t,t))}function Oy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ly(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=_r(-1,1),e.tag=2,oi(n,e,1))),n.lanes|=1),t)}var wj=Ir.ReactCurrentOwner,Lt=!1;function kt(t,e,n,r){e.child=t===null?s1(e,null,n,r):uo(e,t.child,n,r)}function zy(t,e,n,r,i){n=n.render;var s=e.ref;return Ks(e,i),r=Hm(t,e,n,r,s,i),n=qm(),t!==null&&!Lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,jr(t,e,i)):(Ve&&n&&Rm(e),e.flags|=1,kt(t,e,r,i),e.child)}function Dy(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!ng(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,A1(t,e,s,r,i)):(t=Pc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Rl,n(o,r)&&t.ref===e.ref)return jr(t,e,i)}return e.flags|=1,t=ci(s,r),t.ref=e.ref,t.return=e,e.child=t}function A1(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Rl(s,r)&&t.ref===e.ref)if(Lt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Lt=!0);else return e.lanes=t.lanes,jr(t,e,i)}return np(t,e,n,r,i)}function M1(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le($s,Kt),Kt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Le($s,Kt),Kt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Le($s,Kt),Kt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Le($s,Kt),Kt|=r;return kt(t,e,i,n),e.child}function R1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function np(t,e,n,r,i){var s=Dt(n)?Yi:wt.current;return s=ao(e,s),Ks(e,i),n=Hm(t,e,n,r,s,i),r=qm(),t!==null&&!Lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,jr(t,e,i)):(Ve&&r&&Rm(e),e.flags|=1,kt(t,e,n,i),e.child)}function $y(t,e,n,r,i){if(Dt(n)){var s=!0;Xc(e)}else s=!1;if(Ks(e,i),e.stateNode===null)_c(t,e),T1(e,n,r),ep(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=fn(c):(c=Dt(n)?Yi:wt.current,c=ao(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==c)&&Ry(e,o,r,c),Zr=!1;var f=e.memoizedState;o.state=f,nu(e,r,o,i),a=e.memoizedState,l!==r||f!==a||zt.current||Zr?(typeof u=="function"&&(Jf(e,n,u,r),a=e.memoizedState),(l=Zr||My(e,n,l,r,f,a,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,l1(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:bn(e.type,l),o.props=c,h=e.pendingProps,f=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=fn(a):(a=Dt(n)?Yi:wt.current,a=ao(e,a));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==a)&&Ry(e,o,r,a),Zr=!1,f=e.memoizedState,o.state=f,nu(e,r,o,i);var g=e.memoizedState;l!==h||f!==g||zt.current||Zr?(typeof p=="function"&&(Jf(e,n,p,r),g=e.memoizedState),(c=Zr||My(e,n,c,r,f,g,a)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=a,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return rp(t,e,n,r,s,i)}function rp(t,e,n,r,i,s){R1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Cy(e,n,!1),jr(t,e,s);r=e.stateNode,wj.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=uo(e,t.child,null,s),e.child=uo(e,null,l,s)):kt(t,e,l,s),e.memoizedState=r.state,i&&Cy(e,n,!0),e.child}function I1(t){var e=t.stateNode;e.pendingContext?ky(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ky(t,e.context,!1),Bm(t,e.containerInfo)}function Fy(t,e,n,r,i){return co(),Om(i),e.flags|=256,kt(t,e,n,r),e.child}var ip={dehydrated:null,treeContext:null,retryLane:0};function sp(t){return{baseLanes:t,cachePool:null,transitions:null}}function O1(t,e,n){var r=e.pendingProps,i=We.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Le(We,i&1),t===null)return Xf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Zu(o,r,0,null),t=Ui(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=sp(n),e.memoizedState=ip,t):Gm(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return bj(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=ci(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=ci(l,s):(s=Ui(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?sp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=ip,r}return s=t.child,t=s.sibling,r=ci(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Gm(t,e){return e=Zu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ha(t,e,n,r){return r!==null&&Om(r),uo(e,t.child,null,n),t=Gm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function bj(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=wh(Error(Y(422))),Ha(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Zu({mode:"visible",children:r.children},i,0,null),s=Ui(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&uo(e,t.child,null,o),e.child.memoizedState=sp(o),e.memoizedState=ip,s);if(!(e.mode&1))return Ha(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(Y(419)),r=wh(s,r,void 0),Ha(t,e,o,r)}if(l=(o&t.childLanes)!==0,Lt||l){if(r=lt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Pr(t,i),Nn(r,t,i,-1))}return tg(),r=wh(Error(Y(421))),Ha(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Ij.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Gt=si(i.nextSibling),Qt=e,Ve=!0,kn=null,t!==null&&(an[cn++]=wr,an[cn++]=br,an[cn++]=Gi,wr=t.id,br=t.overflow,Gi=e),e=Gm(e,r.children),e.flags|=4096,e)}function By(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Qf(t.return,e,n)}function bh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function L1(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(kt(t,e,r.children,n),r=We.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&By(t,n,e);else if(t.tag===19)By(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Le(We,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ru(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),bh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ru(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}bh(e,!0,n,null,s);break;case"together":bh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _c(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function jr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Xi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=ci(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ci(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Sj(t,e,n){switch(e.tag){case 3:I1(e),co();break;case 5:a1(e);break;case 1:Dt(e.type)&&Xc(e);break;case 4:Bm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Le(eu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Le(We,We.current&1),e.flags|=128,null):n&e.child.childLanes?O1(t,e,n):(Le(We,We.current&1),t=jr(t,e,n),t!==null?t.sibling:null);Le(We,We.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return L1(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Le(We,We.current),r)break;return null;case 22:case 23:return e.lanes=0,M1(t,e,n)}return jr(t,e,n)}var z1,op,D1,$1;z1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};op=function(){};D1=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Fi(Xn.current);var s=null;switch(n){case"input":i=Tf(t,i),r=Tf(t,r),s=[];break;case"select":i=Ke({},i,{value:void 0}),r=Ke({},r,{value:void 0}),s=[];break;case"textarea":i=Af(t,i),r=Af(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Gc)}Rf(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(_l.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var a=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(_l.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&$e("scroll",t),s||l===a||(s=[])):(s=s||[]).push(c,a))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};$1=function(t,e,n,r){n!==r&&(e.flags|=4)};function Wo(t,e){if(!Ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function mt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function kj(t,e,n){var r=e.pendingProps;switch(Im(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(e),null;case 1:return Dt(e.type)&&Zc(),mt(e),null;case 3:return r=e.stateNode,ho(),Be(zt),Be(wt),Um(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ua(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,kn!==null&&(pp(kn),kn=null))),op(t,e),mt(e),null;case 5:Vm(e);var i=Fi(Dl.current);if(n=e.type,t!==null&&e.stateNode!=null)D1(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return mt(e),null}if(t=Fi(Xn.current),Ua(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[qn]=e,r[Ll]=s,t=(e.mode&1)!==0,n){case"dialog":$e("cancel",r),$e("close",r);break;case"iframe":case"object":case"embed":$e("load",r);break;case"video":case"audio":for(i=0;i<nl.length;i++)$e(nl[i],r);break;case"source":$e("error",r);break;case"img":case"image":case"link":$e("error",r),$e("load",r);break;case"details":$e("toggle",r);break;case"input":Zv(r,s),$e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},$e("invalid",r);break;case"textarea":Qv(r,s),$e("invalid",r)}Rf(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Va(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Va(r.textContent,l,t),i=["children",""+l]):_l.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&$e("scroll",r)}switch(n){case"input":Ia(r),Xv(r,s,!0);break;case"textarea":Ia(r),Jv(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Gc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=fb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[qn]=e,t[Ll]=r,z1(t,e,!1,!1),e.stateNode=t;e:{switch(o=If(n,r),n){case"dialog":$e("cancel",t),$e("close",t),i=r;break;case"iframe":case"object":case"embed":$e("load",t),i=r;break;case"video":case"audio":for(i=0;i<nl.length;i++)$e(nl[i],t);i=r;break;case"source":$e("error",t),i=r;break;case"img":case"image":case"link":$e("error",t),$e("load",t),i=r;break;case"details":$e("toggle",t),i=r;break;case"input":Zv(t,r),i=Tf(t,r),$e("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ke({},r,{value:void 0}),$e("invalid",t);break;case"textarea":Qv(t,r),i=Af(t,r),$e("invalid",t);break;default:i=r}Rf(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?gb(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&pb(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Nl(t,a):typeof a=="number"&&Nl(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(_l.hasOwnProperty(s)?a!=null&&s==="onScroll"&&$e("scroll",t):a!=null&&xm(t,s,a,o))}switch(n){case"input":Ia(t),Xv(t,r,!1);break;case"textarea":Ia(t),Jv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+fi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Us(t,!!r.multiple,s,!1):r.defaultValue!=null&&Us(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Gc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return mt(e),null;case 6:if(t&&e.stateNode!=null)$1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));if(n=Fi(Dl.current),Fi(Xn.current),Ua(e)){if(r=e.stateNode,n=e.memoizedProps,r[qn]=e,(s=r.nodeValue!==n)&&(t=Qt,t!==null))switch(t.tag){case 3:Va(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Va(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qn]=e,e.stateNode=r}return mt(e),null;case 13:if(Be(We),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ve&&Gt!==null&&e.mode&1&&!(e.flags&128))r1(),co(),e.flags|=98560,s=!1;else if(s=Ua(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Y(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Y(317));s[qn]=e}else co(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;mt(e),s=!1}else kn!==null&&(pp(kn),kn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||We.current&1?it===0&&(it=3):tg())),e.updateQueue!==null&&(e.flags|=4),mt(e),null);case 4:return ho(),op(t,e),t===null&&Il(e.stateNode.containerInfo),mt(e),null;case 10:return Dm(e.type._context),mt(e),null;case 17:return Dt(e.type)&&Zc(),mt(e),null;case 19:if(Be(We),s=e.memoizedState,s===null)return mt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Wo(s,!1);else{if(it!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ru(t),o!==null){for(e.flags|=128,Wo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Le(We,We.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ze()>po&&(e.flags|=128,r=!0,Wo(s,!1),e.lanes=4194304)}else{if(!r)if(t=ru(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Wo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ve)return mt(e),null}else 2*Ze()-s.renderingStartTime>po&&n!==1073741824&&(e.flags|=128,r=!0,Wo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ze(),e.sibling=null,n=We.current,Le(We,r?n&1|2:n&1),e):(mt(e),null);case 22:case 23:return eg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Kt&1073741824&&(mt(e),e.subtreeFlags&6&&(e.flags|=8192)):mt(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function Cj(t,e){switch(Im(e),e.tag){case 1:return Dt(e.type)&&Zc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ho(),Be(zt),Be(wt),Um(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Vm(e),null;case 13:if(Be(We),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));co()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Be(We),null;case 4:return ho(),null;case 10:return Dm(e.type._context),null;case 22:case 23:return eg(),null;case 24:return null;default:return null}}var qa=!1,gt=!1,Ej=typeof WeakSet=="function"?WeakSet:Set,re=null;function Ds(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ge(t,e,r)}else n.current=null}function lp(t,e,n){try{n()}catch(r){Ge(t,e,r)}}var Vy=!1;function _j(t,e){if(Wf=qc,t=Wb(),Mm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,c=0,u=0,h=t,f=null;t:for(;;){for(var p;h!==n||i!==0&&h.nodeType!==3||(l=o+i),h!==s||r!==0&&h.nodeType!==3||(a=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++c===i&&(l=o),f===s&&++u===r&&(a=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hf={focusedElem:t,selectionRange:n},qc=!1,re=e;re!==null;)if(e=re,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,re=t;else for(;re!==null;){e=re;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,w=g.memoizedState,v=e.stateNode,x=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:bn(e.type,m),w);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(S){Ge(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,re=t;break}re=e.return}return g=Vy,Vy=!1,g}function ml(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&lp(e,n,s)}i=i.next}while(i!==r)}}function Yu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ap(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function F1(t){var e=t.alternate;e!==null&&(t.alternate=null,F1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[qn],delete e[Ll],delete e[Yf],delete e[aj],delete e[cj])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function B1(t){return t.tag===5||t.tag===3||t.tag===4}function Uy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||B1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Gc));else if(r!==4&&(t=t.child,t!==null))for(cp(t,e,n),t=t.sibling;t!==null;)cp(t,e,n),t=t.sibling}function up(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(up(t,e,n),t=t.sibling;t!==null;)up(t,e,n),t=t.sibling}var ct=null,Sn=!1;function Br(t,e,n){for(n=n.child;n!==null;)V1(t,e,n),n=n.sibling}function V1(t,e,n){if(Zn&&typeof Zn.onCommitFiberUnmount=="function")try{Zn.onCommitFiberUnmount(Fu,n)}catch{}switch(n.tag){case 5:gt||Ds(n,e);case 6:var r=ct,i=Sn;ct=null,Br(t,e,n),ct=r,Sn=i,ct!==null&&(Sn?(t=ct,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ct.removeChild(n.stateNode));break;case 18:ct!==null&&(Sn?(t=ct,n=n.stateNode,t.nodeType===8?ph(t.parentNode,n):t.nodeType===1&&ph(t,n),Al(t)):ph(ct,n.stateNode));break;case 4:r=ct,i=Sn,ct=n.stateNode.containerInfo,Sn=!0,Br(t,e,n),ct=r,Sn=i;break;case 0:case 11:case 14:case 15:if(!gt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&lp(n,e,o),i=i.next}while(i!==r)}Br(t,e,n);break;case 1:if(!gt&&(Ds(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ge(n,e,l)}Br(t,e,n);break;case 21:Br(t,e,n);break;case 22:n.mode&1?(gt=(r=gt)||n.memoizedState!==null,Br(t,e,n),gt=r):Br(t,e,n);break;default:Br(t,e,n)}}function Wy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Ej),e.forEach(function(r){var i=Oj.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function xn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ct=l.stateNode,Sn=!1;break e;case 3:ct=l.stateNode.containerInfo,Sn=!0;break e;case 4:ct=l.stateNode.containerInfo,Sn=!0;break e}l=l.return}if(ct===null)throw Error(Y(160));V1(s,o,i),ct=null,Sn=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(c){Ge(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)U1(e,t),e=e.sibling}function U1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(xn(e,t),Bn(t),r&4){try{ml(3,t,t.return),Yu(3,t)}catch(m){Ge(t,t.return,m)}try{ml(5,t,t.return)}catch(m){Ge(t,t.return,m)}}break;case 1:xn(e,t),Bn(t),r&512&&n!==null&&Ds(n,n.return);break;case 5:if(xn(e,t),Bn(t),r&512&&n!==null&&Ds(n,n.return),t.flags&32){var i=t.stateNode;try{Nl(i,"")}catch(m){Ge(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&db(i,s),If(l,o);var c=If(l,s);for(o=0;o<a.length;o+=2){var u=a[o],h=a[o+1];u==="style"?gb(i,h):u==="dangerouslySetInnerHTML"?pb(i,h):u==="children"?Nl(i,h):xm(i,u,h,c)}switch(l){case"input":Pf(i,s);break;case"textarea":hb(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Us(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Us(i,!!s.multiple,s.defaultValue,!0):Us(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ll]=s}catch(m){Ge(t,t.return,m)}}break;case 6:if(xn(e,t),Bn(t),r&4){if(t.stateNode===null)throw Error(Y(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){Ge(t,t.return,m)}}break;case 3:if(xn(e,t),Bn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Al(e.containerInfo)}catch(m){Ge(t,t.return,m)}break;case 4:xn(e,t),Bn(t);break;case 13:xn(e,t),Bn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Qm=Ze())),r&4&&Wy(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(gt=(c=gt)||u,xn(e,t),gt=c):xn(e,t),Bn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(re=t,u=t.child;u!==null;){for(h=re=u;re!==null;){switch(f=re,p=f.child,f.tag){case 0:case 11:case 14:case 15:ml(4,f,f.return);break;case 1:Ds(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){Ge(r,n,m)}}break;case 5:Ds(f,f.return);break;case 22:if(f.memoizedState!==null){qy(h);continue}}p!==null?(p.return=f,re=p):qy(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=h.stateNode,a=h.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=mb("display",o))}catch(m){Ge(t,t.return,m)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(m){Ge(t,t.return,m)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:xn(e,t),Bn(t),r&4&&Wy(t);break;case 21:break;default:xn(e,t),Bn(t)}}function Bn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(B1(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Nl(i,""),r.flags&=-33);var s=Uy(t);up(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Uy(t);cp(t,l,o);break;default:throw Error(Y(161))}}catch(a){Ge(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Nj(t,e,n){re=t,W1(t)}function W1(t,e,n){for(var r=(t.mode&1)!==0;re!==null;){var i=re,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||qa;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||gt;l=qa;var c=gt;if(qa=o,(gt=a)&&!c)for(re=i;re!==null;)o=re,a=o.child,o.tag===22&&o.memoizedState!==null?Ky(i):a!==null?(a.return=o,re=a):Ky(i);for(;s!==null;)re=s,W1(s),s=s.sibling;re=i,qa=l,gt=c}Hy(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,re=s):Hy(t)}}function Hy(t){for(;re!==null;){var e=re;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:gt||Yu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!gt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:bn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Py(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Py(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Al(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}gt||e.flags&512&&ap(e)}catch(f){Ge(e,e.return,f)}}if(e===t){re=null;break}if(n=e.sibling,n!==null){n.return=e.return,re=n;break}re=e.return}}function qy(t){for(;re!==null;){var e=re;if(e===t){re=null;break}var n=e.sibling;if(n!==null){n.return=e.return,re=n;break}re=e.return}}function Ky(t){for(;re!==null;){var e=re;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Yu(4,e)}catch(a){Ge(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){Ge(e,i,a)}}var s=e.return;try{ap(e)}catch(a){Ge(e,s,a)}break;case 5:var o=e.return;try{ap(e)}catch(a){Ge(e,o,a)}}}catch(a){Ge(e,e.return,a)}if(e===t){re=null;break}var l=e.sibling;if(l!==null){l.return=e.return,re=l;break}re=e.return}}var Tj=Math.ceil,ou=Ir.ReactCurrentDispatcher,Zm=Ir.ReactCurrentOwner,hn=Ir.ReactCurrentBatchConfig,Ee=0,lt=null,nt=null,dt=0,Kt=0,$s=Ci(0),it=0,Vl=null,Xi=0,Gu=0,Xm=0,gl=null,It=null,Qm=0,po=1/0,gr=null,lu=!1,dp=null,li=null,Ka=!1,ei=null,au=0,vl=0,hp=null,Nc=-1,Tc=0;function Ct(){return Ee&6?Ze():Nc!==-1?Nc:Nc=Ze()}function ai(t){return t.mode&1?Ee&2&&dt!==0?dt&-dt:dj.transition!==null?(Tc===0&&(Tc=Tb()),Tc):(t=Ae,t!==0||(t=window.event,t=t===void 0?16:Ob(t.type)),t):1}function Nn(t,e,n,r){if(50<vl)throw vl=0,hp=null,Error(Y(185));ma(t,n,r),(!(Ee&2)||t!==lt)&&(t===lt&&(!(Ee&2)&&(Gu|=n),it===4&&Qr(t,dt)),$t(t,r),n===1&&Ee===0&&!(e.mode&1)&&(po=Ze()+500,Hu&&Ei()))}function $t(t,e){var n=t.callbackNode;d2(t,e);var r=Hc(t,t===lt?dt:0);if(r===0)n!==null&&ny(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ny(n),e===1)t.tag===0?uj(Yy.bind(null,t)):e1(Yy.bind(null,t)),oj(function(){!(Ee&6)&&Ei()}),n=null;else{switch(Pb(r)){case 1:n=Cm;break;case 4:n=_b;break;case 16:n=Wc;break;case 536870912:n=Nb;break;default:n=Wc}n=Q1(n,H1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function H1(t,e){if(Nc=-1,Tc=0,Ee&6)throw Error(Y(327));var n=t.callbackNode;if(Ys()&&t.callbackNode!==n)return null;var r=Hc(t,t===lt?dt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=cu(t,r);else{e=r;var i=Ee;Ee|=2;var s=K1();(lt!==t||dt!==e)&&(gr=null,po=Ze()+500,Vi(t,e));do try{Aj();break}catch(l){q1(t,l)}while(!0);zm(),ou.current=s,Ee=i,nt!==null?e=0:(lt=null,dt=0,e=it)}if(e!==0){if(e===2&&(i=$f(t),i!==0&&(r=i,e=fp(t,i))),e===1)throw n=Vl,Vi(t,0),Qr(t,r),$t(t,Ze()),n;if(e===6)Qr(t,r);else{if(i=t.current.alternate,!(r&30)&&!Pj(i)&&(e=cu(t,r),e===2&&(s=$f(t),s!==0&&(r=s,e=fp(t,s))),e===1))throw n=Vl,Vi(t,0),Qr(t,r),$t(t,Ze()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Y(345));case 2:Oi(t,It,gr);break;case 3:if(Qr(t,r),(r&130023424)===r&&(e=Qm+500-Ze(),10<e)){if(Hc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ct(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Kf(Oi.bind(null,t,It,gr),e);break}Oi(t,It,gr);break;case 4:if(Qr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-_n(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tj(r/1960))-r,10<r){t.timeoutHandle=Kf(Oi.bind(null,t,It,gr),r);break}Oi(t,It,gr);break;case 5:Oi(t,It,gr);break;default:throw Error(Y(329))}}}return $t(t,Ze()),t.callbackNode===n?H1.bind(null,t):null}function fp(t,e){var n=gl;return t.current.memoizedState.isDehydrated&&(Vi(t,e).flags|=256),t=cu(t,e),t!==2&&(e=It,It=n,e!==null&&pp(e)),t}function pp(t){It===null?It=t:It.push.apply(It,t)}function Pj(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!jn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qr(t,e){for(e&=~Xm,e&=~Gu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-_n(e),r=1<<n;t[n]=-1,e&=~r}}function Yy(t){if(Ee&6)throw Error(Y(327));Ys();var e=Hc(t,0);if(!(e&1))return $t(t,Ze()),null;var n=cu(t,e);if(t.tag!==0&&n===2){var r=$f(t);r!==0&&(e=r,n=fp(t,r))}if(n===1)throw n=Vl,Vi(t,0),Qr(t,e),$t(t,Ze()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Oi(t,It,gr),$t(t,Ze()),null}function Jm(t,e){var n=Ee;Ee|=1;try{return t(e)}finally{Ee=n,Ee===0&&(po=Ze()+500,Hu&&Ei())}}function Qi(t){ei!==null&&ei.tag===0&&!(Ee&6)&&Ys();var e=Ee;Ee|=1;var n=hn.transition,r=Ae;try{if(hn.transition=null,Ae=1,t)return t()}finally{Ae=r,hn.transition=n,Ee=e,!(Ee&6)&&Ei()}}function eg(){Kt=$s.current,Be($s)}function Vi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,sj(n)),nt!==null)for(n=nt.return;n!==null;){var r=n;switch(Im(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Zc();break;case 3:ho(),Be(zt),Be(wt),Um();break;case 5:Vm(r);break;case 4:ho();break;case 13:Be(We);break;case 19:Be(We);break;case 10:Dm(r.type._context);break;case 22:case 23:eg()}n=n.return}if(lt=t,nt=t=ci(t.current,null),dt=Kt=e,it=0,Vl=null,Xm=Gu=Xi=0,It=gl=null,$i!==null){for(e=0;e<$i.length;e++)if(n=$i[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}$i=null}return t}function q1(t,e){do{var n=nt;try{if(zm(),Cc.current=su,iu){for(var r=He.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}iu=!1}if(Zi=0,ot=rt=He=null,pl=!1,$l=0,Zm.current=null,n===null||n.return===null){it=1,Vl=e,nt=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=dt,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=Oy(o);if(p!==null){p.flags&=-257,Ly(p,o,l,s,e),p.mode&1&&Iy(s,c,e),e=p,a=c;var g=e.updateQueue;if(g===null){var m=new Set;m.add(a),e.updateQueue=m}else g.add(a);break e}else{if(!(e&1)){Iy(s,c,e),tg();break e}a=Error(Y(426))}}else if(Ve&&l.mode&1){var w=Oy(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Ly(w,o,l,s,e),Om(fo(a,l));break e}}s=a=fo(a,l),it!==4&&(it=2),gl===null?gl=[s]:gl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=P1(s,a,e);Ty(s,v);break e;case 1:l=a;var x=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(li===null||!li.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=j1(s,l,e);Ty(s,S);break e}}s=s.return}while(s!==null)}G1(n)}catch(k){e=k,nt===n&&n!==null&&(nt=n=n.return);continue}break}while(!0)}function K1(){var t=ou.current;return ou.current=su,t===null?su:t}function tg(){(it===0||it===3||it===2)&&(it=4),lt===null||!(Xi&268435455)&&!(Gu&268435455)||Qr(lt,dt)}function cu(t,e){var n=Ee;Ee|=2;var r=K1();(lt!==t||dt!==e)&&(gr=null,Vi(t,e));do try{jj();break}catch(i){q1(t,i)}while(!0);if(zm(),Ee=n,ou.current=r,nt!==null)throw Error(Y(261));return lt=null,dt=0,it}function jj(){for(;nt!==null;)Y1(nt)}function Aj(){for(;nt!==null&&!n2();)Y1(nt)}function Y1(t){var e=X1(t.alternate,t,Kt);t.memoizedProps=t.pendingProps,e===null?G1(t):nt=e,Zm.current=null}function G1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Cj(n,e),n!==null){n.flags&=32767,nt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{it=6,nt=null;return}}else if(n=kj(n,e,Kt),n!==null){nt=n;return}if(e=e.sibling,e!==null){nt=e;return}nt=e=t}while(e!==null);it===0&&(it=5)}function Oi(t,e,n){var r=Ae,i=hn.transition;try{hn.transition=null,Ae=1,Mj(t,e,n,r)}finally{hn.transition=i,Ae=r}return null}function Mj(t,e,n,r){do Ys();while(ei!==null);if(Ee&6)throw Error(Y(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(h2(t,s),t===lt&&(nt=lt=null,dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ka||(Ka=!0,Q1(Wc,function(){return Ys(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=hn.transition,hn.transition=null;var o=Ae;Ae=1;var l=Ee;Ee|=4,Zm.current=null,_j(t,n),U1(n,t),Q2(Hf),qc=!!Wf,Hf=Wf=null,t.current=n,Nj(n),r2(),Ee=l,Ae=o,hn.transition=s}else t.current=n;if(Ka&&(Ka=!1,ei=t,au=i),s=t.pendingLanes,s===0&&(li=null),o2(n.stateNode),$t(t,Ze()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(lu)throw lu=!1,t=dp,dp=null,t;return au&1&&t.tag!==0&&Ys(),s=t.pendingLanes,s&1?t===hp?vl++:(vl=0,hp=t):vl=0,Ei(),null}function Ys(){if(ei!==null){var t=Pb(au),e=hn.transition,n=Ae;try{if(hn.transition=null,Ae=16>t?16:t,ei===null)var r=!1;else{if(t=ei,ei=null,au=0,Ee&6)throw Error(Y(331));var i=Ee;for(Ee|=4,re=t.current;re!==null;){var s=re,o=s.child;if(re.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(re=c;re!==null;){var u=re;switch(u.tag){case 0:case 11:case 15:ml(8,u,s)}var h=u.child;if(h!==null)h.return=u,re=h;else for(;re!==null;){u=re;var f=u.sibling,p=u.return;if(F1(u),u===c){re=null;break}if(f!==null){f.return=p,re=f;break}re=p}}}var g=s.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var w=m.sibling;m.sibling=null,m=w}while(m!==null)}}re=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,re=o;else e:for(;re!==null;){if(s=re,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ml(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,re=v;break e}re=s.return}}var x=t.current;for(re=x;re!==null;){o=re;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,re=b;else e:for(o=x;re!==null;){if(l=re,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Yu(9,l)}}catch(k){Ge(l,l.return,k)}if(l===o){re=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,re=S;break e}re=l.return}}if(Ee=i,Ei(),Zn&&typeof Zn.onPostCommitFiberRoot=="function")try{Zn.onPostCommitFiberRoot(Fu,t)}catch{}r=!0}return r}finally{Ae=n,hn.transition=e}}return!1}function Gy(t,e,n){e=fo(n,e),e=P1(t,e,1),t=oi(t,e,1),e=Ct(),t!==null&&(ma(t,1,e),$t(t,e))}function Ge(t,e,n){if(t.tag===3)Gy(t,t,n);else for(;e!==null;){if(e.tag===3){Gy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(li===null||!li.has(r))){t=fo(n,t),t=j1(e,t,1),e=oi(e,t,1),t=Ct(),e!==null&&(ma(e,1,t),$t(e,t));break}}e=e.return}}function Rj(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ct(),t.pingedLanes|=t.suspendedLanes&n,lt===t&&(dt&n)===n&&(it===4||it===3&&(dt&130023424)===dt&&500>Ze()-Qm?Vi(t,0):Xm|=n),$t(t,e)}function Z1(t,e){e===0&&(t.mode&1?(e=za,za<<=1,!(za&130023424)&&(za=4194304)):e=1);var n=Ct();t=Pr(t,e),t!==null&&(ma(t,e,n),$t(t,n))}function Ij(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Z1(t,n)}function Oj(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(e),Z1(t,n)}var X1;X1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||zt.current)Lt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Lt=!1,Sj(t,e,n);Lt=!!(t.flags&131072)}else Lt=!1,Ve&&e.flags&1048576&&t1(e,Jc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;_c(t,e),t=e.pendingProps;var i=ao(e,wt.current);Ks(e,n),i=Hm(null,e,r,t,i,n);var s=qm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dt(r)?(s=!0,Xc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Fm(e),i.updater=Ku,e.stateNode=i,i._reactInternals=e,ep(e,r,t,n),e=rp(null,e,r,!0,s,n)):(e.tag=0,Ve&&s&&Rm(e),kt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(_c(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=zj(r),t=bn(r,t),i){case 0:e=np(null,e,r,t,n);break e;case 1:e=$y(null,e,r,t,n);break e;case 11:e=zy(null,e,r,t,n);break e;case 14:e=Dy(null,e,r,bn(r.type,t),n);break e}throw Error(Y(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bn(r,i),np(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bn(r,i),$y(t,e,r,i,n);case 3:e:{if(I1(e),t===null)throw Error(Y(387));r=e.pendingProps,s=e.memoizedState,i=s.element,l1(t,e),nu(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=fo(Error(Y(423)),e),e=Fy(t,e,r,n,i);break e}else if(r!==i){i=fo(Error(Y(424)),e),e=Fy(t,e,r,n,i);break e}else for(Gt=si(e.stateNode.containerInfo.firstChild),Qt=e,Ve=!0,kn=null,n=s1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(co(),r===i){e=jr(t,e,n);break e}kt(t,e,r,n)}e=e.child}return e;case 5:return a1(e),t===null&&Xf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,qf(r,i)?o=null:s!==null&&qf(r,s)&&(e.flags|=32),R1(t,e),kt(t,e,o,n),e.child;case 6:return t===null&&Xf(e),null;case 13:return O1(t,e,n);case 4:return Bm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=uo(e,null,r,n):kt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bn(r,i),zy(t,e,r,i,n);case 7:return kt(t,e,e.pendingProps,n),e.child;case 8:return kt(t,e,e.pendingProps.children,n),e.child;case 12:return kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Le(eu,r._currentValue),r._currentValue=o,s!==null)if(jn(s.value,o)){if(s.children===i.children&&!zt.current){e=jr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=_r(-1,n&-n),a.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?a.next=a:(a.next=u.next,u.next=a),c.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Qf(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Y(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Qf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}kt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ks(e,n),i=fn(i),r=r(i),e.flags|=1,kt(t,e,r,n),e.child;case 14:return r=e.type,i=bn(r,e.pendingProps),i=bn(r.type,i),Dy(t,e,r,i,n);case 15:return A1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bn(r,i),_c(t,e),e.tag=1,Dt(r)?(t=!0,Xc(e)):t=!1,Ks(e,n),T1(e,r,i),ep(e,r,i,n),rp(null,e,r,!0,t,n);case 19:return L1(t,e,n);case 22:return M1(t,e,n)}throw Error(Y(156,e.tag))};function Q1(t,e){return Eb(t,e)}function Lj(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dn(t,e,n,r){return new Lj(t,e,n,r)}function ng(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zj(t){if(typeof t=="function")return ng(t)?1:0;if(t!=null){if(t=t.$$typeof,t===bm)return 11;if(t===Sm)return 14}return 2}function ci(t,e){var n=t.alternate;return n===null?(n=dn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Pc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")ng(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ps:return Ui(n.children,i,s,e);case wm:o=8,i|=8;break;case Cf:return t=dn(12,n,e,i|2),t.elementType=Cf,t.lanes=s,t;case Ef:return t=dn(13,n,e,i),t.elementType=Ef,t.lanes=s,t;case _f:return t=dn(19,n,e,i),t.elementType=_f,t.lanes=s,t;case ab:return Zu(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ob:o=10;break e;case lb:o=9;break e;case bm:o=11;break e;case Sm:o=14;break e;case Gr:o=16,r=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=dn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ui(t,e,n,r){return t=dn(7,t,r,e),t.lanes=n,t}function Zu(t,e,n,r){return t=dn(22,t,r,e),t.elementType=ab,t.lanes=n,t.stateNode={isHidden:!1},t}function Sh(t,e,n){return t=dn(6,t,null,e),t.lanes=n,t}function kh(t,e,n){return e=dn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Dj(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rh(0),this.expirationTimes=rh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function rg(t,e,n,r,i,s,o,l,a){return t=new Dj(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=dn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fm(s),t}function $j(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ts,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function J1(t){if(!t)return pi;t=t._reactInternals;e:{if(hs(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(Dt(n))return Jb(t,n,e)}return e}function eS(t,e,n,r,i,s,o,l,a){return t=rg(n,r,!0,t,i,s,o,l,a),t.context=J1(null),n=t.current,r=Ct(),i=ai(n),s=_r(r,i),s.callback=e??null,oi(n,s,i),t.current.lanes=i,ma(t,i,r),$t(t,r),t}function Xu(t,e,n,r){var i=e.current,s=Ct(),o=ai(i);return n=J1(n),e.context===null?e.context=n:e.pendingContext=n,e=_r(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=oi(i,e,o),t!==null&&(Nn(t,i,o,s),kc(t,i,o)),o}function uu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Zy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ig(t,e){Zy(t,e),(t=t.alternate)&&Zy(t,e)}function Fj(){return null}var tS=typeof reportError=="function"?reportError:function(t){console.error(t)};function sg(t){this._internalRoot=t}Qu.prototype.render=sg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));Xu(t,e,null,null)};Qu.prototype.unmount=sg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qi(function(){Xu(null,t,null,null)}),e[Tr]=null}};function Qu(t){this._internalRoot=t}Qu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Mb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Xr.length&&e!==0&&e<Xr[n].priority;n++);Xr.splice(n,0,t),n===0&&Ib(t)}};function og(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ju(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Xy(){}function Bj(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=uu(o);s.call(c)}}var o=eS(e,r,t,0,null,!1,!1,"",Xy);return t._reactRootContainer=o,t[Tr]=o.current,Il(t.nodeType===8?t.parentNode:t),Qi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=uu(a);l.call(c)}}var a=rg(t,0,!1,null,null,!1,!1,"",Xy);return t._reactRootContainer=a,t[Tr]=a.current,Il(t.nodeType===8?t.parentNode:t),Qi(function(){Xu(e,a,n,r)}),a}function ed(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=uu(o);l.call(a)}}Xu(e,o,t,i)}else o=Bj(n,e,t,i,r);return uu(o)}jb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=tl(e.pendingLanes);n!==0&&(Em(e,n|1),$t(e,Ze()),!(Ee&6)&&(po=Ze()+500,Ei()))}break;case 13:Qi(function(){var r=Pr(t,1);if(r!==null){var i=Ct();Nn(r,t,1,i)}}),ig(t,1)}};_m=function(t){if(t.tag===13){var e=Pr(t,134217728);if(e!==null){var n=Ct();Nn(e,t,134217728,n)}ig(t,134217728)}};Ab=function(t){if(t.tag===13){var e=ai(t),n=Pr(t,e);if(n!==null){var r=Ct();Nn(n,t,e,r)}ig(t,e)}};Mb=function(){return Ae};Rb=function(t,e){var n=Ae;try{return Ae=t,e()}finally{Ae=n}};Lf=function(t,e,n){switch(e){case"input":if(Pf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Wu(r);if(!i)throw Error(Y(90));ub(r),Pf(r,i)}}}break;case"textarea":hb(t,n);break;case"select":e=n.value,e!=null&&Us(t,!!n.multiple,e,!1)}};xb=Jm;wb=Qi;var Vj={usingClientEntryPoint:!1,Events:[va,Rs,Wu,vb,yb,Jm]},Ho={findFiberByHostInstance:Di,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Uj={bundleType:Ho.bundleType,version:Ho.version,rendererPackageName:Ho.rendererPackageName,rendererConfig:Ho.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ir.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=kb(t),t===null?null:t.stateNode},findFiberByHostInstance:Ho.findFiberByHostInstance||Fj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ya=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ya.isDisabled&&Ya.supportsFiber)try{Fu=Ya.inject(Uj),Zn=Ya}catch{}}rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vj;rn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!og(e))throw Error(Y(200));return $j(t,e,null,n)};rn.createRoot=function(t,e){if(!og(t))throw Error(Y(299));var n=!1,r="",i=tS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=rg(t,1,!1,null,null,n,!1,r,i),t[Tr]=e.current,Il(t.nodeType===8?t.parentNode:t),new sg(e)};rn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=kb(e),t=t===null?null:t.stateNode,t};rn.flushSync=function(t){return Qi(t)};rn.hydrate=function(t,e,n){if(!Ju(e))throw Error(Y(200));return ed(null,t,e,!0,n)};rn.hydrateRoot=function(t,e,n){if(!og(t))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=tS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=eS(e,null,t,1,n??null,i,!1,s,o),t[Tr]=e.current,Il(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Qu(e)};rn.render=function(t,e,n){if(!Ju(e))throw Error(Y(200));return ed(null,t,e,!1,n)};rn.unmountComponentAtNode=function(t){if(!Ju(t))throw Error(Y(40));return t._reactRootContainer?(Qi(function(){ed(null,null,t,!1,function(){t._reactRootContainer=null,t[Tr]=null})}),!0):!1};rn.unstable_batchedUpdates=Jm;rn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ju(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return ed(t,e,n,!1,r)};rn.version="18.3.1-next-f1338f8080-20240426";function nS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nS)}catch(t){console.error(t)}}nS(),nb.exports=rn;var fs=nb.exports;const Wj=lr(fs);var Qy=fs;Sf.createRoot=Qy.createRoot,Sf.hydrateRoot=Qy.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ul(){return Ul=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ul.apply(this,arguments)}var ti;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ti||(ti={}));const Jy="popstate";function Hj(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:l="",hash:a=""}=ps(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),mp("",{pathname:o,search:l,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let a=i.location.href,c=a.indexOf("#");l=c===-1?a:a.slice(0,c)}return l+"#"+(typeof s=="string"?s:du(s))}function r(i,s){lg(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return Kj(e,n,r,t)}function qe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function lg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qj(){return Math.random().toString(36).substr(2,8)}function ex(t,e){return{usr:t.state,key:t.key,idx:e}}function mp(t,e,n,r){return n===void 0&&(n=null),Ul({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ps(e):e,{state:n,key:e&&e.key||r||qj()})}function du(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ps(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Kj(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=ti.Pop,a=null,c=u();c==null&&(c=0,o.replaceState(Ul({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){l=ti.Pop;let w=u(),v=w==null?null:w-c;c=w,a&&a({action:l,location:m.location,delta:v})}function f(w,v){l=ti.Push;let x=mp(m.location,w,v);n&&n(x,w),c=u()+1;let b=ex(x,c),S=m.createHref(x);try{o.pushState(b,"",S)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(S)}s&&a&&a({action:l,location:m.location,delta:1})}function p(w,v){l=ti.Replace;let x=mp(m.location,w,v);n&&n(x,w),c=u();let b=ex(x,c),S=m.createHref(x);o.replaceState(b,"",S),s&&a&&a({action:l,location:m.location,delta:0})}function g(w){let v=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof w=="string"?w:du(w);return x=x.replace(/ $/,"%20"),qe(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let m={get action(){return l},get location(){return t(i,o)},listen(w){if(a)throw new Error("A history only accepts one active listener");return i.addEventListener(Jy,h),a=w,()=>{i.removeEventListener(Jy,h),a=null}},createHref(w){return e(i,w)},createURL:g,encodeLocation(w){let v=g(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:p,go(w){return o.go(w)}};return m}var tx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(tx||(tx={}));function Yj(t,e,n){return n===void 0&&(n="/"),Gj(t,e,n)}function Gj(t,e,n,r){let i=typeof e=="string"?ps(e):e,s=mo(i.pathname||"/",n);if(s==null)return null;let o=rS(t);Zj(o);let l=null;for(let a=0;l==null&&a<o.length;++a){let c=lA(s);l=sA(o[a],c)}return l}function rS(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let a={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};a.relativePath.startsWith("/")&&(qe(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let c=ui([r,a.relativePath]),u=n.concat(a);s.children&&s.children.length>0&&(qe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),rS(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:rA(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let a of iS(s.path))i(s,o,a)}),e}function iS(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=iS(r.join("/")),l=[];return l.push(...o.map(a=>a===""?s:[s,a].join("/"))),i&&l.push(...o),l.map(a=>t.startsWith("/")&&a===""?"/":a)}function Zj(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:iA(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Xj=/^:[\w-]+$/,Qj=3,Jj=2,eA=1,tA=10,nA=-2,nx=t=>t==="*";function rA(t,e){let n=t.split("/"),r=n.length;return n.some(nx)&&(r+=nA),e&&(r+=Jj),n.filter(i=>!nx(i)).reduce((i,s)=>i+(Xj.test(s)?Qj:s===""?eA:tA),r)}function iA(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function sA(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let a=r[l],c=l===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",h=gp({path:a.relativePath,caseSensitive:a.caseSensitive,end:c},u),f=a.route;if(!h)return null;Object.assign(i,h.params),o.push({params:i,pathname:ui([s,h.pathname]),pathnameBase:dA(ui([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=ui([s,h.pathnameBase]))}return o}function gp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=oA(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((c,u,h)=>{let{paramName:f,isOptional:p}=u;if(f==="*"){let m=l[h]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const g=l[h];return p&&!g?c[f]=void 0:c[f]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function oA(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),lg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,a)=>(r.push({paramName:l,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function lA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return lg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function mo(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function aA(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ps(t):t;return{pathname:n?n.startsWith("/")?n:cA(n,e):e,search:hA(r),hash:fA(i)}}function cA(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ch(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function uA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ag(t,e){let n=uA(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function cg(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ps(t):(i=Ul({},t),qe(!i.pathname||!i.pathname.includes("?"),Ch("?","pathname","search",i)),qe(!i.pathname||!i.pathname.includes("#"),Ch("#","pathname","hash",i)),qe(!i.search||!i.search.includes("#"),Ch("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}l=h>=0?e[h]:"/"}let a=aA(i,l),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(c||u)&&(a.pathname+="/"),a}const ui=t=>t.join("/").replace(/\/\/+/g,"/"),dA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),hA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,fA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function pA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const sS=["post","put","patch","delete"];new Set(sS);const mA=["get",...sS];new Set(mA);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wl(){return Wl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wl.apply(this,arguments)}const td=y.createContext(null),oS=y.createContext(null),Or=y.createContext(null),nd=y.createContext(null),Lr=y.createContext({outlet:null,matches:[],isDataRoute:!1}),lS=y.createContext(null);function gA(t,e){let{relative:n}=e===void 0?{}:e;_o()||qe(!1);let{basename:r,navigator:i}=y.useContext(Or),{hash:s,pathname:o,search:l}=rd(t,{relative:n}),a=o;return r!=="/"&&(a=o==="/"?r:ui([r,o])),i.createHref({pathname:a,search:l,hash:s})}function _o(){return y.useContext(nd)!=null}function ar(){return _o()||qe(!1),y.useContext(nd).location}function aS(t){y.useContext(Or).static||y.useLayoutEffect(t)}function ft(){let{isDataRoute:t}=y.useContext(Lr);return t?PA():vA()}function vA(){_o()||qe(!1);let t=y.useContext(td),{basename:e,future:n,navigator:r}=y.useContext(Or),{matches:i}=y.useContext(Lr),{pathname:s}=ar(),o=JSON.stringify(ag(i,n.v7_relativeSplatPath)),l=y.useRef(!1);return aS(()=>{l.current=!0}),y.useCallback(function(c,u){if(u===void 0&&(u={}),!l.current)return;if(typeof c=="number"){r.go(c);return}let h=cg(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ui([e,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[e,r,o,s,t])}function ms(){let{matches:t}=y.useContext(Lr),e=t[t.length-1];return e?e.params:{}}function rd(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=y.useContext(Or),{matches:i}=y.useContext(Lr),{pathname:s}=ar(),o=JSON.stringify(ag(i,r.v7_relativeSplatPath));return y.useMemo(()=>cg(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function yA(t,e){return xA(t,e)}function xA(t,e,n,r){_o()||qe(!1);let{navigator:i,static:s}=y.useContext(Or),{matches:o}=y.useContext(Lr),l=o[o.length-1],a=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let u=ar(),h;if(e){var f;let v=typeof e=="string"?ps(e):e;c==="/"||(f=v.pathname)!=null&&f.startsWith(c)||qe(!1),h=v}else h=u;let p=h.pathname||"/",g=p;if(c!=="/"){let v=c.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(v.length).join("/")}let m=Yj(t,{pathname:g}),w=CA(m&&m.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:ui([c,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:ui([c,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,n,r);return e&&w?y.createElement(nd.Provider,{value:{location:Wl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:ti.Pop}},w):w}function wA(){let t=TA(),e=pA(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),n?y.createElement("pre",{style:i},n):null,null)}const bA=y.createElement(wA,null);class SA extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?y.createElement(Lr.Provider,{value:this.props.routeContext},y.createElement(lS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function kA(t){let{routeContext:e,match:n,children:r}=t,i=y.useContext(td);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),y.createElement(Lr.Provider,{value:e},r)}function CA(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let u=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);u>=0||qe(!1),o=o.slice(0,Math.min(o.length,u+1))}let a=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:f,errors:p}=n,g=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||g){a=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,f)=>{let p,g=!1,m=null,w=null;n&&(p=l&&h.route.id?l[h.route.id]:void 0,m=h.route.errorElement||bA,a&&(c<0&&f===0?(jA("route-fallback"),g=!0,w=null):c===f&&(g=!0,w=h.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,f+1)),x=()=>{let b;return p?b=m:g?b=w:h.route.Component?b=y.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=u,y.createElement(kA,{match:h,routeContext:{outlet:u,matches:v,isDataRoute:n!=null},children:b})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?y.createElement(SA,{location:n.location,revalidation:n.revalidation,component:m,error:p,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}var cS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(cS||{}),uS=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(uS||{});function EA(t){let e=y.useContext(td);return e||qe(!1),e}function _A(t){let e=y.useContext(oS);return e||qe(!1),e}function NA(t){let e=y.useContext(Lr);return e||qe(!1),e}function dS(t){let e=NA(),n=e.matches[e.matches.length-1];return n.route.id||qe(!1),n.route.id}function TA(){var t;let e=y.useContext(lS),n=_A(),r=dS();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function PA(){let{router:t}=EA(cS.UseNavigateStable),e=dS(uS.UseNavigateStable),n=y.useRef(!1);return aS(()=>{n.current=!0}),y.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Wl({fromRouteId:e},s)))},[t,e])}const rx={};function jA(t,e,n){rx[t]||(rx[t]=!0)}function AA(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function di(t){let{to:e,replace:n,state:r,relative:i}=t;_o()||qe(!1);let{future:s,static:o}=y.useContext(Or),{matches:l}=y.useContext(Lr),{pathname:a}=ar(),c=ft(),u=cg(e,ag(l,s.v7_relativeSplatPath),a,i==="path"),h=JSON.stringify(u);return y.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:i}),[c,h,i,n,r]),null}function tt(t){qe(!1)}function MA(t){let{basename:e="/",children:n=null,location:r,navigationType:i=ti.Pop,navigator:s,static:o=!1,future:l}=t;_o()&&qe(!1);let a=e.replace(/^\/*/,"/"),c=y.useMemo(()=>({basename:a,navigator:s,static:o,future:Wl({v7_relativeSplatPath:!1},l)}),[a,l,s,o]);typeof r=="string"&&(r=ps(r));let{pathname:u="/",search:h="",hash:f="",state:p=null,key:g="default"}=r,m=y.useMemo(()=>{let w=mo(u,a);return w==null?null:{location:{pathname:w,search:h,hash:f,state:p,key:g},navigationType:i}},[a,u,h,f,p,g,i]);return m==null?null:y.createElement(Or.Provider,{value:c},y.createElement(nd.Provider,{children:n,value:m}))}function hS(t){let{children:e,location:n}=t;return yA(vp(e),n)}new Promise(()=>{});function vp(t,e){e===void 0&&(e=[]);let n=[];return y.Children.forEach(t,(r,i)=>{if(!y.isValidElement(r))return;let s=[...e,i];if(r.type===y.Fragment){n.push.apply(n,vp(r.props.children,s));return}r.type!==tt&&qe(!1),!r.props.index||!r.props.children||qe(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=vp(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hu(){return hu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hu.apply(this,arguments)}function fS(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function RA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function IA(t,e){return t.button===0&&(!e||e==="_self")&&!RA(t)}const OA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],LA=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],zA="6";try{window.__reactRouterVersion=zA}catch{}const DA=y.createContext({isTransitioning:!1}),$A="startTransition",ix=eb[$A];function FA(t){let{basename:e,children:n,future:r,window:i}=t,s=y.useRef();s.current==null&&(s.current=Hj({window:i,v5Compat:!0}));let o=s.current,[l,a]=y.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=y.useCallback(h=>{c&&ix?ix(()=>a(h)):a(h)},[a,c]);return y.useLayoutEffect(()=>o.listen(u),[o,u]),y.useEffect(()=>AA(r),[r]),y.createElement(MA,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const BA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",VA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,UA=y.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:l,target:a,to:c,preventScrollReset:u,viewTransition:h}=e,f=fS(e,OA),{basename:p}=y.useContext(Or),g,m=!1;if(typeof c=="string"&&VA.test(c)&&(g=c,BA))try{let b=new URL(window.location.href),S=c.startsWith("//")?new URL(b.protocol+c):new URL(c),k=mo(S.pathname,p);S.origin===b.origin&&k!=null?c=k+S.search+S.hash:m=!0}catch{}let w=gA(c,{relative:i}),v=qA(c,{replace:o,state:l,target:a,preventScrollReset:u,relative:i,viewTransition:h});function x(b){r&&r(b),b.defaultPrevented||v(b)}return y.createElement("a",hu({},f,{href:g||w,onClick:m||s?r:x,ref:n,target:a}))}),WA=y.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:l,to:a,viewTransition:c,children:u}=e,h=fS(e,LA),f=rd(a,{relative:h.relative}),p=ar(),g=y.useContext(oS),{navigator:m,basename:w}=y.useContext(Or),v=g!=null&&KA(f)&&c===!0,x=m.encodeLocation?m.encodeLocation(f).pathname:f.pathname,b=p.pathname,S=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;i||(b=b.toLowerCase(),S=S?S.toLowerCase():null,x=x.toLowerCase()),S&&w&&(S=mo(S,w)||S);const k=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let C=b===x||!o&&b.startsWith(x)&&b.charAt(k)==="/",_=S!=null&&(S===x||!o&&S.startsWith(x)&&S.charAt(x.length)==="/"),P={isActive:C,isPending:_,isTransitioning:v},O=C?r:void 0,A;typeof s=="function"?A=s(P):A=[s,C?"active":null,_?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let T=typeof l=="function"?l(P):l;return y.createElement(UA,hu({},h,{"aria-current":O,className:A,ref:n,style:T,to:a,viewTransition:c}),typeof u=="function"?u(P):u)});var yp;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(yp||(yp={}));var sx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(sx||(sx={}));function HA(t){let e=y.useContext(td);return e||qe(!1),e}function qA(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,a=ft(),c=ar(),u=rd(t,{relative:o});return y.useCallback(h=>{if(IA(h,n)){h.preventDefault();let f=r!==void 0?r:du(c)===du(u);a(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[c,a,u,r,i,n,t,s,o,l])}function KA(t,e){e===void 0&&(e={});let n=y.useContext(DA);n==null&&qe(!1);let{basename:r}=HA(yp.useViewTransitionState),i=rd(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=mo(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=mo(n.nextLocation.pathname,r)||n.nextLocation.pathname;return gp(i.pathname,o)!=null||gp(i.pathname,s)!=null}const YA={},ox=t=>{let e;const n=new Set,r=(u,h)=>{const f=typeof u=="function"?u(e):u;if(!Object.is(f,e)){const p=e;e=h??(typeof f!="object"||f===null)?f:Object.assign({},e,f),n.forEach(g=>g(e,p))}},i=()=>e,a={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(YA?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=e=t(r,i,a);return a},GA=t=>t?ox(t):ox;var pS={exports:{}},mS={},gS={exports:{}},vS={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var go=y;function ZA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var XA=typeof Object.is=="function"?Object.is:ZA,QA=go.useState,JA=go.useEffect,eM=go.useLayoutEffect,tM=go.useDebugValue;function nM(t,e){var n=e(),r=QA({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return eM(function(){i.value=n,i.getSnapshot=e,Eh(i)&&s({inst:i})},[t,n,e]),JA(function(){return Eh(i)&&s({inst:i}),t(function(){Eh(i)&&s({inst:i})})},[t]),tM(n),n}function Eh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!XA(t,n)}catch{return!0}}function rM(t,e){return e()}var iM=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?rM:nM;vS.useSyncExternalStore=go.useSyncExternalStore!==void 0?go.useSyncExternalStore:iM;gS.exports=vS;var sM=gS.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var id=y,oM=sM;function lM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var aM=typeof Object.is=="function"?Object.is:lM,cM=oM.useSyncExternalStore,uM=id.useRef,dM=id.useEffect,hM=id.useMemo,fM=id.useDebugValue;mS.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=uM(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=hM(function(){function a(p){if(!c){if(c=!0,u=p,p=r(p),i!==void 0&&o.hasValue){var g=o.value;if(i(g,p))return h=g}return h=p}if(g=h,aM(u,p))return g;var m=r(p);return i!==void 0&&i(g,m)?(u=p,g):(u=p,h=m)}var c=!1,u,h,f=n===void 0?null:n;return[function(){return a(e())},f===null?void 0:function(){return a(f())}]},[e,n,r,i]);var l=cM(t,s[0],s[1]);return dM(function(){o.hasValue=!0,o.value=l},[l]),fM(l),l};pS.exports=mS;var pM=pS.exports;const yS=lr(pM),xS={},{useDebugValue:mM}=Me,{useSyncExternalStoreWithSelector:gM}=yS;let lx=!1;const vM=t=>t;function yM(t,e=vM,n){(xS?"production":void 0)!=="production"&&n&&!lx&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),lx=!0);const r=gM(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return mM(r),r}const ax=t=>{(xS?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?GA(t):t,n=(r,i)=>yM(e,r,i);return Object.assign(n,e),n},_i=t=>t?ax(t):ax;function wS(t,e){return function(){return t.apply(e,arguments)}}const{toString:xM}=Object.prototype,{getPrototypeOf:ug}=Object,sd=(t=>e=>{const n=xM.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),zn=t=>(t=t.toLowerCase(),e=>sd(e)===t),od=t=>e=>typeof e===t,{isArray:No}=Array,Hl=od("undefined");function wM(t){return t!==null&&!Hl(t)&&t.constructor!==null&&!Hl(t.constructor)&&Jt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const bS=zn("ArrayBuffer");function bM(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&bS(t.buffer),e}const SM=od("string"),Jt=od("function"),SS=od("number"),ld=t=>t!==null&&typeof t=="object",kM=t=>t===!0||t===!1,jc=t=>{if(sd(t)!=="object")return!1;const e=ug(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},CM=zn("Date"),EM=zn("File"),_M=zn("Blob"),NM=zn("FileList"),TM=t=>ld(t)&&Jt(t.pipe),PM=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Jt(t.append)&&((e=sd(t))==="formdata"||e==="object"&&Jt(t.toString)&&t.toString()==="[object FormData]"))},jM=zn("URLSearchParams"),[AM,MM,RM,IM]=["ReadableStream","Request","Response","Headers"].map(zn),OM=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function xa(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),No(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let l;for(r=0;r<o;r++)l=s[r],e.call(null,t[l],l,t)}}function kS(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Bi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,CS=t=>!Hl(t)&&t!==Bi;function xp(){const{caseless:t}=CS(this)&&this||{},e={},n=(r,i)=>{const s=t&&kS(e,i)||i;jc(e[s])&&jc(r)?e[s]=xp(e[s],r):jc(r)?e[s]=xp({},r):No(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&xa(arguments[r],n);return e}const LM=(t,e,n,{allOwnKeys:r}={})=>(xa(e,(i,s)=>{n&&Jt(i)?t[s]=wS(i,n):t[s]=i},{allOwnKeys:r}),t),zM=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),DM=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},$M=(t,e,n,r)=>{let i,s,o;const l={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=n!==!1&&ug(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},FM=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},BM=t=>{if(!t)return null;if(No(t))return t;let e=t.length;if(!SS(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},VM=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&ug(Uint8Array)),UM=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},WM=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},HM=zn("HTMLFormElement"),qM=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),cx=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),KM=zn("RegExp"),ES=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};xa(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},YM=t=>{ES(t,(e,n)=>{if(Jt(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Jt(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},GM=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return No(t)?r(t):r(String(t).split(e)),n},ZM=()=>{},XM=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function QM(t){return!!(t&&Jt(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const JM=t=>{const e=new Array(10),n=(r,i)=>{if(ld(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=No(r)?[]:{};return xa(r,(o,l)=>{const a=n(o,i+1);!Hl(a)&&(s[l]=a)}),e[i]=void 0,s}}return r};return n(t,0)},eR=zn("AsyncFunction"),tR=t=>t&&(ld(t)||Jt(t))&&Jt(t.then)&&Jt(t.catch),_S=((t,e)=>t?setImmediate:e?((n,r)=>(Bi.addEventListener("message",({source:i,data:s})=>{i===Bi&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Bi.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Jt(Bi.postMessage)),nR=typeof queueMicrotask<"u"?queueMicrotask.bind(Bi):typeof process<"u"&&process.nextTick||_S,F={isArray:No,isArrayBuffer:bS,isBuffer:wM,isFormData:PM,isArrayBufferView:bM,isString:SM,isNumber:SS,isBoolean:kM,isObject:ld,isPlainObject:jc,isReadableStream:AM,isRequest:MM,isResponse:RM,isHeaders:IM,isUndefined:Hl,isDate:CM,isFile:EM,isBlob:_M,isRegExp:KM,isFunction:Jt,isStream:TM,isURLSearchParams:jM,isTypedArray:VM,isFileList:NM,forEach:xa,merge:xp,extend:LM,trim:OM,stripBOM:zM,inherits:DM,toFlatObject:$M,kindOf:sd,kindOfTest:zn,endsWith:FM,toArray:BM,forEachEntry:UM,matchAll:WM,isHTMLForm:HM,hasOwnProperty:cx,hasOwnProp:cx,reduceDescriptors:ES,freezeMethods:YM,toObjectSet:GM,toCamelCase:qM,noop:ZM,toFiniteNumber:XM,findKey:kS,global:Bi,isContextDefined:CS,isSpecCompliantForm:QM,toJSONObject:JM,isAsyncFn:eR,isThenable:tR,setImmediate:_S,asap:nR};function ge(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}F.inherits(ge,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:F.toJSONObject(this.config),code:this.code,status:this.status}}});const NS=ge.prototype,TS={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{TS[t]={value:t}});Object.defineProperties(ge,TS);Object.defineProperty(NS,"isAxiosError",{value:!0});ge.from=(t,e,n,r,i,s)=>{const o=Object.create(NS);return F.toFlatObject(t,o,function(a){return a!==Error.prototype},l=>l!=="isAxiosError"),ge.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const rR=null;function wp(t){return F.isPlainObject(t)||F.isArray(t)}function PS(t){return F.endsWith(t,"[]")?t.slice(0,-2):t}function ux(t,e,n){return t?t.concat(e).map(function(i,s){return i=PS(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function iR(t){return F.isArray(t)&&!t.some(wp)}const sR=F.toFlatObject(F,{},null,function(e){return/^is[A-Z]/.test(e)});function ad(t,e,n){if(!F.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=F.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,w){return!F.isUndefined(w[m])});const r=n.metaTokens,i=n.visitor||u,s=n.dots,o=n.indexes,a=(n.Blob||typeof Blob<"u"&&Blob)&&F.isSpecCompliantForm(e);if(!F.isFunction(i))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(F.isDate(g))return g.toISOString();if(!a&&F.isBlob(g))throw new ge("Blob is not supported. Use a Buffer instead.");return F.isArrayBuffer(g)||F.isTypedArray(g)?a&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,m,w){let v=g;if(g&&!w&&typeof g=="object"){if(F.endsWith(m,"{}"))m=r?m:m.slice(0,-2),g=JSON.stringify(g);else if(F.isArray(g)&&iR(g)||(F.isFileList(g)||F.endsWith(m,"[]"))&&(v=F.toArray(g)))return m=PS(m),v.forEach(function(b,S){!(F.isUndefined(b)||b===null)&&e.append(o===!0?ux([m],S,s):o===null?m:m+"[]",c(b))}),!1}return wp(g)?!0:(e.append(ux(w,m,s),c(g)),!1)}const h=[],f=Object.assign(sR,{defaultVisitor:u,convertValue:c,isVisitable:wp});function p(g,m){if(!F.isUndefined(g)){if(h.indexOf(g)!==-1)throw Error("Circular reference detected in "+m.join("."));h.push(g),F.forEach(g,function(v,x){(!(F.isUndefined(v)||v===null)&&i.call(e,v,F.isString(x)?x.trim():x,m,f))===!0&&p(v,m?m.concat(x):[x])}),h.pop()}}if(!F.isObject(t))throw new TypeError("data must be an object");return p(t),e}function dx(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function dg(t,e){this._pairs=[],t&&ad(t,this,e)}const jS=dg.prototype;jS.append=function(e,n){this._pairs.push([e,n])};jS.toString=function(e){const n=e?function(r){return e.call(this,r,dx)}:dx;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function oR(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function AS(t,e,n){if(!e)return t;const r=n&&n.encode||oR;F.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=F.isURLSearchParams(e)?e.toString():new dg(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class hx{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){F.forEach(this.handlers,function(r){r!==null&&e(r)})}}const MS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},lR=typeof URLSearchParams<"u"?URLSearchParams:dg,aR=typeof FormData<"u"?FormData:null,cR=typeof Blob<"u"?Blob:null,uR={isBrowser:!0,classes:{URLSearchParams:lR,FormData:aR,Blob:cR},protocols:["http","https","file","blob","url","data"]},hg=typeof window<"u"&&typeof document<"u",bp=typeof navigator=="object"&&navigator||void 0,dR=hg&&(!bp||["ReactNative","NativeScript","NS"].indexOf(bp.product)<0),hR=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",fR=hg&&window.location.href||"http://localhost",pR=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:hg,hasStandardBrowserEnv:dR,hasStandardBrowserWebWorkerEnv:hR,navigator:bp,origin:fR},Symbol.toStringTag,{value:"Module"})),vt={...pR,...uR};function mR(t,e){return ad(t,new vt.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return vt.isNode&&F.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function gR(t){return F.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function vR(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function RS(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),a=s>=n.length;return o=!o&&F.isArray(i)?i.length:o,a?(F.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!l):((!i[o]||!F.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&F.isArray(i[o])&&(i[o]=vR(i[o])),!l)}if(F.isFormData(t)&&F.isFunction(t.entries)){const n={};return F.forEachEntry(t,(r,i)=>{e(gR(r),i,n,0)}),n}return null}function yR(t,e,n){if(F.isString(t))try{return(e||JSON.parse)(t),F.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const wa={transitional:MS,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=F.isObject(e);if(s&&F.isHTMLForm(e)&&(e=new FormData(e)),F.isFormData(e))return i?JSON.stringify(RS(e)):e;if(F.isArrayBuffer(e)||F.isBuffer(e)||F.isStream(e)||F.isFile(e)||F.isBlob(e)||F.isReadableStream(e))return e;if(F.isArrayBufferView(e))return e.buffer;if(F.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return mR(e,this.formSerializer).toString();if((l=F.isFileList(e))||r.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return ad(l?{"files[]":e}:e,a&&new a,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),yR(e)):e}],transformResponse:[function(e){const n=this.transitional||wa.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(F.isResponse(e)||F.isReadableStream(e))return e;if(e&&F.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?ge.from(l,ge.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:vt.classes.FormData,Blob:vt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};F.forEach(["delete","get","head","post","put","patch"],t=>{wa.headers[t]={}});const xR=F.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),wR=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&xR[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},fx=Symbol("internals");function qo(t){return t&&String(t).trim().toLowerCase()}function Ac(t){return t===!1||t==null?t:F.isArray(t)?t.map(Ac):String(t)}function bR(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const SR=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function _h(t,e,n,r,i){if(F.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!F.isString(e)){if(F.isString(r))return e.indexOf(r)!==-1;if(F.isRegExp(r))return r.test(e)}}function kR(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function CR(t,e){const n=F.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let Ft=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(l,a,c){const u=qo(a);if(!u)throw new Error("header name must be a non-empty string");const h=F.findKey(i,u);(!h||i[h]===void 0||c===!0||c===void 0&&i[h]!==!1)&&(i[h||a]=Ac(l))}const o=(l,a)=>F.forEach(l,(c,u)=>s(c,u,a));if(F.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(F.isString(e)&&(e=e.trim())&&!SR(e))o(wR(e),n);else if(F.isHeaders(e))for(const[l,a]of e.entries())s(a,l,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=qo(e),e){const r=F.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return bR(i);if(F.isFunction(n))return n.call(this,i,r);if(F.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=qo(e),e){const r=F.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||_h(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=qo(o),o){const l=F.findKey(r,o);l&&(!n||_h(r,r[l],l,n))&&(delete r[l],i=!0)}}return F.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||_h(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return F.forEach(this,(i,s)=>{const o=F.findKey(r,s);if(o){n[o]=Ac(i),delete n[s];return}const l=e?kR(s):String(s).trim();l!==s&&delete n[s],n[l]=Ac(i),r[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return F.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&F.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[fx]=this[fx]={accessors:{}}).accessors,i=this.prototype;function s(o){const l=qo(o);r[l]||(CR(i,o),r[l]=!0)}return F.isArray(e)?e.forEach(s):s(e),this}};Ft.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);F.reduceDescriptors(Ft.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});F.freezeMethods(Ft);function Nh(t,e){const n=this||wa,r=e||n,i=Ft.from(r.headers);let s=r.data;return F.forEach(t,function(l){s=l.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function IS(t){return!!(t&&t.__CANCEL__)}function To(t,e,n){ge.call(this,t??"canceled",ge.ERR_CANCELED,e,n),this.name="CanceledError"}F.inherits(To,ge,{__CANCEL__:!0});function OS(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new ge("Request failed with status code "+n.status,[ge.ERR_BAD_REQUEST,ge.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function ER(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function _R(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(a){const c=Date.now(),u=r[s];o||(o=c),n[i]=a,r[i]=c;let h=s,f=0;for(;h!==i;)f+=n[h++],h=h%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const p=u&&c-u;return p?Math.round(f*1e3/p):void 0}}function NR(t,e){let n=0,r=1e3/e,i,s;const o=(c,u=Date.now())=>{n=u,i=null,s&&(clearTimeout(s),s=null),t.apply(null,c)};return[(...c)=>{const u=Date.now(),h=u-n;h>=r?o(c,u):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-h)))},()=>i&&o(i)]}const fu=(t,e,n=3)=>{let r=0;const i=_R(50,250);return NR(s=>{const o=s.loaded,l=s.lengthComputable?s.total:void 0,a=o-r,c=i(a),u=o<=l;r=o;const h={loaded:o,total:l,progress:l?o/l:void 0,bytes:a,rate:c||void 0,estimated:c&&l&&u?(l-o)/c:void 0,event:s,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(h)},n)},px=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},mx=t=>(...e)=>F.asap(()=>t(...e)),TR=vt.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,vt.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(vt.origin),vt.navigator&&/(msie|trident)/i.test(vt.navigator.userAgent)):()=>!0,PR=vt.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];F.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),F.isString(r)&&o.push("path="+r),F.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function jR(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function AR(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function LS(t,e,n){let r=!jR(e);return t&&(r||n==!1)?AR(t,e):e}const gx=t=>t instanceof Ft?{...t}:t;function Ji(t,e){e=e||{};const n={};function r(c,u,h,f){return F.isPlainObject(c)&&F.isPlainObject(u)?F.merge.call({caseless:f},c,u):F.isPlainObject(u)?F.merge({},u):F.isArray(u)?u.slice():u}function i(c,u,h,f){if(F.isUndefined(u)){if(!F.isUndefined(c))return r(void 0,c,h,f)}else return r(c,u,h,f)}function s(c,u){if(!F.isUndefined(u))return r(void 0,u)}function o(c,u){if(F.isUndefined(u)){if(!F.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function l(c,u,h){if(h in e)return r(c,u);if(h in t)return r(void 0,c)}const a={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(c,u,h)=>i(gx(c),gx(u),h,!0)};return F.forEach(Object.keys(Object.assign({},t,e)),function(u){const h=a[u]||i,f=h(t[u],e[u],u);F.isUndefined(f)&&h!==l||(n[u]=f)}),n}const zS=t=>{const e=Ji({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:l}=e;e.headers=o=Ft.from(o),e.url=AS(LS(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let a;if(F.isFormData(n)){if(vt.hasStandardBrowserEnv||vt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((a=o.getContentType())!==!1){const[c,...u]=a?a.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(vt.hasStandardBrowserEnv&&(r&&F.isFunction(r)&&(r=r(e)),r||r!==!1&&TR(e.url))){const c=i&&s&&PR.read(s);c&&o.set(i,c)}return e},MR=typeof XMLHttpRequest<"u",RR=MR&&function(t){return new Promise(function(n,r){const i=zS(t);let s=i.data;const o=Ft.from(i.headers).normalize();let{responseType:l,onUploadProgress:a,onDownloadProgress:c}=i,u,h,f,p,g;function m(){p&&p(),g&&g(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let w=new XMLHttpRequest;w.open(i.method.toUpperCase(),i.url,!0),w.timeout=i.timeout;function v(){if(!w)return;const b=Ft.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),k={data:!l||l==="text"||l==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:b,config:t,request:w};OS(function(_){n(_),m()},function(_){r(_),m()},k),w=null}"onloadend"in w?w.onloadend=v:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(v)},w.onabort=function(){w&&(r(new ge("Request aborted",ge.ECONNABORTED,t,w)),w=null)},w.onerror=function(){r(new ge("Network Error",ge.ERR_NETWORK,t,w)),w=null},w.ontimeout=function(){let S=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const k=i.transitional||MS;i.timeoutErrorMessage&&(S=i.timeoutErrorMessage),r(new ge(S,k.clarifyTimeoutError?ge.ETIMEDOUT:ge.ECONNABORTED,t,w)),w=null},s===void 0&&o.setContentType(null),"setRequestHeader"in w&&F.forEach(o.toJSON(),function(S,k){w.setRequestHeader(k,S)}),F.isUndefined(i.withCredentials)||(w.withCredentials=!!i.withCredentials),l&&l!=="json"&&(w.responseType=i.responseType),c&&([f,g]=fu(c,!0),w.addEventListener("progress",f)),a&&w.upload&&([h,p]=fu(a),w.upload.addEventListener("progress",h),w.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(u=b=>{w&&(r(!b||b.type?new To(null,t,w):b),w.abort(),w=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const x=ER(i.url);if(x&&vt.protocols.indexOf(x)===-1){r(new ge("Unsupported protocol "+x+":",ge.ERR_BAD_REQUEST,t));return}w.send(s||null)})},IR=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(c){if(!i){i=!0,l();const u=c instanceof Error?c:this.reason;r.abort(u instanceof ge?u:new To(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,s(new ge(`timeout ${e} of ms exceeded`,ge.ETIMEDOUT))},e);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:a}=r;return a.unsubscribe=()=>F.asap(l),a}},OR=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},LR=async function*(t,e){for await(const n of zR(t))yield*OR(n,e)},zR=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},vx=(t,e,n,r)=>{const i=LR(t,e);let s=0,o,l=a=>{o||(o=!0,r&&r(a))};return new ReadableStream({async pull(a){try{const{done:c,value:u}=await i.next();if(c){l(),a.close();return}let h=u.byteLength;if(n){let f=s+=h;n(f)}a.enqueue(new Uint8Array(u))}catch(c){throw l(c),c}},cancel(a){return l(a),i.return()}},{highWaterMark:2})},cd=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",DS=cd&&typeof ReadableStream=="function",DR=cd&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),$S=(t,...e)=>{try{return!!t(...e)}catch{return!1}},$R=DS&&$S(()=>{let t=!1;const e=new Request(vt.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),yx=64*1024,Sp=DS&&$S(()=>F.isReadableStream(new Response("").body)),pu={stream:Sp&&(t=>t.body)};cd&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!pu[e]&&(pu[e]=F.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new ge(`Response type '${e}' is not supported`,ge.ERR_NOT_SUPPORT,r)})})})(new Response);const FR=async t=>{if(t==null)return 0;if(F.isBlob(t))return t.size;if(F.isSpecCompliantForm(t))return(await new Request(vt.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(F.isArrayBufferView(t)||F.isArrayBuffer(t))return t.byteLength;if(F.isURLSearchParams(t)&&(t=t+""),F.isString(t))return(await DR(t)).byteLength},BR=async(t,e)=>{const n=F.toFiniteNumber(t.getContentLength());return n??FR(e)},VR=cd&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:l,onUploadProgress:a,responseType:c,headers:u,withCredentials:h="same-origin",fetchOptions:f}=zS(t);c=c?(c+"").toLowerCase():"text";let p=IR([i,s&&s.toAbortSignal()],o),g;const m=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let w;try{if(a&&$R&&n!=="get"&&n!=="head"&&(w=await BR(u,r))!==0){let k=new Request(e,{method:"POST",body:r,duplex:"half"}),C;if(F.isFormData(r)&&(C=k.headers.get("content-type"))&&u.setContentType(C),k.body){const[_,P]=px(w,fu(mx(a)));r=vx(k.body,yx,_,P)}}F.isString(h)||(h=h?"include":"omit");const v="credentials"in Request.prototype;g=new Request(e,{...f,signal:p,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:v?h:void 0});let x=await fetch(g);const b=Sp&&(c==="stream"||c==="response");if(Sp&&(l||b&&m)){const k={};["status","statusText","headers"].forEach(O=>{k[O]=x[O]});const C=F.toFiniteNumber(x.headers.get("content-length")),[_,P]=l&&px(C,fu(mx(l),!0))||[];x=new Response(vx(x.body,yx,_,()=>{P&&P(),m&&m()}),k)}c=c||"text";let S=await pu[F.findKey(pu,c)||"text"](x,t);return!b&&m&&m(),await new Promise((k,C)=>{OS(k,C,{data:S,headers:Ft.from(x.headers),status:x.status,statusText:x.statusText,config:t,request:g})})}catch(v){throw m&&m(),v&&v.name==="TypeError"&&/fetch/i.test(v.message)?Object.assign(new ge("Network Error",ge.ERR_NETWORK,t,g),{cause:v.cause||v}):ge.from(v,v&&v.code,t,g)}}),kp={http:rR,xhr:RR,fetch:VR};F.forEach(kp,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const xx=t=>`- ${t}`,UR=t=>F.isFunction(t)||t===null||t===!1,FS={getAdapter:t=>{t=F.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!UR(n)&&(r=kp[(o=String(n)).toLowerCase()],r===void 0))throw new ge(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([l,a])=>`adapter ${l} `+(a===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(xx).join(`
`):" "+xx(s[0]):"as no adapter specified";throw new ge("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:kp};function Th(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new To(null,t)}function wx(t){return Th(t),t.headers=Ft.from(t.headers),t.data=Nh.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),FS.getAdapter(t.adapter||wa.adapter)(t).then(function(r){return Th(t),r.data=Nh.call(t,t.transformResponse,r),r.headers=Ft.from(r.headers),r},function(r){return IS(r)||(Th(t),r&&r.response&&(r.response.data=Nh.call(t,t.transformResponse,r.response),r.response.headers=Ft.from(r.response.headers))),Promise.reject(r)})}const BS="1.8.4",ud={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{ud[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const bx={};ud.transitional=function(e,n,r){function i(s,o){return"[Axios v"+BS+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,l)=>{if(e===!1)throw new ge(i(o," has been removed"+(n?" in "+n:"")),ge.ERR_DEPRECATED);return n&&!bx[o]&&(bx[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,l):!0}};ud.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function WR(t,e,n){if(typeof t!="object")throw new ge("options must be an object",ge.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const l=t[s],a=l===void 0||o(l,s,t);if(a!==!0)throw new ge("option "+s+" must be "+a,ge.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ge("Unknown option "+s,ge.ERR_BAD_OPTION)}}const Mc={assertOptions:WR,validators:ud},Vn=Mc.validators;let Wi=class{constructor(e){this.defaults=e,this.interceptors={request:new hx,response:new hx}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ji(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&Mc.assertOptions(r,{silentJSONParsing:Vn.transitional(Vn.boolean),forcedJSONParsing:Vn.transitional(Vn.boolean),clarifyTimeoutError:Vn.transitional(Vn.boolean)},!1),i!=null&&(F.isFunction(i)?n.paramsSerializer={serialize:i}:Mc.assertOptions(i,{encode:Vn.function,serialize:Vn.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Mc.assertOptions(n,{baseUrl:Vn.spelling("baseURL"),withXsrfToken:Vn.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&F.merge(s.common,s[n.method]);s&&F.forEach(["delete","get","head","post","put","patch","common"],g=>{delete s[g]}),n.headers=Ft.concat(o,s);const l=[];let a=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(a=a&&m.synchronous,l.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let u,h=0,f;if(!a){const g=[wx.bind(this),void 0];for(g.unshift.apply(g,l),g.push.apply(g,c),f=g.length,u=Promise.resolve(n);h<f;)u=u.then(g[h++],g[h++]);return u}f=l.length;let p=n;for(h=0;h<f;){const g=l[h++],m=l[h++];try{p=g(p)}catch(w){m.call(this,w);break}}try{u=wx.call(this,p)}catch(g){return Promise.reject(g)}for(h=0,f=c.length;h<f;)u=u.then(c[h++],c[h++]);return u}getUri(e){e=Ji(this.defaults,e);const n=LS(e.baseURL,e.url,e.allowAbsoluteUrls);return AS(n,e.params,e.paramsSerializer)}};F.forEach(["delete","get","head","options"],function(e){Wi.prototype[e]=function(n,r){return this.request(Ji(r||{},{method:e,url:n,data:(r||{}).data}))}});F.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,l){return this.request(Ji(l||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Wi.prototype[e]=n(),Wi.prototype[e+"Form"]=n(!0)});let HR=class VS{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(l=>{r.subscribe(l),s=l}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,l){r.reason||(r.reason=new To(s,o,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new VS(function(i){e=i}),cancel:e}}};function qR(t){return function(n){return t.apply(null,n)}}function KR(t){return F.isObject(t)&&t.isAxiosError===!0}const Cp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Cp).forEach(([t,e])=>{Cp[e]=t});function US(t){const e=new Wi(t),n=wS(Wi.prototype.request,e);return F.extend(n,Wi.prototype,e,{allOwnKeys:!0}),F.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return US(Ji(t,i))},n}const Qe=US(wa);Qe.Axios=Wi;Qe.CanceledError=To;Qe.CancelToken=HR;Qe.isCancel=IS;Qe.VERSION=BS;Qe.toFormData=ad;Qe.AxiosError=ge;Qe.Cancel=Qe.CanceledError;Qe.all=function(e){return Promise.all(e)};Qe.spread=qR;Qe.isAxiosError=KR;Qe.mergeConfig=Ji;Qe.AxiosHeaders=Ft;Qe.formToJSON=t=>RS(F.isHTMLForm(t)?new FormData(t):t);Qe.getAdapter=FS.getAdapter;Qe.HttpStatusCode=Cp;Qe.default=Qe;const{Axios:P9,AxiosError:j9,CanceledError:A9,isCancel:M9,CancelToken:R9,VERSION:I9,all:O9,Cancel:L9,isAxiosError:z9,spread:D9,toFormData:$9,AxiosHeaders:F9,HttpStatusCode:B9,formToJSON:V9,getAdapter:U9,mergeConfig:W9}=Qe,YR={};function Po(t,e){let n;try{n=t()}catch{return}return{getItem:i=>{var s;const o=a=>a===null?null:JSON.parse(a,void 0),l=(s=n.getItem(i))!=null?s:null;return l instanceof Promise?l.then(o):o(l)},setItem:(i,s)=>n.setItem(i,JSON.stringify(s,void 0)),removeItem:i=>n.removeItem(i)}}const ql=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return ql(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return ql(r)(n)}}}},GR=(t,e)=>(n,r,i)=>{let s={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:w=>w,version:0,merge:(w,v)=>({...v,...w}),...e},o=!1;const l=new Set,a=new Set;let c;try{c=s.getStorage()}catch{}if(!c)return t((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...w)},r,i);const u=ql(s.serialize),h=()=>{const w=s.partialize({...r()});let v;const x=u({state:w,version:s.version}).then(b=>c.setItem(s.name,b)).catch(b=>{v=b});if(v)throw v;return x},f=i.setState;i.setState=(w,v)=>{f(w,v),h()};const p=t((...w)=>{n(...w),h()},r,i);let g;const m=()=>{var w;if(!c)return;o=!1,l.forEach(x=>x(r()));const v=((w=s.onRehydrateStorage)==null?void 0:w.call(s,r()))||void 0;return ql(c.getItem.bind(c))(s.name).then(x=>{if(x)return s.deserialize(x)}).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==s.version){if(s.migrate)return s.migrate(x.state,x.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return x.state}).then(x=>{var b;return g=s.merge(x,(b=r())!=null?b:p),n(g,!0),h()}).then(()=>{v==null||v(g,void 0),o=!0,a.forEach(x=>x(g))}).catch(x=>{v==null||v(void 0,x)})};return i.persist={setOptions:w=>{s={...s,...w},w.getStorage&&(c=w.getStorage())},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>m(),hasHydrated:()=>o,onHydrate:w=>(l.add(w),()=>{l.delete(w)}),onFinishHydration:w=>(a.add(w),()=>{a.delete(w)})},m(),g||p},ZR=(t,e)=>(n,r,i)=>{let s={storage:Po(()=>localStorage),partialize:m=>m,version:0,merge:(m,w)=>({...w,...m}),...e},o=!1;const l=new Set,a=new Set;let c=s.storage;if(!c)return t((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),n(...m)},r,i);const u=()=>{const m=s.partialize({...r()});return c.setItem(s.name,{state:m,version:s.version})},h=i.setState;i.setState=(m,w)=>{h(m,w),u()};const f=t((...m)=>{n(...m),u()},r,i);i.getInitialState=()=>f;let p;const g=()=>{var m,w;if(!c)return;o=!1,l.forEach(x=>{var b;return x((b=r())!=null?b:f)});const v=((w=s.onRehydrateStorage)==null?void 0:w.call(s,(m=r())!=null?m:f))||void 0;return ql(c.getItem.bind(c))(s.name).then(x=>{if(x)if(typeof x.version=="number"&&x.version!==s.version){if(s.migrate)return[!0,s.migrate(x.state,x.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,x.state];return[!1,void 0]}).then(x=>{var b;const[S,k]=x;if(p=s.merge(k,(b=r())!=null?b:f),n(p,!0),S)return u()}).then(()=>{v==null||v(p,void 0),p=r(),o=!0,a.forEach(x=>x(p))}).catch(x=>{v==null||v(void 0,x)})};return i.persist={setOptions:m=>{s={...s,...m},m.storage&&(c=m.storage)},clearStorage:()=>{c==null||c.removeItem(s.name)},getOptions:()=>s,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:m=>(l.add(m),()=>{l.delete(m)}),onFinishHydration:m=>(a.add(m),()=>{a.delete(m)})},s.skipHydration||g(),p||f},XR=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((YR?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),GR(t,e)):ZR(t,e),ba=XR;class rl extends Error{}rl.prototype.name="InvalidTokenError";function QR(t){return decodeURIComponent(atob(t).replace(/(.)/g,(e,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function JR(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return QR(e)}catch{return atob(e)}}function eI(t,e){if(typeof t!="string")throw new rl("Invalid token specified: must be a string");e||(e={});const n=e.header===!0?0:1,r=t.split(".")[n];if(typeof r!="string")throw new rl(`Invalid token specified: missing part #${n+1}`);let i;try{i=JR(r)}catch(s){throw new rl(`Invalid token specified: invalid base64 for part #${n+1} (${s.message})`)}try{return JSON.parse(i)}catch(s){throw new rl(`Invalid token specified: invalid json for part #${n+1} (${s.message})`)}}const Sr=_i()(ba(t=>({isAdminAuthenticated:!1,isLoading:!0,login:()=>{console.log("[AdminAuthStore] Setting isAdminAuthenticated to true."),t({isAdminAuthenticated:!0,isLoading:!1})},logout:()=>{console.log("[AdminAuthStore] Setting isAdminAuthenticated to false."),t({isAdminAuthenticated:!1,isLoading:!1})}}),{name:"admin-auth-storage",storage:Po(()=>sessionStorage),onRehydrateStorage:()=>t=>{console.log("[AdminAuthStore] onRehydrateStorage: Hydration complete."),t?(t.isLoading=!1,console.log(`[AdminAuthStore] onRehydrateStorage: State initialized. isLoading: ${t.isLoading}, isAdminAuthenticated: ${t.isAdminAuthenticated}`)):(console.warn("[AdminAuthStore] onRehydrateStorage: Rehydrated state is null."),Sr.setState({isLoading:!1,isAdminAuthenticated:!1}))},partialize:t=>({isAdminAuthenticated:t.isAdminAuthenticated})})),WS=(t,e)=>{var r;if(!t||t.data===null||typeof t.data>"u"||typeof t.data.isSuccess!="boolean"){console.error("[API Helper] Invalid/Undefined Response Structure:",t);let i=e;return(t==null?void 0:t.data)===null?i="Received null data from server.":(r=t==null?void 0:t.data)!=null&&r.errorMessage?i=t.data.errorMessage:t!=null&&t.statusText&&(i=t.statusText),{isSuccess:!1,errorMessage:i,resultObject:null}}return t.data},HS=(t,e)=>{var r,i;console.error(`[API Error Handler] ${e}:`,t);let n=e;return t instanceof Error?n=t.message:typeof t=="string"?n=t:t!=null&&t.response?n=`Request failed (${t.response.status}): ${((r=t.response.data)==null?void 0:r.errorMessage)||((i=t.response.data)==null?void 0:i.title)||t.response.statusText||"Server error"}`:t!=null&&t.request?n="No response received from server.":t!=null&&t.errorMessage&&(n=t.errorMessage),{isSuccess:!1,errorMessage:n,resultObject:null}},tI=async()=>{var e;const t="Failed to fetch accounts.";console.log("[API/Portfolio] Fetching broker accounts...");try{const n=await at.get("/api/BrokerAccountUser/GetMyBrokerAccounts");console.log("[API/Portfolio] Fetched accounts raw response data:",n==null?void 0:n.data);const r=WS(n,t);return r.isSuccess&&r.resultObject===null&&(console.warn("[API/Portfolio] GetMyBrokerAccounts returned success but resultObject is null. Normalizing to an empty array []."),r.resultObject=[]),console.log("[API/Portfolio] Processed accounts:",r.isSuccess?`Success, ${((e=r.resultObject)==null?void 0:e.length)??0} accounts`:`Error: ${r.errorMessage}`),r}catch(n){return HS(n,t)}},nI=async()=>{const t="Failed to create account.";console.log("[API/Portfolio] Attempting to create initial broker account...");try{const e=await at.post("/api/BrokerAccountUser/CreateMyInitialBrokerAccount");return console.log("[API/Portfolio] Create account raw response data:",e==null?void 0:e.data),WS(e,t)}catch(e){return HS(e,t)}},nr=_i((t,e)=>({accounts:null,isLoading:!1,error:null,isFetching:!1,hasAttemptedFetch:!1,fetchPortfolio:async(n=!1)=>{if(!n&&e().isFetching){console.log("[PortfolioStore] Fetch already in progress. Skipping.");return}console.log(`[PortfolioStore] Starting fetchPortfolio (force=${n})...`),t({isLoading:!0,error:null,isFetching:!0,hasAttemptedFetch:!0});try{const r=await tI();if(console.log("[PortfolioStore] API response received:",r==null?void 0:r.isSuccess),!r||typeof r.isSuccess!="boolean")throw new Error("Invalid response structure from getMyBrokerAccounts API.");if(r.isSuccess){const i=r.resultObject||[];t({accounts:i,isLoading:!1,error:null,isFetching:!1}),console.log(`[PortfolioStore] Accounts updated successfully: ${i.length} accounts.`)}else console.error("[PortfolioStore] Fetch failed:",r.errorMessage),t({error:r.errorMessage||"Failed to load portfolio data.",isLoading:!1,isFetching:!1})}catch(r){console.error("[PortfolioStore] Fetch exception:",r),t({error:r.message||"Unexpected error fetching portfolio.",isLoading:!1,isFetching:!1})}}})),An=_i()(ba((t,e)=>({userId:null,jwt:null,isAuthenticated:!1,isLoading:!0,_checkAdminRole:n=>{if(!n)return!1;try{const r=eI(n),i=r["http://schemas.microsoft.com/ws/2008/06/identity/claims/role"]||r.role;if(i)return Array.isArray(i)?i.includes("Administrator"):i==="Administrator"}catch(r){console.error("[AuthStore _checkAdminRole] Failed to decode JWT:",r)}return!1},login:(n,r)=>{console.log("[AuthStore] Login action called.");const i=e()._checkAdminRole(r);console.log(`[AuthStore] User ${n} logged in. Is admin: ${i}`),t({userId:n,jwt:r,isAuthenticated:!0,isLoading:!1});const s=Sr.getState();i?s.isAdminAuthenticated||(console.log("[AuthStore login] Calling adminAuthStore.login()"),s.login()):s.isAdminAuthenticated&&(console.log("[AuthStore login] User is not admin, calling adminAuthStore.logout()"),s.logout()),nr.setState({hasAttemptedFetch:!1}),console.log("[AuthStore login] Reset portfolio hasAttemptedFetch flag.")},logout:()=>{console.log("[AuthStore] Logout action called."),t({userId:null,jwt:null,isAuthenticated:!1,isLoading:!1});const n=Sr.getState();n.isAdminAuthenticated&&(console.log("[AuthStore logout] Calling adminAuthStore.logout()"),n.logout()),nr.setState({accounts:null,error:null,isFetching:!1,hasAttemptedFetch:!1,isLoading:!1}),console.log("[AuthStore logout] Reset portfolio state.")}}),{name:"auth-storage",storage:Po(()=>sessionStorage),onRehydrateStorage:()=>(t,e)=>{if(e){console.error("[AuthStore] onRehydrateStorage: Error during hydration:",e),t?t.isLoading=!1:An.setState({isLoading:!1,isAuthenticated:!1});return}if(console.log("[AuthStore] onRehydrateStorage: Hydration start."),t){if(t.jwt){const n=t._checkAdminRole(t.jwt);console.log(`[AuthStore] onRehydrateStorage: JWT found. Is admin: ${n}`),t.isAuthenticated=!0;const r=Sr.getState();n?r.isAdminAuthenticated||(console.log("[AuthStore onRehydrate] Calling adminAuthStore.login()"),r.login()):r.isAdminAuthenticated&&(console.log("[AuthStore onRehydrate] User is not admin, calling adminAuthStore.logout()"),r.logout())}else console.warn("[AuthStore] onRehydrateStorage: JWT not found."),t.isAuthenticated=!1,Sr.getState().logout();t.isLoading=!1,console.log(`[AuthStore] onRehydrateStorage: Hydration finished. isLoading: ${t.isLoading}, isAuthenticated: ${t.isAuthenticated}`)}else console.warn("[AuthStore] onRehydrateStorage: State is undefined after hydration."),An.setState({isLoading:!1,isAuthenticated:!1})},partialize:t=>({userId:t.userId,jwt:t.jwt})}));var Ce;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),o={};for(const l of s)o[l]=i[l];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(Ce||(Ce={}));var Ep;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Ep||(Ep={}));const te=Ce.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),yr=t=>{switch(typeof t){case"undefined":return te.undefined;case"string":return te.string;case"number":return isNaN(t)?te.nan:te.number;case"boolean":return te.boolean;case"function":return te.function;case"bigint":return te.bigint;case"symbol":return te.symbol;case"object":return Array.isArray(t)?te.array:t===null?te.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?te.promise:typeof Map<"u"&&t instanceof Map?te.map:typeof Set<"u"&&t instanceof Set?te.set:typeof Date<"u"&&t instanceof Date?te.date:te.object;default:return te.unknown}},q=Ce.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),rI=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class en extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let l=r,a=0;for(;a<o.path.length;){const c=o.path[a];a===o.path.length-1?(l[c]=l[c]||{_errors:[]},l[c]._errors.push(n(o))):l[c]=l[c]||{_errors:[]},l=l[c],a++}}};return i(this),r}static assert(e){if(!(e instanceof en))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ce.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}en.create=t=>new en(t);const vo=(t,e)=>{let n;switch(t.code){case q.invalid_type:t.received===te.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case q.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Ce.jsonStringifyReplacer)}`;break;case q.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ce.joinValues(t.keys,", ")}`;break;case q.invalid_union:n="Invalid input";break;case q.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ce.joinValues(t.options)}`;break;case q.invalid_enum_value:n=`Invalid enum value. Expected ${Ce.joinValues(t.options)}, received '${t.received}'`;break;case q.invalid_arguments:n="Invalid function arguments";break;case q.invalid_return_type:n="Invalid function return type";break;case q.invalid_date:n="Invalid date";break;case q.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Ce.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case q.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case q.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case q.custom:n="Invalid input";break;case q.invalid_intersection_types:n="Intersection results could not be merged";break;case q.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case q.not_finite:n="Number must be finite";break;default:n=e.defaultError,Ce.assertNever(t)}return{message:n}};let qS=vo;function iI(t){qS=t}function mu(){return qS}const gu=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let l="";const a=r.filter(c=>!!c).slice().reverse();for(const c of a)l=c(o,{data:e,defaultError:l}).message;return{...i,path:s,message:l}},sI=[];function X(t,e){const n=mu(),r=gu({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===vo?void 0:vo].filter(i=>!!i)});t.common.issues.push(r)}class bt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return de;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const s=await i.key,o=await i.value;r.push({key:s,value:o})}return bt.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return de;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const de=Object.freeze({status:"aborted"}),Fs=t=>({status:"dirty",value:t}),_t=t=>({status:"valid",value:t}),_p=t=>t.status==="aborted",Np=t=>t.status==="dirty",es=t=>t.status==="valid",Kl=t=>typeof Promise<"u"&&t instanceof Promise;function vu(t,e,n,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function KS(t,e,n,r,i){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var ie;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ie||(ie={}));var il,sl;class rr{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Sx=(t,e)=>{if(es(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new en(t.common.issues);return this._error=n,this._error}}};function ve(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,l)=>{var a,c;const{message:u}=t;return o.code==="invalid_enum_value"?{message:u??l.defaultError}:typeof l.data>"u"?{message:(a=u??r)!==null&&a!==void 0?a:l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:(c=u??n)!==null&&c!==void 0?c:l.defaultError}},description:i}}class xe{get description(){return this._def.description}_getType(e){return yr(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:yr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new bt,ctx:{common:e.parent.common,data:e.data,parsedType:yr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Kl(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:yr(e)},s=this._parseSync({data:e,path:i.path,parent:i});return Sx(i,s)}"~validate"(e){var n,r;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:yr(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:i});return es(s)?{value:s.value}:{issues:i.common.issues}}catch(s){!((r=(n=s==null?void 0:s.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(s=>es(s)?{value:s.value}:{issues:i.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:yr(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(Kl(i)?i:Promise.resolve(i));return Sx(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),l=()=>s.addIssue({code:q.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(a=>a?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Mn({schema:this,typeName:ue.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Qn.create(this,this._def)}nullable(){return yi.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Tn.create(this)}promise(){return xo.create(this,this._def)}or(e){return Xl.create([this,e],this._def)}and(e){return Ql.create(this,e,this._def)}transform(e){return new Mn({...ve(this._def),schema:this,typeName:ue.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new ra({...ve(this._def),innerType:this,defaultValue:n,typeName:ue.ZodDefault})}brand(){return new fg({typeName:ue.ZodBranded,type:this,...ve(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new ia({...ve(this._def),innerType:this,catchValue:n,typeName:ue.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Sa.create(this,e)}readonly(){return sa.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const oI=/^c[^\s-]{8,}$/i,lI=/^[0-9a-z]+$/,aI=/^[0-9A-HJKMNP-TV-Z]{26}$/i,cI=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,uI=/^[a-z0-9_-]{21}$/i,dI=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,hI=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,fI=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,pI="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Ph;const mI=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,gI=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,vI=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,yI=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,xI=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,wI=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,YS="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",bI=new RegExp(`^${YS}$`);function GS(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function SI(t){return new RegExp(`^${GS(t)}$`)}function ZS(t){let e=`${YS}T${GS(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function kI(t,e){return!!((e==="v4"||!e)&&mI.test(t)||(e==="v6"||!e)&&vI.test(t))}function CI(t,e){if(!dI.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}function EI(t,e){return!!((e==="v4"||!e)&&gI.test(t)||(e==="v6"||!e)&&yI.test(t))}class En extends xe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==te.string){const s=this._getOrReturnCtx(e);return X(s,{code:q.invalid_type,expected:te.string,received:s.parsedType}),de}const r=new bt;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:q.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:q.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,l=e.data.length<s.value;(o||l)&&(i=this._getOrReturnCtx(e,i),o?X(i,{code:q.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):l&&X(i,{code:q.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")fI.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"email",code:q.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")Ph||(Ph=new RegExp(pI,"u")),Ph.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"emoji",code:q.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")cI.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"uuid",code:q.invalid_string,message:s.message}),r.dirty());else if(s.kind==="nanoid")uI.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"nanoid",code:q.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")oI.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"cuid",code:q.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")lI.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"cuid2",code:q.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")aI.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"ulid",code:q.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),X(i,{validation:"url",code:q.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"regex",code:q.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),X(i,{code:q.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),X(i,{code:q.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),X(i,{code:q.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?ZS(s).test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{code:q.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="date"?bI.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{code:q.invalid_string,validation:"date",message:s.message}),r.dirty()):s.kind==="time"?SI(s).test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{code:q.invalid_string,validation:"time",message:s.message}),r.dirty()):s.kind==="duration"?hI.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"duration",code:q.invalid_string,message:s.message}),r.dirty()):s.kind==="ip"?kI(e.data,s.version)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"ip",code:q.invalid_string,message:s.message}),r.dirty()):s.kind==="jwt"?CI(e.data,s.alg)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"jwt",code:q.invalid_string,message:s.message}),r.dirty()):s.kind==="cidr"?EI(e.data,s.version)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"cidr",code:q.invalid_string,message:s.message}),r.dirty()):s.kind==="base64"?xI.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"base64",code:q.invalid_string,message:s.message}),r.dirty()):s.kind==="base64url"?wI.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"base64url",code:q.invalid_string,message:s.message}),r.dirty()):Ce.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:q.invalid_string,...ie.errToObj(r)})}_addCheck(e){return new En({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ie.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ie.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ie.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ie.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ie.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ie.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ie.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ie.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ie.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ie.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ie.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ie.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ie.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...ie.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...ie.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ie.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...ie.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...ie.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...ie.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...ie.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...ie.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...ie.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...ie.errToObj(n)})}nonempty(e){return this.min(1,ie.errToObj(e))}trim(){return new En({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new En({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new En({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}En.create=t=>{var e;return new En({checks:[],typeName:ue.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...ve(t)})};function _I(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class mi extends xe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==te.number){const s=this._getOrReturnCtx(e);return X(s,{code:q.invalid_type,expected:te.number,received:s.parsedType}),de}let r;const i=new bt;for(const s of this._def.checks)s.kind==="int"?Ce.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),X(r,{code:q.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),X(r,{code:q.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),X(r,{code:q.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?_I(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),X(r,{code:q.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),X(r,{code:q.not_finite,message:s.message}),i.dirty()):Ce.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ie.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ie.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ie.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ie.toString(n))}setLimit(e,n,r,i){return new mi({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ie.toString(i)}]})}_addCheck(e){return new mi({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ie.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ie.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ie.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ie.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ie.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ie.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:ie.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ie.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ie.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ce.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}mi.create=t=>new mi({checks:[],typeName:ue.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...ve(t)});class gi extends xe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==te.bigint)return this._getInvalidInput(e);let r;const i=new bt;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),X(r,{code:q.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),X(r,{code:q.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),X(r,{code:q.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Ce.assertNever(s);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return X(n,{code:q.invalid_type,expected:te.bigint,received:n.parsedType}),de}gte(e,n){return this.setLimit("min",e,!0,ie.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ie.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ie.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ie.toString(n))}setLimit(e,n,r,i){return new gi({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ie.toString(i)}]})}_addCheck(e){return new gi({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ie.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ie.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ie.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ie.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ie.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}gi.create=t=>{var e;return new gi({checks:[],typeName:ue.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...ve(t)})};class Yl extends xe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==te.boolean){const r=this._getOrReturnCtx(e);return X(r,{code:q.invalid_type,expected:te.boolean,received:r.parsedType}),de}return _t(e.data)}}Yl.create=t=>new Yl({typeName:ue.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...ve(t)});class ts extends xe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==te.date){const s=this._getOrReturnCtx(e);return X(s,{code:q.invalid_type,expected:te.date,received:s.parsedType}),de}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return X(s,{code:q.invalid_date}),de}const r=new bt;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:q.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:q.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):Ce.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ts({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:ie.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:ie.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}ts.create=t=>new ts({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:ue.ZodDate,...ve(t)});class yu extends xe{_parse(e){if(this._getType(e)!==te.symbol){const r=this._getOrReturnCtx(e);return X(r,{code:q.invalid_type,expected:te.symbol,received:r.parsedType}),de}return _t(e.data)}}yu.create=t=>new yu({typeName:ue.ZodSymbol,...ve(t)});class Gl extends xe{_parse(e){if(this._getType(e)!==te.undefined){const r=this._getOrReturnCtx(e);return X(r,{code:q.invalid_type,expected:te.undefined,received:r.parsedType}),de}return _t(e.data)}}Gl.create=t=>new Gl({typeName:ue.ZodUndefined,...ve(t)});class Zl extends xe{_parse(e){if(this._getType(e)!==te.null){const r=this._getOrReturnCtx(e);return X(r,{code:q.invalid_type,expected:te.null,received:r.parsedType}),de}return _t(e.data)}}Zl.create=t=>new Zl({typeName:ue.ZodNull,...ve(t)});class yo extends xe{constructor(){super(...arguments),this._any=!0}_parse(e){return _t(e.data)}}yo.create=t=>new yo({typeName:ue.ZodAny,...ve(t)});class Hi extends xe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return _t(e.data)}}Hi.create=t=>new Hi({typeName:ue.ZodUnknown,...ve(t)});class Ar extends xe{_parse(e){const n=this._getOrReturnCtx(e);return X(n,{code:q.invalid_type,expected:te.never,received:n.parsedType}),de}}Ar.create=t=>new Ar({typeName:ue.ZodNever,...ve(t)});class xu extends xe{_parse(e){if(this._getType(e)!==te.undefined){const r=this._getOrReturnCtx(e);return X(r,{code:q.invalid_type,expected:te.void,received:r.parsedType}),de}return _t(e.data)}}xu.create=t=>new xu({typeName:ue.ZodVoid,...ve(t)});class Tn extends xe{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==te.array)return X(n,{code:q.invalid_type,expected:te.array,received:n.parsedType}),de;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,l=n.data.length<i.exactLength.value;(o||l)&&(X(n,{code:o?q.too_big:q.too_small,minimum:l?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(X(n,{code:q.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(X(n,{code:q.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>i.type._parseAsync(new rr(n,o,n.path,l)))).then(o=>bt.mergeArray(r,o));const s=[...n.data].map((o,l)=>i.type._parseSync(new rr(n,o,n.path,l)));return bt.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new Tn({...this._def,minLength:{value:e,message:ie.toString(n)}})}max(e,n){return new Tn({...this._def,maxLength:{value:e,message:ie.toString(n)}})}length(e,n){return new Tn({...this._def,exactLength:{value:e,message:ie.toString(n)}})}nonempty(e){return this.min(1,e)}}Tn.create=(t,e)=>new Tn({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ue.ZodArray,...ve(e)});function Es(t){if(t instanceof Ue){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Qn.create(Es(r))}return new Ue({...t._def,shape:()=>e})}else return t instanceof Tn?new Tn({...t._def,type:Es(t.element)}):t instanceof Qn?Qn.create(Es(t.unwrap())):t instanceof yi?yi.create(Es(t.unwrap())):t instanceof ir?ir.create(t.items.map(e=>Es(e))):t}class Ue extends xe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Ce.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==te.object){const c=this._getOrReturnCtx(e);return X(c,{code:q.invalid_type,expected:te.object,received:c.parsedType}),de}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Ar&&this._def.unknownKeys==="strip"))for(const c in i.data)o.includes(c)||l.push(c);const a=[];for(const c of o){const u=s[c],h=i.data[c];a.push({key:{status:"valid",value:c},value:u._parse(new rr(i,h,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof Ar){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of l)a.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(c==="strict")l.length>0&&(X(i,{code:q.unrecognized_keys,keys:l}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of l){const h=i.data[u];a.push({key:{status:"valid",value:u},value:c._parse(new rr(i,h,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of a){const h=await u.key,f=await u.value;c.push({key:h,value:f,alwaysSet:u.alwaysSet})}return c}).then(c=>bt.mergeObjectSync(r,c)):bt.mergeObjectSync(r,a)}get shape(){return this._def.shape()}strict(e){return ie.errToObj,new Ue({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,s,o,l;const a=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(l=ie.errToObj(e).message)!==null&&l!==void 0?l:a}:{message:a}}}:{}})}strip(){return new Ue({...this._def,unknownKeys:"strip"})}passthrough(){return new Ue({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ue({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ue({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ue.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Ue({...this._def,catchall:e})}pick(e){const n={};return Ce.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Ue({...this._def,shape:()=>n})}omit(e){const n={};return Ce.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Ue({...this._def,shape:()=>n})}deepPartial(){return Es(this)}partial(e){const n={};return Ce.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new Ue({...this._def,shape:()=>n})}required(e){const n={};return Ce.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof Qn;)s=s._def.innerType;n[r]=s}}),new Ue({...this._def,shape:()=>n})}keyof(){return XS(Ce.objectKeys(this.shape))}}Ue.create=(t,e)=>new Ue({shape:()=>t,unknownKeys:"strip",catchall:Ar.create(),typeName:ue.ZodObject,...ve(e)});Ue.strictCreate=(t,e)=>new Ue({shape:()=>t,unknownKeys:"strict",catchall:Ar.create(),typeName:ue.ZodObject,...ve(e)});Ue.lazycreate=(t,e)=>new Ue({shape:t,unknownKeys:"strip",catchall:Ar.create(),typeName:ue.ZodObject,...ve(e)});class Xl extends xe{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const l of s)if(l.result.status==="valid")return l.result;for(const l of s)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=s.map(l=>new en(l.ctx.common.issues));return X(n,{code:q.invalid_union,unionErrors:o}),de}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const a of r){const c={...n,common:{...n.common,issues:[]},parent:null},u=a._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const l=o.map(a=>new en(a));return X(n,{code:q.invalid_union,unionErrors:l}),de}}get options(){return this._def.options}}Xl.create=(t,e)=>new Xl({options:t,typeName:ue.ZodUnion,...ve(e)});const pr=t=>t instanceof ea?pr(t.schema):t instanceof Mn?pr(t.innerType()):t instanceof ta?[t.value]:t instanceof vi?t.options:t instanceof na?Ce.objectValues(t.enum):t instanceof ra?pr(t._def.innerType):t instanceof Gl?[void 0]:t instanceof Zl?[null]:t instanceof Qn?[void 0,...pr(t.unwrap())]:t instanceof yi?[null,...pr(t.unwrap())]:t instanceof fg||t instanceof sa?pr(t.unwrap()):t instanceof ia?pr(t._def.innerType):[];class dd extends xe{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==te.object)return X(n,{code:q.invalid_type,expected:te.object,received:n.parsedType}),de;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(X(n,{code:q.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),de)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const s of n){const o=pr(s.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of o){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,s)}}return new dd({typeName:ue.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...ve(r)})}}function Tp(t,e){const n=yr(t),r=yr(e);if(t===e)return{valid:!0,data:t};if(n===te.object&&r===te.object){const i=Ce.objectKeys(e),s=Ce.objectKeys(t).filter(l=>i.indexOf(l)!==-1),o={...t,...e};for(const l of s){const a=Tp(t[l],e[l]);if(!a.valid)return{valid:!1};o[l]=a.data}return{valid:!0,data:o}}else if(n===te.array&&r===te.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],l=e[s],a=Tp(o,l);if(!a.valid)return{valid:!1};i.push(a.data)}return{valid:!0,data:i}}else return n===te.date&&r===te.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Ql extends xe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(_p(s)||_p(o))return de;const l=Tp(s.value,o.value);return l.valid?((Np(s)||Np(o))&&n.dirty(),{status:n.value,value:l.data}):(X(r,{code:q.invalid_intersection_types}),de)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Ql.create=(t,e,n)=>new Ql({left:t,right:e,typeName:ue.ZodIntersection,...ve(n)});class ir extends xe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==te.array)return X(r,{code:q.invalid_type,expected:te.array,received:r.parsedType}),de;if(r.data.length<this._def.items.length)return X(r,{code:q.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),de;!this._def.rest&&r.data.length>this._def.items.length&&(X(r,{code:q.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,l)=>{const a=this._def.items[l]||this._def.rest;return a?a._parse(new rr(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>bt.mergeArray(n,o)):bt.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new ir({...this._def,rest:e})}}ir.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ir({items:t,typeName:ue.ZodTuple,rest:null,...ve(e)})};class Jl extends xe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==te.object)return X(r,{code:q.invalid_type,expected:te.object,received:r.parsedType}),de;const i=[],s=this._def.keyType,o=this._def.valueType;for(const l in r.data)i.push({key:s._parse(new rr(r,l,r.path,l)),value:o._parse(new rr(r,r.data[l],r.path,l)),alwaysSet:l in r.data});return r.common.async?bt.mergeObjectAsync(n,i):bt.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof xe?new Jl({keyType:e,valueType:n,typeName:ue.ZodRecord,...ve(r)}):new Jl({keyType:En.create(),valueType:e,typeName:ue.ZodRecord,...ve(n)})}}class wu extends xe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==te.map)return X(r,{code:q.invalid_type,expected:te.map,received:r.parsedType}),de;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([l,a],c)=>({key:i._parse(new rr(r,l,r.path,[c,"key"])),value:s._parse(new rr(r,a,r.path,[c,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const a of o){const c=await a.key,u=await a.value;if(c.status==="aborted"||u.status==="aborted")return de;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),l.set(c.value,u.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const a of o){const c=a.key,u=a.value;if(c.status==="aborted"||u.status==="aborted")return de;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),l.set(c.value,u.value)}return{status:n.value,value:l}}}}wu.create=(t,e,n)=>new wu({valueType:e,keyType:t,typeName:ue.ZodMap,...ve(n)});class ns extends xe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==te.set)return X(r,{code:q.invalid_type,expected:te.set,received:r.parsedType}),de;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(X(r,{code:q.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(X(r,{code:q.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(a){const c=new Set;for(const u of a){if(u.status==="aborted")return de;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const l=[...r.data.values()].map((a,c)=>s._parse(new rr(r,a,r.path,c)));return r.common.async?Promise.all(l).then(a=>o(a)):o(l)}min(e,n){return new ns({...this._def,minSize:{value:e,message:ie.toString(n)}})}max(e,n){return new ns({...this._def,maxSize:{value:e,message:ie.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}ns.create=(t,e)=>new ns({valueType:t,minSize:null,maxSize:null,typeName:ue.ZodSet,...ve(e)});class Gs extends xe{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==te.function)return X(n,{code:q.invalid_type,expected:te.function,received:n.parsedType}),de;function r(l,a){return gu({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,mu(),vo].filter(c=>!!c),issueData:{code:q.invalid_arguments,argumentsError:a}})}function i(l,a){return gu({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,mu(),vo].filter(c=>!!c),issueData:{code:q.invalid_return_type,returnTypeError:a}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof xo){const l=this;return _t(async function(...a){const c=new en([]),u=await l._def.args.parseAsync(a,s).catch(p=>{throw c.addIssue(r(a,p)),c}),h=await Reflect.apply(o,this,u);return await l._def.returns._def.type.parseAsync(h,s).catch(p=>{throw c.addIssue(i(h,p)),c})})}else{const l=this;return _t(function(...a){const c=l._def.args.safeParse(a,s);if(!c.success)throw new en([r(a,c.error)]);const u=Reflect.apply(o,this,c.data),h=l._def.returns.safeParse(u,s);if(!h.success)throw new en([i(u,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Gs({...this._def,args:ir.create(e).rest(Hi.create())})}returns(e){return new Gs({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Gs({args:e||ir.create([]).rest(Hi.create()),returns:n||Hi.create(),typeName:ue.ZodFunction,...ve(r)})}}class ea extends xe{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}ea.create=(t,e)=>new ea({getter:t,typeName:ue.ZodLazy,...ve(e)});class ta extends xe{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return X(n,{received:n.data,code:q.invalid_literal,expected:this._def.value}),de}return{status:"valid",value:e.data}}get value(){return this._def.value}}ta.create=(t,e)=>new ta({value:t,typeName:ue.ZodLiteral,...ve(e)});function XS(t,e){return new vi({values:t,typeName:ue.ZodEnum,...ve(e)})}class vi extends xe{constructor(){super(...arguments),il.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return X(n,{expected:Ce.joinValues(r),received:n.parsedType,code:q.invalid_type}),de}if(vu(this,il)||KS(this,il,new Set(this._def.values)),!vu(this,il).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return X(n,{received:n.data,code:q.invalid_enum_value,options:r}),de}return _t(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return vi.create(e,{...this._def,...n})}exclude(e,n=this._def){return vi.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}il=new WeakMap;vi.create=XS;class na extends xe{constructor(){super(...arguments),sl.set(this,void 0)}_parse(e){const n=Ce.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==te.string&&r.parsedType!==te.number){const i=Ce.objectValues(n);return X(r,{expected:Ce.joinValues(i),received:r.parsedType,code:q.invalid_type}),de}if(vu(this,sl)||KS(this,sl,new Set(Ce.getValidEnumValues(this._def.values))),!vu(this,sl).has(e.data)){const i=Ce.objectValues(n);return X(r,{received:r.data,code:q.invalid_enum_value,options:i}),de}return _t(e.data)}get enum(){return this._def.values}}sl=new WeakMap;na.create=(t,e)=>new na({values:t,typeName:ue.ZodNativeEnum,...ve(e)});class xo extends xe{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==te.promise&&n.common.async===!1)return X(n,{code:q.invalid_type,expected:te.promise,received:n.parsedType}),de;const r=n.parsedType===te.promise?n.data:Promise.resolve(n.data);return _t(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}xo.create=(t,e)=>new xo({type:t,typeName:ue.ZodPromise,...ve(e)});class Mn extends xe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ue.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{X(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);if(r.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return de;const a=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return a.status==="aborted"?de:a.status==="dirty"||n.value==="dirty"?Fs(a.value):a});{if(n.value==="aborted")return de;const l=this._def.schema._parseSync({data:o,path:r.path,parent:r});return l.status==="aborted"?de:l.status==="dirty"||n.value==="dirty"?Fs(l.value):l}}if(i.type==="refinement"){const o=l=>{const a=i.refinement(l,s);if(r.common.async)return Promise.resolve(a);if(a instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?de:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?de:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!es(o))return o;const l=i.transform(o.value,s);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>es(o)?Promise.resolve(i.transform(o.value,s)).then(l=>({status:n.value,value:l})):o);Ce.assertNever(i)}}Mn.create=(t,e,n)=>new Mn({schema:t,typeName:ue.ZodEffects,effect:e,...ve(n)});Mn.createWithPreprocess=(t,e,n)=>new Mn({schema:e,effect:{type:"preprocess",transform:t},typeName:ue.ZodEffects,...ve(n)});class Qn extends xe{_parse(e){return this._getType(e)===te.undefined?_t(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Qn.create=(t,e)=>new Qn({innerType:t,typeName:ue.ZodOptional,...ve(e)});class yi extends xe{_parse(e){return this._getType(e)===te.null?_t(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}yi.create=(t,e)=>new yi({innerType:t,typeName:ue.ZodNullable,...ve(e)});class ra extends xe{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===te.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}ra.create=(t,e)=>new ra({innerType:t,typeName:ue.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ve(e)});class ia extends xe{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Kl(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new en(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new en(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}ia.create=(t,e)=>new ia({innerType:t,typeName:ue.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ve(e)});class bu extends xe{_parse(e){if(this._getType(e)!==te.nan){const r=this._getOrReturnCtx(e);return X(r,{code:q.invalid_type,expected:te.nan,received:r.parsedType}),de}return{status:"valid",value:e.data}}}bu.create=t=>new bu({typeName:ue.ZodNaN,...ve(t)});const NI=Symbol("zod_brand");class fg extends xe{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Sa extends xe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?de:s.status==="dirty"?(n.dirty(),Fs(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?de:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new Sa({in:e,out:n,typeName:ue.ZodPipeline})}}class sa extends xe{_parse(e){const n=this._def.innerType._parse(e),r=i=>(es(i)&&(i.value=Object.freeze(i.value)),i);return Kl(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}sa.create=(t,e)=>new sa({innerType:t,typeName:ue.ZodReadonly,...ve(e)});function kx(t,e){const n=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof n=="string"?{message:n}:n}function QS(t,e={},n){return t?yo.create().superRefine((r,i)=>{var s,o;const l=t(r);if(l instanceof Promise)return l.then(a=>{var c,u;if(!a){const h=kx(e,r),f=(u=(c=h.fatal)!==null&&c!==void 0?c:n)!==null&&u!==void 0?u:!0;i.addIssue({code:"custom",...h,fatal:f})}});if(!l){const a=kx(e,r),c=(o=(s=a.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0;i.addIssue({code:"custom",...a,fatal:c})}}):yo.create()}const TI={object:Ue.lazycreate};var ue;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ue||(ue={}));const PI=(t,e={message:`Input not instance of ${t.name}`})=>QS(n=>n instanceof t,e),JS=En.create,ek=mi.create,jI=bu.create,AI=gi.create,tk=Yl.create,MI=ts.create,RI=yu.create,II=Gl.create,OI=Zl.create,LI=yo.create,zI=Hi.create,DI=Ar.create,$I=xu.create,FI=Tn.create,BI=Ue.create,VI=Ue.strictCreate,UI=Xl.create,WI=dd.create,HI=Ql.create,qI=ir.create,KI=Jl.create,YI=wu.create,GI=ns.create,ZI=Gs.create,XI=ea.create,QI=ta.create,JI=vi.create,eO=na.create,tO=xo.create,Cx=Mn.create,nO=Qn.create,rO=yi.create,iO=Mn.createWithPreprocess,sO=Sa.create,oO=()=>JS().optional(),lO=()=>ek().optional(),aO=()=>tk().optional(),cO={string:t=>En.create({...t,coerce:!0}),number:t=>mi.create({...t,coerce:!0}),boolean:t=>Yl.create({...t,coerce:!0}),bigint:t=>gi.create({...t,coerce:!0}),date:t=>ts.create({...t,coerce:!0})},uO=de;var Ga=Object.freeze({__proto__:null,defaultErrorMap:vo,setErrorMap:iI,getErrorMap:mu,makeIssue:gu,EMPTY_PATH:sI,addIssueToContext:X,ParseStatus:bt,INVALID:de,DIRTY:Fs,OK:_t,isAborted:_p,isDirty:Np,isValid:es,isAsync:Kl,get util(){return Ce},get objectUtil(){return Ep},ZodParsedType:te,getParsedType:yr,ZodType:xe,datetimeRegex:ZS,ZodString:En,ZodNumber:mi,ZodBigInt:gi,ZodBoolean:Yl,ZodDate:ts,ZodSymbol:yu,ZodUndefined:Gl,ZodNull:Zl,ZodAny:yo,ZodUnknown:Hi,ZodNever:Ar,ZodVoid:xu,ZodArray:Tn,ZodObject:Ue,ZodUnion:Xl,ZodDiscriminatedUnion:dd,ZodIntersection:Ql,ZodTuple:ir,ZodRecord:Jl,ZodMap:wu,ZodSet:ns,ZodFunction:Gs,ZodLazy:ea,ZodLiteral:ta,ZodEnum:vi,ZodNativeEnum:na,ZodPromise:xo,ZodEffects:Mn,ZodTransformer:Mn,ZodOptional:Qn,ZodNullable:yi,ZodDefault:ra,ZodCatch:ia,ZodNaN:bu,BRAND:NI,ZodBranded:fg,ZodPipeline:Sa,ZodReadonly:sa,custom:QS,Schema:xe,ZodSchema:xe,late:TI,get ZodFirstPartyTypeKind(){return ue},coerce:cO,any:LI,array:FI,bigint:AI,boolean:tk,date:MI,discriminatedUnion:WI,effect:Cx,enum:JI,function:ZI,instanceof:PI,intersection:HI,lazy:XI,literal:QI,map:YI,nan:jI,nativeEnum:eO,never:DI,null:OI,nullable:rO,number:ek,object:BI,oboolean:aO,onumber:lO,optional:nO,ostring:oO,pipeline:sO,preprocess:iO,promise:tO,record:KI,set:GI,strictObject:VI,string:JS,symbol:RI,transformer:Cx,tuple:qI,undefined:II,union:UI,unknown:zI,void:$I,NEVER:uO,ZodIssueCode:q,quotelessJson:rI,ZodError:en});const dO=Ga.object({apiUrl:Ga.string().url(),useMock:Ga.boolean().default(!1),mockInitData:Ga.string().optional().default("")});let Su=null,jh=null;async function hO(){try{const t="config.json";console.log(`[Config] Fetching config from: ${t}`);const e=await fetch(t);if(!e.ok)throw new Error(`Failed to fetch ${t}: ${e.status} ${e.statusText}`);const n=await e.json();console.log("[Config] Raw config data:",n);const r=dO.parse(n);return console.log("[Config] Parsed config:",r),r}catch(t){throw console.error("[Config] Error loading or parsing config.json:",t),new Error(`Application configuration is invalid or missing. Details: ${t instanceof Error?t.message:String(t)}`)}}function pg(){if(!Su)throw console.error("[Config] getConfig called before initialization!"),new Error("Configuration not loaded");return Su}async function fO(){if(Su){console.warn("[Config] Already initialized.");return}jh||(jh=hO());try{Su=await jh,console.log("[Config] Initialization complete.")}catch(t){const e=t instanceof Error?t.message:"Unknown error loading configuration.";throw document.body.innerHTML=`<div style="padding: 20px; text-align: center; color: red; font-family: sans-serif;">Failed to load application configuration. Please contact support.<br><small style='color: #666;'>Details: ${e}</small></div>`,t}}const at=Qe.create({});at.interceptors.request.use(t=>{if(!t.baseURL)try{const r=pg();t.baseURL=r.apiUrl}catch(r){return console.error("[API Interceptor] Failed to get config to set baseURL:",r),Promise.reject(new Error("Configuration not loaded, cannot set API base URL."))}const e=An.getState().jwt,n=t.url==="/Account/LoginByTelegramUserInfo"||t.url==="/Account/LoginByLogPassPair";return e&&!n?t.headers.Authorization=`Bearer ${e}`:!e&&!n&&console.warn(`[API Interceptor] No token found for protected URL: ${t.url}`),t.url==="/Account/LoginByTelegramUserInfo"&&typeof t.data=="string"&&(t.headers["Content-Type"]="text/plain"),t},t=>(console.error("[Axios Interceptor] Request Setup Error:",t),Promise.reject(t)));at.interceptors.response.use(t=>t,t=>{var e,n,r;if(t.response){if(console.error(`[Axios Interceptor] Response Error ${t.response.status} for ${(e=t.config)==null?void 0:e.url}:`,t.response.data),t.response.status===401)return console.error("[Axios Interceptor] Unauthorized (401). Logging out."),An.getState().logout(),Promise.reject(new Error("Unauthorized: Please log in again."));const i=((n=t.response.data)==null?void 0:n.errorMessage)||((r=t.response.data)==null?void 0:r.title)||(typeof t.response.data=="string"?t.response.data:null)||t.response.statusText||`Request failed with status ${t.response.status}`;return Promise.reject(new Error(i))}else return t.request?(console.error("[Axios Interceptor] No response received (Network Error? Backend Down?):",t.request),Promise.reject(new Error("Network error or backend unavailable."))):(console.error("[Axios Interceptor] Request setup error:",t.message),Promise.reject(new Error(t.message||"Request setup error")))});var nk={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(tr,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",l="minute",a="hour",c="day",u="week",h="month",f="quarter",p="year",g="date",m="Invalid Date",w=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,x={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(M){var I=["th","st","nd","rd"],L=M%100;return"["+M+(I[(L-20)%10]||I[L]||I[0])+"]"}},b=function(M,I,L){var z=String(M);return!z||z.length>=I?M:""+Array(I+1-z.length).join(L)+M},S={s:b,z:function(M){var I=-M.utcOffset(),L=Math.abs(I),z=Math.floor(L/60),j=L%60;return(I<=0?"+":"-")+b(z,2,"0")+":"+b(j,2,"0")},m:function M(I,L){if(I.date()<L.date())return-M(L,I);var z=12*(L.year()-I.year())+(L.month()-I.month()),j=I.clone().add(z,h),D=L-j<0,E=I.clone().add(z+(D?-1:1),h);return+(-(z+(L-j)/(D?j-E:E-j))||0)},a:function(M){return M<0?Math.ceil(M)||0:Math.floor(M)},p:function(M){return{M:h,y:p,w:u,d:c,D:g,h:a,m:l,s:o,ms:s,Q:f}[M]||String(M||"").toLowerCase().replace(/s$/,"")},u:function(M){return M===void 0}},k="en",C={};C[k]=x;var _="$isDayjsObject",P=function(M){return M instanceof R||!(!M||!M[_])},O=function M(I,L,z){var j;if(!I)return k;if(typeof I=="string"){var D=I.toLowerCase();C[D]&&(j=D),L&&(C[D]=L,j=D);var E=I.split("-");if(!j&&E.length>1)return M(E[0])}else{var W=I.name;C[W]=I,j=W}return!z&&j&&(k=j),j||!z&&k},A=function(M,I){if(P(M))return M.clone();var L=typeof I=="object"?I:{};return L.date=M,L.args=arguments,new R(L)},T=S;T.l=O,T.i=P,T.w=function(M,I){return A(M,{locale:I.$L,utc:I.$u,x:I.$x,$offset:I.$offset})};var R=function(){function M(L){this.$L=O(L.locale,null,!0),this.parse(L),this.$x=this.$x||L.x||{},this[_]=!0}var I=M.prototype;return I.parse=function(L){this.$d=function(z){var j=z.date,D=z.utc;if(j===null)return new Date(NaN);if(T.u(j))return new Date;if(j instanceof Date)return new Date(j);if(typeof j=="string"&&!/Z$/i.test(j)){var E=j.match(w);if(E){var W=E[2]-1||0,ee=(E[7]||"0").substring(0,3);return D?new Date(Date.UTC(E[1],W,E[3]||1,E[4]||0,E[5]||0,E[6]||0,ee)):new Date(E[1],W,E[3]||1,E[4]||0,E[5]||0,E[6]||0,ee)}}return new Date(j)}(L),this.init()},I.init=function(){var L=this.$d;this.$y=L.getFullYear(),this.$M=L.getMonth(),this.$D=L.getDate(),this.$W=L.getDay(),this.$H=L.getHours(),this.$m=L.getMinutes(),this.$s=L.getSeconds(),this.$ms=L.getMilliseconds()},I.$utils=function(){return T},I.isValid=function(){return this.$d.toString()!==m},I.isSame=function(L,z){var j=A(L);return this.startOf(z)<=j&&j<=this.endOf(z)},I.isAfter=function(L,z){return A(L)<this.startOf(z)},I.isBefore=function(L,z){return this.endOf(z)<A(L)},I.$g=function(L,z,j){return T.u(L)?this[z]:this.set(j,L)},I.unix=function(){return Math.floor(this.valueOf()/1e3)},I.valueOf=function(){return this.$d.getTime()},I.startOf=function(L,z){var j=this,D=!!T.u(z)||z,E=T.p(L),W=function(B,U){var ne=T.w(j.$u?Date.UTC(j.$y,U,B):new Date(j.$y,U,B),j);return D?ne:ne.endOf(c)},ee=function(B,U){return T.w(j.toDate()[B].apply(j.toDate("s"),(D?[0,0,0,0]:[23,59,59,999]).slice(U)),j)},N=this.$W,se=this.$M,be=this.$D,he="set"+(this.$u?"UTC":"");switch(E){case p:return D?W(1,0):W(31,11);case h:return D?W(1,se):W(0,se+1);case u:var J=this.$locale().weekStart||0,Q=(N<J?N+7:N)-J;return W(D?be-Q:be+(6-Q),se);case c:case g:return ee(he+"Hours",0);case a:return ee(he+"Minutes",1);case l:return ee(he+"Seconds",2);case o:return ee(he+"Milliseconds",3);default:return this.clone()}},I.endOf=function(L){return this.startOf(L,!1)},I.$set=function(L,z){var j,D=T.p(L),E="set"+(this.$u?"UTC":""),W=(j={},j[c]=E+"Date",j[g]=E+"Date",j[h]=E+"Month",j[p]=E+"FullYear",j[a]=E+"Hours",j[l]=E+"Minutes",j[o]=E+"Seconds",j[s]=E+"Milliseconds",j)[D],ee=D===c?this.$D+(z-this.$W):z;if(D===h||D===p){var N=this.clone().set(g,1);N.$d[W](ee),N.init(),this.$d=N.set(g,Math.min(this.$D,N.daysInMonth())).$d}else W&&this.$d[W](ee);return this.init(),this},I.set=function(L,z){return this.clone().$set(L,z)},I.get=function(L){return this[T.p(L)]()},I.add=function(L,z){var j,D=this;L=Number(L);var E=T.p(z),W=function(se){var be=A(D);return T.w(be.date(be.date()+Math.round(se*L)),D)};if(E===h)return this.set(h,this.$M+L);if(E===p)return this.set(p,this.$y+L);if(E===c)return W(1);if(E===u)return W(7);var ee=(j={},j[l]=r,j[a]=i,j[o]=n,j)[E]||1,N=this.$d.getTime()+L*ee;return T.w(N,this)},I.subtract=function(L,z){return this.add(-1*L,z)},I.format=function(L){var z=this,j=this.$locale();if(!this.isValid())return j.invalidDate||m;var D=L||"YYYY-MM-DDTHH:mm:ssZ",E=T.z(this),W=this.$H,ee=this.$m,N=this.$M,se=j.weekdays,be=j.months,he=j.meridiem,J=function(U,ne,oe,_e){return U&&(U[ne]||U(z,D))||oe[ne].slice(0,_e)},Q=function(U){return T.s(W%12||12,U,"0")},B=he||function(U,ne,oe){var _e=U<12?"AM":"PM";return oe?_e.toLowerCase():_e};return D.replace(v,function(U,ne){return ne||function(oe){switch(oe){case"YY":return String(z.$y).slice(-2);case"YYYY":return T.s(z.$y,4,"0");case"M":return N+1;case"MM":return T.s(N+1,2,"0");case"MMM":return J(j.monthsShort,N,be,3);case"MMMM":return J(be,N);case"D":return z.$D;case"DD":return T.s(z.$D,2,"0");case"d":return String(z.$W);case"dd":return J(j.weekdaysMin,z.$W,se,2);case"ddd":return J(j.weekdaysShort,z.$W,se,3);case"dddd":return se[z.$W];case"H":return String(W);case"HH":return T.s(W,2,"0");case"h":return Q(1);case"hh":return Q(2);case"a":return B(W,ee,!0);case"A":return B(W,ee,!1);case"m":return String(ee);case"mm":return T.s(ee,2,"0");case"s":return String(z.$s);case"ss":return T.s(z.$s,2,"0");case"SSS":return T.s(z.$ms,3,"0");case"Z":return E}return null}(U)||E.replace(":","")})},I.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},I.diff=function(L,z,j){var D,E=this,W=T.p(z),ee=A(L),N=(ee.utcOffset()-this.utcOffset())*r,se=this-ee,be=function(){return T.m(E,ee)};switch(W){case p:D=be()/12;break;case h:D=be();break;case f:D=be()/3;break;case u:D=(se-N)/6048e5;break;case c:D=(se-N)/864e5;break;case a:D=se/i;break;case l:D=se/r;break;case o:D=se/n;break;default:D=se}return j?D:T.a(D)},I.daysInMonth=function(){return this.endOf(h).$D},I.$locale=function(){return C[this.$L]},I.locale=function(L,z){if(!L)return this.$L;var j=this.clone(),D=O(L,z,!0);return D&&(j.$L=D),j},I.clone=function(){return T.w(this.$d,this)},I.toDate=function(){return new Date(this.valueOf())},I.toJSON=function(){return this.isValid()?this.toISOString():null},I.toISOString=function(){return this.$d.toISOString()},I.toString=function(){return this.$d.toUTCString()},M}(),$=R.prototype;return A.prototype=$,[["$ms",s],["$s",o],["$m",l],["$H",a],["$W",c],["$M",h],["$y",p],["$D",g]].forEach(function(M){$[M[1]]=function(I){return this.$g(I,M[0],M[1])}}),A.extend=function(M,I){return M.$i||(M(I,R,A),M.$i=!0),A},A.locale=O,A.isDayjs=P,A.unix=function(M){return A(1e3*M)},A.en=C[k],A.Ls=C,A.p={},A})})(nk);var rk=nk.exports;const Rn=lr(rk);var ik={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(tr,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,l){var a=o.prototype;l.utc=function(m){var w={date:m,utc:!0,args:arguments};return new o(w)},a.utc=function(m){var w=l(this.toDate(),{locale:this.$L,utc:!0});return m?w.add(this.utcOffset(),n):w},a.local=function(){return l(this.toDate(),{locale:this.$L,utc:!1})};var c=a.parse;a.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),c.call(this,m)};var u=a.init;a.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else u.call(this)};var h=a.utcOffset;a.utcOffset=function(m,w){var v=this.$utils().u;if(v(m))return this.$u?0:v(this.$offset)?h.call(this):this.$offset;if(typeof m=="string"&&(m=function(k){k===void 0&&(k="");var C=k.match(r);if(!C)return null;var _=(""+C[0]).match(i)||["-",0,0],P=_[0],O=60*+_[1]+ +_[2];return O===0?0:P==="+"?O:-O}(m),m===null))return this;var x=Math.abs(m)<=16?60*m:m,b=this;if(w)return b.$offset=x,b.$u=m===0,b;if(m!==0){var S=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(x+S,n)).$offset=x,b.$x.$localOffset=S}else b=this.utc();return b};var f=a.format;a.format=function(m){var w=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return f.call(this,w)},a.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},a.isUTC=function(){return!!this.$u},a.toISOString=function(){return this.toDate().toISOString()},a.toString=function(){return this.toDate().toUTCString()};var p=a.toDate;a.toDate=function(m){return m==="s"&&this.$offset?l(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():p.call(this)};var g=a.diff;a.diff=function(m,w,v){if(m&&this.$u===m.$u)return g.call(this,m,w,v);var x=this.local(),b=l(m).local();return g.call(x,b,w,v)}}})})(ik);var pO=ik.exports;const sk=lr(pO);var ok={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(tr,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var l,a=function(f,p,g){g===void 0&&(g={});var m=new Date(f),w=function(v,x){x===void 0&&(x={});var b=x.timeZoneName||"short",S=v+"|"+b,k=r[S];return k||(k=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:v,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:b}),r[S]=k),k}(p,g);return w.formatToParts(m)},c=function(f,p){for(var g=a(f,p),m=[],w=0;w<g.length;w+=1){var v=g[w],x=v.type,b=v.value,S=n[x];S>=0&&(m[S]=parseInt(b,10))}var k=m[3],C=k===24?0:k,_=m[0]+"-"+m[1]+"-"+m[2]+" "+C+":"+m[4]+":"+m[5]+":000",P=+f;return(o.utc(_).valueOf()-(P-=P%1e3))/6e4},u=s.prototype;u.tz=function(f,p){f===void 0&&(f=l);var g,m=this.utcOffset(),w=this.toDate(),v=w.toLocaleString("en-US",{timeZone:f}),x=Math.round((w-new Date(v))/1e3/60),b=15*-Math.round(w.getTimezoneOffset()/15)-x;if(!Number(b))g=this.utcOffset(0,p);else if(g=o(v,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(b,!0),p){var S=g.utcOffset();g=g.add(m-S,"minute")}return g.$x.$timezone=f,g},u.offsetName=function(f){var p=this.$x.$timezone||o.tz.guess(),g=a(this.valueOf(),p,{timeZoneName:f}).find(function(m){return m.type.toLowerCase()==="timezonename"});return g&&g.value};var h=u.startOf;u.startOf=function(f,p){if(!this.$x||!this.$x.$timezone)return h.call(this,f,p);var g=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return h.call(g,f,p).tz(this.$x.$timezone,!0)},o.tz=function(f,p,g){var m=g&&p,w=g||p||l,v=c(+o(),w);if(typeof f!="string")return o(f).tz(w);var x=function(C,_,P){var O=C-60*_*1e3,A=c(O,P);if(_===A)return[O,_];var T=c(O-=60*(A-_)*1e3,P);return A===T?[O,A]:[C-60*Math.min(A,T)*1e3,Math.max(A,T)]}(o.utc(f,m).valueOf(),v,w),b=x[0],S=x[1],k=o(b).utcOffset(S);return k.$x.$timezone=w,k},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(f){l=f}}})})(ok);var mO=ok.exports;const lk=lr(mO);var ak={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(tr,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d/,s=/\d\d/,o=/\d\d?/,l=/\d*[^-_:/,()\s\d]+/,a={},c=function(w){return(w=+w)+(w>68?1900:2e3)},u=function(w){return function(v){this[w]=+v}},h=[/[+-]\d\d:?(\d\d)?|Z/,function(w){(this.zone||(this.zone={})).offset=function(v){if(!v||v==="Z")return 0;var x=v.match(/([+-]|\d\d)/g),b=60*x[1]+(+x[2]||0);return b===0?0:x[0]==="+"?-b:b}(w)}],f=function(w){var v=a[w];return v&&(v.indexOf?v:v.s.concat(v.f))},p=function(w,v){var x,b=a.meridiem;if(b){for(var S=1;S<=24;S+=1)if(w.indexOf(b(S,0,v))>-1){x=S>12;break}}else x=w===(v?"pm":"PM");return x},g={A:[l,function(w){this.afternoon=p(w,!1)}],a:[l,function(w){this.afternoon=p(w,!0)}],Q:[i,function(w){this.month=3*(w-1)+1}],S:[i,function(w){this.milliseconds=100*+w}],SS:[s,function(w){this.milliseconds=10*+w}],SSS:[/\d{3}/,function(w){this.milliseconds=+w}],s:[o,u("seconds")],ss:[o,u("seconds")],m:[o,u("minutes")],mm:[o,u("minutes")],H:[o,u("hours")],h:[o,u("hours")],HH:[o,u("hours")],hh:[o,u("hours")],D:[o,u("day")],DD:[s,u("day")],Do:[l,function(w){var v=a.ordinal,x=w.match(/\d+/);if(this.day=x[0],v)for(var b=1;b<=31;b+=1)v(b).replace(/\[|\]/g,"")===w&&(this.day=b)}],w:[o,u("week")],ww:[s,u("week")],M:[o,u("month")],MM:[s,u("month")],MMM:[l,function(w){var v=f("months"),x=(f("monthsShort")||v.map(function(b){return b.slice(0,3)})).indexOf(w)+1;if(x<1)throw new Error;this.month=x%12||x}],MMMM:[l,function(w){var v=f("months").indexOf(w)+1;if(v<1)throw new Error;this.month=v%12||v}],Y:[/[+-]?\d+/,u("year")],YY:[s,function(w){this.year=c(w)}],YYYY:[/\d{4}/,u("year")],Z:h,ZZ:h};function m(w){var v,x;v=w,x=a&&a.formats;for(var b=(w=v.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(A,T,R){var $=R&&R.toUpperCase();return T||x[R]||n[R]||x[$].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(M,I,L){return I||L.slice(1)})})).match(r),S=b.length,k=0;k<S;k+=1){var C=b[k],_=g[C],P=_&&_[0],O=_&&_[1];b[k]=O?{regex:P,parser:O}:C.replace(/^\[|\]$/g,"")}return function(A){for(var T={},R=0,$=0;R<S;R+=1){var M=b[R];if(typeof M=="string")$+=M.length;else{var I=M.regex,L=M.parser,z=A.slice($),j=I.exec(z)[0];L.call(T,j),A=A.replace(j,"")}}return function(D){var E=D.afternoon;if(E!==void 0){var W=D.hours;E?W<12&&(D.hours+=12):W===12&&(D.hours=0),delete D.afternoon}}(T),T}}return function(w,v,x){x.p.customParseFormat=!0,w&&w.parseTwoDigitYear&&(c=w.parseTwoDigitYear);var b=v.prototype,S=b.parse;b.parse=function(k){var C=k.date,_=k.utc,P=k.args;this.$u=_;var O=P[1];if(typeof O=="string"){var A=P[2]===!0,T=P[3]===!0,R=A||T,$=P[2];T&&($=P[2]),a=this.$locale(),!A&&$&&(a=x.Ls[$]),this.$d=function(z,j,D,E){try{if(["x","X"].indexOf(j)>-1)return new Date((j==="X"?1e3:1)*z);var W=m(j)(z),ee=W.year,N=W.month,se=W.day,be=W.hours,he=W.minutes,J=W.seconds,Q=W.milliseconds,B=W.zone,U=W.week,ne=new Date,oe=se||(ee||N?1:ne.getDate()),_e=ee||ne.getFullYear(),Re=0;ee&&!N||(Re=N>0?N-1:ne.getMonth());var Ye,Je=be||0,on=he||0,Ai=J||0,vn=Q||0;return B?new Date(Date.UTC(_e,Re,oe,Je,on,Ai,vn+60*B.offset*1e3)):D?new Date(Date.UTC(_e,Re,oe,Je,on,Ai,vn)):(Ye=new Date(_e,Re,oe,Je,on,Ai,vn),U&&(Ye=E(Ye).week(U).toDate()),Ye)}catch{return new Date("")}}(C,O,_,x),this.init(),$&&$!==!0&&(this.$L=this.locale($).$L),R&&C!=this.format(O)&&(this.$d=new Date("")),a={}}else if(O instanceof Array)for(var M=O.length,I=1;I<=M;I+=1){P[1]=O[I-1];var L=x.apply(this,P);if(L.isValid()){this.$d=L.$d,this.$L=L.$L,this.init();break}I===M&&(this.$d=new Date(""))}else S.call(this,k)}}})})(ak);var gO=ak.exports;const vO=lr(gO);Rn.extend(sk);Rn.extend(lk);Rn.extend(vO);const ka=(t,e)=>{var r;if(!t||t.data===null||typeof t.data>"u"||typeof t.data.isSuccess!="boolean"){console.error("[API Helper] Invalid/Undefined Response Structure:",t);let i=e;return(t==null?void 0:t.data)===null?i="Received null data from server.":(r=t==null?void 0:t.data)!=null&&r.errorMessage?i=t.data.errorMessage:t!=null&&t.statusText&&(i=t.statusText),{isSuccess:!1,errorMessage:i,resultObject:null}}return t.data},hd=(t,e)=>{var r,i;console.error(`[API Error Handler] ${e}:`,t);let n=e;return t instanceof Error?n=t.message:typeof t=="string"?n=t:t!=null&&t.response?n=`Request failed (${t.response.status}): ${((r=t.response.data)==null?void 0:r.errorMessage)||((i=t.response.data)==null?void 0:i.title)||t.response.statusText||"Server error"}`:t!=null&&t.request?n="No response received from server.":t!=null&&t.errorMessage&&(n=t.errorMessage),{isSuccess:!1,errorMessage:n,resultObject:null}},yO=async t=>{const e={pageNumber:t.pageNumber??1,pageItemsCount:t.pageItemsCount??30,searchString:t.searchString||null,assetTypes:t.assetTypes||null},n="Failed to search assets.";try{const r=await at.post("/api/BrokerAccountUser/SearchAssets",e),i=ka(r,n);return i.isSuccess&&(i.resultObject?i.resultObject.assets=i.resultObject.assets||[]:(console.warn("[API/Assets] searchAssets success but resultObject is null. Normalizing."),i.resultObject={searchAssetsParameters:e,foundCount:0,assets:[]})),i}catch(r){return hd(r,n)}},ck=async t=>{const e=`Failed to get asset with ID ${t}.`;console.log(`[API/Assets] Fetching asset by ID: ${t}`);try{const n=await at.get(`/api/Assets/${t}`),r=ka(n,e);return r.isSuccess&&r.resultObject===null&&console.warn(`[API/Assets] getAssetById(${t}) returned success but resultObject is null.`),r}catch(n){return hd(n,e)}},uk=async()=>{const t="Failed to get asset types.";try{const e=await at.get("/api/BrokerAccountUser/GetAllAssetTypes"),n=ka(e,t);return n.isSuccess&&n.resultObject===null&&(console.warn("[API/Assets] getAllAssetTypes success but resultObject is null. Normalizing to empty array."),n.resultObject=[]),n}catch(e){return hd(e,t)}},xO=async t=>{const e="Failed to get last prices.";if(!t||t.length===0)return console.log("[API/Assets] getLastPrices called with empty tickers, returning empty array."),{isSuccess:!0,errorMessage:null,resultObject:[]};try{const n=await at.get("/api/BrokerAccountUser/GetLastPrices",{params:{assetTickers:t.join(",")}}),r=ka(n,e);return r.isSuccess&&r.resultObject===null&&(console.warn("[API/Assets] getLastPrices success but resultObject is null. Normalizing to empty array."),r.resultObject=[]),r}catch(n){return hd(n,e)}},dk=async(t,e)=>{var c,u;const n="График в разработке, бро";console.log(`[API/Assets] getPriceHistory called for asset ${t}, period ${e}. Requesting from backend...`);const r=Rn();let i;const s=r;switch(e){case"1D":i=r.startOf("day");break;case"1W":i=r.subtract(1,"week");break;case"1M":i=r.subtract(1,"month");break;case"1Y":i=r.subtract(1,"year");break;case"5Y":i=r.subtract(5,"year");break;case"ALL":i=r.subtract(20,"year");break;default:console.warn(`[API/Assets getPriceHistory] Unknown period: ${e}. Defaulting to 1M.`),i=r.subtract(1,"month")}const o=i.format("YYYY-MM-DD"),l=s.format("YYYY-MM-DD");console.log(`[API/Assets getPriceHistory] Requesting backend with AssetId: ${t}, From: ${o}, Till: ${l}`);const a={AssetId:t,From:o,Till:l};try{const h=await at.post("/api/Assets/GetPriceDataForFrontChartFromMoex",a),f=ka(h,n);if(!f.isSuccess||!f.resultObject)return console.error("[API/Assets getPriceHistory] Backend request failed or returned null:",f.errorMessage),{isSuccess:!1,errorMessage:f.errorMessage||n,resultObject:[]};const p=f.resultObject;if(!((c=p==null?void 0:p.candles)!=null&&c.columns)||!((u=p==null?void 0:p.candles)!=null&&u.data))return console.error("[API/Assets getPriceHistory] Invalid MOEX data structure:",p),{isSuccess:!1,errorMessage:n,resultObject:[]};const g=p.candles.columns,m=g.indexOf("begin"),w=g.indexOf("open"),v=g.indexOf("high"),x=g.indexOf("low"),b=g.indexOf("close");if(m===-1||w===-1||v===-1||x===-1||b===-1)return console.error("[API/Assets getPriceHistory] Required columns ('begin', 'open', 'high', 'low', 'close') not found:",g),{isSuccess:!1,errorMessage:n,resultObject:[]};const S=p.candles.data.map(k=>{const C=k[m];let _=k[w],P=k[v],O=k[x],A=k[b];if(!C||_===null||P===null||O===null||A===null||isNaN(_)||isNaN(P)||isNaN(O)||isNaN(A))return console.warn("[API/Assets getPriceHistory] Skipping row due to invalid data:",k),null;try{const R=Rn.tz(C,"YYYY-MM-DD HH:mm:ss","Europe/Moscow");if(!R.isValid())return console.warn(`[API/Assets getPriceHistory] Skipping row due to invalid date string after dayjs parsing: ${C}`),null;const M=R.utc().unix(),I=Math.max(_,P,O,A),L=Math.min(_,P,O,A);return P=I,O=L,_=Math.max(O,Math.min(P,_)),A=Math.max(O,Math.min(P,A)),{time:M,open:_,high:P,low:O,close:A}}catch(T){return console.error(`[API/Assets getPriceHistory] Error converting row: ${k}`,T),null}}).filter(k=>k!==null).sort((k,C)=>k.time-C.time);return console.log(`[API/Assets getPriceHistory] Successfully processed ${S.length} history points.`),{isSuccess:!0,errorMessage:null,resultObject:S}}catch(h){return console.error("[API/Assets getPriceHistory] Exception:",h),{isSuccess:!1,errorMessage:n,resultObject:[]}}},wO=20,ku="all",Ex={searchTerm:"",activeTabValue:ku,apiAssetTypes:null,currentPage:1,didPerformSearch:!1,marketTabs:[{value:ku,label:"Все",apiTitles:null}],isTypesLoading:!1,typesError:null,searchResults:[],totalResults:0,isLoading:!1,error:null},mr=_i((t,e)=>({...Ex,fetchMarketTabs:async(n=!1)=>{if(!n&&(e().marketTabs.length>1||e().isTypesLoading)){console.log("[MarketPageStore fetchMarketTabs] Skipped fetching tabs.");return}t({isTypesLoading:!0,typesError:null}),console.log("[MarketPageStore fetchMarketTabs] Fetching asset types...");try{const r=await uk();if(r.isSuccess&&r.resultObject){const i=r.resultObject.map(o=>({value:o.title,label:o.description,apiTitles:[o.title]})),s=[{value:ku,label:"Все",apiTitles:null},...i];t({marketTabs:s,isTypesLoading:!1}),console.log("[MarketPageStore fetchMarketTabs] Tabs loaded successfully.")}else throw new Error(r.errorMessage||"Failed to load asset types.")}catch(r){console.error("[MarketPageStore fetchMarketTabs] Error:",r),t({typesError:r.message||"Error fetching types.",isTypesLoading:!1,marketTabs:[{value:ku,label:"Все",apiTitles:null}]})}},setSearchTerm:n=>{t({searchTerm:n,currentPage:1,didPerformSearch:!1}),e().fetchMarketAssets(!1)},setActiveTab:(n,r)=>{t({activeTabValue:n,apiAssetTypes:r,currentPage:1,didPerformSearch:!1}),e().fetchMarketAssets(!1),console.log(`[MarketPageStore setActiveTab] Tab set to: ${n}`)},fetchMarketAssets:async(n=!1)=>{var l;const{searchTerm:r,apiAssetTypes:i,currentPage:s}=e(),o=n?s+1:1;if(e().isLoading){console.log("[MarketPageStore fetchMarketAssets] Fetch skipped, already loading.");return}t({isLoading:!0,error:null,didPerformSearch:!0}),n||t({searchResults:[],totalResults:0}),console.log(`[MarketPageStore fetchMarketAssets] Fetching: term='${r}', types=${JSON.stringify(i)}, page=${o}, append=${n}`);try{const a={searchString:r.trim()||null,assetTypes:i,pageNumber:o,pageItemsCount:wO},c=await yO(a);if(c!=null&&c.isSuccess&&c.resultObject){const u=c.resultObject.assets||[];t(h=>{var f;return{searchResults:n?[...h.searchResults,...u]:u,totalResults:((f=c.resultObject)==null?void 0:f.foundCount)??h.totalResults,currentPage:o,isLoading:!1,error:null}}),console.log(`[MarketPageStore fetchMarketAssets] Success. Fetched ${u.length}. New total: ${((l=c.resultObject)==null?void 0:l.foundCount)??"N/A"}. Current page: ${o}`)}else throw new Error((c==null?void 0:c.errorMessage)||"Ничего не найдено или произошла ошибка.")}catch(a){console.error("[MarketPageStore fetchMarketAssets] Fetch error:",a),t(c=>({error:a.message||"Ошибка загрузки активов.",isLoading:!1,searchResults:n?c.searchResults:[],totalResults:n?c.totalResults:0,currentPage:n?c.currentPage:1}))}},resetMarketState:()=>{console.log("[MarketPageStore] Resetting state."),t(Ex)}}));/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),hk=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var SO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...l},a)=>y.createElement("svg",{ref:a,...SO,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:hk("lucide",i),...l},[...o.map(([c,u])=>y.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=(t,e)=>{const n=y.forwardRef(({className:r,...i},s)=>y.createElement(kO,{ref:s,iconNode:e,className:hk(`lucide-${bO(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=we("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=we("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fk=we("CandlestickChart",[["path",{d:"M9 5v4",key:"14uxtq"}],["rect",{width:"4",height:"6",x:"7",y:"9",rx:"1",key:"f4fvz0"}],["path",{d:"M9 15v2",key:"r5rk32"}],["path",{d:"M17 3v2",key:"1l2re6"}],["rect",{width:"4",height:"8",x:"15",y:"5",rx:"1",key:"z38je5"}],["path",{d:"M17 13v3",key:"5l0wba"}],["path",{d:"M3 3v18h18",key:"1s2lah"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pk=we("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=we("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=we("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EO=we("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=we("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vk=we("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=we("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=we("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=we("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=we("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=we("DatabaseZap",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 15 21.84",key:"14ibmq"}],["path",{d:"M21 5V8",key:"1marbg"}],["path",{d:"M21 12L18 17H22L19 22",key:"zafso"}],["path",{d:"M3 12A9 3 0 0 0 14.59 14.87",key:"1y4wr8"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=we("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=we("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=we("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xk=we("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=we("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wk=we("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=we("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=we("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=we("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=we("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=we("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mg=we("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=we("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=we("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=we("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=we("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sk=we("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kk=we("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=we("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=we("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ek=we("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=we("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=we("WalletCards",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2",key:"4125el"}],["path",{d:"M3 11h3c.8 0 1.6.3 2.1.9l1.1.9c1.6 1.6 4.1 1.6 5.7 0l1.1-.9c.5-.5 1.3-.9 2.1-.9H21",key:"1dpki6"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=we("WalletMinimal",[["path",{d:"M17 14h.01",key:"7oqj8z"}],["path",{d:"M7 7h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14",key:"u1rqew"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=we("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fd=we("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ne=({size:t="default"})=>{const e={sm:"h-4 w-4",default:"h-6 w-6",lg:"h-8 w-8"};return d.jsx(IO,{className:`animate-spin text-primary ${e[t]}`})},xt=({message:t,className:e})=>d.jsxs("div",{className:`flex items-center text-destructive p-4 border border-destructive/50 rounded-md bg-destructive/10 ${e}`,children:[d.jsx(Ek,{className:"h-5 w-5 mr-2"}),d.jsx("span",{children:t||"ÐÑÐ¾Ð¸Ð·Ð¾ÑÐ»Ð° Ð½ÐµÐ¿ÑÐµÐ´Ð²Ð¸Ð´ÐµÐ½Ð½Ð°Ñ Ð¾ÑÐ¸Ð±ÐºÐ°."})]});function _k(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=_k(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Nk(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=_k(t))&&(r&&(r+=" "),r+=e);return r}const gg="-",qO=t=>{const e=YO(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(gg);return l[0]===""&&l.length!==1&&l.shift(),Tk(l,e)||KO(o)},getConflictingClassGroupIds:(o,l)=>{const a=n[o]||[];return l&&r[o]?[...a,...r[o]]:a}}},Tk=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?Tk(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const s=t.join(gg);return(o=e.validators.find(({validator:l})=>l(s)))==null?void 0:o.classGroupId},Tx=/^\[(.+)\]$/,KO=t=>{if(Tx.test(t)){const e=Tx.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},YO=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return ZO(Object.entries(t.classGroups),n).forEach(([s,o])=>{Pp(o,r,s,e)}),r},Pp=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const s=i===""?e:Px(e,i);s.classGroupId=n;return}if(typeof i=="function"){if(GO(i)){Pp(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([s,o])=>{Pp(o,Px(e,s),n,r)})})},Px=(t,e)=>{let n=t;return e.split(gg).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},GO=t=>t.isThemeGetter,ZO=(t,e)=>e?t.map(([n,r])=>{const i=r.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,l])=>[e+o,l])):s);return[n,i]}):t,XO=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(s,o)=>{n.set(s,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(s){let o=n.get(s);if(o!==void 0)return o;if((o=r.get(s))!==void 0)return i(s,o),o},set(s,o){n.has(s)?n.set(s,o):i(s,o)}}},Pk="!",QO=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],s=e.length,o=l=>{const a=[];let c=0,u=0,h;for(let w=0;w<l.length;w++){let v=l[w];if(c===0){if(v===i&&(r||l.slice(w,w+s)===e)){a.push(l.slice(u,w)),u=w+s;continue}if(v==="/"){h=w;continue}}v==="["?c++:v==="]"&&c--}const f=a.length===0?l:l.substring(u),p=f.startsWith(Pk),g=p?f.substring(1):f,m=h&&h>u?h-u:void 0;return{modifiers:a,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:m}};return n?l=>n({className:l,parseClassName:o}):o},JO=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},eL=t=>({cache:XO(t.cacheSize),parseClassName:QO(t),...qO(t)}),tL=/\s+/,nL=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,s=[],o=t.trim().split(tL);let l="";for(let a=o.length-1;a>=0;a-=1){const c=o[a],{modifiers:u,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=n(c);let g=!!p,m=r(g?f.substring(0,p):f);if(!m){if(!g){l=c+(l.length>0?" "+l:l);continue}if(m=r(f),!m){l=c+(l.length>0?" "+l:l);continue}g=!1}const w=JO(u).join(":"),v=h?w+Pk:w,x=v+m;if(s.includes(x))continue;s.push(x);const b=i(m,g);for(let S=0;S<b.length;++S){const k=b[S];s.push(v+k)}l=c+(l.length>0?" "+l:l)}return l};function rL(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=jk(e))&&(r&&(r+=" "),r+=n);return r}const jk=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=jk(t[r]))&&(n&&(n+=" "),n+=e);return n};function iL(t,...e){let n,r,i,s=o;function o(a){const c=e.reduce((u,h)=>h(u),t());return n=eL(c),r=n.cache.get,i=n.cache.set,s=l,l(a)}function l(a){const c=r(a);if(c)return c;const u=nL(a,n);return i(a,u),u}return function(){return s(rL.apply(null,arguments))}}const De=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},Ak=/^\[(?:([a-z-]+):)?(.+)\]$/i,sL=/^\d+\/\d+$/,oL=new Set(["px","full","screen"]),lL=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,aL=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,cL=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,uL=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,dL=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,fr=t=>Zs(t)||oL.has(t)||sL.test(t),Vr=t=>jo(t,"length",xL),Zs=t=>!!t&&!Number.isNaN(Number(t)),Ah=t=>jo(t,"number",Zs),Ko=t=>!!t&&Number.isInteger(Number(t)),hL=t=>t.endsWith("%")&&Zs(t.slice(0,-1)),ye=t=>Ak.test(t),Ur=t=>lL.test(t),fL=new Set(["length","size","percentage"]),pL=t=>jo(t,fL,Mk),mL=t=>jo(t,"position",Mk),gL=new Set(["image","url"]),vL=t=>jo(t,gL,bL),yL=t=>jo(t,"",wL),Yo=()=>!0,jo=(t,e,n)=>{const r=Ak.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},xL=t=>aL.test(t)&&!cL.test(t),Mk=()=>!1,wL=t=>uL.test(t),bL=t=>dL.test(t),SL=()=>{const t=De("colors"),e=De("spacing"),n=De("blur"),r=De("brightness"),i=De("borderColor"),s=De("borderRadius"),o=De("borderSpacing"),l=De("borderWidth"),a=De("contrast"),c=De("grayscale"),u=De("hueRotate"),h=De("invert"),f=De("gap"),p=De("gradientColorStops"),g=De("gradientColorStopPositions"),m=De("inset"),w=De("margin"),v=De("opacity"),x=De("padding"),b=De("saturate"),S=De("scale"),k=De("sepia"),C=De("skew"),_=De("space"),P=De("translate"),O=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto",ye,e],R=()=>[ye,e],$=()=>["",fr,Vr],M=()=>["auto",Zs,ye],I=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],L=()=>["solid","dashed","dotted","double","none"],z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],j=()=>["start","end","center","between","around","evenly","stretch"],D=()=>["","0",ye],E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[Zs,ye];return{cacheSize:500,separator:":",theme:{colors:[Yo],spacing:[fr,Vr],blur:["none","",Ur,ye],brightness:W(),borderColor:[t],borderRadius:["none","","full",Ur,ye],borderSpacing:R(),borderWidth:$(),contrast:W(),grayscale:D(),hueRotate:W(),invert:D(),gap:R(),gradientColorStops:[t],gradientColorStopPositions:[hL,Vr],inset:T(),margin:T(),opacity:W(),padding:R(),saturate:W(),scale:W(),sepia:D(),skew:W(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",ye]}],container:["container"],columns:[{columns:[Ur]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...I(),ye]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ko,ye]}],basis:[{basis:T()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ye]}],grow:[{grow:D()}],shrink:[{shrink:D()}],order:[{order:["first","last","none",Ko,ye]}],"grid-cols":[{"grid-cols":[Yo]}],"col-start-end":[{col:["auto",{span:["full",Ko,ye]},ye]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[Yo]}],"row-start-end":[{row:["auto",{span:[Ko,ye]},ye]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ye]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ye]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...j()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...j(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...j(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[_]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[_]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ye,e]}],"min-w":[{"min-w":[ye,e,"min","max","fit"]}],"max-w":[{"max-w":[ye,e,"none","full","min","max","fit","prose",{screen:[Ur]},Ur]}],h:[{h:[ye,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ye,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ye,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ye,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ur,Vr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ah]}],"font-family":[{font:[Yo]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ye]}],"line-clamp":[{"line-clamp":["none",Zs,Ah]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",fr,ye]}],"list-image":[{"list-image":["none",ye]}],"list-style-type":[{list:["none","disc","decimal",ye]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...L(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",fr,Vr]}],"underline-offset":[{"underline-offset":["auto",fr,ye]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...I(),mL]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",pL]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},vL]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...L(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:L()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...L()]}],"outline-offset":[{"outline-offset":[fr,ye]}],"outline-w":[{outline:[fr,Vr]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[fr,Vr]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ur,yL]}],"shadow-color":[{shadow:[Yo]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[a]}],"drop-shadow":[{"drop-shadow":["","none",Ur,ye]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[a]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ye]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",ye]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",ye]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Ko,ye]}],"translate-x":[{"translate-x":[P]}],"translate-y":[{"translate-y":[P]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ye]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ye]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ye]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[fr,Vr,Ah]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},kL=iL(SL);function H(...t){return kL(Nk(t))}const Nt=y.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:H("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Nt.displayName="Card";const zr=y.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:H("flex flex-col space-y-1.5 p-4 md:p-6",t),...e}));zr.displayName="CardHeader";const Ni=y.forwardRef(({className:t,children:e,...n},r)=>d.jsx("h3",{ref:r,className:H("text-lg font-semibold leading-none tracking-tight",t),...n,children:e}));Ni.displayName="CardTitle";const pd=y.forwardRef(({className:t,...e},n)=>d.jsx("p",{ref:n,className:H("text-sm text-muted-foreground",t),...e}));pd.displayName="CardDescription";const mn=y.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:H("p-4 md:p-6 pt-0",t),...e}));mn.displayName="CardContent";const CL=y.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:H("flex items-center p-4 md:p-6 pt-0",t),...e}));CL.displayName="CardFooter";const Rk=t=>new Intl.NumberFormat("ru-RU",t),Cn=(t,e=2)=>t===null||typeof t>"u"||isNaN(t)?"-":Rk({minimumFractionDigits:0,maximumFractionDigits:e}).format(t),xr=(t,e="₽",n=!0)=>{if(t===null||typeof t>"u"||isNaN(t))return"-";const r=t/100,s=Rk({minimumFractionDigits:2,maximumFractionDigits:2}).format(r);return n&&e?`${s} ${e}`:s};function Za(t){if(!t)return null;let e=t;e=e.replace(/\s*\(.*\)\s*/g," "),e=e.replace(/^["«“]|["»”]$/g,""),e=e.replace(/["«»”]/g,"");const n=["ORD SHS","ORD","SHS","гдр","ПАО","ОАО","ЗАО","ООО","АО","ап","PLC","GDR"];for(const i of n){const s=new RegExp(`\\s+${i}(?:\\b|$)`,"i");e=e.replace(s,"")}const r=["ГДР","МКПАО","i"];for(const i of r){const s=new RegExp(`^${i}(?:\\s+|(?=[A-ZА-ЯЁ]))`,"i");e=e.replace(s,"")}return e=e.trim().replace(/\s{2,}/g," "),!e||e.length<2||/^[^a-zA-Zа-яА-ЯёЁ0-9]+$/.test(e)?null:e}function vg(t){var s;if(!t)return"N/A";if(t.displayName)return t.displayName;const e=(s=t.assetType)==null?void 0:s.title,n=t.title,r=t.shortName,i=t.ticker||"N/A";try{if(e==="currency_pair"){const a=/([A-Z]{3})\/([А-Я]{3})/i,c=(i==null?void 0:i.match(a))||(n==null?void 0:n.match(a));if(c&&c[0])return c[0].toUpperCase();const u=n==null?void 0:n.replace(/СВОП/i,"").replace(/[-_]/g," ").replace(/\s+/g," ").trim();return u&&u.includes("/")?u:i}if(e==="fund_share"){const a="БПИФ ",c="ОПИФ ";let u=n||r;return u!=null&&u.startsWith(a)?u.substring(a.length).trim():u!=null&&u.startsWith(c)?u.substring(c.length).trim():Za(n)||Za(r)||i}if(e==="currency")return n||r||i;const o=Za(r);if(o)return o;const l=Za(n);return l||i}catch(o){return console.error("Error formatting asset name:",t,o),i}}const Ut=({value:t,currencySymbol:e="₽",showSign:n=!1,showColor:r=!1,includeSymbol:i=!0,className:s,valueClassName:o,signClassName:l,placeholder:a="—"})=>{if(t===null||typeof t>"u"||isNaN(t))return d.jsx("span",{className:H("text-muted-foreground",s),children:a});const c=xr(t,null,!1);if(c==="-")return d.jsx("span",{className:H("text-muted-foreground",s),children:a});const u=t>0,h=t<0,f=n&&u?"+":"",p=r?u?"text-success":h?"text-destructive":"text-foreground":"";return d.jsxs("span",{className:H("inline-flex items-baseline tabular-nums-font",p,s),children:[f&&d.jsx("span",{className:H(l),children:f}),d.jsx("span",{className:H("font-medium",o),children:c}),i&&e&&d.jsx("span",{className:H("ml-0.5 text-xs text-muted-foreground align-baseline",r&&p!=="text-foreground"?p:"text-muted-foreground"),children:e})]})};function Xs(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,i]of t)if(!Object.is(i,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}const EL=(t,e)=>{let n=null;return(...r)=>{n&&clearTimeout(n),n=setTimeout(()=>{t(...r),n=null},e)}},_L=3e4,NL=300,ol=new Map;let TL=0;const PL=()=>`price-sub-${TL++}`,jx=()=>{const t=new Set;return ol.forEach(e=>{e.forEach(n=>t.add(n))}),t},Mh=_i((t,e)=>({prices:new Map,neededTickers:new Set,isLoading:!1,error:null,lastFetchTime:null,fetchIntervalId:null,isPollingActive:!1,_debouncedFetchOnSubscriptionChange:EL(()=>{const{neededTickers:n,_fetchPricesInternal:r}=e(),i=Array.from(n);console.log(`[PriceStore _debouncedFetchOnSubscriptionChange] Triggered. Needed: ${i.length}`),i.length>0&&r(i,!1)},NL),subscribeTickers:(n,r)=>{const i=new Set(r.filter(o=>o&&o!=="RUB")),s=ol.get(n);if(!s||!Xs(s,i)){console.log(`[PriceStore subscribeTickers] Updating subscription for ${n} with ${i.size} tickers.`),ol.set(n,i);const o=jx(),l=e().neededTickers;Xs(l,o)?(console.log("[PriceStore subscribeTickers] neededTickers set did not change."),e()._checkPollingStatus()):(t({neededTickers:o}),e()._debouncedFetchOnSubscriptionChange(),e()._checkPollingStatus())}else console.log(`[PriceStore subscribeTickers] No change for ${n}, skipping update.`),e()._checkPollingStatus()},unsubscribeTickers:n=>{if(ol.delete(n)){console.log(`[PriceStore unsubscribeTickers] Removed subscription for ${n}.`);const r=jx(),i=e().neededTickers;Xs(i,r)?(console.log("[PriceStore unsubscribeTickers] neededTickers set did not change."),e()._checkPollingStatus()):(t({neededTickers:r}),e()._checkPollingStatus())}},_fetchPricesInternal:async(n,r=!1)=>{if(e().isLoading&&!r){console.log("[PriceStore _fetchPricesInternal] Non-poll fetch skipped, already loading.");return}if(!n||n.length===0){console.log("[PriceStore _fetchPricesInternal] No tickers provided to fetch."),e().isLoading&&!r&&t({isLoading:!1});return}r||t({isLoading:!0,error:null}),console.log(`[PriceStore _fetchPricesInternal] Fetching ${n.length} tickers... (isPoll: ${r})`);try{const i=await xO(n),s=Date.now();i.isSuccess&&i.resultObject?t(o=>{const l=new Map(o.prices);return i.resultObject.forEach(a=>l.set(a.ticker,a)),console.log(`[PriceStore _fetchPricesInternal] Success. Updated ${i.resultObject.length} prices. Total cached: ${l.size}`),{prices:l,isLoading:r?o.isLoading:!1,error:null,lastFetchTime:s}}):(console.warn("[PriceStore _fetchPricesInternal] Fetch failed:",i.errorMessage),t(o=>({error:i.errorMessage||"Failed to load prices",isLoading:r?o.isLoading:!1,lastFetchTime:s})))}catch(i){console.error("[PriceStore _fetchPricesInternal] Exception:",i),t(s=>({error:i.message||"Failed to fetch prices",isLoading:r?s.isLoading:!1,lastFetchTime:Date.now()}))}},_checkPollingStatus:()=>{const{neededTickers:n,fetchIntervalId:r,isPollingActive:i}=e(),s=n.size>0;if(s&&!i){console.log("[PriceStore _checkPollingStatus] Starting polling.");const o=setInterval(()=>{const l=e().neededTickers;l.size>0?e()._fetchPricesInternal(Array.from(l),!0):(console.warn("[PriceStore poll interval] No tickers needed, but interval still running. Stopping."),e()._checkPollingStatus())},_L);t({fetchIntervalId:o,isPollingActive:!0})}else!s&&i&&(console.log("[PriceStore _checkPollingStatus] Stopping polling."),r&&clearInterval(r),t({fetchIntervalId:null,isPollingActive:!1}))},clearAll:()=>{console.log("[PriceStore clearAll] Clearing all subscriptions and prices, stopping polling.");const{fetchIntervalId:n}=e();n&&clearInterval(n),ol.clear(),t({prices:new Map,neededTickers:new Set,isLoading:!1,error:null,lastFetchTime:null,fetchIntervalId:null,isPollingActive:!1})}})),{useDebugValue:jL}=Me,{useSyncExternalStoreWithSelector:AL}=yS,ML=t=>t;function RL(t,e=ML,n){const r=AL(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return jL(r),r}const md=t=>{const e=y.useRef(PL()).current,n=y.useMemo(()=>t.filter(c=>typeof c=="string"&&c!=="RUB"),[t]),r=Mh.getState().subscribeTickers,i=Mh.getState().unsubscribeTickers,{storePrices:s,isLoading:o,error:l}=RL(Mh,c=>({storePrices:c.prices,isLoading:c.isLoading,error:c.error}),Xs);return y.useEffect(()=>(console.log(`[useAssetPrices Effect ${e}] Running effect. Subscribing to:`,n),r(e,n),()=>{console.log(`[useAssetPrices Cleanup ${e}] Unsubscribing.`),i(e)}),[e,n,r,i]),{prices:y.useMemo(()=>{const c=new Map;return n.forEach(u=>{s.has(u)&&c.set(u,s.get(u))}),c},[n,s]),isLoading:o,error:l}},Ik=()=>{const{accounts:t}=nr(),e=y.useMemo(()=>{if(!t)return[];const a=new Set;return t.forEach(c=>{var u;(u=c.portfolioItems)==null||u.forEach(h=>{var f;(f=h.asset)!=null&&f.ticker&&h.asset.ticker!=="RUB"&&a.add(h.asset.ticker)})}),Array.from(a)},[t]),{prices:n,isLoading:r,error:i}=md(e),s=y.useCallback((a,c)=>{let u=0,h=0,f=0;return Array.isArray(a)?(a.forEach(g=>{if(!(g!=null&&g.asset))return;const m=g.asset.ticker,w=g.quantity||0,v=g.averagePriceCopecks??0;if(m==="RUB")u=w;else{const x=c.get(m);if(x){const b=x.price*100,S=b*w;if(h+=S,v>0){const k=(b-v)*w;f+=k}}}}),{totalValue:u+h,totalProfitLoss:f}):{totalValue:0,totalProfitLoss:0}},[]),o=y.useCallback(a=>{const c=t==null?void 0:t.find(u=>{var h;return((h=u.brokerAccount)==null?void 0:h.id)===a});return c?s(c.portfolioItems,n):{totalValue:0,totalProfitLoss:0}},[t,n,s]),l=y.useMemo(()=>{if(!t)return 0;let a=0;return t.forEach(c=>{var u;if((u=c==null?void 0:c.brokerAccount)!=null&&u.id){const h=s(c.portfolioItems,n);a+=h.totalValue}}),a},[t,n,s]);return{prices:n,isPriceLoading:r,priceError:i,getAccountTotals:o,totalPortfolioValue:l,calculateAccountTotals:s}},Ax=()=>d.jsx(Nt,{className:"rounded-xl border border-border/60 bg-card shadow-md animate-pulse",children:d.jsxs("div",{className:"p-5 space-y-5",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[d.jsx("div",{className:"flex-shrink-0 h-9 w-9 bg-muted rounded-lg"}),d.jsx("div",{className:"h-5 bg-muted rounded w-3/5"})]}),d.jsx("div",{className:"flex-shrink-0 h-6 w-16 bg-muted rounded-md ml-2"})]}),d.jsxs("div",{className:"flex items-end justify-between gap-4 pt-1",children:[d.jsx("div",{className:"space-y-2",children:d.jsx("div",{className:"h-9 bg-muted rounded w-32"})}),d.jsxs("div",{className:"text-right flex flex-col items-end flex-shrink-0",children:[d.jsx("div",{className:"h-6 bg-muted rounded w-24 mb-1"}),d.jsx("div",{className:"h-4 bg-muted rounded w-16"})]})]})]})}),IL=()=>{const{accounts:t,isLoading:e,error:n,fetchPortfolio:r}=nr(),i=ft(),{getAccountTotals:s,isPriceLoading:o}=Ik();y.useEffect(()=>{t===null&&!e&&!n&&r()},[t,e,n,r]);const l=a=>{typeof a=="number"&&i(`/portfolio/${a}`)};return e&&t===null?d.jsxs("div",{className:"p-4 space-y-5 pb-24",children:[d.jsx("h1",{className:"text-2xl font-semibold px-1 mb-5 text-foreground tracking-tight",children:"Мои счета"}),d.jsx(Ax,{}),d.jsx(Ax,{})]}):t===null&&n?d.jsx("div",{className:"p-6 pt-10",children:d.jsx(xt,{message:`Не удалось загрузить счета: ${n}`})}):!e&&(t==null?void 0:t.length)===0?d.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[calc(100vh-8rem)] p-6 text-center",children:[d.jsx(Nx,{className:"w-16 h-16 text-muted-foreground mb-4",strokeWidth:1}),d.jsx("p",{className:"text-muted-foreground mb-4",children:"У вас пока нет счетов."})]}):d.jsxs("div",{className:"p-4 space-y-4 pb-24",children:[d.jsx("h1",{className:"text-2xl font-semibold px-1 mb-5 text-foreground tracking-tight",children:"Мои счета"}),o&&t&&t.length>0&&d.jsx("div",{className:"fixed top-4 right-4 p-1 bg-card/80 rounded-full shadow z-20 animate-pulse backdrop-blur-sm",children:d.jsx(Ne,{size:"sm"})}),Array.isArray(t)&&t.map(a=>{var x;if(!((x=a==null?void 0:a.brokerAccount)!=null&&x.id))return null;const c=a.brokerAccount.id,{totalValue:u,totalProfitLoss:h}=s(c);let f=0;a.portfolioItems&&a.portfolioItems.forEach(b=>{var S;((S=b.asset)==null?void 0:S.ticker)!=="RUB"&&b.averagePriceCopecks&&b.averagePriceCopecks>0&&b.quantity&&b.quantity>0&&(f+=b.averagePriceCopecks*b.quantity)});const p=f>0?h/f*100:0,g=h>0,m=h<0,w=g?"text-success":m?"text-destructive":"text-muted-foreground",v=(a.brokerAccount.title||`Счет #${c}`).replace(/["«»]/g,"");return d.jsx("div",{onClick:()=>l(c),className:"cursor-pointer group",children:d.jsx(Nt,{className:H("rounded-xl border border-border/60 bg-card text-card-foreground shadow-md overflow-hidden","group-hover:border-primary/50 group-hover:shadow-md transition-all duration-200 group-active:scale-[0.98]"),children:d.jsxs(zr,{className:"p-5 space-y-3",children:[" ",d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[d.jsx("div",{className:"flex-shrink-0 grid place-items-center h-9 w-9 bg-primary/10 text-primary rounded-lg",children:t.length>1?d.jsx(Nx,{size:20,strokeWidth:1.75}):d.jsx(HO,{size:20,strokeWidth:1.75})}),d.jsx("div",{className:"min-w-0",children:d.jsx("h3",{className:"text-lg font-medium text-foreground truncate",children:v})})]}),d.jsxs("span",{className:"flex-shrink-0 text-xs font-medium bg-muted/70 text-muted-foreground/90 px-2.5 py-1 rounded-md ml-2",children:["ID:",c]})]}),d.jsxs("div",{className:"flex items-baseline justify-between gap-2 pt-1",children:[d.jsx("div",{className:"text-3xl font-bold text-foreground tracking-tight leading-none",children:d.jsx(Ut,{value:u})}),d.jsxs("div",{className:H("text-right flex flex-col items-end flex-shrink-0",w),children:[d.jsxs("div",{className:"text-base font-medium",children:[" ",h!==0?d.jsx(Ut,{value:h,showSign:!0}):d.jsx("span",{children:"—"})]}),d.jsxs("span",{className:"text-sm opacity-90 mt-0.5",children:["(",Cn(p,2),"%)"]})]})]})]})})},c)})]})};function Mx(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Ok(...t){return e=>{let n=!1;const r=t.map(i=>{const s=Mx(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():Mx(t[i],null)}}}}function Te(...t){return y.useCallback(Ok(...t),t)}var rs=y.forwardRef((t,e)=>{const{children:n,...r}=t,i=y.Children.toArray(n),s=i.find(OL);if(s){const o=s.props.children,l=i.map(a=>a===s?y.Children.count(o)>1?y.Children.only(null):y.isValidElement(o)?o.props.children:null:a);return d.jsx(jp,{...r,ref:e,children:y.isValidElement(o)?y.cloneElement(o,void 0,l):null})}return d.jsx(jp,{...r,ref:e,children:n})});rs.displayName="Slot";var jp=y.forwardRef((t,e)=>{const{children:n,...r}=t;if(y.isValidElement(n)){const i=zL(n),s=LL(r,n.props);return n.type!==y.Fragment&&(s.ref=e?Ok(e,i):i),y.cloneElement(n,s)}return y.Children.count(n)>1?y.Children.only(null):null});jp.displayName="SlotClone";var Lk=({children:t})=>d.jsx(d.Fragment,{children:t});function OL(t){return y.isValidElement(t)&&t.type===Lk}function LL(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...l)=>{s(...l),i(...l)}:i&&(n[r]=i):r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}function zL(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}const Rx=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Ix=Nk,yg=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return Ix(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const u=n==null?void 0:n[c],h=s==null?void 0:s[c];if(u===null)return null;const f=Rx(u)||Rx(h);return i[c][f]}),l=n&&Object.entries(n).reduce((c,u)=>{let[h,f]=u;return f===void 0||(c[h]=f),c},{}),a=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,u)=>{let{class:h,className:f,...p}=u;return Object.entries(p).every(g=>{let[m,w]=g;return Array.isArray(w)?w.includes({...s,...l}[m]):{...s,...l}[m]===w})?[...c,h,f]:c},[]);return Ix(t,o,a,n==null?void 0:n.class,n==null?void 0:n.className)},Ca=yg("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",success:"bg-success text-success-foreground hover:bg-success/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ce=y.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},s)=>{const o=r?rs:"button";return d.jsx(o,{className:H(Ca({variant:e,size:n,className:t})),ref:s,...i})});ce.displayName="Button";const DL="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='lucide%20lucide-landmark'%3e%3cline%20x1='3'%20x2='21'%20y1='22'%20y2='22'/%3e%3cline%20x1='6'%20x2='6'%20y1='18'%20y2='11'/%3e%3cline%20x1='10'%20x2='10'%20y1='18'%20y2='11'/%3e%3cline%20x1='14'%20x2='14'%20y1='18'%20y2='11'/%3e%3cline%20x1='18'%20x2='18'%20y1='18'%20y2='11'/%3e%3cpolygon%20points='12%202%2020%207%204%207'/%3e%3c/svg%3e",zk=({logoUrl:t,ticker:e,className:n="h-8 w-8 rounded-full"})=>{const[r,i]=Me.useState(!1),s=()=>{i(!0)};return Me.useEffect(()=>{i(!1)},[t]),r||!t?d.jsx("img",{src:DL,alt:e||"Asset",className:`${n} object-contain p-1 bg-muted border border-border`}):d.jsx("img",{src:t,alt:e||"Asset Logo",className:`${n} object-cover`,onError:s,loading:"lazy"})},gd=({asset:t,showLotSize:e=!0,className:n,nameClassName:r="text-sm font-medium",tickerClassName:i="text-xs",iconClassName:s="h-8 w-8 rounded-full flex-shrink-0"})=>{if(!t)return d.jsxs("div",{className:H("flex items-center space-x-2 animate-pulse",n),children:[d.jsx("div",{className:H("bg-muted",s)}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("div",{className:"h-3 w-24 rounded bg-muted"}),d.jsx("div",{className:"h-2.5 w-16 rounded bg-muted"})]})]});const o=vg(t);return d.jsxs("div",{className:H("flex items-center space-x-2 min-w-0",n),children:[d.jsx(zk,{logoUrl:t.logoUrl,ticker:t.ticker,className:s}),d.jsxs("div",{className:"overflow-hidden min-w-0",children:[d.jsx("p",{className:H("font-medium",r),title:t.title||t.shortName||t.ticker,children:o}),d.jsxs("p",{className:H("text-muted-foreground uppercase",i),children:[t.ticker,e&&t.lotSize>1&&d.jsxs("span",{className:"ml-1 normal-case opacity-70",children:["× ",Cn(t.lotSize,0)]})]})]})]})},$L=({item:t,currentPriceInfo:e})=>{const n=ft();if(!t||!t.asset)return d.jsx("div",{className:"p-4 text-muted-foreground",children:"Ошибка: Неверные данные элемента портфеля."});const{asset:r,quantity:i,averagePriceCopecks:s}=t,o=e?Math.round(e.price*100):null,l=o!==null?o*i:null,a=s!==null?s*i:null,c=l!==null&&a!==null&&a>0?l-a:null,u=a&&a>0&&c!==null?c/a*100:null,h=c!==null&&c>0,f=c!==null&&c<0,p=h?"text-success":f?"text-destructive":"text-muted-foreground",g=()=>{r.id&&n(`/asset/${r.id}`)};return d.jsxs("div",{className:"flex items-center justify-between p-2 space-x-3 cursor-pointer hover:bg-muted/50 transition-colors",onClick:g,role:"button",tabIndex:0,onKeyDown:m=>(m.key==="Enter"||m.key===" ")&&g(),children:[d.jsx(gd,{asset:r,showLotSize:!1,className:"flex-grow min-w-0",iconClassName:"h-8 w-8 rounded-full flex-shrink-0"}),d.jsxs("div",{className:"text-right flex-shrink-0 ml-2 min-w-[90px]",children:[l!==null?d.jsx(Ut,{value:l,className:"text-sm font-medium tabular-nums-font"}):e===void 0?d.jsx(Ne,{size:"sm"}):d.jsx("span",{className:"text-xs text-muted-foreground",children:"—"}),c!==null?d.jsxs("div",{className:H("text-xs tabular-nums-font mt-0.5",p),children:[d.jsx(Ut,{value:c,showSign:!0,placeholder:xr(0)}),u!==null&&u!==0&&d.jsxs("span",{className:"ml-1 opacity-80",children:["(",Cn(u,1),"%)"]})]}):l!==null&&d.jsxs("p",{className:"text-xs text-muted-foreground mt-0.5 tabular-nums-font",children:[xr(0)," (0%)"]})]})]})};function FL(t,e){const n=y.createContext(e),r=s=>{const{children:o,...l}=s,a=y.useMemo(()=>l,Object.values(l));return d.jsx(n.Provider,{value:a,children:o})};r.displayName=t+"Provider";function i(s){const o=y.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${t}\``)}return[r,i]}function Mt(t,e=[]){let n=[];function r(s,o){const l=y.createContext(o),a=n.length;n=[...n,o];const c=h=>{var v;const{scope:f,children:p,...g}=h,m=((v=f==null?void 0:f[t])==null?void 0:v[a])||l,w=y.useMemo(()=>g,Object.values(g));return d.jsx(m.Provider,{value:w,children:p})};c.displayName=s+"Provider";function u(h,f){var m;const p=((m=f==null?void 0:f[t])==null?void 0:m[a])||l,g=y.useContext(p);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[c,u]}const i=()=>{const s=n.map(o=>y.createContext(o));return function(l){const a=(l==null?void 0:l[t])||s;return y.useMemo(()=>({[`__scope${t}`]:{...l,[t]:a}}),[l,a])}};return i.scopeName=t,[r,BL(i,...e)]}function BL(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((l,{useScope:a,scopeName:c})=>{const h=a(s)[`__scope${c}`];return{...l,...h}},{});return y.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function vd(t){const e=t+"CollectionProvider",[n,r]=Mt(e),[i,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:g,children:m}=p,w=Me.useRef(null),v=Me.useRef(new Map).current;return d.jsx(i,{scope:g,itemMap:v,collectionRef:w,children:m})};o.displayName=e;const l=t+"CollectionSlot",a=Me.forwardRef((p,g)=>{const{scope:m,children:w}=p,v=s(l,m),x=Te(g,v.collectionRef);return d.jsx(rs,{ref:x,children:w})});a.displayName=l;const c=t+"CollectionItemSlot",u="data-radix-collection-item",h=Me.forwardRef((p,g)=>{const{scope:m,children:w,...v}=p,x=Me.useRef(null),b=Te(g,x),S=s(c,m);return Me.useEffect(()=>(S.itemMap.set(x,{ref:x,...v}),()=>void S.itemMap.delete(x))),d.jsx(rs,{[u]:"",ref:b,children:w})});h.displayName=c;function f(p){const g=s(t+"CollectionConsumer",p);return Me.useCallback(()=>{const w=g.collectionRef.current;if(!w)return[];const v=Array.from(w.querySelectorAll(`[${u}]`));return Array.from(g.itemMap.values()).sort((S,k)=>v.indexOf(S.ref.current)-v.indexOf(k.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:a,ItemSlot:h},f,r]}function ae(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Tt(t){const e=y.useRef(t);return y.useEffect(()=>{e.current=t}),y.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function gn({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=VL({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:r,l=Tt(n),a=y.useCallback(c=>{if(s){const h=typeof c=="function"?c(t):c;h!==t&&l(h)}else i(c)},[s,t,i,l]);return[o,a]}function VL({defaultProp:t,onChange:e}){const n=y.useState(t),[r]=n,i=y.useRef(r),s=Tt(e);return y.useEffect(()=>{i.current!==r&&(s(r),i.current=r)},[r,i,s]),n}var UL=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],le=UL.reduce((t,e)=>{const n=y.forwardRef((r,i)=>{const{asChild:s,...o}=r,l=s?rs:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(l,{...o,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function Dk(t,e){t&&fs.flushSync(()=>t.dispatchEvent(e))}var st=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{};function WL(t,e){return y.useReducer((n,r)=>e[n][r]??n,t)}var Dr=t=>{const{present:e,children:n}=t,r=HL(e),i=typeof n=="function"?n({present:r.isPresent}):y.Children.only(n),s=Te(r.ref,qL(i));return typeof n=="function"||r.isPresent?y.cloneElement(i,{ref:s}):null};Dr.displayName="Presence";function HL(t){const[e,n]=y.useState(),r=y.useRef({}),i=y.useRef(t),s=y.useRef("none"),o=t?"mounted":"unmounted",[l,a]=WL(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const c=Xa(r.current);s.current=l==="mounted"?c:"none"},[l]),st(()=>{const c=r.current,u=i.current;if(u!==t){const f=s.current,p=Xa(c);t?a("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?a("UNMOUNT"):a(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,a]),st(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,h=p=>{const m=Xa(r.current).includes(p.animationName);if(p.target===e&&m&&(a("ANIMATION_END"),!i.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},f=p=>{p.target===e&&(s.current=Xa(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else a("ANIMATION_END")},[e,a]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:y.useCallback(c=>{c&&(r.current=getComputedStyle(c)),n(c)},[])}}function Xa(t){return(t==null?void 0:t.animationName)||"none"}function qL(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var KL=eb.useId||(()=>{}),YL=0;function Jn(t){const[e,n]=y.useState(KL());return st(()=>{n(r=>r??String(YL++))},[t]),e?`radix-${e}`:""}var xg="Collapsible",[GL,$k]=Mt(xg),[ZL,wg]=GL(xg),Fk=y.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:s,onOpenChange:o,...l}=t,[a=!1,c]=gn({prop:r,defaultProp:i,onChange:o});return d.jsx(ZL,{scope:n,disabled:s,contentId:Jn(),open:a,onOpenToggle:y.useCallback(()=>c(u=>!u),[c]),children:d.jsx(le.div,{"data-state":Sg(a),"data-disabled":s?"":void 0,...l,ref:e})})});Fk.displayName=xg;var Bk="CollapsibleTrigger",Vk=y.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,i=wg(Bk,n);return d.jsx(le.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":Sg(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:e,onClick:ae(t.onClick,i.onOpenToggle)})});Vk.displayName=Bk;var bg="CollapsibleContent",Uk=y.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=wg(bg,t.__scopeCollapsible);return d.jsx(Dr,{present:n||i.open,children:({present:s})=>d.jsx(XL,{...r,ref:e,present:s})})});Uk.displayName=bg;var XL=y.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:i,...s}=t,o=wg(bg,n),[l,a]=y.useState(r),c=y.useRef(null),u=Te(e,c),h=y.useRef(0),f=h.current,p=y.useRef(0),g=p.current,m=o.open||l,w=y.useRef(m),v=y.useRef(void 0);return y.useEffect(()=>{const x=requestAnimationFrame(()=>w.current=!1);return()=>cancelAnimationFrame(x)},[]),st(()=>{const x=c.current;if(x){v.current=v.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const b=x.getBoundingClientRect();h.current=b.height,p.current=b.width,w.current||(x.style.transitionDuration=v.current.transitionDuration,x.style.animationName=v.current.animationName),a(r)}},[o.open,r]),d.jsx(le.div,{"data-state":Sg(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!m,...s,ref:u,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":g?`${g}px`:void 0,...t.style},children:m&&i})});function Sg(t){return t?"open":"closed"}var QL=Fk,JL=Vk,ez=Uk,tz=y.createContext(void 0);function Ea(t){const e=y.useContext(tz);return t||e||"ltr"}var $r="Accordion",nz=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[kg,rz,iz]=vd($r),[yd,H9]=Mt($r,[iz,$k]),Cg=$k(),Wk=Me.forwardRef((t,e)=>{const{type:n,...r}=t,i=r,s=r;return d.jsx(kg.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?d.jsx(az,{...s,ref:e}):d.jsx(lz,{...i,ref:e})})});Wk.displayName=$r;var[Hk,sz]=yd($r),[qk,oz]=yd($r,{collapsible:!1}),lz=Me.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},collapsible:s=!1,...o}=t,[l,a]=gn({prop:n,defaultProp:r,onChange:i});return d.jsx(Hk,{scope:t.__scopeAccordion,value:l?[l]:[],onItemOpen:a,onItemClose:Me.useCallback(()=>s&&a(""),[s,a]),children:d.jsx(qk,{scope:t.__scopeAccordion,collapsible:s,children:d.jsx(Kk,{...o,ref:e})})})}),az=Me.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...s}=t,[o=[],l]=gn({prop:n,defaultProp:r,onChange:i}),a=Me.useCallback(u=>l((h=[])=>[...h,u]),[l]),c=Me.useCallback(u=>l((h=[])=>h.filter(f=>f!==u)),[l]);return d.jsx(Hk,{scope:t.__scopeAccordion,value:o,onItemOpen:a,onItemClose:c,children:d.jsx(qk,{scope:t.__scopeAccordion,collapsible:!0,children:d.jsx(Kk,{...s,ref:e})})})}),[cz,xd]=yd($r),Kk=Me.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:i,orientation:s="vertical",...o}=t,l=Me.useRef(null),a=Te(l,e),c=rz(n),h=Ea(i)==="ltr",f=ae(t.onKeyDown,p=>{var P;if(!nz.includes(p.key))return;const g=p.target,m=c().filter(O=>{var A;return!((A=O.ref.current)!=null&&A.disabled)}),w=m.findIndex(O=>O.ref.current===g),v=m.length;if(w===-1)return;p.preventDefault();let x=w;const b=0,S=v-1,k=()=>{x=w+1,x>S&&(x=b)},C=()=>{x=w-1,x<b&&(x=S)};switch(p.key){case"Home":x=b;break;case"End":x=S;break;case"ArrowRight":s==="horizontal"&&(h?k():C());break;case"ArrowDown":s==="vertical"&&k();break;case"ArrowLeft":s==="horizontal"&&(h?C():k());break;case"ArrowUp":s==="vertical"&&C();break}const _=x%v;(P=m[_].ref.current)==null||P.focus()});return d.jsx(cz,{scope:n,disabled:r,direction:i,orientation:s,children:d.jsx(kg.Slot,{scope:n,children:d.jsx(le.div,{...o,"data-orientation":s,ref:a,onKeyDown:r?void 0:f})})})}),Cu="AccordionItem",[uz,Eg]=yd(Cu),Yk=Me.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...i}=t,s=xd(Cu,n),o=sz(Cu,n),l=Cg(n),a=Jn(),c=r&&o.value.includes(r)||!1,u=s.disabled||t.disabled;return d.jsx(uz,{scope:n,open:c,disabled:u,triggerId:a,children:d.jsx(QL,{"data-orientation":s.orientation,"data-state":eC(c),...l,...i,ref:e,disabled:u,open:c,onOpenChange:h=>{h?o.onItemOpen(r):o.onItemClose(r)}})})});Yk.displayName=Cu;var Gk="AccordionHeader",Zk=Me.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=xd($r,n),s=Eg(Gk,n);return d.jsx(le.h3,{"data-orientation":i.orientation,"data-state":eC(s.open),"data-disabled":s.disabled?"":void 0,...r,ref:e})});Zk.displayName=Gk;var Ap="AccordionTrigger",Xk=Me.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=xd($r,n),s=Eg(Ap,n),o=oz(Ap,n),l=Cg(n);return d.jsx(kg.ItemSlot,{scope:n,children:d.jsx(JL,{"aria-disabled":s.open&&!o.collapsible||void 0,"data-orientation":i.orientation,id:s.triggerId,...l,...r,ref:e})})});Xk.displayName=Ap;var Qk="AccordionContent",Jk=Me.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=xd($r,n),s=Eg(Qk,n),o=Cg(n);return d.jsx(ez,{role:"region","aria-labelledby":s.triggerId,"data-orientation":i.orientation,...o,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});Jk.displayName=Qk;function eC(t){return t?"open":"closed"}var dz=Wk,hz=Yk,fz=Zk,tC=Xk,nC=Jk;const pz=dz,rC=y.forwardRef(({className:t,...e},n)=>d.jsx(hz,{ref:n,className:H("",t),...e}));rC.displayName="AccordionItem";const iC=y.forwardRef(({className:t,children:e,...n},r)=>d.jsx(fz,{className:"flex",children:d.jsx(tC,{ref:r,className:H("flex flex-1 items-center justify-between font-medium transition-all",t),...n,children:e})}));iC.displayName=tC.displayName;const sC=y.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(nC,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:[d.jsx("div",{className:H("",t),children:e})," "]}));sC.displayName=nC.displayName;const ll="Валюта и металлы",mz="Акции",gz="Фонды",vz="Облигации",Ox="Прочее",yz=(t,e,n)=>{const r={};t.forEach(a=>{if(!a.asset)return;const c=a.asset.assetTypeId,u=a.asset.ticker;let h=Ox;if(u==="RUB")h=ll;else if(c){const g=e.get(c);g&&(g.id===1||g.id===2||g.title==="currency"||g.title==="currency_pair"?h=ll:g.id===3||g.title==="stock"?h=mz:g.id===4||g.title==="fund_share"?h=gz:g.id===5||g.title==="bond"?h=vz:h=g.description||Ox)}r[h]||(r[h]={items:[],groupTotalValue:0}),r[h].items.push(a);const f=n.get(a.asset.ticker),p=a.quantity||0;if(u==="RUB")h===ll&&(r[h].groupTotalValue+=p);else if(f&&p>0){const m=f.price*100*p;r[h].groupTotalValue+=m}}),Object.keys(r).forEach(a=>{r[a].items.sort((c,u)=>{var p,g;if(c.asset.ticker==="RUB")return-1;if(u.asset.ticker==="RUB")return 1;const h=(((p=n.get(c.asset.ticker))==null?void 0:p.price)??0)*100*(c.quantity??0);return(((g=n.get(u.asset.ticker))==null?void 0:g.price)??0)*100*(u.quantity??0)-h})});const i=Object.entries(r);let s;const o=[];i.forEach(a=>{a[0]===ll?s=a:o.push(a)}),o.sort(([,a],[,c])=>c.groupTotalValue-a.groupTotalValue);const l=[];return s&&l.push(s),l.push(...o),l},xz=({portfolioItems:t,assetTypesMap:e,prices:n,isPriceLoading:r,priceError:i})=>{const s=y.useMemo(()=>yz(t,e,n),[t,e,n]),o=t.length>0;return d.jsxs("div",{className:"space-y-3",children:[i&&d.jsx(xt,{message:`Ошибка загрузки цен: ${i}`,className:"mx-4 mb-3"}),!i&&!o&&!r&&d.jsx("p",{className:"p-4 pt-10 text-center text-muted-foreground",children:"На счете нет активов."}),!i&&s.length>0&&d.jsx(pz,{type:"multiple",defaultValue:s.map(([l])=>l),className:"w-full space-y-3",children:s.map(([l,a])=>{const{items:c,groupTotalValue:u}=a,h=l!==ll||c.some(f=>{var p;return((p=f.asset)==null?void 0:p.ticker)!=="RUB"});return c.length===0?null:d.jsx(Nt,{className:"border border-border/60 rounded-lg shadow-sm overflow-hidden",children:d.jsxs(rC,{value:l,className:"border-none",children:[d.jsx(iC,{className:H("px-4 py-3 text-sm font-medium border-b cursor-pointer","hover:bg-muted/30 active:bg-muted/50","data-[state=open]:bg-muted/20"),children:d.jsxs("div",{className:"flex justify-between items-center w-full",children:[d.jsx("span",{className:"text-base font-medium",children:l}),h&&d.jsx("div",{className:"text-right flex-shrink-0",children:d.jsx(Ut,{value:u,className:"text-base font-medium"})})]})}),d.jsx(sC,{className:"p-0",children:d.jsx("div",{className:"divide-y divide-border",children:c.map(f=>{var p;return((p=f.asset)==null?void 0:p.ticker)==="RUB"?d.jsxs("div",{className:"flex items-center justify-between p-2 space-x-3",children:[d.jsx(gd,{asset:f.asset,showLotSize:!1,className:"flex-grow min-w-0",iconClassName:"h-8 w-8 rounded-full flex-shrink-0",nameClassName:"text-sm font-medium",tickerClassName:"text-xs"}),d.jsx("div",{className:"text-right flex-shrink-0 ml-2",children:d.jsx(Ut,{value:f.quantity,className:"text-base font-medium"})})]},f.id):f.asset&&d.jsx($L,{item:f,currentPriceInfo:n.get(f.asset.ticker)},f.id)})})})]})},l)})}),r&&o&&d.jsx("div",{className:"flex justify-center p-4",children:d.jsx(Ne,{size:"sm"})})]})};var Uw;const Pe=typeof window<"u"?(Uw=window.Telegram)==null?void 0:Uw.WebApp:void 0;function Dn(){var n,r;return{onClose:()=>{Pe==null||Pe.close()},onToggleButton:()=>{Pe!=null&&Pe.MainButton.isVisible?Pe==null||Pe.MainButton.hide():Pe==null||Pe.MainButton.show()},tg:Pe,user:(n=Pe==null?void 0:Pe.initDataUnsafe)==null?void 0:n.user,initDataUnsafe:Pe==null?void 0:Pe.initDataUnsafe,initData:Pe==null?void 0:Pe.initData,queryId:(r=Pe==null?void 0:Pe.initDataUnsafe)==null?void 0:r.query_id,themeParams:Pe==null?void 0:Pe.themeParams,colorScheme:Pe==null?void 0:Pe.colorScheme}}const wz=()=>{const{accountId:t}=ms(),e=Number(t),n=ft(),{accounts:r,isLoading:i,error:s}=nr(),{prices:o,isPriceLoading:l,priceError:a,getAccountTotals:c}=Ik(),[u,h]=y.useState(new Map),[f,p]=y.useState(!0),[g,m]=y.useState(null),{tg:w}=Dn(),v=y.useMemo(()=>{if(!(!r||!e))return r.find(O=>{var A;return((A=O.brokerAccount)==null?void 0:A.id)===e})},[r,e]),{totalValue:x,totalProfitLoss:b}=y.useMemo(()=>!e||!c?{totalValue:0,totalProfitLoss:0}:c(e),[e,c]);if(y.useEffect(()=>{let O=!0;return p(!0),m(null),uk().then(A=>{O&&(A.isSuccess&&A.resultObject?h(new Map(A.resultObject.map(T=>[T.id,T]))):(console.error("Failed to load types:",A.errorMessage),m(A.errorMessage||"Failed to load asset categories.")))}).catch(A=>{O&&(console.error("Error loading types",A),m(A.message||"Error fetching asset categories."))}).finally(()=>{O&&p(!1)}),()=>{O=!1}},[]),y.useEffect(()=>{const O=()=>n("/portfolio");return w&&(w.BackButton.show(),w.onEvent("backButtonClicked",O)),()=>{w&&(w.BackButton.hide(),w.offEvent("backButtonClicked",O))}},[w,n]),i||f)return d.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-10rem)]",children:d.jsx(Ne,{size:"lg"})});if(s)return d.jsx("div",{className:"p-4",children:d.jsx(xt,{message:`Ошибка загрузки данных портфеля: ${s}`})});if(g)return d.jsx("div",{className:"p-4",children:d.jsx(xt,{message:`Ошибка загрузки типов активов: ${g}`})});if(!(v!=null&&v.brokerAccount))return d.jsxs("div",{className:"p-4 text-center",children:[" ",d.jsx(xt,{message:`Счёт с ID ${e} не найден.`})," ",d.jsxs(ce,{variant:"outline",onClick:()=>n("/portfolio"),className:"mt-4",children:[d.jsx(Et,{className:"mr-2 h-4 w-4"})," К списку счетов"]})," "]});let k=0;v.portfolioItems&&v.portfolioItems.forEach(O=>{var A;((A=O.asset)==null?void 0:A.ticker)!=="RUB"&&O.averagePriceCopecks&&O.averagePriceCopecks>0&&O.quantity&&O.quantity>0&&(k+=O.averagePriceCopecks*O.quantity)});const C=k>0?b/k*100:0,_=b>0?"text-success":b<0?"text-destructive":"text-muted-foreground",P=(v.brokerAccount.title||`Счет #${e}`).replace(/["«»]/g,"");return d.jsxs("div",{className:"p-4 space-y-3 pb-20",children:[d.jsxs("div",{className:"bg-card p-4 rounded-lg shadow-sm space-y-2",children:[d.jsxs("div",{className:"flex justify-between items-start mb-2",children:[d.jsxs("div",{className:"flex flex-col text-left",children:[" ",d.jsxs("h2",{className:"text-2xl font-semibold leading-tight",children:[P," "]}),d.jsx("span",{className:"text-base text-muted-foreground leading-snug",children:v.brokerAccount.telegramUserId||"ID не найден"})]}),d.jsxs(ce,{variant:"outline",onClick:()=>n(`/portfolio/${e}/operations`),className:H("flex items-center gap-1.5 min-w-[100px] h-9 px-3 py-1.5","text-sm font-medium rounded-xl","border border-border bg-background hover:bg-muted/50 shadow-sm","flex-shrink-0"),children:[d.jsx(RO,{className:"h-4 w-4"}),"Операции"]})]}),d.jsxs("div",{className:"flex items-baseline justify-between gap-2",children:[d.jsxs("div",{className:"text-3xl font-bold",children:[d.jsx(Ut,{value:x}),l&&d.jsx(Ne,{size:"sm"})]}),d.jsxs("div",{className:H("text-right flex flex-col items-end",_),children:[d.jsx("div",{className:"text-base font-medium",children:d.jsx(Ut,{value:b,showSign:!0})}),b!==0&&k>0&&d.jsxs("span",{className:"text-sm opacity-90",children:["(",Cn(C,2),"%)"]})]})]})]}),d.jsx(xz,{portfolioItems:v.portfolioItems||[],assetTypesMap:u,prices:o,isPriceLoading:l,priceError:a})]})},oC=y.forwardRef(({className:t,...e},n)=>d.jsx("div",{className:"relative w-full",children:d.jsx("table",{ref:n,className:H("w-full caption-bottom text-sm",t),...e})}));oC.displayName="Table";const lC=y.forwardRef(({className:t,...e},n)=>d.jsx("thead",{ref:n,className:H("[&_tr]:border-b",t),...e}));lC.displayName="TableHeader";const aC=y.forwardRef(({className:t,...e},n)=>d.jsx("tbody",{ref:n,className:H("[&_tr:last-child]:border-0",t),...e}));aC.displayName="TableBody";const bz=y.forwardRef(({className:t,...e},n)=>d.jsx("tfoot",{ref:n,className:H("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));bz.displayName="TableFooter";const Qs=y.forwardRef(({className:t,...e},n)=>d.jsx("tr",{ref:n,className:H("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));Qs.displayName="TableRow";const kr=y.forwardRef(({className:t,...e},n)=>d.jsx("th",{ref:n,className:H("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));kr.displayName="TableHead";const _s=y.forwardRef(({className:t,...e},n)=>d.jsx("td",{ref:n,className:H("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));_s.displayName="TableCell";const Sz=y.forwardRef(({className:t,...e},n)=>d.jsx("caption",{ref:n,className:H("mt-4 text-sm text-muted-foreground",t),...e}));Sz.displayName="TableCaption";var cC={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(tr,function(){var n={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(r,i,s){var o=i.prototype,l=o.format;s.en.formats=n,o.format=function(a){a===void 0&&(a="YYYY-MM-DDTHH:mm:ssZ");var c=this.$locale().formats,u=function(h,f){return h.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(p,g,m){var w=m&&m.toUpperCase();return g||f[m]||n[m]||f[w].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(v,x,b){return x||b.slice(1)})})}(a,c===void 0?{}:c);return l.call(this,u)}}})})(cC);var kz=cC.exports;const Cz=lr(kz);var Ez={exports:{}};(function(t,e){(function(n,r){t.exports=r(rk)})(tr,function(n){function r(g){return g&&typeof g=="object"&&"default"in g?g:{default:g}}var i=r(n),s="января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),o="январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),l="янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),a="янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_"),c=/D[oD]?(\[[^[\]]*\]|\s)+MMMM?/;function u(g,m,w){var v,x;return w==="m"?m?"минута":"минуту":g+" "+(v=+g,x={mm:m?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"}[w].split("_"),v%10==1&&v%100!=11?x[0]:v%10>=2&&v%10<=4&&(v%100<10||v%100>=20)?x[1]:x[2])}var h=function(g,m){return c.test(m)?s[g.month()]:o[g.month()]};h.s=o,h.f=s;var f=function(g,m){return c.test(m)?l[g.month()]:a[g.month()]};f.s=a,f.f=l;var p={name:"ru",weekdays:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),weekdaysShort:"вск_пнд_втр_срд_чтв_птн_сбт".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),months:h,monthsShort:f,weekStart:1,yearStart:4,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., H:mm",LLLL:"dddd, D MMMM YYYY г., H:mm"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",m:u,mm:u,h:"час",hh:u,d:"день",dd:u,M:"месяц",MM:u,y:"год",yy:u},ordinal:function(g){return g},meridiem:function(g){return g<4?"ночи":g<12?"утра":g<17?"дня":"вечера"}};return i.default.locale(p,null,!0),p})})(Ez);Rn.extend(sk);Rn.extend(lk);Rn.extend(Cz);Rn.locale("ru");const _z=({operations:t})=>{const e=n=>n===0?"bg-green-500/5 dark:bg-green-900/10 hover:bg-green-500/10 dark:hover:bg-green-900/20":"bg-red-500/5 dark:bg-red-900/10 hover:bg-red-500/10 dark:hover:bg-red-900/20";return d.jsxs(oC,{className:"w-full",children:[d.jsx(lC,{className:"sticky top-0 bg-card z-10",children:d.jsxs(Qs,{className:"border-b border-border/10",children:[d.jsx(kr,{className:"pl-3 pr-1 py-2 text-xs text-muted-foreground font-normal text-left w-[60px]",children:"Дата"}),d.jsx(kr,{className:"pl-2 pr-1 py-2 text-xs text-muted-foreground font-normal text-left",children:"Актив"}),d.jsx(kr,{className:"px-1 py-2 text-xs text-muted-foreground font-normal text-right whitespace-nowrap w-[90px]",children:"Сумма"}),d.jsx(kr,{className:"pl-1 pr-3 py-2 text-xs text-muted-foreground font-normal text-right whitespace-nowrap w-[60px]",children:"Кол-во"})]})}),d.jsx(aC,{children:t.length===0?d.jsx(Qs,{children:d.jsx(_s,{colSpan:4,className:"text-center text-muted-foreground h-40 pt-10",children:"Операций не найдено"})}):t.map(n=>{const r=e(n.marketOperationType),s=n.marketOperationType===0?"text-success":"text-destructive",o=n.totalAssetCostCopecks;return d.jsxs(Qs,{className:H(r,"transition-colors duration-100"),children:[d.jsxs(_s,{className:"pl-3 pr-1 py-3 text-xs leading-snug text-muted-foreground align-middle text-left",children:[n.createdAt?Rn.utc(n.createdAt).tz("Europe/Moscow").format("DD MMM"):"—"," ",d.jsx("br",{}),n.createdAt?Rn.utc(n.createdAt).tz("Europe/Moscow").format("HH:mm"):""]}),d.jsx(_s,{className:"pl-2 pr-1 py-3 align-middle",children:n.asset?d.jsx(gd,{asset:n.asset,showLotSize:!1,iconClassName:"h-8 w-8 rounded-full flex-shrink-0"}):d.jsx("span",{className:"text-xs text-muted-foreground italic",children:"Актив не найден"})}),d.jsx(_s,{className:"text-right px-1 py-3 text-sm align-middle font-medium tabular-nums whitespace-nowrap",children:d.jsx(Ut,{value:o})}),d.jsx(_s,{className:H("text-right pl-1 pr-3 py-3 text-sm align-middle font-medium tabular-nums whitespace-nowrap",s),children:Cn(n.quantity,0)})]},n.id)})})]})},Nz=(t,e)=>{var r;if(!t||t.data===null||typeof t.data>"u"||typeof t.data.isSuccess!="boolean"){console.error("[API Helper] Invalid/Undefined Response Structure:",t);let i=e;return(t==null?void 0:t.data)===null?i="Received null data from server.":(r=t==null?void 0:t.data)!=null&&r.errorMessage?i=t.data.errorMessage:t!=null&&t.statusText&&(i=t.statusText),{isSuccess:!1,errorMessage:i,resultObject:null}}return t.data},Tz=(t,e)=>{var r,i;console.error(`[API Error Handler] ${e}:`,t);let n=e;return t instanceof Error?n=t.message:typeof t=="string"?n=t:t!=null&&t.response?n=`Request failed (${t.response.status}): ${((r=t.response.data)==null?void 0:r.errorMessage)||((i=t.response.data)==null?void 0:i.title)||t.response.statusText||"Server error"}`:t!=null&&t.request?n="No response received from server.":t!=null&&t.errorMessage&&(n=t.errorMessage),{isSuccess:!1,errorMessage:n,resultObject:null}},Pz=async t=>{const e="Failed to search market operations history.";try{const n=await at.post("/api/BrokerAccountUser/SearchMarketOperationsHistory",t),r=Nz(n,e);return r.isSuccess&&r.resultObject?r.resultObject.marketOperations=r.resultObject.marketOperations||[]:r.isSuccess&&!r.resultObject&&(console.warn("[API/History] searchMarketOperationsHistory success but resultObject is null. Normalizing."),r.resultObject={marketOperationHistorySearchParameters:t,foundCount:0,marketOperations:[]}),r}catch(n){return Tz(n,e)}};function Lx(t,[e,n]){return Math.min(n,Math.max(e,t))}function jz(t,e=globalThis==null?void 0:globalThis.document){const n=Tt(t);y.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var Az="DismissableLayer",Mp="dismissableLayer.update",Mz="dismissableLayer.pointerDownOutside",Rz="dismissableLayer.focusOutside",zx,uC=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),wd=y.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:l,...a}=t,c=y.useContext(uC),[u,h]=y.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=y.useState({}),g=Te(e,_=>h(_)),m=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=m.indexOf(w),x=u?m.indexOf(u):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,S=x>=v,k=Oz(_=>{const P=_.target,O=[...c.branches].some(A=>A.contains(P));!S||O||(i==null||i(_),o==null||o(_),_.defaultPrevented||l==null||l())},f),C=Lz(_=>{const P=_.target;[...c.branches].some(A=>A.contains(P))||(s==null||s(_),o==null||o(_),_.defaultPrevented||l==null||l())},f);return jz(_=>{x===c.layers.size-1&&(r==null||r(_),!_.defaultPrevented&&l&&(_.preventDefault(),l()))},f),y.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(zx=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),Dx(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=zx)}},[u,f,n,c]),y.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),Dx())},[u,c]),y.useEffect(()=>{const _=()=>p({});return document.addEventListener(Mp,_),()=>document.removeEventListener(Mp,_)},[]),d.jsx(le.div,{...a,ref:g,style:{pointerEvents:b?S?"auto":"none":void 0,...t.style},onFocusCapture:ae(t.onFocusCapture,C.onFocusCapture),onBlurCapture:ae(t.onBlurCapture,C.onBlurCapture),onPointerDownCapture:ae(t.onPointerDownCapture,k.onPointerDownCapture)})});wd.displayName=Az;var Iz="DismissableLayerBranch",dC=y.forwardRef((t,e)=>{const n=y.useContext(uC),r=y.useRef(null),i=Te(e,r);return y.useEffect(()=>{const s=r.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),d.jsx(le.div,{...t,ref:i})});dC.displayName=Iz;function Oz(t,e=globalThis==null?void 0:globalThis.document){const n=Tt(t),r=y.useRef(!1),i=y.useRef(()=>{});return y.useEffect(()=>{const s=l=>{if(l.target&&!r.current){let a=function(){hC(Mz,n,c,{discrete:!0})};const c={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=a,e.addEventListener("click",i.current,{once:!0})):a()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Lz(t,e=globalThis==null?void 0:globalThis.document){const n=Tt(t),r=y.useRef(!1);return y.useEffect(()=>{const i=s=>{s.target&&!r.current&&hC(Rz,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Dx(){const t=new CustomEvent(Mp);document.dispatchEvent(t)}function hC(t,e,n,{discrete:r}){const i=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?Dk(i,s):i.dispatchEvent(s)}var zz=wd,Dz=dC,Rh=0;function fC(){y.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??$x()),document.body.insertAdjacentElement("beforeend",t[1]??$x()),Rh++,()=>{Rh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Rh--}},[])}function $x(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Ih="focusScope.autoFocusOnMount",Oh="focusScope.autoFocusOnUnmount",Fx={bubbles:!1,cancelable:!0},$z="FocusScope",_g=y.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...o}=t,[l,a]=y.useState(null),c=Tt(i),u=Tt(s),h=y.useRef(null),f=Te(e,m=>a(m)),p=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(r){let m=function(b){if(p.paused||!l)return;const S=b.target;l.contains(S)?h.current=S:Yr(h.current,{select:!0})},w=function(b){if(p.paused||!l)return;const S=b.relatedTarget;S!==null&&(l.contains(S)||Yr(h.current,{select:!0}))},v=function(b){if(document.activeElement===document.body)for(const k of b)k.removedNodes.length>0&&Yr(l)};document.addEventListener("focusin",m),document.addEventListener("focusout",w);const x=new MutationObserver(v);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",w),x.disconnect()}}},[r,l,p.paused]),y.useEffect(()=>{if(l){Vx.add(p);const m=document.activeElement;if(!l.contains(m)){const v=new CustomEvent(Ih,Fx);l.addEventListener(Ih,c),l.dispatchEvent(v),v.defaultPrevented||(Fz(Hz(pC(l)),{select:!0}),document.activeElement===m&&Yr(l))}return()=>{l.removeEventListener(Ih,c),setTimeout(()=>{const v=new CustomEvent(Oh,Fx);l.addEventListener(Oh,u),l.dispatchEvent(v),v.defaultPrevented||Yr(m??document.body,{select:!0}),l.removeEventListener(Oh,u),Vx.remove(p)},0)}}},[l,c,u,p]);const g=y.useCallback(m=>{if(!n&&!r||p.paused)return;const w=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,v=document.activeElement;if(w&&v){const x=m.currentTarget,[b,S]=Bz(x);b&&S?!m.shiftKey&&v===S?(m.preventDefault(),n&&Yr(b,{select:!0})):m.shiftKey&&v===b&&(m.preventDefault(),n&&Yr(S,{select:!0})):v===x&&m.preventDefault()}},[n,r,p.paused]);return d.jsx(le.div,{tabIndex:-1,...o,ref:f,onKeyDown:g})});_g.displayName=$z;function Fz(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Yr(r,{select:e}),document.activeElement!==n)return}function Bz(t){const e=pC(t),n=Bx(e,t),r=Bx(e.reverse(),t);return[n,r]}function pC(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Bx(t,e){for(const n of t)if(!Vz(n,{upTo:e}))return n}function Vz(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Uz(t){return t instanceof HTMLInputElement&&"select"in t}function Yr(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Uz(t)&&e&&t.select()}}var Vx=Wz();function Wz(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=Ux(t,e),t.unshift(e)},remove(e){var n;t=Ux(t,e),(n=t[0])==null||n.resume()}}}function Ux(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Hz(t){return t.filter(e=>e.tagName!=="A")}const qz=["top","right","bottom","left"],xi=Math.min,Yt=Math.max,Eu=Math.round,Qa=Math.floor,er=t=>({x:t,y:t}),Kz={left:"right",right:"left",bottom:"top",top:"bottom"},Yz={start:"end",end:"start"};function Rp(t,e,n){return Yt(t,xi(e,n))}function Mr(t,e){return typeof t=="function"?t(e):t}function Rr(t){return t.split("-")[0]}function Ao(t){return t.split("-")[1]}function Ng(t){return t==="x"?"y":"x"}function Tg(t){return t==="y"?"height":"width"}function wi(t){return["top","bottom"].includes(Rr(t))?"y":"x"}function Pg(t){return Ng(wi(t))}function Gz(t,e,n){n===void 0&&(n=!1);const r=Ao(t),i=Pg(t),s=Tg(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=_u(o)),[o,_u(o)]}function Zz(t){const e=_u(t);return[Ip(t),e,Ip(e)]}function Ip(t){return t.replace(/start|end/g,e=>Yz[e])}function Xz(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function Qz(t,e,n,r){const i=Ao(t);let s=Xz(Rr(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(Ip)))),s}function _u(t){return t.replace(/left|right|bottom|top/g,e=>Kz[e])}function Jz(t){return{top:0,right:0,bottom:0,left:0,...t}}function mC(t){return typeof t!="number"?Jz(t):{top:t,right:t,bottom:t,left:t}}function Nu(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function Wx(t,e,n){let{reference:r,floating:i}=t;const s=wi(e),o=Pg(e),l=Tg(o),a=Rr(e),c=s==="y",u=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,f=r[l]/2-i[l]/2;let p;switch(a){case"top":p={x:u,y:r.y-i.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:h};break;case"left":p={x:r.x-i.width,y:h};break;default:p={x:r.x,y:r.y}}switch(Ao(e)){case"start":p[o]-=f*(n&&c?-1:1);break;case"end":p[o]+=f*(n&&c?-1:1);break}return p}const eD=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,l=s.filter(Boolean),a=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:h}=Wx(c,r,a),f=r,p={},g=0;for(let m=0;m<l.length;m++){const{name:w,fn:v}=l[m],{x,y:b,data:S,reset:k}=await v({x:u,y:h,initialPlacement:r,placement:f,strategy:i,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});u=x??u,h=b??h,p={...p,[w]:{...p[w],...S}},k&&g<=50&&(g++,typeof k=="object"&&(k.placement&&(f=k.placement),k.rects&&(c=k.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):k.rects),{x:u,y:h}=Wx(c,f,a)),m=-1)}return{x:u,y:h,placement:f,strategy:i,middlewareData:p}};async function oa(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:l,strategy:a}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=Mr(e,t),g=mC(p),w=l[f?h==="floating"?"reference":"floating":h],v=Nu(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(w)))==null||n?w:w.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:c,rootBoundary:u,strategy:a})),x=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),S=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},k=Nu(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:b,strategy:a}):x);return{top:(v.top-k.top+g.top)/S.y,bottom:(k.bottom-v.bottom+g.bottom)/S.y,left:(v.left-k.left+g.left)/S.x,right:(k.right-v.right+g.right)/S.x}}const tD=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:s,platform:o,elements:l,middlewareData:a}=e,{element:c,padding:u=0}=Mr(t,e)||{};if(c==null)return{};const h=mC(u),f={x:n,y:r},p=Pg(i),g=Tg(p),m=await o.getDimensions(c),w=p==="y",v=w?"top":"left",x=w?"bottom":"right",b=w?"clientHeight":"clientWidth",S=s.reference[g]+s.reference[p]-f[p]-s.floating[g],k=f[p]-s.reference[p],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let _=C?C[b]:0;(!_||!await(o.isElement==null?void 0:o.isElement(C)))&&(_=l.floating[b]||s.floating[g]);const P=S/2-k/2,O=_/2-m[g]/2-1,A=xi(h[v],O),T=xi(h[x],O),R=A,$=_-m[g]-T,M=_/2-m[g]/2+P,I=Rp(R,M,$),L=!a.arrow&&Ao(i)!=null&&M!==I&&s.reference[g]/2-(M<R?A:T)-m[g]/2<0,z=L?M<R?M-R:M-$:0;return{[p]:f[p]+z,data:{[p]:I,centerOffset:M-I-z,...L&&{alignmentOffset:z}},reset:L}}}),nD=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:l,platform:a,elements:c}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:m=!0,...w}=Mr(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=Rr(i),x=wi(l),b=Rr(l)===l,S=await(a.isRTL==null?void 0:a.isRTL(c.floating)),k=f||(b||!m?[_u(l)]:Zz(l)),C=g!=="none";!f&&C&&k.push(...Qz(l,m,g,S));const _=[l,...k],P=await oa(e,w),O=[];let A=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&O.push(P[v]),h){const M=Gz(i,o,S);O.push(P[M[0]],P[M[1]])}if(A=[...A,{placement:i,overflows:O}],!O.every(M=>M<=0)){var T,R;const M=(((T=s.flip)==null?void 0:T.index)||0)+1,I=_[M];if(I)return{data:{index:M,overflows:A},reset:{placement:I}};let L=(R=A.filter(z=>z.overflows[0]<=0).sort((z,j)=>z.overflows[1]-j.overflows[1])[0])==null?void 0:R.placement;if(!L)switch(p){case"bestFit":{var $;const z=($=A.filter(j=>{if(C){const D=wi(j.placement);return D===x||D==="y"}return!0}).map(j=>[j.placement,j.overflows.filter(D=>D>0).reduce((D,E)=>D+E,0)]).sort((j,D)=>j[1]-D[1])[0])==null?void 0:$[0];z&&(L=z);break}case"initialPlacement":L=l;break}if(i!==L)return{reset:{placement:L}}}return{}}}};function Hx(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function qx(t){return qz.some(e=>t[e]>=0)}const rD=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Mr(t,e);switch(r){case"referenceHidden":{const s=await oa(e,{...i,elementContext:"reference"}),o=Hx(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:qx(o)}}}case"escaped":{const s=await oa(e,{...i,altBoundary:!0}),o=Hx(s,n.floating);return{data:{escapedOffsets:o,escaped:qx(o)}}}default:return{}}}}};async function iD(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Rr(n),l=Ao(n),a=wi(n)==="y",c=["left","top"].includes(o)?-1:1,u=s&&a?-1:1,h=Mr(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:g}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof g=="number"&&(p=l==="end"?g*-1:g),a?{x:p*u,y:f*c}:{x:f*c,y:p*u}}const sD=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:l}=e,a=await iD(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+a.x,y:s+a.y,data:{...a,placement:o}}}}},oD=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:l={fn:w=>{let{x:v,y:x}=w;return{x:v,y:x}}},...a}=Mr(t,e),c={x:n,y:r},u=await oa(e,a),h=wi(Rr(i)),f=Ng(h);let p=c[f],g=c[h];if(s){const w=f==="y"?"top":"left",v=f==="y"?"bottom":"right",x=p+u[w],b=p-u[v];p=Rp(x,p,b)}if(o){const w=h==="y"?"top":"left",v=h==="y"?"bottom":"right",x=g+u[w],b=g-u[v];g=Rp(x,g,b)}const m=l.fn({...e,[f]:p,[h]:g});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[f]:s,[h]:o}}}}}},lD=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:l=0,mainAxis:a=!0,crossAxis:c=!0}=Mr(t,e),u={x:n,y:r},h=wi(i),f=Ng(h);let p=u[f],g=u[h];const m=Mr(l,e),w=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(a){const b=f==="y"?"height":"width",S=s.reference[f]-s.floating[b]+w.mainAxis,k=s.reference[f]+s.reference[b]-w.mainAxis;p<S?p=S:p>k&&(p=k)}if(c){var v,x;const b=f==="y"?"width":"height",S=["top","left"].includes(Rr(i)),k=s.reference[h]-s.floating[b]+(S&&((v=o.offset)==null?void 0:v[h])||0)+(S?0:w.crossAxis),C=s.reference[h]+s.reference[b]+(S?0:((x=o.offset)==null?void 0:x[h])||0)-(S?w.crossAxis:0);g<k?g=k:g>C&&(g=C)}return{[f]:p,[h]:g}}}},aD=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:l}=e,{apply:a=()=>{},...c}=Mr(t,e),u=await oa(e,c),h=Rr(i),f=Ao(i),p=wi(i)==="y",{width:g,height:m}=s.floating;let w,v;h==="top"||h==="bottom"?(w=h,v=f===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(v=h,w=f==="end"?"top":"bottom");const x=m-u.top-u.bottom,b=g-u.left-u.right,S=xi(m-u[w],x),k=xi(g-u[v],b),C=!e.middlewareData.shift;let _=S,P=k;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(P=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(_=x),C&&!f){const A=Yt(u.left,0),T=Yt(u.right,0),R=Yt(u.top,0),$=Yt(u.bottom,0);p?P=g-2*(A!==0||T!==0?A+T:Yt(u.left,u.right)):_=m-2*(R!==0||$!==0?R+$:Yt(u.top,u.bottom))}await a({...e,availableWidth:P,availableHeight:_});const O=await o.getDimensions(l.floating);return g!==O.width||m!==O.height?{reset:{rects:!0}}:{}}}};function bd(){return typeof window<"u"}function Mo(t){return gC(t)?(t.nodeName||"").toLowerCase():"#document"}function tn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function cr(t){var e;return(e=(gC(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function gC(t){return bd()?t instanceof Node||t instanceof tn(t).Node:!1}function In(t){return bd()?t instanceof Element||t instanceof tn(t).Element:!1}function sr(t){return bd()?t instanceof HTMLElement||t instanceof tn(t).HTMLElement:!1}function Kx(t){return!bd()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof tn(t).ShadowRoot}function _a(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=On(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function cD(t){return["table","td","th"].includes(Mo(t))}function Sd(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function jg(t){const e=Ag(),n=In(t)?On(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function uD(t){let e=bi(t);for(;sr(e)&&!wo(e);){if(jg(e))return e;if(Sd(e))return null;e=bi(e)}return null}function Ag(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function wo(t){return["html","body","#document"].includes(Mo(t))}function On(t){return tn(t).getComputedStyle(t)}function kd(t){return In(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function bi(t){if(Mo(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Kx(t)&&t.host||cr(t);return Kx(e)?e.host:e}function vC(t){const e=bi(t);return wo(e)?t.ownerDocument?t.ownerDocument.body:t.body:sr(e)&&_a(e)?e:vC(e)}function la(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=vC(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=tn(i);if(s){const l=Op(o);return e.concat(o,o.visualViewport||[],_a(i)?i:[],l&&n?la(l):[])}return e.concat(i,la(i,[],n))}function Op(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function yC(t){const e=On(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=sr(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,l=Eu(n)!==s||Eu(r)!==o;return l&&(n=s,r=o),{width:n,height:r,$:l}}function Mg(t){return In(t)?t:t.contextElement}function Js(t){const e=Mg(t);if(!sr(e))return er(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=yC(e);let o=(s?Eu(n.width):n.width)/r,l=(s?Eu(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const dD=er(0);function xC(t){const e=tn(t);return!Ag()||!e.visualViewport?dD:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function hD(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==tn(t)?!1:e}function is(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=Mg(t);let o=er(1);e&&(r?In(r)&&(o=Js(r)):o=Js(t));const l=hD(s,n,r)?xC(s):er(0);let a=(i.left+l.x)/o.x,c=(i.top+l.y)/o.y,u=i.width/o.x,h=i.height/o.y;if(s){const f=tn(s),p=r&&In(r)?tn(r):r;let g=f,m=Op(g);for(;m&&r&&p!==g;){const w=Js(m),v=m.getBoundingClientRect(),x=On(m),b=v.left+(m.clientLeft+parseFloat(x.paddingLeft))*w.x,S=v.top+(m.clientTop+parseFloat(x.paddingTop))*w.y;a*=w.x,c*=w.y,u*=w.x,h*=w.y,a+=b,c+=S,g=tn(m),m=Op(g)}}return Nu({width:u,height:h,x:a,y:c})}function Rg(t,e){const n=kd(t).scrollLeft;return e?e.left+n:is(cr(t)).left+n}function wC(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:Rg(t,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function fD(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=cr(r),l=e?Sd(e.floating):!1;if(r===o||l&&s)return n;let a={scrollLeft:0,scrollTop:0},c=er(1);const u=er(0),h=sr(r);if((h||!h&&!s)&&((Mo(r)!=="body"||_a(o))&&(a=kd(r)),sr(r))){const p=is(r);c=Js(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}const f=o&&!h&&!s?wC(o,a,!0):er(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-a.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-a.scrollTop*c.y+u.y+f.y}}function pD(t){return Array.from(t.getClientRects())}function mD(t){const e=cr(t),n=kd(t),r=t.ownerDocument.body,i=Yt(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Yt(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Rg(t);const l=-n.scrollTop;return On(r).direction==="rtl"&&(o+=Yt(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:l}}function gD(t,e){const n=tn(t),r=cr(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,l=0,a=0;if(i){s=i.width,o=i.height;const c=Ag();(!c||c&&e==="fixed")&&(l=i.offsetLeft,a=i.offsetTop)}return{width:s,height:o,x:l,y:a}}function vD(t,e){const n=is(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=sr(t)?Js(t):er(1),o=t.clientWidth*s.x,l=t.clientHeight*s.y,a=i*s.x,c=r*s.y;return{width:o,height:l,x:a,y:c}}function Yx(t,e,n){let r;if(e==="viewport")r=gD(t,n);else if(e==="document")r=mD(cr(t));else if(In(e))r=vD(e,n);else{const i=xC(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Nu(r)}function bC(t,e){const n=bi(t);return n===e||!In(n)||wo(n)?!1:On(n).position==="fixed"||bC(n,e)}function yD(t,e){const n=e.get(t);if(n)return n;let r=la(t,[],!1).filter(l=>In(l)&&Mo(l)!=="body"),i=null;const s=On(t).position==="fixed";let o=s?bi(t):t;for(;In(o)&&!wo(o);){const l=On(o),a=jg(o);!a&&l.position==="fixed"&&(i=null),(s?!a&&!i:!a&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||_a(o)&&!a&&bC(t,o))?r=r.filter(u=>u!==o):i=l,o=bi(o)}return e.set(t,r),r}function xD(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?Sd(e)?[]:yD(e,this._c):[].concat(n),r],l=o[0],a=o.reduce((c,u)=>{const h=Yx(e,u,i);return c.top=Yt(h.top,c.top),c.right=xi(h.right,c.right),c.bottom=xi(h.bottom,c.bottom),c.left=Yt(h.left,c.left),c},Yx(e,l,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function wD(t){const{width:e,height:n}=yC(t);return{width:e,height:n}}function bD(t,e,n){const r=sr(e),i=cr(e),s=n==="fixed",o=is(t,!0,s,e);let l={scrollLeft:0,scrollTop:0};const a=er(0);if(r||!r&&!s)if((Mo(e)!=="body"||_a(i))&&(l=kd(e)),r){const f=is(e,!0,s,e);a.x=f.x+e.clientLeft,a.y=f.y+e.clientTop}else i&&(a.x=Rg(i));const c=i&&!r&&!s?wC(i,l):er(0),u=o.left+l.scrollLeft-a.x-c.x,h=o.top+l.scrollTop-a.y-c.y;return{x:u,y:h,width:o.width,height:o.height}}function Lh(t){return On(t).position==="static"}function Gx(t,e){if(!sr(t)||On(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return cr(t)===n&&(n=n.ownerDocument.body),n}function SC(t,e){const n=tn(t);if(Sd(t))return n;if(!sr(t)){let i=bi(t);for(;i&&!wo(i);){if(In(i)&&!Lh(i))return i;i=bi(i)}return n}let r=Gx(t,e);for(;r&&cD(r)&&Lh(r);)r=Gx(r,e);return r&&wo(r)&&Lh(r)&&!jg(r)?n:r||uD(t)||n}const SD=async function(t){const e=this.getOffsetParent||SC,n=this.getDimensions,r=await n(t.floating);return{reference:bD(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function kD(t){return On(t).direction==="rtl"}const CD={convertOffsetParentRelativeRectToViewportRelativeRect:fD,getDocumentElement:cr,getClippingRect:xD,getOffsetParent:SC,getElementRects:SD,getClientRects:pD,getDimensions:wD,getScale:Js,isElement:In,isRTL:kD};function kC(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function ED(t,e){let n=null,r;const i=cr(t);function s(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,a){l===void 0&&(l=!1),a===void 0&&(a=1),s();const c=t.getBoundingClientRect(),{left:u,top:h,width:f,height:p}=c;if(l||e(),!f||!p)return;const g=Qa(h),m=Qa(i.clientWidth-(u+f)),w=Qa(i.clientHeight-(h+p)),v=Qa(u),b={rootMargin:-g+"px "+-m+"px "+-w+"px "+-v+"px",threshold:Yt(0,xi(1,a))||1};let S=!0;function k(C){const _=C[0].intersectionRatio;if(_!==a){if(!S)return o();_?o(!1,_):r=setTimeout(()=>{o(!1,1e-7)},1e3)}_===1&&!kC(c,t.getBoundingClientRect())&&o(),S=!1}try{n=new IntersectionObserver(k,{...b,root:i.ownerDocument})}catch{n=new IntersectionObserver(k,b)}n.observe(t)}return o(!0),s}function _D(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:a=!1}=r,c=Mg(t),u=i||s?[...c?la(c):[],...la(e)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const h=c&&l?ED(c,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(v=>{let[x]=v;x&&x.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(e)})),n()}),c&&!a&&p.observe(c),p.observe(e));let g,m=a?is(t):null;a&&w();function w(){const v=is(t);m&&!kC(m,v)&&n(),m=v,g=requestAnimationFrame(w)}return n(),()=>{var v;u.forEach(x=>{i&&x.removeEventListener("scroll",n),s&&x.removeEventListener("resize",n)}),h==null||h(),(v=p)==null||v.disconnect(),p=null,a&&cancelAnimationFrame(g)}}const ND=sD,TD=oD,PD=nD,jD=aD,AD=rD,Zx=tD,MD=lD,RD=(t,e,n)=>{const r=new Map,i={platform:CD,...n},s={...i.platform,_c:r};return eD(t,e,{...i,platform:s})};var Rc=typeof document<"u"?y.useLayoutEffect:y.useEffect;function Tu(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Tu(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!Tu(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function CC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Xx(t,e){const n=CC(t);return Math.round(e*n)/n}function zh(t){const e=y.useRef(t);return Rc(()=>{e.current=t}),e}function ID(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:l=!0,whileElementsMounted:a,open:c}=t,[u,h]=y.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=y.useState(r);Tu(f,r)||p(r);const[g,m]=y.useState(null),[w,v]=y.useState(null),x=y.useCallback(j=>{j!==C.current&&(C.current=j,m(j))},[]),b=y.useCallback(j=>{j!==_.current&&(_.current=j,v(j))},[]),S=s||g,k=o||w,C=y.useRef(null),_=y.useRef(null),P=y.useRef(u),O=a!=null,A=zh(a),T=zh(i),R=zh(c),$=y.useCallback(()=>{if(!C.current||!_.current)return;const j={placement:e,strategy:n,middleware:f};T.current&&(j.platform=T.current),RD(C.current,_.current,j).then(D=>{const E={...D,isPositioned:R.current!==!1};M.current&&!Tu(P.current,E)&&(P.current=E,fs.flushSync(()=>{h(E)}))})},[f,e,n,T,R]);Rc(()=>{c===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,h(j=>({...j,isPositioned:!1})))},[c]);const M=y.useRef(!1);Rc(()=>(M.current=!0,()=>{M.current=!1}),[]),Rc(()=>{if(S&&(C.current=S),k&&(_.current=k),S&&k){if(A.current)return A.current(S,k,$);$()}},[S,k,$,A,O]);const I=y.useMemo(()=>({reference:C,floating:_,setReference:x,setFloating:b}),[x,b]),L=y.useMemo(()=>({reference:S,floating:k}),[S,k]),z=y.useMemo(()=>{const j={position:n,left:0,top:0};if(!L.floating)return j;const D=Xx(L.floating,u.x),E=Xx(L.floating,u.y);return l?{...j,transform:"translate("+D+"px, "+E+"px)",...CC(L.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:D,top:E}},[n,l,L.floating,u.x,u.y]);return y.useMemo(()=>({...u,update:$,refs:I,elements:L,floatingStyles:z}),[u,$,I,L,z])}const OD=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Zx({element:r.current,padding:i}).fn(n):{}:r?Zx({element:r,padding:i}).fn(n):{}}}},LD=(t,e)=>({...ND(t),options:[t,e]}),zD=(t,e)=>({...TD(t),options:[t,e]}),DD=(t,e)=>({...MD(t),options:[t,e]}),$D=(t,e)=>({...PD(t),options:[t,e]}),FD=(t,e)=>({...jD(t),options:[t,e]}),BD=(t,e)=>({...AD(t),options:[t,e]}),VD=(t,e)=>({...OD(t),options:[t,e]});var UD="Arrow",EC=y.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return d.jsx(le.svg,{...s,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:d.jsx("polygon",{points:"0,0 30,0 15,10"})})});EC.displayName=UD;var WD=EC;function Cd(t){const[e,n]=y.useState(void 0);return st(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,l;if("borderBoxSize"in s){const a=s.borderBoxSize,c=Array.isArray(a)?a[0]:a;o=c.inlineSize,l=c.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Ig="Popper",[_C,NC]=Mt(Ig),[HD,TC]=_C(Ig),PC=t=>{const{__scopePopper:e,children:n}=t,[r,i]=y.useState(null);return d.jsx(HD,{scope:e,anchor:r,onAnchorChange:i,children:n})};PC.displayName=Ig;var jC="PopperAnchor",AC=y.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=TC(jC,n),o=y.useRef(null),l=Te(e,o);return y.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:d.jsx(le.div,{...i,ref:l})});AC.displayName=jC;var Og="PopperContent",[qD,KD]=_C(Og),MC=y.forwardRef((t,e)=>{var J,Q,B,U,ne,oe;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:a=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:g,...m}=t,w=TC(Og,n),[v,x]=y.useState(null),b=Te(e,_e=>x(_e)),[S,k]=y.useState(null),C=Cd(S),_=(C==null?void 0:C.width)??0,P=(C==null?void 0:C.height)??0,O=r+(s!=="center"?"-"+s:""),A=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},T=Array.isArray(c)?c:[c],R=T.length>0,$={padding:A,boundary:T.filter(GD),altBoundary:R},{refs:M,floatingStyles:I,placement:L,isPositioned:z,middlewareData:j}=ID({strategy:"fixed",placement:O,whileElementsMounted:(..._e)=>_D(..._e,{animationFrame:p==="always"}),elements:{reference:w.anchor},middleware:[LD({mainAxis:i+P,alignmentAxis:o}),a&&zD({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?DD():void 0,...$}),a&&$D({...$}),FD({...$,apply:({elements:_e,rects:Re,availableWidth:Ye,availableHeight:Je})=>{const{width:on,height:Ai}=Re.reference,vn=_e.floating.style;vn.setProperty("--radix-popper-available-width",`${Ye}px`),vn.setProperty("--radix-popper-available-height",`${Je}px`),vn.setProperty("--radix-popper-anchor-width",`${on}px`),vn.setProperty("--radix-popper-anchor-height",`${Ai}px`)}}),S&&VD({element:S,padding:l}),ZD({arrowWidth:_,arrowHeight:P}),f&&BD({strategy:"referenceHidden",...$})]}),[D,E]=OC(L),W=Tt(g);st(()=>{z&&(W==null||W())},[z,W]);const ee=(J=j.arrow)==null?void 0:J.x,N=(Q=j.arrow)==null?void 0:Q.y,se=((B=j.arrow)==null?void 0:B.centerOffset)!==0,[be,he]=y.useState();return st(()=>{v&&he(window.getComputedStyle(v).zIndex)},[v]),d.jsx("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...I,transform:z?I.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:be,"--radix-popper-transform-origin":[(U=j.transformOrigin)==null?void 0:U.x,(ne=j.transformOrigin)==null?void 0:ne.y].join(" "),...((oe=j.hide)==null?void 0:oe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:d.jsx(qD,{scope:n,placedSide:D,onArrowChange:k,arrowX:ee,arrowY:N,shouldHideArrow:se,children:d.jsx(le.div,{"data-side":D,"data-align":E,...m,ref:b,style:{...m.style,animation:z?void 0:"none"}})})})});MC.displayName=Og;var RC="PopperArrow",YD={top:"bottom",right:"left",bottom:"top",left:"right"},IC=y.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,s=KD(RC,r),o=YD[s.placedSide];return d.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:d.jsx(WD,{...i,ref:n,style:{...i.style,display:"block"}})})});IC.displayName=RC;function GD(t){return t!==null}var ZD=t=>({name:"transformOrigin",options:t,fn(e){var w,v,x;const{placement:n,rects:r,middlewareData:i}=e,o=((w=i.arrow)==null?void 0:w.centerOffset)!==0,l=o?0:t.arrowWidth,a=o?0:t.arrowHeight,[c,u]=OC(n),h={start:"0%",center:"50%",end:"100%"}[u],f=(((v=i.arrow)==null?void 0:v.x)??0)+l/2,p=(((x=i.arrow)==null?void 0:x.y)??0)+a/2;let g="",m="";return c==="bottom"?(g=o?h:`${f}px`,m=`${-a}px`):c==="top"?(g=o?h:`${f}px`,m=`${r.floating.height+a}px`):c==="right"?(g=`${-a}px`,m=o?h:`${p}px`):c==="left"&&(g=`${r.floating.width+a}px`,m=o?h:`${p}px`),{data:{x:g,y:m}}}});function OC(t){const[e,n="center"]=t.split("-");return[e,n]}var XD=PC,QD=AC,JD=MC,e$=IC,t$="Portal",Ed=y.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[i,s]=y.useState(!1);st(()=>s(!0),[]);const o=n||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?Wj.createPortal(d.jsx(le.div,{...r,ref:e}),o):null});Ed.displayName=t$;function _d(t){const e=y.useRef({value:t,previous:t});return y.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var n$="VisuallyHidden",Nd=y.forwardRef((t,e)=>d.jsx(le.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Nd.displayName=n$;var r$=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},xs=new WeakMap,Ja=new WeakMap,ec={},Dh=0,LC=function(t){return t&&(t.host||LC(t.parentNode))},i$=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=LC(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},s$=function(t,e,n,r){var i=i$(e,Array.isArray(t)?t:[t]);ec[n]||(ec[n]=new WeakMap);var s=ec[n],o=[],l=new Set,a=new Set(i),c=function(h){!h||l.has(h)||(l.add(h),c(h.parentNode))};i.forEach(c);var u=function(h){!h||a.has(h)||Array.prototype.forEach.call(h.children,function(f){if(l.has(f))u(f);else try{var p=f.getAttribute(r),g=p!==null&&p!=="false",m=(xs.get(f)||0)+1,w=(s.get(f)||0)+1;xs.set(f,m),s.set(f,w),o.push(f),m===1&&g&&Ja.set(f,!0),w===1&&f.setAttribute(n,"true"),g||f.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",f,v)}})};return u(e),l.clear(),Dh++,function(){o.forEach(function(h){var f=xs.get(h)-1,p=s.get(h)-1;xs.set(h,f),s.set(h,p),f||(Ja.has(h)||h.removeAttribute(r),Ja.delete(h)),p||h.removeAttribute(n)}),Dh--,Dh||(xs=new WeakMap,xs=new WeakMap,Ja=new WeakMap,ec={})}},zC=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=r$(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),s$(r,i,n,"aria-hidden")):function(){return null}},Kn=function(){return Kn=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Kn.apply(this,arguments)};function DC(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function o$(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}var Ic="right-scroll-bar-position",Oc="width-before-scroll-bar",l$="with-scroll-bars-hidden",a$="--removed-body-scroll-bar-size";function $h(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function c$(t,e){var n=y.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var u$=typeof window<"u"?y.useLayoutEffect:y.useEffect,Qx=new WeakMap;function d$(t,e){var n=c$(null,function(r){return t.forEach(function(i){return $h(i,r)})});return u$(function(){var r=Qx.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(l){s.has(l)||$h(l,null)}),s.forEach(function(l){i.has(l)||$h(l,o)})}Qx.set(n,t)},[t]),n}function h$(t){return t}function f$(t,e){e===void 0&&(e=h$);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(l){return s(l)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(s),o=n}var a=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(a)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return i}function p$(t){t===void 0&&(t={});var e=f$(null);return e.options=Kn({async:!0,ssr:!1},t),e}var $C=function(t){var e=t.sideCar,n=DC(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return y.createElement(r,Kn({},n))};$C.isSideCarExport=!0;function m$(t,e){return t.useMedium(e),$C}var FC=p$(),Fh=function(){},Td=y.forwardRef(function(t,e){var n=y.useRef(null),r=y.useState({onScrollCapture:Fh,onWheelCapture:Fh,onTouchMoveCapture:Fh}),i=r[0],s=r[1],o=t.forwardProps,l=t.children,a=t.className,c=t.removeScrollBar,u=t.enabled,h=t.shards,f=t.sideCar,p=t.noIsolation,g=t.inert,m=t.allowPinchZoom,w=t.as,v=w===void 0?"div":w,x=t.gapMode,b=DC(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=f,k=d$([n,e]),C=Kn(Kn({},b),i);return y.createElement(y.Fragment,null,u&&y.createElement(S,{sideCar:FC,removeScrollBar:c,shards:h,noIsolation:p,inert:g,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:x}),o?y.cloneElement(y.Children.only(l),Kn(Kn({},C),{ref:k})):y.createElement(v,Kn({},C,{className:a,ref:k}),l))});Td.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Td.classNames={fullWidth:Oc,zeroRight:Ic};var g$=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function v$(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=g$();return e&&t.setAttribute("nonce",e),t}function y$(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function x$(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var w$=function(){var t=0,e=null;return{add:function(n){t==0&&(e=v$())&&(y$(e,n),x$(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},b$=function(){var t=w$();return function(e,n){y.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},BC=function(){var t=b$(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},S$={left:0,top:0,right:0,gap:0},Bh=function(t){return parseInt(t||"",10)||0},k$=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[Bh(n),Bh(r),Bh(i)]},C$=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return S$;var e=k$(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},E$=BC(),eo="data-scroll-locked",_$=function(t,e,n,r){var i=t.left,s=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(l$,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(eo,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ic,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Oc,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Ic," .").concat(Ic,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Oc," .").concat(Oc,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(eo,`] {
    `).concat(a$,": ").concat(l,`px;
  }
`)},Jx=function(){var t=parseInt(document.body.getAttribute(eo)||"0",10);return isFinite(t)?t:0},N$=function(){y.useEffect(function(){return document.body.setAttribute(eo,(Jx()+1).toString()),function(){var t=Jx()-1;t<=0?document.body.removeAttribute(eo):document.body.setAttribute(eo,t.toString())}},[])},T$=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;N$();var s=y.useMemo(function(){return C$(i)},[i]);return y.createElement(E$,{styles:_$(s,!e,i,n?"":"!important")})},Lp=!1;if(typeof window<"u")try{var tc=Object.defineProperty({},"passive",{get:function(){return Lp=!0,!0}});window.addEventListener("test",tc,tc),window.removeEventListener("test",tc,tc)}catch{Lp=!1}var ws=Lp?{passive:!1}:!1,P$=function(t){return t.tagName==="TEXTAREA"},VC=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!P$(t)&&n[e]==="visible")},j$=function(t){return VC(t,"overflowY")},A$=function(t){return VC(t,"overflowX")},e0=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=UC(t,r);if(i){var s=WC(t,r),o=s[1],l=s[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},M$=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},R$=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},UC=function(t,e){return t==="v"?j$(e):A$(e)},WC=function(t,e){return t==="v"?M$(e):R$(e)},I$=function(t,e){return t==="h"&&e==="rtl"?-1:1},O$=function(t,e,n,r,i){var s=I$(t,window.getComputedStyle(e).direction),o=s*r,l=n.target,a=e.contains(l),c=!1,u=o>0,h=0,f=0;do{var p=WC(t,l),g=p[0],m=p[1],w=p[2],v=m-w-s*g;(g||v)&&UC(t,l)&&(h+=v,f+=g),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!a&&l!==document.body||a&&(e.contains(l)||e===l));return(u&&Math.abs(h)<1||!u&&Math.abs(f)<1)&&(c=!0),c},nc=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},t0=function(t){return[t.deltaX,t.deltaY]},n0=function(t){return t&&"current"in t?t.current:t},L$=function(t,e){return t[0]===e[0]&&t[1]===e[1]},z$=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},D$=0,bs=[];function $$(t){var e=y.useRef([]),n=y.useRef([0,0]),r=y.useRef(),i=y.useState(D$++)[0],s=y.useState(BC)[0],o=y.useRef(t);y.useEffect(function(){o.current=t},[t]),y.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var m=o$([t.lockRef.current],(t.shards||[]).map(n0),!0).filter(Boolean);return m.forEach(function(w){return w.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var l=y.useCallback(function(m,w){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var v=nc(m),x=n.current,b="deltaX"in m?m.deltaX:x[0]-v[0],S="deltaY"in m?m.deltaY:x[1]-v[1],k,C=m.target,_=Math.abs(b)>Math.abs(S)?"h":"v";if("touches"in m&&_==="h"&&C.type==="range")return!1;var P=e0(_,C);if(!P)return!0;if(P?k=_:(k=_==="v"?"h":"v",P=e0(_,C)),!P)return!1;if(!r.current&&"changedTouches"in m&&(b||S)&&(r.current=k),!k)return!0;var O=r.current||k;return O$(O,w,m,O==="h"?b:S)},[]),a=y.useCallback(function(m){var w=m;if(!(!bs.length||bs[bs.length-1]!==s)){var v="deltaY"in w?t0(w):nc(w),x=e.current.filter(function(k){return k.name===w.type&&(k.target===w.target||w.target===k.shadowParent)&&L$(k.delta,v)})[0];if(x&&x.should){w.cancelable&&w.preventDefault();return}if(!x){var b=(o.current.shards||[]).map(n0).filter(Boolean).filter(function(k){return k.contains(w.target)}),S=b.length>0?l(w,b[0]):!o.current.noIsolation;S&&w.cancelable&&w.preventDefault()}}},[]),c=y.useCallback(function(m,w,v,x){var b={name:m,delta:w,target:v,should:x,shadowParent:F$(v)};e.current.push(b),setTimeout(function(){e.current=e.current.filter(function(S){return S!==b})},1)},[]),u=y.useCallback(function(m){n.current=nc(m),r.current=void 0},[]),h=y.useCallback(function(m){c(m.type,t0(m),m.target,l(m,t.lockRef.current))},[]),f=y.useCallback(function(m){c(m.type,nc(m),m.target,l(m,t.lockRef.current))},[]);y.useEffect(function(){return bs.push(s),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",a,ws),document.addEventListener("touchmove",a,ws),document.addEventListener("touchstart",u,ws),function(){bs=bs.filter(function(m){return m!==s}),document.removeEventListener("wheel",a,ws),document.removeEventListener("touchmove",a,ws),document.removeEventListener("touchstart",u,ws)}},[]);var p=t.removeScrollBar,g=t.inert;return y.createElement(y.Fragment,null,g?y.createElement(s,{styles:z$(i)}):null,p?y.createElement(T$,{gapMode:t.gapMode}):null)}function F$(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const B$=m$(FC,$$);var Lg=y.forwardRef(function(t,e){return y.createElement(Td,Kn({},t,{ref:e,sideCar:B$}))});Lg.classNames=Td.classNames;var V$=[" ","Enter","ArrowUp","ArrowDown"],U$=[" ","Enter"],Na="Select",[Pd,jd,W$]=vd(Na),[Ro,q9]=Mt(Na,[W$,NC]),Ad=NC(),[H$,Ti]=Ro(Na),[q$,K$]=Ro(Na),HC=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:s,value:o,defaultValue:l,onValueChange:a,dir:c,name:u,autoComplete:h,disabled:f,required:p,form:g}=t,m=Ad(e),[w,v]=y.useState(null),[x,b]=y.useState(null),[S,k]=y.useState(!1),C=Ea(c),[_=!1,P]=gn({prop:r,defaultProp:i,onChange:s}),[O,A]=gn({prop:o,defaultProp:l,onChange:a}),T=y.useRef(null),R=w?g||!!w.closest("form"):!0,[$,M]=y.useState(new Set),I=Array.from($).map(L=>L.props.value).join(";");return d.jsx(XD,{...m,children:d.jsxs(H$,{required:p,scope:e,trigger:w,onTriggerChange:v,valueNode:x,onValueNodeChange:b,valueNodeHasChildren:S,onValueNodeHasChildrenChange:k,contentId:Jn(),value:O,onValueChange:A,open:_,onOpenChange:P,dir:C,triggerPointerDownPosRef:T,disabled:f,children:[d.jsx(Pd.Provider,{scope:e,children:d.jsx(q$,{scope:t.__scopeSelect,onNativeOptionAdd:y.useCallback(L=>{M(z=>new Set(z).add(L))},[]),onNativeOptionRemove:y.useCallback(L=>{M(z=>{const j=new Set(z);return j.delete(L),j})},[]),children:n})}),R?d.jsxs(gE,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:h,value:O,onChange:L=>A(L.target.value),disabled:f,form:g,children:[O===void 0?d.jsx("option",{value:""}):null,Array.from($)]},I):null]})})};HC.displayName=Na;var qC="SelectTrigger",KC=y.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,s=Ad(n),o=Ti(qC,n),l=o.disabled||r,a=Te(e,o.onTriggerChange),c=jd(n),u=y.useRef("touch"),[h,f,p]=vE(m=>{const w=c().filter(b=>!b.disabled),v=w.find(b=>b.value===o.value),x=yE(w,m,v);x!==void 0&&o.onValueChange(x.value)}),g=m=>{l||(o.onOpenChange(!0),p()),m&&(o.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return d.jsx(QD,{asChild:!0,...s,children:d.jsx(le.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":mE(o.value)?"":void 0,...i,ref:a,onClick:ae(i.onClick,m=>{m.currentTarget.focus(),u.current!=="mouse"&&g(m)}),onPointerDown:ae(i.onPointerDown,m=>{u.current=m.pointerType;const w=m.target;w.hasPointerCapture(m.pointerId)&&w.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(g(m),m.preventDefault())}),onKeyDown:ae(i.onKeyDown,m=>{const w=h.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&f(m.key),!(w&&m.key===" ")&&V$.includes(m.key)&&(g(),m.preventDefault())})})})});KC.displayName=qC;var YC="SelectValue",GC=y.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:s,placeholder:o="",...l}=t,a=Ti(YC,n),{onValueNodeHasChildrenChange:c}=a,u=s!==void 0,h=Te(e,a.onValueNodeChange);return st(()=>{c(u)},[c,u]),d.jsx(le.span,{...l,ref:h,style:{pointerEvents:"none"},children:mE(a.value)?d.jsx(d.Fragment,{children:o}):s})});GC.displayName=YC;var Y$="SelectIcon",ZC=y.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return d.jsx(le.span,{"aria-hidden":!0,...i,ref:e,children:r||"▼"})});ZC.displayName=Y$;var G$="SelectPortal",XC=t=>d.jsx(Ed,{asChild:!0,...t});XC.displayName=G$;var ss="SelectContent",QC=y.forwardRef((t,e)=>{const n=Ti(ss,t.__scopeSelect),[r,i]=y.useState();if(st(()=>{i(new DocumentFragment)},[]),!n.open){const s=r;return s?fs.createPortal(d.jsx(JC,{scope:t.__scopeSelect,children:d.jsx(Pd.Slot,{scope:t.__scopeSelect,children:d.jsx("div",{children:t.children})})}),s):null}return d.jsx(eE,{...t,ref:e})});QC.displayName=ss;var wn=10,[JC,Pi]=Ro(ss),Z$="SelectContentImpl",eE=y.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:o,side:l,sideOffset:a,align:c,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:w,...v}=t,x=Ti(ss,n),[b,S]=y.useState(null),[k,C]=y.useState(null),_=Te(e,J=>S(J)),[P,O]=y.useState(null),[A,T]=y.useState(null),R=jd(n),[$,M]=y.useState(!1),I=y.useRef(!1);y.useEffect(()=>{if(b)return zC(b)},[b]),fC();const L=y.useCallback(J=>{const[Q,...B]=R().map(oe=>oe.ref.current),[U]=B.slice(-1),ne=document.activeElement;for(const oe of J)if(oe===ne||(oe==null||oe.scrollIntoView({block:"nearest"}),oe===Q&&k&&(k.scrollTop=0),oe===U&&k&&(k.scrollTop=k.scrollHeight),oe==null||oe.focus(),document.activeElement!==ne))return},[R,k]),z=y.useCallback(()=>L([P,b]),[L,P,b]);y.useEffect(()=>{$&&z()},[$,z]);const{onOpenChange:j,triggerPointerDownPosRef:D}=x;y.useEffect(()=>{if(b){let J={x:0,y:0};const Q=U=>{var ne,oe;J={x:Math.abs(Math.round(U.pageX)-(((ne=D.current)==null?void 0:ne.x)??0)),y:Math.abs(Math.round(U.pageY)-(((oe=D.current)==null?void 0:oe.y)??0))}},B=U=>{J.x<=10&&J.y<=10?U.preventDefault():b.contains(U.target)||j(!1),document.removeEventListener("pointermove",Q),D.current=null};return D.current!==null&&(document.addEventListener("pointermove",Q),document.addEventListener("pointerup",B,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Q),document.removeEventListener("pointerup",B,{capture:!0})}}},[b,j,D]),y.useEffect(()=>{const J=()=>j(!1);return window.addEventListener("blur",J),window.addEventListener("resize",J),()=>{window.removeEventListener("blur",J),window.removeEventListener("resize",J)}},[j]);const[E,W]=vE(J=>{const Q=R().filter(ne=>!ne.disabled),B=Q.find(ne=>ne.ref.current===document.activeElement),U=yE(Q,J,B);U&&setTimeout(()=>U.ref.current.focus())}),ee=y.useCallback((J,Q,B)=>{const U=!I.current&&!B;(x.value!==void 0&&x.value===Q||U)&&(O(J),U&&(I.current=!0))},[x.value]),N=y.useCallback(()=>b==null?void 0:b.focus(),[b]),se=y.useCallback((J,Q,B)=>{const U=!I.current&&!B;(x.value!==void 0&&x.value===Q||U)&&T(J)},[x.value]),be=r==="popper"?zp:tE,he=be===zp?{side:l,sideOffset:a,align:c,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:p,sticky:g,hideWhenDetached:m,avoidCollisions:w}:{};return d.jsx(JC,{scope:n,content:b,viewport:k,onViewportChange:C,itemRefCallback:ee,selectedItem:P,onItemLeave:N,itemTextRefCallback:se,focusSelectedItem:z,selectedItemText:A,position:r,isPositioned:$,searchRef:E,children:d.jsx(Lg,{as:rs,allowPinchZoom:!0,children:d.jsx(_g,{asChild:!0,trapped:x.open,onMountAutoFocus:J=>{J.preventDefault()},onUnmountAutoFocus:ae(i,J=>{var Q;(Q=x.trigger)==null||Q.focus({preventScroll:!0}),J.preventDefault()}),children:d.jsx(wd,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:J=>J.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:d.jsx(be,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:J=>J.preventDefault(),...v,...he,onPlaced:()=>M(!0),ref:_,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:ae(v.onKeyDown,J=>{const Q=J.ctrlKey||J.altKey||J.metaKey;if(J.key==="Tab"&&J.preventDefault(),!Q&&J.key.length===1&&W(J.key),["ArrowUp","ArrowDown","Home","End"].includes(J.key)){let U=R().filter(ne=>!ne.disabled).map(ne=>ne.ref.current);if(["ArrowUp","End"].includes(J.key)&&(U=U.slice().reverse()),["ArrowUp","ArrowDown"].includes(J.key)){const ne=J.target,oe=U.indexOf(ne);U=U.slice(oe+1)}setTimeout(()=>L(U)),J.preventDefault()}})})})})})})});eE.displayName=Z$;var X$="SelectItemAlignedPosition",tE=y.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,s=Ti(ss,n),o=Pi(ss,n),[l,a]=y.useState(null),[c,u]=y.useState(null),h=Te(e,_=>u(_)),f=jd(n),p=y.useRef(!1),g=y.useRef(!0),{viewport:m,selectedItem:w,selectedItemText:v,focusSelectedItem:x}=o,b=y.useCallback(()=>{if(s.trigger&&s.valueNode&&l&&c&&m&&w&&v){const _=s.trigger.getBoundingClientRect(),P=c.getBoundingClientRect(),O=s.valueNode.getBoundingClientRect(),A=v.getBoundingClientRect();if(s.dir!=="rtl"){const ne=A.left-P.left,oe=O.left-ne,_e=_.left-oe,Re=_.width+_e,Ye=Math.max(Re,P.width),Je=window.innerWidth-wn,on=Lx(oe,[wn,Math.max(wn,Je-Ye)]);l.style.minWidth=Re+"px",l.style.left=on+"px"}else{const ne=P.right-A.right,oe=window.innerWidth-O.right-ne,_e=window.innerWidth-_.right-oe,Re=_.width+_e,Ye=Math.max(Re,P.width),Je=window.innerWidth-wn,on=Lx(oe,[wn,Math.max(wn,Je-Ye)]);l.style.minWidth=Re+"px",l.style.right=on+"px"}const T=f(),R=window.innerHeight-wn*2,$=m.scrollHeight,M=window.getComputedStyle(c),I=parseInt(M.borderTopWidth,10),L=parseInt(M.paddingTop,10),z=parseInt(M.borderBottomWidth,10),j=parseInt(M.paddingBottom,10),D=I+L+$+j+z,E=Math.min(w.offsetHeight*5,D),W=window.getComputedStyle(m),ee=parseInt(W.paddingTop,10),N=parseInt(W.paddingBottom,10),se=_.top+_.height/2-wn,be=R-se,he=w.offsetHeight/2,J=w.offsetTop+he,Q=I+L+J,B=D-Q;if(Q<=se){const ne=T.length>0&&w===T[T.length-1].ref.current;l.style.bottom="0px";const oe=c.clientHeight-m.offsetTop-m.offsetHeight,_e=Math.max(be,he+(ne?N:0)+oe+z),Re=Q+_e;l.style.height=Re+"px"}else{const ne=T.length>0&&w===T[0].ref.current;l.style.top="0px";const _e=Math.max(se,I+m.offsetTop+(ne?ee:0)+he)+B;l.style.height=_e+"px",m.scrollTop=Q-se+m.offsetTop}l.style.margin=`${wn}px 0`,l.style.minHeight=E+"px",l.style.maxHeight=R+"px",r==null||r(),requestAnimationFrame(()=>p.current=!0)}},[f,s.trigger,s.valueNode,l,c,m,w,v,s.dir,r]);st(()=>b(),[b]);const[S,k]=y.useState();st(()=>{c&&k(window.getComputedStyle(c).zIndex)},[c]);const C=y.useCallback(_=>{_&&g.current===!0&&(b(),x==null||x(),g.current=!1)},[b,x]);return d.jsx(J$,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:C,children:d.jsx("div",{ref:a,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:d.jsx(le.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});tE.displayName=X$;var Q$="SelectPopperPosition",zp=y.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=wn,...s}=t,o=Ad(n);return d.jsx(JD,{...o,...s,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});zp.displayName=Q$;var[J$,zg]=Ro(ss,{}),Dp="SelectViewport",nE=y.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,s=Pi(Dp,n),o=zg(Dp,n),l=Te(e,s.onViewportChange),a=y.useRef(0);return d.jsxs(d.Fragment,{children:[d.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),d.jsx(Pd.Slot,{scope:n,children:d.jsx(le.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:ae(i.onScroll,c=>{const u=c.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&h){const p=Math.abs(a.current-u.scrollTop);if(p>0){const g=window.innerHeight-wn*2,m=parseFloat(h.style.minHeight),w=parseFloat(h.style.height),v=Math.max(m,w);if(v<g){const x=v+p,b=Math.min(g,x),S=x-b;h.style.height=b+"px",h.style.bottom==="0px"&&(u.scrollTop=S>0?S:0,h.style.justifyContent="flex-end")}}}a.current=u.scrollTop})})})]})});nE.displayName=Dp;var rE="SelectGroup",[e4,t4]=Ro(rE),n4=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Jn();return d.jsx(e4,{scope:n,id:i,children:d.jsx(le.div,{role:"group","aria-labelledby":i,...r,ref:e})})});n4.displayName=rE;var iE="SelectLabel",sE=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=t4(iE,n);return d.jsx(le.div,{id:i.id,...r,ref:e})});sE.displayName=iE;var Pu="SelectItem",[r4,oE]=Ro(Pu),lE=y.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:s,...o}=t,l=Ti(Pu,n),a=Pi(Pu,n),c=l.value===r,[u,h]=y.useState(s??""),[f,p]=y.useState(!1),g=Te(e,x=>{var b;return(b=a.itemRefCallback)==null?void 0:b.call(a,x,r,i)}),m=Jn(),w=y.useRef("touch"),v=()=>{i||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return d.jsx(r4,{scope:n,value:r,disabled:i,textId:m,isSelected:c,onItemTextChange:y.useCallback(x=>{h(b=>b||((x==null?void 0:x.textContent)??"").trim())},[]),children:d.jsx(Pd.ItemSlot,{scope:n,value:r,disabled:i,textValue:u,children:d.jsx(le.div,{role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:g,onFocus:ae(o.onFocus,()=>p(!0)),onBlur:ae(o.onBlur,()=>p(!1)),onClick:ae(o.onClick,()=>{w.current!=="mouse"&&v()}),onPointerUp:ae(o.onPointerUp,()=>{w.current==="mouse"&&v()}),onPointerDown:ae(o.onPointerDown,x=>{w.current=x.pointerType}),onPointerMove:ae(o.onPointerMove,x=>{var b;w.current=x.pointerType,i?(b=a.onItemLeave)==null||b.call(a):w.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ae(o.onPointerLeave,x=>{var b;x.currentTarget===document.activeElement&&((b=a.onItemLeave)==null||b.call(a))}),onKeyDown:ae(o.onKeyDown,x=>{var S;((S=a.searchRef)==null?void 0:S.current)!==""&&x.key===" "||(U$.includes(x.key)&&v(),x.key===" "&&x.preventDefault())})})})})});lE.displayName=Pu;var al="SelectItemText",aE=y.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...s}=t,o=Ti(al,n),l=Pi(al,n),a=oE(al,n),c=K$(al,n),[u,h]=y.useState(null),f=Te(e,v=>h(v),a.onItemTextChange,v=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,v,a.value,a.disabled)}),p=u==null?void 0:u.textContent,g=y.useMemo(()=>d.jsx("option",{value:a.value,disabled:a.disabled,children:p},a.value),[a.disabled,a.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:w}=c;return st(()=>(m(g),()=>w(g)),[m,w,g]),d.jsxs(d.Fragment,{children:[d.jsx(le.span,{id:a.textId,...s,ref:f}),a.isSelected&&o.valueNode&&!o.valueNodeHasChildren?fs.createPortal(s.children,o.valueNode):null]})});aE.displayName=al;var cE="SelectItemIndicator",uE=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return oE(cE,n).isSelected?d.jsx(le.span,{"aria-hidden":!0,...r,ref:e}):null});uE.displayName=cE;var $p="SelectScrollUpButton",dE=y.forwardRef((t,e)=>{const n=Pi($p,t.__scopeSelect),r=zg($p,t.__scopeSelect),[i,s]=y.useState(!1),o=Te(e,r.onScrollButtonChange);return st(()=>{if(n.viewport&&n.isPositioned){let l=function(){const c=a.scrollTop>0;s(c)};const a=n.viewport;return l(),a.addEventListener("scroll",l),()=>a.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?d.jsx(fE,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:a}=n;l&&a&&(l.scrollTop=l.scrollTop-a.offsetHeight)}}):null});dE.displayName=$p;var Fp="SelectScrollDownButton",hE=y.forwardRef((t,e)=>{const n=Pi(Fp,t.__scopeSelect),r=zg(Fp,t.__scopeSelect),[i,s]=y.useState(!1),o=Te(e,r.onScrollButtonChange);return st(()=>{if(n.viewport&&n.isPositioned){let l=function(){const c=a.scrollHeight-a.clientHeight,u=Math.ceil(a.scrollTop)<c;s(u)};const a=n.viewport;return l(),a.addEventListener("scroll",l),()=>a.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?d.jsx(fE,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:a}=n;l&&a&&(l.scrollTop=l.scrollTop+a.offsetHeight)}}):null});hE.displayName=Fp;var fE=y.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,s=Pi("SelectScrollButton",n),o=y.useRef(null),l=jd(n),a=y.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return y.useEffect(()=>()=>a(),[a]),st(()=>{var u;const c=l().find(h=>h.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),d.jsx(le.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:ae(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:ae(i.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:ae(i.onPointerLeave,()=>{a()})})}),i4="SelectSeparator",pE=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return d.jsx(le.div,{"aria-hidden":!0,...r,ref:e})});pE.displayName=i4;var Bp="SelectArrow",s4=y.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Ad(n),s=Ti(Bp,n),o=Pi(Bp,n);return s.open&&o.position==="popper"?d.jsx(e$,{...i,...r,ref:e}):null});s4.displayName=Bp;function mE(t){return t===""||t===void 0}var gE=y.forwardRef((t,e)=>{const{value:n,...r}=t,i=y.useRef(null),s=Te(e,i),o=_d(n);return y.useEffect(()=>{const l=i.current,a=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(a,"value").set;if(o!==n&&u){const h=new Event("change",{bubbles:!0});u.call(l,n),l.dispatchEvent(h)}},[o,n]),d.jsx(Nd,{asChild:!0,children:d.jsx("select",{...r,ref:s,defaultValue:n})})});gE.displayName="BubbleSelect";function vE(t){const e=Tt(t),n=y.useRef(""),r=y.useRef(0),i=y.useCallback(o=>{const l=n.current+o;e(l),function a(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>a(""),1e3))}(l)},[e]),s=y.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return y.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,s]}function yE(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=o4(t,Math.max(s,0));i.length===1&&(o=o.filter(c=>c!==n));const a=o.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return a!==n?a:void 0}function o4(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var l4=HC,xE=KC,a4=GC,c4=ZC,u4=XC,wE=QC,d4=nE,bE=sE,SE=lE,h4=aE,f4=uE,kE=dE,CE=hE,EE=pE;const _E=l4,p4=a4,Dg=y.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(xE,{ref:r,className:H("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,d.jsx(c4,{asChild:!0,children:d.jsx(mk,{className:"h-4 w-4 opacity-50"})})]}));Dg.displayName=xE.displayName;const NE=y.forwardRef(({className:t,...e},n)=>d.jsx(kE,{ref:n,className:H("flex cursor-default items-center justify-center py-1",t),...e,children:d.jsx(EO,{className:"h-4 w-4"})}));NE.displayName=kE.displayName;const TE=y.forwardRef(({className:t,...e},n)=>d.jsx(CE,{ref:n,className:H("flex cursor-default items-center justify-center py-1",t),...e,children:d.jsx(mk,{className:"h-4 w-4"})}));TE.displayName=CE.displayName;const $g=y.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>d.jsx(u4,{children:d.jsxs(wE,{ref:i,className:H("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[d.jsx(NE,{}),d.jsx(d4,{className:H("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),d.jsx(TE,{})]})}));$g.displayName=wE.displayName;const m4=y.forwardRef(({className:t,...e},n)=>d.jsx(bE,{ref:n,className:H("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));m4.displayName=bE.displayName;const to=y.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(SE,{ref:r,className:H("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[d.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsx(f4,{children:d.jsx(pk,{className:"h-4 w-4"})})}),d.jsx(h4,{children:e})]}));to.displayName=SE.displayName;const g4=y.forwardRef(({className:t,...e},n)=>d.jsx(EE,{ref:n,className:H("-mx-1 my-1 h-px bg-muted",t),...e}));g4.displayName=EE.displayName;const rc=15,v4=({index:t})=>d.jsxs(Qs,{className:H("animate-pulse",t%2===0?"bg-muted/30":"bg-card"),children:[d.jsx("td",{className:"pl-3 pr-1 py-3 align-middle",children:d.jsxs("div",{className:"space-y-1",children:[d.jsx("div",{className:"h-2.5 w-10 rounded bg-muted"}),d.jsx("div",{className:"h-2 w-8 rounded bg-muted"})]})}),d.jsx("td",{className:"pl-2 pr-1 py-3 align-middle",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("div",{className:"h-8 w-8 rounded-full bg-muted flex-shrink-0"}),d.jsxs("div",{className:"space-y-1.5",children:[d.jsx("div",{className:"h-3 w-20 rounded bg-muted"}),d.jsx("div",{className:"h-2.5 w-12 rounded bg-muted"})]})]})}),d.jsx("td",{className:"text-right px-1 py-3 align-middle",children:d.jsx("div",{className:"h-4 w-16 rounded bg-muted ml-auto"})}),d.jsx("td",{className:"text-right pl-1 pr-3 py-3 align-middle",children:d.jsx("div",{className:"h-4 w-8 rounded bg-muted ml-auto"})})]}),y4=()=>{const{accountId:t}=ms(),e=Number(t),n=ft(),{accounts:r}=nr(),{tg:i}=Dn(),[s,o]=y.useState([]),[l,a]=y.useState(!0),[c,u]=y.useState(null),[h,f]=y.useState(0),[p,g]=y.useState(!0),[m,w]=y.useState({PageNumber:1,SelectedOperationType:null}),v=y.useMemo(()=>{var $,M;const A=(M=($=r==null?void 0:r.find(I=>{var L;return((L=I.brokerAccount)==null?void 0:L.id)===e}))==null?void 0:$.brokerAccount)==null?void 0:M.title,T=`Счет #${e}`;return(A||T).replace(/["«»]/g,"")},[r,e]),x=y.useCallback(async(A,T)=>{var $;if(!e||isNaN(e)){u("Invalid Account ID"),a(!1),g(!1);return}a(!0),u(null);const R={BrokerAccountIds:[e],PageNumber:A,PageItemsCount:rc,AssetIds:null,MarketOperationType:T};console.log("[OperationsHistoryPage] Calling API with params:",JSON.stringify(R));try{p&&await new Promise(I=>setTimeout(I,300));const M=await Pz(R);if(M!=null&&M.isSuccess&&M.resultObject)o(M.resultObject.marketOperations??[]),f(M.resultObject.foundCount??0),console.log(`[OperationsHistoryPage] Fetched ${(($=M.resultObject.marketOperations)==null?void 0:$.length)??0} operations. Total found: ${M.resultObject.foundCount}`);else throw new Error((M==null?void 0:M.errorMessage)||"Не удалось загрузить историю.")}catch(M){console.error("[OperationsHistoryPage] Fetch error:",M),u(M.message),o([]),f(0)}finally{a(!1),g(!1)}},[e,p]);y.useEffect(()=>{console.log("[OperationsHistoryPage] useEffect triggered. Fetching with filters:",m),x(m.PageNumber,m.SelectedOperationType)},[m,x]);const b=y.useCallback((A,T)=>{w(R=>{const $=A==="PageNumber",M=$?T:1;return $||g(!0),{...R,[A]:T,PageNumber:M}}),console.log(`[OperationsHistoryPage] Filter '${A}' changed to '${T}'. Page reset to 1 if needed.`)},[]),S=y.useCallback(A=>{const T=A==="all"?null:Number(A);b("SelectedOperationType",T)},[b]),k=y.useCallback(()=>{const A=h>0?Math.ceil(h/rc):1;m.PageNumber<A&&!l&&b("PageNumber",m.PageNumber+1)},[m.PageNumber,h,l,b]),C=y.useCallback(()=>{m.PageNumber>1&&!l&&b("PageNumber",m.PageNumber-1)},[m.PageNumber,l,b]);y.useEffect(()=>{const A=()=>n(`/portfolio/${e}`);return i&&(i.BackButton.show(),i.onEvent("backButtonClicked",A)),()=>{i&&(i.BackButton.hide(),i.offEvent("backButtonClicked",A))}},[i,n,e]);const _=m.PageNumber,P=h>0?Math.ceil(h/rc):1,O=()=>m.SelectedOperationType===0?"Нет операций покупки.":m.SelectedOperationType===1?"Нет операций продажи.":"Операций не найдено.";return d.jsxs("div",{className:"p-4 space-y-4 pb-4 flex flex-col h-full",children:[d.jsxs(Nt,{className:"flex-shrink-0 shadow-sm border rounded-lg",children:[d.jsx(zr,{className:"pb-2 pt-4",children:d.jsxs("div",{className:"relative flex justify-center items-center",children:[d.jsx(ce,{variant:"ghost",size:"icon",className:"text-foreground/80 h-8 w-8 absolute left-0 top-1/2 -translate-y-1/2",onClick:()=>n(`/portfolio/${e}`),children:d.jsx(Et,{className:"h-5 w-5"})}),d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx(Ni,{className:"text-lg font-semibold",children:"История операций"}),d.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:v})]})]})}),d.jsx(mn,{className:"pt-2 pb-4",children:d.jsx("div",{className:"grid grid-cols-1 gap-4 items-end",children:d.jsxs("div",{children:[d.jsx("label",{htmlFor:"operationType",className:"block text-sm font-medium text-muted-foreground mb-1",children:"Тип операции"}),d.jsxs(_E,{value:m.SelectedOperationType===null?"all":String(m.SelectedOperationType),onValueChange:S,disabled:l,children:[d.jsx(Dg,{id:"operationType",children:d.jsx(p4,{placeholder:"Все типы"})}),d.jsxs($g,{children:[d.jsx(to,{value:"all",children:"Все типы"}),d.jsx(to,{value:"0",children:"Покупка"}),d.jsx(to,{value:"1",children:"Продажа"})]})]})]})})})]}),d.jsxs(Nt,{className:"shadow-sm border rounded-lg overflow-hidden flex flex-col flex-grow",children:[d.jsx(mn,{className:"p-0 flex-grow overflow-y-auto no-scrollbar min-h-0",children:p?d.jsxs("table",{className:"w-full caption-bottom text-sm",children:[d.jsx("thead",{className:"[&_tr]:border-b sticky top-0 bg-card z-10",children:d.jsxs(Qs,{className:"border-b border-border/10",children:[d.jsx(kr,{className:"pl-3 pr-1 py-2 text-xs text-muted-foreground font-normal text-left",style:{minWidth:"60px"},children:"Дата"}),d.jsx(kr,{className:"pl-2 pr-1 py-2 text-xs text-muted-foreground font-normal text-left",children:"Актив"}),d.jsx(kr,{className:"px-1 py-2 text-xs text-muted-foreground font-normal text-right whitespace-nowrap",style:{minWidth:"85px"},children:"Сумма"}),d.jsx(kr,{className:"pl-1 pr-3 py-2 text-xs text-muted-foreground font-normal text-right whitespace-nowrap",style:{minWidth:"60px"},children:"Кол-во"})]})}),d.jsx("tbody",{children:Array.from({length:5}).map((A,T)=>d.jsx(v4,{index:T},T))})]}):l?d.jsx("div",{className:"flex justify-center items-center h-full",children:d.jsx(Ne,{})}):c?d.jsx("div",{className:"p-6",children:d.jsx(xt,{message:c})}):s.length>0?d.jsx(_z,{operations:s}):d.jsx("div",{className:"flex justify-center items-center h-full text-muted-foreground text-center p-4",children:O()})}),!p&&!l&&!c&&h>rc&&d.jsxs("div",{className:"flex items-center justify-between mt-0 pt-4 border-t px-4 pb-4 bg-card flex-shrink-0",children:[d.jsx("span",{className:"text-sm text-muted-foreground",children:`Стр. ${_} из ${P}`}),d.jsxs("div",{className:"space-x-2",children:[d.jsx(ce,{variant:"outline",size:"sm",onClick:C,disabled:l||_<=1,children:" Назад "}),d.jsx(ce,{variant:"outline",size:"sm",onClick:k,disabled:l||_>=P,children:" Вперед "})]})]})]})]})};var Fg="Avatar",[x4,K9]=Mt(Fg),[w4,PE]=x4(Fg),jE=y.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[i,s]=y.useState("idle");return d.jsx(w4,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:s,children:d.jsx(le.span,{...r,ref:e})})});jE.displayName=Fg;var AE="AvatarImage",ME=y.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...s}=t,o=PE(AE,n),l=b4(r,s.referrerPolicy),a=Tt(c=>{i(c),o.onImageLoadingStatusChange(c)});return st(()=>{l!=="idle"&&a(l)},[l,a]),l==="loaded"?d.jsx(le.img,{...s,ref:e,src:r}):null});ME.displayName=AE;var RE="AvatarFallback",IE=y.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...i}=t,s=PE(RE,n),[o,l]=y.useState(r===void 0);return y.useEffect(()=>{if(r!==void 0){const a=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(a)}},[r]),o&&s.imageLoadingStatus!=="loaded"?d.jsx(le.span,{...i,ref:e}):null});IE.displayName=RE;function b4(t,e){const[n,r]=y.useState("idle");return st(()=>{if(!t){r("error");return}let i=!0;const s=new window.Image,o=l=>()=>{i&&r(l)};return r("loading"),s.onload=o("loaded"),s.onerror=o("error"),s.src=t,e&&(s.referrerPolicy=e),()=>{i=!1}},[t,e]),n}var OE=jE,LE=ME,zE=IE;const Md=y.forwardRef(({className:t,...e},n)=>d.jsx(OE,{ref:n,className:H("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));Md.displayName=OE.displayName;const Rd=y.forwardRef(({className:t,...e},n)=>d.jsx(LE,{ref:n,className:H("aspect-square h-full w-full",t),...e}));Rd.displayName=LE.displayName;const Id=y.forwardRef(({className:t,...e},n)=>d.jsx(zE,{ref:n,className:H("flex h-full w-full items-center justify-center rounded-full bg-muted uppercase",t),...e}));Id.displayName=zE.displayName;const S4=5e3;let Vh=0;function k4(){return Vh=(Vh+1)%Number.MAX_VALUE,Vh.toString()}const Ns=new Map,C4=(t,e)=>{switch(e.type){case"ADD_TOAST":{const{toasts:n}=t,r={...e.toast,open:!0};return Ns.forEach((i,s)=>{clearTimeout(i),Ns.delete(s)}),{...t,toasts:[r]}}case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"REMOVE_TOAST":{const{toastId:n}=e;return n&&Ns.has(n)&&(clearTimeout(Ns.get(n)),Ns.delete(n)),{...t,toasts:n===void 0?[]:t.toasts.filter(r=>r.id!==n)}}default:return t}},Lc=[];let yl={toasts:[]};function no(t){yl=C4(yl,t),Lc.forEach(e=>{e(yl)})}function E4(t){const e=k4(),n=()=>{no({type:"UPDATE_TOAST",toast:{id:e,open:!1}}),setTimeout(()=>{r(e)},1e3)},r=s=>{no({type:"REMOVE_TOAST",toastId:s})};no({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||n()}}});const i=t.duration??S4;if(i!==1/0){const s=setTimeout(n,i);Ns.set(e,s)}return{id:e,dismiss:n}}function ur(){const[t,e]=y.useState(yl);return y.useEffect(()=>(Lc.push(e),()=>{const n=Lc.indexOf(e);n>-1&&Lc.splice(n,1)}),[t]),{...t,toast:E4,dismiss:n=>{n?yl.toasts.find(i=>i.id===n)&&(no({type:"UPDATE_TOAST",toast:{id:n,open:!1}}),setTimeout(()=>{no({type:"REMOVE_TOAST",toastId:n})},1e3)):no({type:"REMOVE_TOAST"})}}}var Bg="Dialog",[DE,$E]=Mt(Bg),[_4,$n]=DE(Bg),FE=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:s,modal:o=!0}=t,l=y.useRef(null),a=y.useRef(null),[c=!1,u]=gn({prop:r,defaultProp:i,onChange:s});return d.jsx(_4,{scope:e,triggerRef:l,contentRef:a,contentId:Jn(),titleId:Jn(),descriptionId:Jn(),open:c,onOpenChange:u,onOpenToggle:y.useCallback(()=>u(h=>!h),[u]),modal:o,children:n})};FE.displayName=Bg;var BE="DialogTrigger",VE=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=$n(BE,n),s=Te(e,i.triggerRef);return d.jsx(le.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Wg(i.open),...r,ref:s,onClick:ae(t.onClick,i.onOpenToggle)})});VE.displayName=BE;var Vg="DialogPortal",[N4,UE]=DE(Vg,{forceMount:void 0}),WE=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,s=$n(Vg,e);return d.jsx(N4,{scope:e,forceMount:n,children:y.Children.map(r,o=>d.jsx(Dr,{present:n||s.open,children:d.jsx(Ed,{asChild:!0,container:i,children:o})}))})};WE.displayName=Vg;var ju="DialogOverlay",HE=y.forwardRef((t,e)=>{const n=UE(ju,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=$n(ju,t.__scopeDialog);return s.modal?d.jsx(Dr,{present:r||s.open,children:d.jsx(T4,{...i,ref:e})}):null});HE.displayName=ju;var T4=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=$n(ju,n);return d.jsx(Lg,{as:rs,allowPinchZoom:!0,shards:[i.contentRef],children:d.jsx(le.div,{"data-state":Wg(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),os="DialogContent",qE=y.forwardRef((t,e)=>{const n=UE(os,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,s=$n(os,t.__scopeDialog);return d.jsx(Dr,{present:r||s.open,children:s.modal?d.jsx(P4,{...i,ref:e}):d.jsx(j4,{...i,ref:e})})});qE.displayName=os;var P4=y.forwardRef((t,e)=>{const n=$n(os,t.__scopeDialog),r=y.useRef(null),i=Te(e,n.contentRef,r);return y.useEffect(()=>{const s=r.current;if(s)return zC(s)},[]),d.jsx(KE,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ae(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ae(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&s.preventDefault()}),onFocusOutside:ae(t.onFocusOutside,s=>s.preventDefault())})}),j4=y.forwardRef((t,e)=>{const n=$n(os,t.__scopeDialog),r=y.useRef(!1),i=y.useRef(!1);return d.jsx(KE,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),s.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:s=>{var a,c;(a=t.onInteractOutside)==null||a.call(t,s),s.defaultPrevented||(r.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}})}),KE=y.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:s,...o}=t,l=$n(os,n),a=y.useRef(null),c=Te(e,a);return fC(),d.jsxs(d.Fragment,{children:[d.jsx(_g,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:s,children:d.jsx(wd,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Wg(l.open),...o,ref:c,onDismiss:()=>l.onOpenChange(!1)})}),d.jsxs(d.Fragment,{children:[d.jsx(M4,{titleId:l.titleId}),d.jsx(I4,{contentRef:a,descriptionId:l.descriptionId})]})]})}),Ug="DialogTitle",YE=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=$n(Ug,n);return d.jsx(le.h2,{id:i.titleId,...r,ref:e})});YE.displayName=Ug;var GE="DialogDescription",ZE=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=$n(GE,n);return d.jsx(le.p,{id:i.descriptionId,...r,ref:e})});ZE.displayName=GE;var XE="DialogClose",QE=y.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=$n(XE,n);return d.jsx(le.button,{type:"button",...r,ref:e,onClick:ae(t.onClick,()=>i.onOpenChange(!1))})});QE.displayName=XE;function Wg(t){return t?"open":"closed"}var JE="DialogTitleWarning",[A4,e_]=FL(JE,{contentName:os,titleName:Ug,docsSlug:"dialog"}),M4=({titleId:t})=>{const e=e_(JE),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return y.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},R4="DialogDescriptionWarning",I4=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${e_(R4).contentName}}.`;return y.useEffect(()=>{var s;const i=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},t_=FE,O4=VE,n_=WE,Hg=HE,qg=qE,Kg=YE,Yg=ZE,Od=QE;const Vp=t_,L4=n_,r_=Od,i_=y.forwardRef(({className:t,...e},n)=>d.jsx(Hg,{ref:n,className:H("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));i_.displayName=Hg.displayName;const Au=y.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(L4,{children:[d.jsx(i_,{}),d.jsxs(qg,{ref:r,className:H("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,d.jsxs(Od,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[d.jsx(fd,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Au.displayName=qg.displayName;const Mu=({className:t,...e})=>d.jsx("div",{className:H("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Mu.displayName="DialogHeader";const Gg=({className:t,...e})=>d.jsx("div",{className:H("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Gg.displayName="DialogFooter";const Ru=y.forwardRef(({className:t,...e},n)=>d.jsx(Kg,{ref:n,className:H("text-lg font-semibold leading-none tracking-tight",t),...e}));Ru.displayName=Kg.displayName;const Iu=y.forwardRef(({className:t,...e},n)=>d.jsx(Yg,{ref:n,className:H("text-sm text-muted-foreground",t),...e}));Iu.displayName=Yg.displayName;var Uh="rovingFocusGroup.onEntryFocus",z4={bubbles:!1,cancelable:!0},Ld="RovingFocusGroup",[Up,s_,D4]=vd(Ld),[$4,zd]=Mt(Ld,[D4]),[F4,B4]=$4(Ld),o_=y.forwardRef((t,e)=>d.jsx(Up.Provider,{scope:t.__scopeRovingFocusGroup,children:d.jsx(Up.Slot,{scope:t.__scopeRovingFocusGroup,children:d.jsx(V4,{...t,ref:e})})}));o_.displayName=Ld;var V4=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:a,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...h}=t,f=y.useRef(null),p=Te(e,f),g=Ea(s),[m=null,w]=gn({prop:o,defaultProp:l,onChange:a}),[v,x]=y.useState(!1),b=Tt(c),S=s_(n),k=y.useRef(!1),[C,_]=y.useState(0);return y.useEffect(()=>{const P=f.current;if(P)return P.addEventListener(Uh,b),()=>P.removeEventListener(Uh,b)},[b]),d.jsx(F4,{scope:n,orientation:r,dir:g,loop:i,currentTabStopId:m,onItemFocus:y.useCallback(P=>w(P),[w]),onItemShiftTab:y.useCallback(()=>x(!0),[]),onFocusableItemAdd:y.useCallback(()=>_(P=>P+1),[]),onFocusableItemRemove:y.useCallback(()=>_(P=>P-1),[]),children:d.jsx(le.div,{tabIndex:v||C===0?-1:0,"data-orientation":r,...h,ref:p,style:{outline:"none",...t.style},onMouseDown:ae(t.onMouseDown,()=>{k.current=!0}),onFocus:ae(t.onFocus,P=>{const O=!k.current;if(P.target===P.currentTarget&&O&&!v){const A=new CustomEvent(Uh,z4);if(P.currentTarget.dispatchEvent(A),!A.defaultPrevented){const T=S().filter(L=>L.focusable),R=T.find(L=>L.active),$=T.find(L=>L.id===m),I=[R,$,...T].filter(Boolean).map(L=>L.ref.current);c_(I,u)}}k.current=!1}),onBlur:ae(t.onBlur,()=>x(!1))})})}),l_="RovingFocusGroupItem",a_=y.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:s,...o}=t,l=Jn(),a=s||l,c=B4(l_,n),u=c.currentTabStopId===a,h=s_(n),{onFocusableItemAdd:f,onFocusableItemRemove:p}=c;return y.useEffect(()=>{if(r)return f(),()=>p()},[r,f,p]),d.jsx(Up.ItemSlot,{scope:n,id:a,focusable:r,active:i,children:d.jsx(le.span,{tabIndex:u?0:-1,"data-orientation":c.orientation,...o,ref:e,onMouseDown:ae(t.onMouseDown,g=>{r?c.onItemFocus(a):g.preventDefault()}),onFocus:ae(t.onFocus,()=>c.onItemFocus(a)),onKeyDown:ae(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){c.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const m=H4(g,c.orientation,c.dir);if(m!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let v=h().filter(x=>x.focusable).map(x=>x.ref.current);if(m==="last")v.reverse();else if(m==="prev"||m==="next"){m==="prev"&&v.reverse();const x=v.indexOf(g.currentTarget);v=c.loop?q4(v,x+1):v.slice(x+1)}setTimeout(()=>c_(v))}})})})});a_.displayName=l_;var U4={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function W4(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function H4(t,e,n){const r=W4(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return U4[r]}function c_(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function q4(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var u_=o_,d_=a_,Zg="Radio",[K4,h_]=Mt(Zg),[Y4,G4]=K4(Zg),f_=y.forwardRef((t,e)=>{const{__scopeRadio:n,name:r,checked:i=!1,required:s,disabled:o,value:l="on",onCheck:a,form:c,...u}=t,[h,f]=y.useState(null),p=Te(e,w=>f(w)),g=y.useRef(!1),m=h?c||!!h.closest("form"):!0;return d.jsxs(Y4,{scope:n,checked:i,disabled:o,children:[d.jsx(le.button,{type:"button",role:"radio","aria-checked":i,"data-state":g_(i),"data-disabled":o?"":void 0,disabled:o,value:l,...u,ref:p,onClick:ae(t.onClick,w=>{i||a==null||a(),m&&(g.current=w.isPropagationStopped(),g.current||w.stopPropagation())})}),m&&d.jsx(Z4,{control:h,bubbles:!g.current,name:r,value:l,checked:i,required:s,disabled:o,form:c,style:{transform:"translateX(-100%)"}})]})});f_.displayName=Zg;var p_="RadioIndicator",m_=y.forwardRef((t,e)=>{const{__scopeRadio:n,forceMount:r,...i}=t,s=G4(p_,n);return d.jsx(Dr,{present:r||s.checked,children:d.jsx(le.span,{"data-state":g_(s.checked),"data-disabled":s.disabled?"":void 0,...i,ref:e})})});m_.displayName=p_;var Z4=t=>{const{control:e,checked:n,bubbles:r=!0,...i}=t,s=y.useRef(null),o=_d(n),l=Cd(e);return y.useEffect(()=>{const a=s.current,c=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(c,"checked").set;if(o!==n&&h){const f=new Event("click",{bubbles:r});h.call(a,n),a.dispatchEvent(f)}},[o,n,r]),d.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:s,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function g_(t){return t?"checked":"unchecked"}var X4=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Xg="RadioGroup",[Q4,Y9]=Mt(Xg,[zd,h_]),v_=zd(),y_=h_(),[J4,eF]=Q4(Xg),x_=y.forwardRef((t,e)=>{const{__scopeRadioGroup:n,name:r,defaultValue:i,value:s,required:o=!1,disabled:l=!1,orientation:a,dir:c,loop:u=!0,onValueChange:h,...f}=t,p=v_(n),g=Ea(c),[m,w]=gn({prop:s,defaultProp:i,onChange:h});return d.jsx(J4,{scope:n,name:r,required:o,disabled:l,value:m,onValueChange:w,children:d.jsx(u_,{asChild:!0,...p,orientation:a,dir:g,loop:u,children:d.jsx(le.div,{role:"radiogroup","aria-required":o,"aria-orientation":a,"data-disabled":l?"":void 0,dir:g,...f,ref:e})})})});x_.displayName=Xg;var w_="RadioGroupItem",b_=y.forwardRef((t,e)=>{const{__scopeRadioGroup:n,disabled:r,...i}=t,s=eF(w_,n),o=s.disabled||r,l=v_(n),a=y_(n),c=y.useRef(null),u=Te(e,c),h=s.value===i.value,f=y.useRef(!1);return y.useEffect(()=>{const p=m=>{X4.includes(m.key)&&(f.current=!0)},g=()=>f.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",g)}},[]),d.jsx(d_,{asChild:!0,...l,focusable:!o,active:h,children:d.jsx(f_,{disabled:o,required:s.required,checked:h,...a,...i,name:s.name,ref:u,onCheck:()=>s.onValueChange(i.value),onKeyDown:ae(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:ae(i.onFocus,()=>{var p;f.current&&((p=c.current)==null||p.click())})})})});b_.displayName=w_;var tF="RadioGroupIndicator",S_=y.forwardRef((t,e)=>{const{__scopeRadioGroup:n,...r}=t,i=y_(n);return d.jsx(m_,{...i,...r,ref:e})});S_.displayName=tF;var k_=x_,C_=b_,nF=S_;const E_=y.forwardRef(({className:t,...e},n)=>d.jsx(k_,{className:H("grid gap-2",t),...e,ref:n}));E_.displayName=k_.displayName;const zc=y.forwardRef(({className:t,...e},n)=>d.jsx(C_,{ref:n,className:H("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:d.jsx(nF,{className:"flex items-center justify-center",children:d.jsx(TO,{className:"h-2.5 w-2.5 fill-current text-current"})})}));zc.displayName=C_.displayName;var rF="Label",__=y.forwardRef((t,e)=>d.jsx(le.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));__.displayName=rF;var N_=__;const iF=yg("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),yt=y.forwardRef(({className:t,...e},n)=>d.jsx(N_,{ref:n,className:H(iF(),t),...e}));yt.displayName=N_.displayName;const Wp="themePreference",sF=()=>{try{const t=localStorage.getItem(Wp);if(t==="light"||t==="dark"||t==="system")return t}catch(t){console.error("Error reading initial theme preference:",t)}return"system"},qi=_i()(ba(t=>({preference:sF(),setPreference:e=>{console.log(`[ThemeStore] Setting preference to: ${e}`),t({preference:e});try{localStorage.setItem(Wp,e)}catch(n){console.error("Error saving theme preference to localStorage:",n)}}}),{name:Wp,storage:Po(()=>localStorage)})),oF="https://t.me/CounterCulturalConversation",T_="app-dynamic-config",lF=()=>{var t;try{const e=localStorage.getItem(T_);if(e){const n=JSON.parse(e);if((t=n==null?void 0:n.state)!=null&&t.chatLink&&typeof n.state.chatLink=="string")return n.state.chatLink}}catch(e){console.error("Error reading initial chat link:",e)}return oF},aF=_i()(ba(t=>({chatLink:lF(),setChatLink:e=>{console.log(`[ConfigStore] Setting chatLink to: ${e}`),t({chatLink:e})}}),{name:T_,storage:Po(()=>localStorage),partialize:t=>({chatLink:t.chatLink})})),cF=t=>{try{if(!t)return null;const n=new URLSearchParams(t).get("user");if(n){const r=JSON.parse(decodeURIComponent(n));if(r&&typeof r=="object"&&typeof r.id=="number")return{userId:r.id,firstName:r.first_name||null,lastName:r.last_name||null,username:r.username||null,photoUrl:r.photo_url||null,isBot:r.is_bot||!1}}}catch(e){console.error("Failed to parse mock user data:",e)}return null},Go=({label:t,onClick:e,disabled:n=!1,currentValue:r,Icon:i})=>{const{toast:s}=ur(),o=()=>{n?s({title:"В разработке",description:"Этот раздел скоро появится.",duration:2e3}):e&&e()};return d.jsxs("button",{onClick:o,disabled:n,className:H("flex items-center w-full text-left p-4 transition-colors",n?"text-muted-foreground cursor-not-allowed opacity-60":"hover:bg-muted/50 active:bg-muted/80 cursor-pointer"),children:[i&&d.jsx(i,{className:"h-5 w-5 mr-3 text-muted-foreground flex-shrink-0"}),d.jsx("span",{className:"text-base flex-grow",children:t}),r&&d.jsx("span",{className:"text-sm text-muted-foreground mr-2",children:r}),d.jsx(gk,{className:H("h-5 w-5 flex-shrink-0",n?"text-muted-foreground/50":"text-muted-foreground")})]})},uF=()=>{console.log("[ProfilePage] Rendering...");const{tg:t,user:e}=Dn(),n=An(I=>I.logout),{isAdminAuthenticated:r}=Sr(),{toast:i}=ur(),[s,o]=y.useState(!1),l=qi(I=>I.preference),a=qi(I=>I.setPreference),[c,u]=y.useState(!1),[h,f]=y.useState(!1),p=aF(I=>I.chatLink),g=ft(),m=y.useMemo(()=>pg(),[]),w=Me.useMemo(()=>{console.log("[ProfilePage useMemo] Calculating displayUser...",{telegramUserSDK:e,isMock:m.useMock});const I=e;if(I&&typeof I.id=="number")return console.log("[ProfilePage useMemo] Using real Telegram user data."),{userId:I.id,firstName:I.first_name||null,lastName:I.last_name||null,username:I.username||null,photoUrl:I.photo_url||null,isBot:I.is_bot||!1};const L=m.useMock,z=m.mockInitData;if(L&&z){console.log("[ProfilePage useMemo] Using mock data.");const j=cF(z);return console.log("[ProfilePage useMemo] Parsed mock user:",j),j}return console.log("[ProfilePage useMemo] No real user and no mock data, returning null."),null},[e,m.useMock,m.mockInitData]);console.log("[ProfilePage] displayUser value:",w),y.useEffect(()=>{o(!1)},[w==null?void 0:w.userId]);const v=(w==null?void 0:w.firstName)||"User",x=(w==null?void 0:w.lastName)||"",b=w==null?void 0:w.username,S=w==null?void 0:w.photoUrl,k=w==null?void 0:w.userId,C=[v==null?void 0:v[0],x==null?void 0:x[0]].filter(Boolean).map(I=>I==null?void 0:I.toUpperCase()).join("")||"?",_=()=>{n()},P=()=>{s||o(!0)},O=I=>{a(I),f(!1)},A=()=>{u(!0)},T=()=>{t!=null&&t.openTelegramLink?t.openTelegramLink(p):(window.open(p,"_blank"),i({title:"Открытие ссылки",description:"Попытка открыть ссылку на чат.",duration:2e3})),u(!1)},R=()=>{switch(l){case"light":return"Светлая";case"dark":return"Темная";case"system":default:return"Как в Telegram"}},$=()=>{g("/faq")},M=()=>{g("/admin/panel",{state:{fromProfile:!0}})};return w?(console.log("[ProfilePage] Rendering main content..."),d.jsxs("div",{className:"p-4 space-y-4 pb-4 flex flex-col h-full",children:[d.jsx(Nt,{className:"flex-grow shadow-sm border rounded-lg overflow-hidden flex flex-col",children:d.jsx(mn,{className:"p-0 flex-grow overflow-y-auto no-scrollbar",children:d.jsxs("div",{className:"divide-y divide-border/60",children:[d.jsxs("div",{className:"flex items-center p-4 space-x-4",children:[d.jsx(Md,{className:"w-12 h-12 flex-shrink-0 border",children:!s&&S?d.jsx(Rd,{src:S,alt:b||"User",onError:P}):d.jsx(Id,{className:"text-xl",children:C})}),d.jsxs("div",{className:"overflow-hidden flex-grow",children:[d.jsxs("p",{className:"text-base font-semibold truncate",children:[v," ",x]}),b&&d.jsxs("p",{className:"text-sm text-muted-foreground truncate",children:["@",b]}),k&&d.jsxs("p",{className:"text-xs text-muted-foreground/70 mt-0.5",children:["Telegram ID: ",k]})]}),d.jsxs(ce,{variant:"ghost",size:"icon",className:"flex-shrink-0 text-destructive",onClick:_,children:[d.jsx(wk,{className:"h-5 w-5"}),d.jsx("span",{className:"sr-only",children:"Выйти"})]})]}),d.jsx(Go,{label:"Ответы на часто задаваемые вопросы",onClick:$,Icon:vk}),d.jsx(Go,{label:"Связаться со службой поддержки",disabled:!0,Icon:OO}),d.jsx(Go,{label:"Тема оформления",onClick:()=>f(!0),Icon:_x,currentValue:R()}),d.jsx(Go,{label:"Пригласи друга получи подарочные акции",disabled:!0,Icon:MO}),d.jsx(Go,{label:"Наш телеграмм чат",onClick:A,Icon:FO})]})})}),r&&d.jsx("div",{className:"mt-4 flex-shrink-0",children:d.jsxs(ce,{variant:"secondary",className:"w-full h-12 text-base font-medium flex items-center justify-center gap-2 shadow-sm",onClick:M,children:[d.jsx(Sk,{className:"h-5 w-5"}),"Админ-панель"]})}),d.jsx(Vp,{open:c,onOpenChange:u,children:d.jsxs(Au,{children:[d.jsxs(Mu,{children:[d.jsxs(Ru,{className:"flex items-center gap-2",children:[d.jsx(AO,{className:"h-5 w-5 text-muted-foreground"}),"Переход в Телеграмм"]}),d.jsxs(Iu,{className:"pt-2 text-left",children:["Вы собираетесь открыть наш чат в Телеграмм:",d.jsx("a",{href:p,target:"_blank",rel:"noopener noreferrer",className:"block text-primary hover:underline truncate mt-1 text-sm",onClick:I=>I.preventDefault(),children:p})]})]}),d.jsxs(Gg,{className:"mt-4",children:[d.jsx(r_,{asChild:!0,children:d.jsx(ce,{type:"button",variant:"outline",children:"Отмена"})}),d.jsx(ce,{type:"button",onClick:T,children:"Перейти"})]})]})}),d.jsx(Vp,{open:h,onOpenChange:f,children:d.jsxs(Au,{className:"sm:max-w-[425px]",children:[d.jsxs(Mu,{children:[d.jsx(Ru,{children:"Выбор темы оформления"}),d.jsx(Iu,{children:"Выберите, как должно выглядеть приложение."})]}),d.jsxs(E_,{value:l,onValueChange:I=>O(I),className:"grid gap-4 py-4",children:[d.jsxs("div",{className:"flex items-center space-x-3 rounded-md border p-3 hover:bg-accent hover:text-accent-foreground transition-colors",children:[d.jsx(zc,{value:"light",id:"theme-light"}),d.jsxs(yt,{htmlFor:"theme-light",className:"flex items-center gap-2 cursor-pointer flex-grow",children:[d.jsx(VO,{className:"h-4 w-4"})," Светлая"]})]}),d.jsxs("div",{className:"flex items-center space-x-3 rounded-md border p-3 hover:bg-accent hover:text-accent-foreground transition-colors",children:[d.jsx(zc,{value:"dark",id:"theme-dark"}),d.jsxs(yt,{htmlFor:"theme-dark",className:"flex items-center gap-2 cursor-pointer flex-grow",children:[d.jsx(zO,{className:"h-4 w-4"})," Темная"]})]}),d.jsxs("div",{className:"flex items-center space-x-3 rounded-md border p-3 hover:bg-accent hover:text-accent-foreground transition-colors",children:[d.jsx(zc,{value:"system",id:"theme-system"}),d.jsxs(yt,{htmlFor:"theme-system",className:"flex items-center gap-2 cursor-pointer flex-grow",children:[d.jsx(_x,{className:"h-4 w-4"})," Как в Telegram"]})]})]})]})})]})):(console.error("[ProfilePage] displayUser is null or undefined, rendering error message."),d.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Не удалось загрузить данные пользователя. Попробуйте перезайти."}))};var Qg="Checkbox",[dF,G9]=Mt(Qg),[hF,fF]=dF(Qg),P_=y.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:s,required:o,disabled:l,value:a="on",onCheckedChange:c,form:u,...h}=t,[f,p]=y.useState(null),g=Te(e,S=>p(S)),m=y.useRef(!1),w=f?u||!!f.closest("form"):!0,[v=!1,x]=gn({prop:i,defaultProp:s,onChange:c}),b=y.useRef(v);return y.useEffect(()=>{const S=f==null?void 0:f.form;if(S){const k=()=>x(b.current);return S.addEventListener("reset",k),()=>S.removeEventListener("reset",k)}},[f,x]),d.jsxs(hF,{scope:n,state:v,disabled:l,children:[d.jsx(le.button,{type:"button",role:"checkbox","aria-checked":hi(v)?"mixed":v,"aria-required":o,"data-state":M_(v),"data-disabled":l?"":void 0,disabled:l,value:a,...h,ref:g,onKeyDown:ae(t.onKeyDown,S=>{S.key==="Enter"&&S.preventDefault()}),onClick:ae(t.onClick,S=>{x(k=>hi(k)?!0:!k),w&&(m.current=S.isPropagationStopped(),m.current||S.stopPropagation())})}),w&&d.jsx(pF,{control:f,bubbles:!m.current,name:r,value:a,checked:v,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"},defaultChecked:hi(s)?!1:s})]})});P_.displayName=Qg;var j_="CheckboxIndicator",A_=y.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...i}=t,s=fF(j_,n);return d.jsx(Dr,{present:r||hi(s.state)||s.state===!0,children:d.jsx(le.span,{"data-state":M_(s.state),"data-disabled":s.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...t.style}})})});A_.displayName=j_;var pF=t=>{const{control:e,checked:n,bubbles:r=!0,defaultChecked:i,...s}=t,o=y.useRef(null),l=_d(n),a=Cd(e);y.useEffect(()=>{const u=o.current,h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==n&&p){const g=new Event("click",{bubbles:r});u.indeterminate=hi(n),p.call(u,hi(n)?!1:n),u.dispatchEvent(g)}},[l,n,r]);const c=y.useRef(hi(n)?!1:n);return d.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??c.current,...s,tabIndex:-1,ref:o,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function hi(t){return t==="indeterminate"}function M_(t){return hi(t)?"indeterminate":t?"checked":"unchecked"}var R_=P_,mF=A_;const I_=y.forwardRef(({className:t,...e},n)=>d.jsx(R_,{ref:n,className:H("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:d.jsx(mF,{className:H("flex items-center justify-center text-current"),children:d.jsx(pk,{className:"h-4 w-4"})})}));I_.displayName=R_.displayName;const gF=()=>{const{fetchPortfolio:t}=nr(),{toast:e}=ur(),[n,r]=y.useState(!1),[i,s]=y.useState(!1),o=async()=>{if(!i){e({title:"Требуется подтверждение",description:"Пожалуйста, подтвердите, что вы понимаете, что это обучающее приложение.",variant:"destructive"});return}if(!n){r(!0),console.log("[RegisterInitialPage] Calling createInitialBrokerAccount API...");try{const l=await nI();console.log("[RegisterInitialPage] API Response:",l),l.isSuccess?(e({title:"Счет создан!",description:"Ваш первый брокерский счет готов.",variant:"success"}),await t(!0)):(e({title:"Ошибка создания",description:l.errorMessage||"Не удалось создать счет.",variant:"destructive"}),console.error("[RegisterInitialPage] Account creation failed:",l.errorMessage))}catch(l){console.error("[RegisterInitialPage] Unexpected error in handleCreateAccount:",l),e({title:"Ошибка клиента",description:(l==null?void 0:l.message)||"Произошла непредвиденная ошибка.",variant:"destructive"})}finally{r(!1)}}};return d.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-gray-50",children:d.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-md",children:[d.jsx("div",{className:"text-center",children:d.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"ВНИМАНИЕ!"})}),d.jsxs("div",{className:"space-y-3 text-sm text-center text-gray-600",children:[d.jsxs("p",{children:["Данное приложение является ",d.jsx("strong",{className:"font-semibold",children:"обучающим"}),"."]}),d.jsxs("p",{children:["Эти заработанные или потерянные деньги - ",d.jsx("strong",{className:"font-semibold text-red-600",children:"не настоящие"}),"."]})]}),d.jsxs("div",{className:"flex items-center space-x-2 p-4 bg-blue-50 border border-blue-200 rounded",children:[d.jsx(I_,{id:"confirmation",checked:i,onCheckedChange:l=>s(!!l),"aria-label":"Confirm understanding"}),d.jsx(yt,{htmlFor:"confirmation",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-gray-700",children:"Да, я понимаю, что это не настоящее инвестиционное приложение с ненастоящими деньгами."})]}),d.jsx(ce,{onClick:o,disabled:n||!i,className:"w-full",children:n?d.jsx(Ne,{size:"sm"}):"Открыть первый брокерский счет"})]})})},O_=(t,e)=>{var r;if(!t||t.data===null||typeof t.data>"u"||typeof t.data.isSuccess!="boolean"){console.error("[API Helper] Invalid/Undefined Response Structure:",t);let i=e;return(t==null?void 0:t.data)===null?i="Received null data from server.":(r=t==null?void 0:t.data)!=null&&r.errorMessage?i=t.data.errorMessage:t!=null&&t.statusText&&(i=t.statusText),{isSuccess:!1,errorMessage:i,resultObject:null}}return t.data},L_=(t,e)=>{var r,i,s,o,l;console.error(`[API Error Handler] ${e}:`,t);let n=e;return t instanceof Error?n=t.message:typeof t=="string"?n=t:((r=t==null?void 0:t.response)==null?void 0:r.status)===400||((i=t==null?void 0:t.response)==null?void 0:i.status)===401?n="Неверный логин или пароль.":((s=t==null?void 0:t.response)==null?void 0:s.status)===403?n="Ошибка прав доступа. Требуются права администратора.":t!=null&&t.response?n=`Request failed (${t.response.status}): ${((o=t.response.data)==null?void 0:o.errorMessage)||((l=t.response.data)==null?void 0:l.title)||t.response.statusText||"Server error"}`:t!=null&&t.request?n="No response received from server.":t!=null&&t.errorMessage&&(n=t.errorMessage),{isSuccess:!1,errorMessage:n,resultObject:null}},vF=async t=>{const e="Login failed.";if(typeof t!="string"||t.length===0)return console.error("[API/Auth] Invalid initDataString received:",t),{isSuccess:!1,errorMessage:"Invalid initData provided to API call",resultObject:null};const n=`tma ${t}`;console.log("[API/Auth] Sending request body (first 60 chars):",n.substring(0,60)+"...");try{const r=await at.post("/Account/LoginByTelegramUserInfo",n,{headers:{"Content-Type":"text/plain"}});return console.log("[API/Auth loginByTelegramUserInfo] Response received:",r==null?void 0:r.data),O_(r,e)}catch(r){return L_(r,e)}},yF=async(t,e)=>{const n="Admin login failed.",r={Login:t,Password:e};console.log("[API/Auth loginByLoginPassword] Attempting login with:",{login:t,password:"***"});try{const i=await at.post("/Account/LoginByLogPassPair",r);return console.log("[API/Auth loginByLoginPassword] Raw API Response:",i),O_(i,n)}catch(i){return L_(i,n)}},xF=t=>{try{if(!t)return null;const n=new URLSearchParams(t).get("user");if(n){const r=JSON.parse(decodeURIComponent(n));if(r&&typeof r=="object"&&typeof r.id=="number")return{userId:r.id,firstName:r.first_name||null,lastName:r.last_name||null,username:r.username||null,photoUrl:r.photo_url||null,isBot:r.is_bot||!1}}}catch(e){console.error("Failed to parse mock user data:",e)}return null},wF=()=>{console.log("--- RENDERING LoginPage ---");const{user:t,initData:e}=Dn(),{login:n,isAuthenticated:r,isLoading:i}=An(),[s,o]=y.useState(!1),{toast:l}=ur(),a=ft(),{IS_MOCK_MODE:c,MOCK_INIT_DATA_STRING:u}=y.useMemo(()=>{const k=pg();return{IS_MOCK_MODE:k.useMock,MOCK_INIT_DATA_STRING:k.mockInitData||""}},[]),h=y.useMemo(()=>{const k=t;return k&&typeof k.id=="number"?{userId:k.id,firstName:k.first_name||null,lastName:k.last_name||null,username:k.username||null,photoUrl:k.photo_url||null,isBot:k.is_bot||!1}:c&&u?xF(u):null},[t,c,u]),f=y.useMemo(()=>(c?u:e)||null,[e,c,u]);if(i)return d.jsx("div",{className:"flex items-center justify-center min-h-screen",children:d.jsx(Ne,{size:"lg"})});if(r)return console.log("[LoginPage] Already authenticated, redirecting..."),d.jsx(di,{to:"/",replace:!0});const p=async()=>{var k;if(console.log("[LoginPage] Login button clicked."),!f){l({title:"Ошибка",description:"Необходимые данные для входа недоступны.",variant:"destructive"}),console.error("[LoginPage] Login button clicked but loginDataString is null or empty.",{isMock:c});return}o(!0),console.log("[LoginPage] Calling loginByTelegramUserInfo...");try{const C=await vF(f);if(console.log("[LoginPage] Manual Login API Response Raw:",C),C.isSuccess&&((k=C.resultObject)!=null&&k.jwt))n(C.resultObject.userId,C.resultObject.jwt),l({title:"Вход выполнен",variant:"success",duration:2e3});else throw new Error(C.errorMessage||"Не удалось войти через API.")}catch(C){console.error("[LoginPage] Manual Login Exception/Error:",C),l({title:"Ошибка входа",description:(C==null?void 0:C.message)||"Неизвестная ошибка.",variant:"destructive"})}finally{o(!1)}},g=()=>{a("/admin/login")},m=!f||s,w=(h==null?void 0:h.firstName)||"Welcome",v=(h==null?void 0:h.lastName)||"",x=h==null?void 0:h.username,b=h==null?void 0:h.photoUrl,S=[w==null?void 0:w[0],v==null?void 0:v[0]].filter(Boolean).map(k=>k.toUpperCase()).join("")||"?";return console.log("[LoginPage - Before Render]",{IS_MOCK_MODE:c,loginDataStringExists:!!f,displayUserExists:!!h,displayUserValue:h,isAuthLoading:i,isAuthenticated:r}),d.jsx("div",{className:"flex items-center justify-center min-h-screen p-4 bg-gradient-to-br from-blue-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-blue-900/30",children:d.jsxs(Nt,{className:"w-full max-w-sm shadow-xl rounded-xl",children:[d.jsxs(zr,{className:"items-center text-center pt-8 pb-6",children:[d.jsx(Md,{className:"w-24 h-24 mb-4 border-4 border-background shadow-md",children:b?d.jsx(Rd,{src:b,alt:x||"User",className:"object-cover"}):d.jsx(Id,{className:"text-4xl font-light text-muted-foreground bg-gradient-to-br from-slate-200 to-slate-300 dark:from-gray-600 dark:to-gray-700",children:S!=="?"?S:""})}),d.jsx(Ni,{className:"text-xl font-semibold",children:w==="Welcome"?"Добро пожаловать!":`${w}${v?` ${v}`:""}`}),x&&d.jsxs(pd,{children:["@",x]})]}),d.jsxs(mn,{className:"flex flex-col items-center space-y-5 px-6 pb-8",children:[d.jsxs(ce,{className:"w-full h-12 text-base font-semibold shadow hover:shadow-md transition-shadow",onClick:p,disabled:m,children:[s&&d.jsx(Ne,{size:"sm"}),"Войти с помощью Telegram"]}),d.jsxs("div",{className:"relative w-full max-w-[200px]",children:[d.jsx("div",{className:"absolute inset-0 flex items-center",children:d.jsx("span",{className:"w-full border-t"})}),d.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:d.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"или"})})]}),d.jsx(ce,{variant:"link",className:"text-muted-foreground hover:text-primary h-9 px-1",onClick:g,children:"Войти по логину и паролю"})]})]})})},z_=Me.memo(({asset:t})=>d.jsx(zk,{logoUrl:t.logoUrl,ticker:t.ticker,className:"h-10 w-10 rounded-full border"}));z_.displayName="AssetHeader";const D_=(t,e)=>{var r;if(!t||t.data===null||typeof t.data>"u"||typeof t.data.isSuccess!="boolean"){console.error("[API Helper] Invalid/Undefined Response Structure:",t);let i=e;return(t==null?void 0:t.data)===null?i="Received null data from server.":(r=t==null?void 0:t.data)!=null&&r.errorMessage?i=t.data.errorMessage:t!=null&&t.statusText&&(i=t.statusText),{isSuccess:!1,errorMessage:i,resultObject:null}}return t.data},$_=(t,e)=>{var r,i;console.error(`[API Error Handler] ${e}:`,t);let n=e;return t instanceof Error?n=t.message:typeof t=="string"?n=t:t!=null&&t.response?n=`Request failed (${t.response.status}): ${((r=t.response.data)==null?void 0:r.errorMessage)||((i=t.response.data)==null?void 0:i.title)||t.response.statusText||"Server error"}`:t!=null&&t.request?n="No response received from server.":t!=null&&t.errorMessage&&(n=t.errorMessage),{isSuccess:!1,errorMessage:n,resultObject:null}},bF=async t=>{const e="Buy operation failed.";console.log("[API/Trade] buyAssets payload:",t);try{const n=await at.post("/api/BrokerAccountUser/BuyAssets",t);return console.log("[API/Trade] buyAssets response:",n==null?void 0:n.data),D_(n,e)}catch(n){return $_(n,e)}},SF=async t=>{const e="Sell operation failed.";console.log("[API/Trade] sellAssets payload:",t);try{const n=await at.post("/api/BrokerAccountUser/SellAssets",t);return console.log("[API/Trade] sellAssets response:",n==null?void 0:n.data),D_(n,e)}catch(n){return $_(n,e)}},Pn=y.forwardRef(({className:t,type:e,...n},r)=>d.jsx("input",{type:e,className:H("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));Pn.displayName="Input";var kF="Separator",r0="horizontal",CF=["horizontal","vertical"],F_=y.forwardRef((t,e)=>{const{decorative:n,orientation:r=r0,...i}=t,s=EF(r)?r:r0,l=n?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return d.jsx(le.div,{"data-orientation":s,...l,...i,ref:e})});F_.displayName=kF;function EF(t){return CF.includes(t)}var B_=F_;const V_=y.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},i)=>d.jsx(B_,{ref:i,decorative:n,orientation:e,className:H("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));V_.displayName=B_.displayName;const U_=Me.memo(({asset:t,accounts:e})=>{var se,be,he,J;const{toast:n}=ur(),{fetchPortfolio:r}=nr(),[i,s]=y.useState(""),[o,l]=y.useState(1),[a,c]=y.useState(!1),{prices:u,isLoading:h,error:f}=md(t?[t.ticker]:[]),p=t?u.get(t.ticker):null,g=y.useMemo(()=>(e==null?void 0:e.map(Q=>Q.brokerAccount).filter(Q=>!!Q))??[],[e]),m=y.useMemo(()=>e==null?void 0:e.find(Q=>{var B;return((B=Q.brokerAccount)==null?void 0:B.id.toString())===i}),[e,i]),w=y.useMemo(()=>m==null?void 0:m.portfolioItems.find(Q=>Q.assetId===(t==null?void 0:t.id)),[m,t==null?void 0:t.id]),v=y.useMemo(()=>(w==null?void 0:w.quantity)??0,[w]),x=y.useMemo(()=>{var Q;return((Q=m==null?void 0:m.portfolioItems.find(B=>{var U;return((U=B.asset)==null?void 0:U.ticker)==="RUB"}))==null?void 0:Q.quantity)??0},[m]),b=y.useMemo(()=>Math.max(1,(t==null?void 0:t.lotSize)||1),[t]),S=y.useMemo(()=>o*b,[o,b]),k=y.useMemo(()=>p?Math.round(p.price*100):null,[p]),C=y.useMemo(()=>k===null&&(t!=null&&t.price)?Math.round(t.price*100):null,[k,t]),_=k??C,P=y.useMemo(()=>_!==null?_*S:0,[_,S]),O=y.useMemo(()=>(p==null?void 0:p.commissionFeePercent)??(t==null?void 0:t.commissionFeePercent)??0,[p,t]),A=y.useMemo(()=>Math.round(P*(O/100)),[P,O]),T=y.useMemo(()=>P+A,[P,A]),R=y.useMemo(()=>P-A,[P,A]),$=y.useMemo(()=>!h&&_!==null,[h,_]),M=v>0;y.useEffect(()=>{!i&&g.length>0&&s(g[0].id.toString())},[g,i]),y.useEffect(()=>{l(1)},[i]);const I=y.useCallback(Q=>{const B=Q.target.value;if(B===""){l(0);return}let U=parseInt(B,10);U=Math.max(1,isNaN(U)||U<1?1:U),l(U)},[]),L=y.useCallback(Q=>{if(a)return"Обработка...";if(!t)return"Актив не загружен";if(!$)return"Ожидание цены...";if(!i)return"Выберите счет";if(o<=0)return"Кол-во лотов > 0";if(Q==="buy"&&T>x)return"Недостаточно средств";if(Q==="sell"){if(!M)return"Нет актива для продажи";if(S>v)return"Недостаточно активов"}return null},[a,t,$,o,i,T,x,M,S,v]),z=L("buy"),j=z!==null,D=L("sell"),E=!M||D!==null,W=M?D:"Нет актива для продажи",ee=y.useCallback(async Q=>{const B=Q==="buy"?z:W;if(!i){n({title:"Счет не выбран",variant:"destructive"});return}if(B){n({title:Q==="buy"?"Покупка недоступна":"Продажа недоступна",description:B,variant:"destructive"});return}if(!t||!t.id||_===null||o<=0){n({title:"Ошибка данных",description:"Недостаточно данных для совершения сделки.",variant:"destructive"});return}c(!0);const U={BrokerAccountId:parseInt(i,10),AssetId:t.id,Quantity:S};try{const oe=await(Q==="buy"?bF:SF)(U);if(oe.isSuccess)n({title:"Заявка создана",description:`${Q==="buy"?"Покупка":"Продажа"} ${o} лот(ов) ${t.ticker}`,variant:"success"}),r(!0),l(1);else throw new Error(oe.errorMessage||"Операция не удалась.")}catch(ne){n({title:"Ошибка заявки",description:ne.message||"Неизвестная ошибка.",variant:"destructive"})}finally{c(!1)}},[t,i,o,b,S,_,z,W,n,r]),N=y.useCallback((Q,B)=>{var _e,Re;if(!Q)return null;const U=B==null?void 0:B.find(Ye=>{var Je;return((Je=Ye.brokerAccount)==null?void 0:Je.id)===Q.id}),ne=((_e=U==null?void 0:U.portfolioItems.find(Ye=>{var Je;return((Je=Ye.asset)==null?void 0:Je.ticker)==="RUB"}))==null?void 0:_e.quantity)??0,oe=((Re=U==null?void 0:U.portfolioItems.find(Ye=>Ye.assetId===(t==null?void 0:t.id)))==null?void 0:Re.quantity)??0;return d.jsx(to,{value:Q.id.toString(),children:d.jsxs("div",{className:"flex justify-between w-full items-center",children:[d.jsx("span",{children:Q.title}),d.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:[xr(ne),oe>0&&` / ${Cn(oe,0)} шт.`]})]})},Q.id)},[t==null?void 0:t.id]);return t?d.jsxs("div",{className:"space-y-5",children:[d.jsxs("div",{children:[d.jsx(yt,{htmlFor:"trade-account",className:"text-xs text-muted-foreground mb-1 block",children:"На счет"}),d.jsxs(_E,{value:i,onValueChange:s,disabled:g.length<=0||a,children:[d.jsx(Dg,{id:"trade-account",className:"h-auto py-2.5 px-3 justify-start text-left",children:m&&e?d.jsxs("div",{className:"flex items-center gap-3",children:[" ",d.jsx("span",{className:"flex items-center justify-center h-7 w-7 bg-muted rounded text-xs font-mono text-muted-foreground flex-shrink-0",children:((be=(se=m.brokerAccount)==null?void 0:se.type)==null?void 0:be.substring(0,3).toUpperCase())||"ACC"})," ",d.jsxs("div",{className:"min-w-0",children:[" ",d.jsx("p",{className:"text-sm font-medium leading-tight truncate",children:(he=m.brokerAccount)==null?void 0:he.title.replace(/["«»]/g,"")})," ",d.jsx("p",{className:"text-xs leading-tight text-muted-foreground",children:xr(x)})," "]})," "]}):d.jsx("span",{className:"text-muted-foreground text-sm",children:g.length>0?"Выберите счет...":"Нет доступных счетов"})}),d.jsxs($g,{children:[g.map(Q=>N(Q,e)),g.length===0&&d.jsx(to,{value:"-",disabled:!0,children:"Нет доступных счетов"})]})]}),m&&d.jsxs("div",{className:"text-xs text-muted-foreground mt-1.5 px-1 flex justify-between",children:[" ",d.jsxs("span",{children:["Доступно: ",xr(x)]})," ",v>0&&d.jsxs("span",{children:["В портфеле: ",Cn(v,0)," шт."]})," "]})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[d.jsx(yt,{htmlFor:"quantityLots",className:"text-sm font-medium",children:"Количество лотов"}),d.jsxs("span",{className:"text-xs text-muted-foreground",children:[Cn(b,0)," шт. в лоте"]})]}),d.jsx(Pn,{id:"quantityLots",type:"number",value:o===0?"":o.toString(),onChange:I,min:1,step:1,className:H("h-11 text-base"),disabled:a})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[" ",d.jsx(yt,{className:"text-sm font-medium",children:"Цена"})," ",d.jsx("span",{className:"text-xs text-muted-foreground",children:"за 1 шт."})," "]}),d.jsxs("div",{className:"relative",children:[d.jsx(Pn,{type:"text",value:_!==null?Cn(_/100,((J=t.assetType)==null?void 0:J.title)==="bond"?4:2):h?"Загрузка...":"---",readOnly:!0,className:H("h-11 text-base pr-10 cursor-default","bg-muted/60 border-muted/80 text-muted-foreground","focus-visible:ring-0 focus-visible:ring-offset-0 focus-visible:border-muted/80")}),d.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"₽"})]}),f&&d.jsxs("p",{className:"text-xs text-destructive mt-1.5 px-1 flex items-center gap-1",children:[d.jsx(_O,{size:14})," Ошибка загрузки цены"]}),!f&&d.jsx("p",{className:"text-xs text-muted-foreground mt-1.5 px-1",children:"Рыночная заявка по лучшей доступной цене."})]}),d.jsxs("div",{className:"space-y-1.5 text-sm bg-card p-3 rounded-md border",children:[d.jsxs("div",{className:"flex justify-between text-muted-foreground",children:[d.jsxs("span",{children:["Стоимость (",Cn(S)," шт.)"]}),d.jsx("span",{children:_===null?"-":xr(P)})]}),d.jsxs("div",{className:"flex justify-between text-muted-foreground",children:[d.jsxs("span",{children:["Комиссия ≈ ",Cn(O,2),"%"]}),d.jsx("span",{children:_===null?"-":xr(A)})]}),d.jsx(V_,{className:"my-2 bg-border/50"}),d.jsxs("div",{className:H("flex justify-between font-medium text-sm pt-1 text-success transition-opacity duration-200"),children:[d.jsx("span",{children:"Итог (покупка)"}),_===null?"-":d.jsx(Ut,{value:T})]}),M&&d.jsxs("div",{className:H("flex justify-between font-medium text-sm text-destructive transition-opacity duration-200"),children:[d.jsx("span",{children:"Итог (продажа)"}),_===null?"-":d.jsx(Ut,{value:R})]})]}),t.ticker!=="RUB"&&d.jsxs("div",{className:H("fixed bottom-0 left-0 right-0 z-50 p-3 bg-background/95 backdrop-blur-sm border-t border-border/50","pb-[calc(0.75rem+env(safe-area-inset-bottom,0px))]","flex gap-3"),children:[d.jsx(ce,{variant:"destructive",className:"flex-1 h-12 text-base font-semibold transition-opacity",onClick:()=>ee("sell"),disabled:E,title:W||"",children:a&&o>0?d.jsx(Ne,{size:"sm"}):"Продать"}),d.jsx(ce,{variant:"success",className:"flex-1 h-12 text-base font-semibold transition-opacity",onClick:()=>ee("buy"),disabled:j,title:z||"",children:a&&o>0?d.jsx(Ne,{size:"sm"}):"Купить"})]})]}):d.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Актив не найден."})});U_.displayName="AssetTradeForm";function Fe(t){var e=t.width,n=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(n<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:n}}function Ki(t,e){return t.width===e.width&&t.height===e.height}var _F=function(){function t(e){var n=this;this._resolutionListener=function(){return n._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var n=this,r={next:e};return this._observers.push(r),{unsubscribe:function(){n._observers=n._observers.filter(function(i){return i!==r})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(n){return n.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}();function NF(t){return new _F(t)}var TF=function(){function t(e,n,r){var i;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=Fe({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=n??function(s){return s},this._allowResizeObserver=(i=r==null?void 0:r.allowResizeObserver)!==null&&i!==void 0?i:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,n;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(n=this._devicePixelRatioObservable)===null||n===void 0||n.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return Fe({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=Fe(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(n){return n!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(n){return n!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var n=this.bitmapSize;Ki(n,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(n,e))},t.prototype._emitBitmapSizeChanged=function(e,n){var r=this;this._bitmapSizeChangedListeners.forEach(function(i){return i.call(r,e,n)})},t.prototype._suggestNewBitmapSize=function(e){var n=this._suggestedBitmapSize,r=Fe(this._transformBitmapSize(e,this._canvasElementClientSize)),i=Ki(this.bitmapSize,r)?null:r;n===null&&i===null||n!==null&&i!==null&&Ki(n,i)||(this._suggestedBitmapSize=i,this._emitSuggestedBitmapSizeChanged(n,i))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,n){var r=this;this._suggestedBitmapSizeChangedListeners.forEach(function(i){return i.call(r,e,n)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}jF().then(function(n){return n?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var n=i0(this._canvasElement);if(n===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=NF(n),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,n;if(this._canvasElement!==null){var r=i0(this._canvasElement);if(r!==null){var i=(n=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&n!==void 0?n:r.devicePixelRatio,s=this._canvasElement.getClientRects(),o=s[0]!==void 0?AF(s[0],i):Fe({width:this._canvasElementClientSize.width*i,height:this._canvasElementClientSize.height*i});this._suggestNewBitmapSize(o)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(n){var r=n.find(function(o){return o.target===e._canvasElement});if(!(!r||!r.devicePixelContentBoxSize||!r.devicePixelContentBoxSize[0])){var i=r.devicePixelContentBoxSize[0],s=Fe({width:i.inlineSize,height:i.blockSize});e._suggestNewBitmapSize(s)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function PF(t,e){return new TF(t,e.transform,e.options)}function i0(t){return t.ownerDocument.defaultView}function jF(){return new Promise(function(t){var e=new ResizeObserver(function(n){t(n.every(function(r){return"devicePixelContentBoxSize"in r})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function AF(t,e){return Fe({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var MF=function(){function t(e,n,r){if(n.width===0||n.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=n,r.width===0||r.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=r,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function ls(t,e){var n=t.canvasElementClientSize;if(n.width===0||n.height===0)return null;var r=t.bitmapSize;if(r.width===0||r.height===0)return null;var i=t.canvasElement.getContext("2d",e);return i===null?null:new MF(i,n,r)}/*!
 * @license
 * TradingView Lightweight Charts™ v4.2.3
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const RF={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},IF={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},OF={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},LF={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},zF={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},DF={color:"#26a69a",base:0},W_={color:"#2196f3"},H_={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var s0,o0;function as(t,e){const n={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(n)}function q_(t,e,n,r){t.beginPath();const i=t.lineWidth%2?.5:0;t.moveTo(n,e+i),t.lineTo(r,e+i),t.stroke()}function Si(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function Pt(t){if(t===void 0)throw new Error("Value is undefined");return t}function K(t){if(t===null)throw new Error("Value is null");return t}function Bs(t){return K(Pt(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(s0||(s0={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(o0||(o0={}));const l0={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function ln(t){return t<0?0:t>255?255:Math.round(t)||0}function K_(t){return t<=0||t>1?Math.min(Math.max(t,0),1):Math.round(1e4*t)/1e4}const $F=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,FF=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,BF=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,VF=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d*\.?\d+)\s*\)$/;function aa(t){(t=t.toLowerCase())in l0&&(t=l0[t]);{const e=VF.exec(t)||BF.exec(t);if(e)return[ln(parseInt(e[1],10)),ln(parseInt(e[2],10)),ln(parseInt(e[3],10)),K_(e.length<5?1:parseFloat(e[4]))]}{const e=FF.exec(t);if(e)return[ln(parseInt(e[1],16)),ln(parseInt(e[2],16)),ln(parseInt(e[3],16)),1]}{const e=$F.exec(t);if(e)return[ln(17*parseInt(e[1],16)),ln(17*parseInt(e[2],16)),ln(17*parseInt(e[3],16)),1]}throw new Error(`Cannot parse color: ${t}`)}function Y_(t){return .199*t[0]+.687*t[1]+.114*t[2]}function Dd(t){const e=aa(t);return{t:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,i:Y_(e)>160?"black":"white"}}class Xe{constructor(){this.h=[]}l(e,n,r){const i={o:e,_:n,u:r===!0};this.h.push(i)}v(e){const n=this.h.findIndex(r=>e===r.o);n>-1&&this.h.splice(n,1)}p(e){this.h=this.h.filter(n=>n._!==e)}m(e,n,r){const i=[...this.h];this.h=this.h.filter(s=>!s.u),i.forEach(s=>s.o(e,n,r))}M(){return this.h.length>0}S(){this.h=[]}}function Ln(t,...e){for(const n of e)for(const r in n)n[r]!==void 0&&Object.prototype.hasOwnProperty.call(n,r)&&!["__proto__","constructor","prototype"].includes(r)&&(typeof n[r]!="object"||t[r]===void 0||Array.isArray(n[r])?t[r]=n[r]:Ln(t[r],n[r]));return t}function Gn(t){return typeof t=="number"&&isFinite(t)}function ca(t){return typeof t=="number"&&t%1==0}function Ta(t){return typeof t=="string"}function ic(t){return typeof t=="boolean"}function Cr(t){const e=t;if(!e||typeof e!="object")return e;let n,r,i;for(r in n=Array.isArray(e)?[]:{},e)e.hasOwnProperty(r)&&(i=e[r],n[r]=i&&typeof i=="object"?Cr(i):i);return n}function UF(t){return t!==null}function ua(t){return t===null?void 0:t}const Jg="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function bo(t,e,n){return e===void 0&&(e=Jg),`${n=n!==void 0?`${n} `:""}${t}px ${e}`}class WF{constructor(e){this.k={C:1,T:5,P:NaN,R:"",D:"",V:"",O:"",B:0,A:0,I:0,L:0,N:0},this.F=e}W(){const e=this.k,n=this.j(),r=this.H();return e.P===n&&e.D===r||(e.P=n,e.D=r,e.R=bo(n,r),e.L=2.5/12*n,e.B=e.L,e.A=n/12*e.T,e.I=n/12*e.T,e.N=0),e.V=this.$(),e.O=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class ev{constructor(){this.Y=[]}Z(e){this.Y=e}X(e,n,r){this.Y.forEach(i=>{i.X(e,n,r)})}}class Fn{X(e,n,r){e.useBitmapCoordinateSpace(i=>this.K(i,n,r))}}class HF extends Fn{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K({context:e,horizontalPixelRatio:n,verticalPixelRatio:r}){if(this.G===null||this.G.tt===null)return;const i=this.G.tt,s=this.G,o=Math.max(1,Math.floor(n))%2/2,l=a=>{e.beginPath();for(let c=i.to-1;c>=i.from;--c){const u=s.it[c],h=Math.round(u.nt*n)+o,f=u.st*r,p=a*r+o;e.moveTo(h,f),e.arc(h,f,p,0,2*Math.PI)}e.fill()};s.et>0&&(e.fillStyle=s.rt,l(s.ht+s.et)),e.fillStyle=s.lt,l(s.ht)}}function qF(){return{it:[{nt:0,st:0,ot:0,_t:0}],lt:"",rt:"",ht:0,et:0,tt:null}}const KF={from:0,to:1};class YF{constructor(e,n){this.ut=new ev,this.ct=[],this.dt=[],this.ft=!0,this.F=e,this.vt=n,this.ut.Z(this.ct)}bt(e){const n=this.F.wt();n.length!==this.ct.length&&(this.dt=n.map(qF),this.ct=this.dt.map(r=>{const i=new HF;return i.J(r),i}),this.ut.Z(this.ct)),this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.ut}Mt(){const e=this.vt.W().mode===2,n=this.F.wt(),r=this.vt.xt(),i=this.F.St();n.forEach((s,o)=>{var l;const a=this.dt[o],c=s.kt(r);if(e||c===null||!s.yt())return void(a.tt=null);const u=K(s.Ct());a.lt=c.Tt,a.ht=c.ht,a.et=c.Pt,a.it[0]._t=c._t,a.it[0].st=s.Dt().Rt(c._t,u.Vt),a.rt=(l=c.Ot)!==null&&l!==void 0?l:this.F.Bt(a.it[0].st/s.Dt().At()),a.it[0].ot=r,a.it[0].nt=i.It(r),a.tt=KF})}}class GF extends Fn{constructor(e){super(),this.zt=e}K({context:e,bitmapSize:n,horizontalPixelRatio:r,verticalPixelRatio:i}){if(this.zt===null)return;const s=this.zt.Lt.yt,o=this.zt.Et.yt;if(!s&&!o)return;const l=Math.round(this.zt.nt*r),a=Math.round(this.zt.st*i);e.lineCap="butt",s&&l>=0&&(e.lineWidth=Math.floor(this.zt.Lt.et*r),e.strokeStyle=this.zt.Lt.V,e.fillStyle=this.zt.Lt.V,as(e,this.zt.Lt.Nt),function(c,u,h,f){c.beginPath();const p=c.lineWidth%2?.5:0;c.moveTo(u+p,h),c.lineTo(u+p,f),c.stroke()}(e,l,0,n.height)),o&&a>=0&&(e.lineWidth=Math.floor(this.zt.Et.et*i),e.strokeStyle=this.zt.Et.V,e.fillStyle=this.zt.Et.V,as(e,this.zt.Et.Nt),q_(e,a,0,n.width))}}class ZF{constructor(e){this.ft=!0,this.Ft={Lt:{et:1,Nt:0,V:"",yt:!1},Et:{et:1,Nt:0,V:"",yt:!1},nt:0,st:0},this.Wt=new GF(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.yt(),n=K(this.jt.Ht()),r=n.$t().W().crosshair,i=this.Ft;if(r.mode===2)return i.Et.yt=!1,void(i.Lt.yt=!1);i.Et.yt=e&&this.jt.Ut(n),i.Lt.yt=e&&this.jt.qt(),i.Et.et=r.horzLine.width,i.Et.Nt=r.horzLine.style,i.Et.V=r.horzLine.color,i.Lt.et=r.vertLine.width,i.Lt.Nt=r.vertLine.style,i.Lt.V=r.vertLine.color,i.nt=this.jt.Yt(),i.st=this.jt.Zt()}}function XF(t,e,n,r,i,s){t.fillRect(e+s,n,r-2*s,s),t.fillRect(e+s,n+i-s,r-2*s,s),t.fillRect(e,n,s,i),t.fillRect(e+r-s,n,s,i)}function $d(t,e,n,r,i,s){t.save(),t.globalCompositeOperation="copy",t.fillStyle=s,t.fillRect(e,n,r,i),t.restore()}function a0(t,e,n,r,i,s){t.beginPath(),t.roundRect?t.roundRect(e,n,r,i,s):(t.lineTo(e+r-s[1],n),s[1]!==0&&t.arcTo(e+r,n,e+r,n+s[1],s[1]),t.lineTo(e+r,n+i-s[2]),s[2]!==0&&t.arcTo(e+r,n+i,e+r-s[2],n+i,s[2]),t.lineTo(e+s[3],n+i),s[3]!==0&&t.arcTo(e,n+i,e,n+i-s[3],s[3]),t.lineTo(e,n+s[0]),s[0]!==0&&t.arcTo(e,n,e+s[0],n,s[0]))}function c0(t,e,n,r,i,s,o=0,l=[0,0,0,0],a=""){if(t.save(),!o||!a||a===s)return a0(t,e,n,r,i,l),t.fillStyle=s,t.fill(),void t.restore();const c=o/2;var u;a0(t,e+c,n+c,r-o,i-o,(u=-c,l.map(h=>h===0?h:h+u))),s!=="transparent"&&(t.fillStyle=s,t.fill()),a!=="transparent"&&(t.lineWidth=o,t.strokeStyle=a,t.closePath(),t.stroke()),t.restore()}function G_(t,e,n,r,i,s,o){t.save(),t.globalCompositeOperation="copy";const l=t.createLinearGradient(0,0,0,i);l.addColorStop(0,s),l.addColorStop(1,o),t.fillStyle=l,t.fillRect(e,n,r,i),t.restore()}class u0{constructor(e,n){this.J(e,n)}J(e,n){this.zt=e,this.Xt=n}At(e,n){return this.zt.yt?e.P+e.L+e.B:0}X(e,n,r,i){if(!this.zt.yt||this.zt.Kt.length===0)return;const s=this.zt.V,o=this.Xt.t,l=e.useBitmapCoordinateSpace(a=>{const c=a.context;c.font=n.R;const u=this.Gt(a,n,r,i),h=u.Jt;return u.Qt?c0(c,h.ti,h.ii,h.ni,h.si,o,h.ei,[h.ht,0,0,h.ht],o):c0(c,h.ri,h.ii,h.ni,h.si,o,h.ei,[0,h.ht,h.ht,0],o),this.zt.hi&&(c.fillStyle=s,c.fillRect(h.ri,h.li,h.ai-h.ri,h.oi)),this.zt._i&&(c.fillStyle=n.O,c.fillRect(u.Qt?h.ui-h.ei:0,h.ii,h.ei,h.ci-h.ii)),u});e.useMediaCoordinateSpace(({context:a})=>{const c=l.di;a.font=n.R,a.textAlign=l.Qt?"right":"left",a.textBaseline="middle",a.fillStyle=s,a.fillText(this.zt.Kt,c.fi,(c.ii+c.ci)/2+c.pi)})}Gt(e,n,r,i){var s;const{context:o,bitmapSize:l,mediaSize:a,horizontalPixelRatio:c,verticalPixelRatio:u}=e,h=this.zt.hi||!this.zt.mi?n.T:0,f=this.zt.bi?n.C:0,p=n.L+this.Xt.wi,g=n.B+this.Xt.gi,m=n.A,w=n.I,v=this.zt.Kt,x=n.P,b=r.Mi(o,v),S=Math.ceil(r.xi(o,v)),k=x+p+g,C=n.C+m+w+S+h,_=Math.max(1,Math.floor(u));let P=Math.round(k*u);P%2!=_%2&&(P+=1);const O=f>0?Math.max(1,Math.floor(f*c)):0,A=Math.round(C*c),T=Math.round(h*c),R=(s=this.Xt.Si)!==null&&s!==void 0?s:this.Xt.ki,$=Math.round(R*u)-Math.floor(.5*u),M=Math.floor($+_/2-P/2),I=M+P,L=i==="right",z=L?a.width-f:f,j=L?l.width-O:O;let D,E,W;return L?(D=j-A,E=j-T,W=z-h-m-f):(D=j+A,E=j+T,W=z+h+m),{Qt:L,Jt:{ii:M,li:$,ci:I,ni:A,si:P,ht:2*c,ei:O,ti:D,ri:j,ai:E,oi:_,ui:l.width},di:{ii:M/u,ci:I/u,fi:W,pi:b}}}}class Fd{constructor(e){this.yi={ki:0,t:"#000",gi:0,wi:0},this.Ci={Kt:"",yt:!1,hi:!0,mi:!1,Ot:"",V:"#FFF",_i:!1,bi:!1},this.Ti={Kt:"",yt:!1,hi:!1,mi:!0,Ot:"",V:"#FFF",_i:!0,bi:!0},this.ft=!0,this.Pi=new(e||u0)(this.Ci,this.yi),this.Ri=new(e||u0)(this.Ti,this.yi)}Kt(){return this.Di(),this.Ci.Kt}ki(){return this.Di(),this.yi.ki}bt(){this.ft=!0}At(e,n=!1){return Math.max(this.Pi.At(e,n),this.Ri.At(e,n))}Vi(){return this.yi.Si||0}Oi(e){this.yi.Si=e}Bi(){return this.Di(),this.Ci.yt||this.Ti.yt}Ai(){return this.Di(),this.Ci.yt}gt(e){return this.Di(),this.Ci.hi=this.Ci.hi&&e.W().ticksVisible,this.Ti.hi=this.Ti.hi&&e.W().ticksVisible,this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Pi}Ii(){return this.Di(),this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Ri}Di(){this.ft&&(this.Ci.hi=!0,this.Ti.hi=!1,this.zi(this.Ci,this.Ti,this.yi))}}class QF extends Fd{constructor(e,n,r){super(),this.jt=e,this.Li=n,this.Ei=r}zi(e,n,r){if(e.yt=!1,this.jt.W().mode===2)return;const i=this.jt.W().horzLine;if(!i.labelVisible)return;const s=this.Li.Ct();if(!this.jt.yt()||this.Li.Ni()||s===null)return;const o=Dd(i.labelBackgroundColor);r.t=o.t,e.V=o.i;const l=2/12*this.Li.P();r.wi=l,r.gi=l;const a=this.Ei(this.Li);r.ki=a.ki,e.Kt=this.Li.Fi(a._t,s),e.yt=!0}}const JF=/[1-9]/g;class Z_{constructor(){this.zt=null}J(e){this.zt=e}X(e,n){if(this.zt===null||this.zt.yt===!1||this.zt.Kt.length===0)return;const r=e.useMediaCoordinateSpace(({context:f})=>(f.font=n.R,Math.round(n.Wi.xi(f,K(this.zt).Kt,JF))));if(r<=0)return;const i=n.ji,s=r+2*i,o=s/2,l=this.zt.Hi;let a=this.zt.ki,c=Math.floor(a-o)+.5;c<0?(a+=Math.abs(0-c),c=Math.floor(a-o)+.5):c+s>l&&(a-=Math.abs(l-(c+s)),c=Math.floor(a-o)+.5);const u=c+s,h=Math.ceil(0+n.C+n.T+n.L+n.P+n.B);e.useBitmapCoordinateSpace(({context:f,horizontalPixelRatio:p,verticalPixelRatio:g})=>{const m=K(this.zt);f.fillStyle=m.t;const w=Math.round(c*p),v=Math.round(0*g),x=Math.round(u*p),b=Math.round(h*g),S=Math.round(2*p);if(f.beginPath(),f.moveTo(w,v),f.lineTo(w,b-S),f.arcTo(w,b,w+S,b,S),f.lineTo(x-S,b),f.arcTo(x,b,x,b-S,S),f.lineTo(x,v),f.fill(),m.hi){const k=Math.round(m.ki*p),C=v,_=Math.round((C+n.T)*g);f.fillStyle=m.V;const P=Math.max(1,Math.floor(p)),O=Math.floor(.5*p);f.fillRect(k-O,C,P,_-C)}}),e.useMediaCoordinateSpace(({context:f})=>{const p=K(this.zt),g=0+n.C+n.T+n.L+n.P/2;f.font=n.R,f.textAlign="left",f.textBaseline="middle",f.fillStyle=p.V;const m=n.Wi.Mi(f,"Apr0");f.translate(c+i,g+m),f.fillText(p.Kt,0,0)})}}class e3{constructor(e,n,r){this.ft=!0,this.Wt=new Z_,this.Ft={yt:!1,t:"#4c525e",V:"white",Kt:"",Hi:0,ki:NaN,hi:!0},this.vt=e,this.$i=n,this.Ei=r}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt.J(this.Ft),this.Wt}Mt(){const e=this.Ft;if(e.yt=!1,this.vt.W().mode===2)return;const n=this.vt.W().vertLine;if(!n.labelVisible)return;const r=this.$i.St();if(r.Ni())return;e.Hi=r.Hi();const i=this.Ei();if(i===null)return;e.ki=i.ki;const s=r.Ui(this.vt.xt());e.Kt=r.qi(K(s)),e.yt=!0;const o=Dd(n.labelBackgroundColor);e.t=o.t,e.V=o.i,e.hi=r.W().ticksVisible}}class tv{constructor(){this.Yi=null,this.Zi=0}Xi(){return this.Zi}Ki(e){this.Zi=e}Dt(){return this.Yi}Gi(e){this.Yi=e}Ji(e){return[]}Qi(){return[]}yt(){return!0}}var Hp;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden"})(Hp||(Hp={}));class t3 extends tv{constructor(e,n){super(),this.tn=null,this.nn=NaN,this.sn=0,this.en=!0,this.rn=new Map,this.hn=!1,this.ln=NaN,this.an=NaN,this._n=NaN,this.un=NaN,this.$i=e,this.cn=n,this.dn=new YF(e,this),this.fn=((i,s)=>o=>{const l=s(),a=i();if(o===K(this.tn).vn())return{_t:a,ki:l};{const c=K(o.Ct());return{_t:o.pn(l,c),ki:l}}})(()=>this.nn,()=>this.an);const r=((i,s)=>()=>{const o=this.$i.St().mn(i()),l=s();return o&&Number.isFinite(l)?{ot:o,ki:l}:null})(()=>this.sn,()=>this.Yt());this.bn=new e3(this,e,r),this.wn=new ZF(this)}W(){return this.cn}gn(e,n){this._n=e,this.un=n}Mn(){this._n=NaN,this.un=NaN}xn(){return this._n}Sn(){return this.un}kn(e,n,r){this.hn||(this.hn=!0),this.en=!0,this.yn(e,n,r)}xt(){return this.sn}Yt(){return this.ln}Zt(){return this.an}yt(){return this.en}Cn(){this.en=!1,this.Tn(),this.nn=NaN,this.ln=NaN,this.an=NaN,this.tn=null,this.Mn()}Pn(e){return this.tn!==null?[this.wn,this.dn]:[]}Ut(e){return e===this.tn&&this.cn.horzLine.visible}qt(){return this.cn.vertLine.visible}Rn(e,n){this.en&&this.tn===e||this.rn.clear();const r=[];return this.tn===e&&r.push(this.Dn(this.rn,n,this.fn)),r}Qi(){return this.en?[this.bn]:[]}Ht(){return this.tn}Vn(){this.wn.bt(),this.rn.forEach(e=>e.bt()),this.bn.bt(),this.dn.bt()}On(e){return e&&!e.vn().Ni()?e.vn():null}yn(e,n,r){this.Bn(e,n,r)&&this.Vn()}Bn(e,n,r){const i=this.ln,s=this.an,o=this.nn,l=this.sn,a=this.tn,c=this.On(r);this.sn=e,this.ln=isNaN(e)?NaN:this.$i.St().It(e),this.tn=r;const u=c!==null?c.Ct():null;return c!==null&&u!==null?(this.nn=n,this.an=c.Rt(n,u)):(this.nn=NaN,this.an=NaN),i!==this.ln||s!==this.an||l!==this.sn||o!==this.nn||a!==this.tn}Tn(){const e=this.$i.wt().map(r=>r.In().An()).filter(UF),n=e.length===0?null:Math.max(...e);this.sn=n!==null?n:NaN}Dn(e,n,r){let i=e.get(n);return i===void 0&&(i=new QF(this,n,r),e.set(n,i)),i}}function Bd(t){return t==="left"||t==="right"}class ut{constructor(e){this.zn=new Map,this.Ln=[],this.En=e}Nn(e,n){const r=function(i,s){return i===void 0?s:{Fn:Math.max(i.Fn,s.Fn),Wn:i.Wn||s.Wn}}(this.zn.get(e),n);this.zn.set(e,r)}jn(){return this.En}Hn(e){const n=this.zn.get(e);return n===void 0?{Fn:this.En}:{Fn:Math.max(this.En,n.Fn),Wn:n.Wn}}$n(){this.Un(),this.Ln=[{qn:0}]}Yn(e){this.Un(),this.Ln=[{qn:1,Vt:e}]}Zn(e){this.Xn(),this.Ln.push({qn:5,Vt:e})}Un(){this.Xn(),this.Ln.push({qn:6})}Kn(){this.Un(),this.Ln=[{qn:4}]}Gn(e){this.Un(),this.Ln.push({qn:2,Vt:e})}Jn(e){this.Un(),this.Ln.push({qn:3,Vt:e})}Qn(){return this.Ln}ts(e){for(const n of e.Ln)this.ns(n);this.En=Math.max(this.En,e.En),e.zn.forEach((n,r)=>{this.Nn(r,n)})}static ss(){return new ut(2)}static es(){return new ut(3)}ns(e){switch(e.qn){case 0:this.$n();break;case 1:this.Yn(e.Vt);break;case 2:this.Gn(e.Vt);break;case 3:this.Jn(e.Vt);break;case 4:this.Kn();break;case 5:this.Zn(e.Vt);break;case 6:this.Xn()}}Xn(){const e=this.Ln.findIndex(n=>n.qn===5);e!==-1&&this.Ln.splice(e,1)}}const d0=".";function Er(t,e){if(!Gn(t))return"n/a";if(!ca(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class Vd{constructor(e,n){if(n||(n=1),Gn(e)&&ca(e)||(e=100),e<0)throw new TypeError("invalid base");this.Li=e,this.rs=n,this.hs()}format(e){const n=e<0?"−":"";return e=Math.abs(e),n+this.ls(e)}hs(){if(this._s=0,this.Li>0&&this.rs>0){let e=this.Li;for(;e>1;)e/=10,this._s++}}ls(e){const n=this.Li/this.rs;let r=Math.floor(e),i="";const s=this._s!==void 0?this._s:NaN;if(n>1){let o=+(Math.round(e*n)-r*n).toFixed(this._s);o>=n&&(o-=n,r+=1),i=d0+Er(+o.toFixed(this._s)*this.rs,s)}else r=Math.round(r*n)/n,s>0&&(i=d0+Er(0,s));return r.toFixed(0)+i}}class X_ extends Vd{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class n3{constructor(e){this.us=e}format(e){let n="";return e<0&&(n="-",e=-e),e<995?n+this.cs(e):e<999995?n+this.cs(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),n+this.cs(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),n+this.cs(e/1e9)+"B")}cs(e){let n;const r=Math.pow(10,this.us);return n=(e=Math.round(e*r)/r)>=1e-15&&e<1?e.toFixed(this.us).replace(/\.?0+$/,""):String(e),n.replace(/(\.[1-9]*)0+$/,(i,s)=>s)}}function Q_(t,e,n,r,i,s,o){if(e.length===0||r.from>=e.length||r.to<=0)return;const{context:l,horizontalPixelRatio:a,verticalPixelRatio:c}=t,u=e[r.from];let h=s(t,u),f=u;if(r.to-r.from<2){const p=i/2;l.beginPath();const g={nt:u.nt-p,st:u.st},m={nt:u.nt+p,st:u.st};l.moveTo(g.nt*a,g.st*c),l.lineTo(m.nt*a,m.st*c),o(t,h,g,m)}else{const p=(m,w)=>{o(t,h,f,w),l.beginPath(),h=m,f=w};let g=f;l.beginPath(),l.moveTo(u.nt*a,u.st*c);for(let m=r.from+1;m<r.to;++m){g=e[m];const w=s(t,g);switch(n){case 0:l.lineTo(g.nt*a,g.st*c);break;case 1:l.lineTo(g.nt*a,e[m-1].st*c),w!==h&&(p(w,g),l.lineTo(g.nt*a,e[m-1].st*c)),l.lineTo(g.nt*a,g.st*c);break;case 2:{const[v,x]=r3(e,m-1,m);l.bezierCurveTo(v.nt*a,v.st*c,x.nt*a,x.st*c,g.nt*a,g.st*c);break}}n!==1&&w!==h&&(p(w,g),l.moveTo(g.nt*a,g.st*c))}(f!==g||f===g&&n===1)&&o(t,h,f,g)}}const h0=6;function Wh(t,e){return{nt:t.nt-e.nt,st:t.st-e.st}}function f0(t,e){return{nt:t.nt/e,st:t.st/e}}function r3(t,e,n){const r=Math.max(0,e-1),i=Math.min(t.length-1,n+1);var s,o;return[(s=t[e],o=f0(Wh(t[n],t[r]),h0),{nt:s.nt+o.nt,st:s.st+o.st}),Wh(t[n],f0(Wh(t[i],t[e]),h0))]}function i3(t,e,n,r,i){const{context:s,horizontalPixelRatio:o,verticalPixelRatio:l}=e;s.lineTo(i.nt*o,t*l),s.lineTo(r.nt*o,t*l),s.closePath(),s.fillStyle=n,s.fill()}class J_ extends Fn{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){var n;if(this.G===null)return;const{it:r,tt:i,ds:s,et:o,Nt:l,fs:a}=this.G,c=(n=this.G.vs)!==null&&n!==void 0?n:this.G.ps?0:e.mediaSize.height;if(i===null)return;const u=e.context;u.lineCap="butt",u.lineJoin="round",u.lineWidth=o,as(u,l),u.lineWidth=1,Q_(e,r,a,i,s,this.bs.bind(this),i3.bind(null,c))}}function qp(t,e,n){return Math.min(Math.max(t,e),n)}function sc(t,e,n){return e-t<=n}function eN(t){const e=Math.ceil(t);return e%2==0?e-1:e}class nv{ws(e,n){const r=this.gs,{Ms:i,xs:s,Ss:o,ks:l,ys:a,vs:c}=n;if(this.Cs===void 0||r===void 0||r.Ms!==i||r.xs!==s||r.Ss!==o||r.ks!==l||r.vs!==c||r.ys!==a){const u=e.context.createLinearGradient(0,0,0,a);if(u.addColorStop(0,i),c!=null){const h=qp(c*e.verticalPixelRatio/a,0,1);u.addColorStop(h,s),u.addColorStop(h,o)}u.addColorStop(1,l),this.Cs=u,this.gs=n}return this.Cs}}class s3 extends J_{constructor(){super(...arguments),this.Ts=new nv}bs(e,n){return this.Ts.ws(e,{Ms:n.Ps,xs:"",Ss:"",ks:n.Rs,ys:e.bitmapSize.height})}}function o3(t,e){const n=t.context;n.strokeStyle=e,n.stroke()}class tN extends Fn{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){if(this.G===null)return;const{it:n,tt:r,ds:i,fs:s,et:o,Nt:l,Ds:a}=this.G;if(r===null)return;const c=e.context;c.lineCap="butt",c.lineWidth=o*e.verticalPixelRatio,as(c,l),c.lineJoin="round";const u=this.Vs.bind(this);s!==void 0&&Q_(e,n,s,r,i,u,o3),a&&function(h,f,p,g,m){const{horizontalPixelRatio:w,verticalPixelRatio:v,context:x}=h;let b=null;const S=Math.max(1,Math.floor(w))%2/2,k=p*v+S;for(let C=g.to-1;C>=g.from;--C){const _=f[C];if(_){const P=m(h,_);P!==b&&(x.beginPath(),b!==null&&x.fill(),x.fillStyle=P,b=P);const O=Math.round(_.nt*w)+S,A=_.st*v;x.moveTo(O,A),x.arc(O,A,k,0,2*Math.PI)}}x.fill()}(e,n,a,r,u)}}class nN extends tN{Vs(e,n){return n.lt}}function rN(t,e,n,r,i=0,s=e.length){let o=s-i;for(;0<o;){const l=o>>1,a=i+l;r(e[a],n)===t?(i=a+1,o-=l+1):o=l}return i}const Pa=rN.bind(null,!0),iN=rN.bind(null,!1);function l3(t,e){return t.ot<e}function a3(t,e){return e<t.ot}function sN(t,e,n){const r=e.Os(),i=e.ui(),s=Pa(t,r,l3),o=iN(t,i,a3);if(!n)return{from:s,to:o};let l=s,a=o;return s>0&&s<t.length&&t[s].ot>=r&&(l=s-1),o>0&&o<t.length&&t[o-1].ot<=i&&(a=o+1),{from:l,to:a}}class rv{constructor(e,n,r){this.Bs=!0,this.As=!0,this.Is=!0,this.zs=[],this.Ls=null,this.Es=e,this.Ns=n,this.Fs=r}bt(e){this.Bs=!0,e==="data"&&(this.As=!0),e==="options"&&(this.Is=!0)}gt(){return this.Es.yt()?(this.Ws(),this.Ls===null?null:this.js):null}Hs(){this.zs=this.zs.map(e=>Object.assign(Object.assign({},e),this.Es.Us().$s(e.ot)))}qs(){this.Ls=null}Ws(){this.As&&(this.Ys(),this.As=!1),this.Is&&(this.Hs(),this.Is=!1),this.Bs&&(this.Zs(),this.Bs=!1)}Zs(){const e=this.Es.Dt(),n=this.Ns.St();if(this.qs(),n.Ni()||e.Ni())return;const r=n.Xs();if(r===null||this.Es.In().Ks()===0)return;const i=this.Es.Ct();i!==null&&(this.Ls=sN(this.zs,r,this.Fs),this.Gs(e,n,i.Vt),this.Js())}}class Ud extends rv{constructor(e,n){super(e,n,!0)}Gs(e,n,r){n.Qs(this.zs,ua(this.Ls)),e.te(this.zs,r,ua(this.Ls))}ie(e,n){return{ot:e,_t:n,nt:NaN,st:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(n=>{const r=n.Vt[3];return this.se(n.ee,r,e)})}}class c3 extends Ud{constructor(e,n){super(e,n),this.js=new ev,this.re=new s3,this.he=new nN,this.js.Z([this.re,this.he])}se(e,n,r){return Object.assign(Object.assign({},this.ie(e,n)),r.$s(e))}Js(){const e=this.Es.W();this.re.J({fs:e.lineType,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,vs:null,ps:e.invertFilledArea,tt:this.Ls,ds:this.Ns.St().le()}),this.he.J({fs:e.lineVisible?e.lineType:void 0,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,tt:this.Ls,ds:this.Ns.St().le(),Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0})}}class u3 extends Fn{constructor(){super(...arguments),this.zt=null,this.ae=0,this.oe=0}J(e){this.zt=e}K({context:e,horizontalPixelRatio:n,verticalPixelRatio:r}){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;this.ae=this._e(n),this.ae>=2&&Math.max(1,Math.floor(n))%2!=this.ae%2&&this.ae--,this.oe=this.zt.ue?Math.min(this.ae,Math.floor(n)):this.ae;let i=null;const s=this.oe<=this.ae&&this.zt.le>=Math.floor(1.5*n);for(let o=this.zt.tt.from;o<this.zt.tt.to;++o){const l=this.zt.In[o];i!==l.ce&&(e.fillStyle=l.ce,i=l.ce);const a=Math.floor(.5*this.oe),c=Math.round(l.nt*n),u=c-a,h=this.oe,f=u+h-1,p=Math.min(l.de,l.fe),g=Math.max(l.de,l.fe),m=Math.round(p*r)-a,w=Math.round(g*r)+a,v=Math.max(w-m,this.oe);e.fillRect(u,m,h,v);const x=Math.ceil(1.5*this.ae);if(s){if(this.zt.ve){const C=c-x;let _=Math.max(m,Math.round(l.pe*r)-a),P=_+h-1;P>m+v-1&&(P=m+v-1,_=P-h+1),e.fillRect(C,_,u-C,P-_+1)}const b=c+x;let S=Math.max(m,Math.round(l.me*r)-a),k=S+h-1;k>m+v-1&&(k=m+v-1,S=k-h+1),e.fillRect(f+1,S,b-f,k-S+1)}}}_e(e){const n=Math.floor(e);return Math.max(n,Math.floor(function(r,i){return Math.floor(.3*r*i)}(K(this.zt).le,e)))}}class oN extends rv{constructor(e,n){super(e,n,!1)}Gs(e,n,r){n.Qs(this.zs,ua(this.Ls)),e.be(this.zs,r,ua(this.Ls))}we(e,n,r){return{ot:e,ge:n.Vt[0],Me:n.Vt[1],xe:n.Vt[2],Se:n.Vt[3],nt:NaN,pe:NaN,de:NaN,fe:NaN,me:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(n=>this.se(n.ee,n,e))}}class d3 extends oN{constructor(){super(...arguments),this.js=new u3}se(e,n,r){return Object.assign(Object.assign({},this.we(e,n,r)),r.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),ve:e.openVisible,ue:e.thinBars,tt:this.Ls})}}class h3 extends J_{constructor(){super(...arguments),this.Ts=new nv}bs(e,n){const r=this.G;return this.Ts.ws(e,{Ms:n.ke,xs:n.ye,Ss:n.Ce,ks:n.Te,ys:e.bitmapSize.height,vs:r.vs})}}class f3 extends tN{constructor(){super(...arguments),this.Pe=new nv}Vs(e,n){const r=this.G;return this.Pe.ws(e,{Ms:n.Re,xs:n.Re,Ss:n.De,ks:n.De,ys:e.bitmapSize.height,vs:r.vs})}}class p3 extends Ud{constructor(e,n){super(e,n),this.js=new ev,this.Ve=new h3,this.Oe=new f3,this.js.Z([this.Ve,this.Oe])}se(e,n,r){return Object.assign(Object.assign({},this.ie(e,n)),r.$s(e))}Js(){const e=this.Es.Ct();if(e===null)return;const n=this.Es.W(),r=this.Es.Dt().Rt(n.baseValue.price,e.Vt),i=this.Ns.St().le();this.Ve.J({it:this.zs,et:n.lineWidth,Nt:n.lineStyle,fs:n.lineType,vs:r,ps:!1,tt:this.Ls,ds:i}),this.Oe.J({it:this.zs,et:n.lineWidth,Nt:n.lineStyle,fs:n.lineVisible?n.lineType:void 0,Ds:n.pointMarkersVisible?n.pointMarkersRadius||n.lineWidth/2+2:void 0,vs:r,tt:this.Ls,ds:i})}}class m3 extends Fn{constructor(){super(...arguments),this.zt=null,this.ae=0}J(e){this.zt=e}K(e){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;const{horizontalPixelRatio:n}=e;this.ae=function(s,o){if(s>=2.5&&s<=4)return Math.floor(3*o);const l=1-.2*Math.atan(Math.max(4,s)-4)/(.5*Math.PI),a=Math.floor(s*l*o),c=Math.floor(s*o),u=Math.min(a,c);return Math.max(Math.floor(o),u)}(this.zt.le,n),this.ae>=2&&Math.floor(n)%2!=this.ae%2&&this.ae--;const r=this.zt.In;this.zt.Be&&this.Ae(e,r,this.zt.tt),this.zt._i&&this.Ie(e,r,this.zt.tt);const i=this.ze(n);(!this.zt._i||this.ae>2*i)&&this.Le(e,r,this.zt.tt)}Ae(e,n,r){if(this.zt===null)return;const{context:i,horizontalPixelRatio:s,verticalPixelRatio:o}=e;let l="",a=Math.min(Math.floor(s),Math.floor(this.zt.le*s));a=Math.max(Math.floor(s),Math.min(a,this.ae));const c=Math.floor(.5*a);let u=null;for(let h=r.from;h<r.to;h++){const f=n[h];f.Ee!==l&&(i.fillStyle=f.Ee,l=f.Ee);const p=Math.round(Math.min(f.pe,f.me)*o),g=Math.round(Math.max(f.pe,f.me)*o),m=Math.round(f.de*o),w=Math.round(f.fe*o);let v=Math.round(s*f.nt)-c;const x=v+a-1;u!==null&&(v=Math.max(u+1,v),v=Math.min(v,x));const b=x-v+1;i.fillRect(v,m,b,p-m),i.fillRect(v,g+1,b,w-g),u=x}}ze(e){let n=Math.floor(1*e);this.ae<=2*n&&(n=Math.floor(.5*(this.ae-1)));const r=Math.max(Math.floor(e),n);return this.ae<=2*r?Math.max(Math.floor(e),Math.floor(1*e)):r}Ie(e,n,r){if(this.zt===null)return;const{context:i,horizontalPixelRatio:s,verticalPixelRatio:o}=e;let l="";const a=this.ze(s);let c=null;for(let u=r.from;u<r.to;u++){const h=n[u];h.Ne!==l&&(i.fillStyle=h.Ne,l=h.Ne);let f=Math.round(h.nt*s)-Math.floor(.5*this.ae);const p=f+this.ae-1,g=Math.round(Math.min(h.pe,h.me)*o),m=Math.round(Math.max(h.pe,h.me)*o);if(c!==null&&(f=Math.max(c+1,f),f=Math.min(f,p)),this.zt.le*s>2*a)XF(i,f,g,p-f+1,m-g+1,a);else{const w=p-f+1;i.fillRect(f,g,w,m-g+1)}c=p}}Le(e,n,r){if(this.zt===null)return;const{context:i,horizontalPixelRatio:s,verticalPixelRatio:o}=e;let l="";const a=this.ze(s);for(let c=r.from;c<r.to;c++){const u=n[c];let h=Math.round(Math.min(u.pe,u.me)*o),f=Math.round(Math.max(u.pe,u.me)*o),p=Math.round(u.nt*s)-Math.floor(.5*this.ae),g=p+this.ae-1;if(u.ce!==l){const m=u.ce;i.fillStyle=m,l=m}this.zt._i&&(p+=a,h+=a,g-=a,f-=a),h>f||i.fillRect(p,h,g-p+1,f-h+1)}}}class g3 extends oN{constructor(){super(...arguments),this.js=new m3}se(e,n,r){return Object.assign(Object.assign({},this.we(e,n,r)),r.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),Be:e.wickVisible,_i:e.borderVisible,tt:this.Ls})}}class v3{constructor(e,n){this.Fe=e,this.Li=n}X(e,n,r){this.Fe.draw(e,this.Li,n,r)}}class Hh extends rv{constructor(e,n,r){super(e,n,!1),this.wn=r,this.js=new v3(this.wn.renderer(),i=>{const s=e.Ct();return s===null?null:e.Dt().Rt(i,s.Vt)})}We(e){return this.wn.priceValueBuilder(e)}je(e){return this.wn.isWhitespace(e)}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(n=>Object.assign(Object.assign({ot:n.ee,nt:NaN},e.$s(n.ee)),{He:n.$e}))}Gs(e,n){n.Qs(this.zs,ua(this.Ls))}Js(){this.wn.update({bars:this.zs.map(y3),barSpacing:this.Ns.St().le(),visibleRange:this.Ls},this.Es.W())}}function y3(t){return{x:t.nt,time:t.ot,originalData:t.He,barColor:t.ce}}class x3 extends Fn{constructor(){super(...arguments),this.zt=null,this.Ue=[]}J(e){this.zt=e,this.Ue=[]}K({context:e,horizontalPixelRatio:n,verticalPixelRatio:r}){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return;this.Ue.length||this.qe(n);const i=Math.max(1,Math.floor(r)),s=Math.round(this.zt.Ye*r)-Math.floor(i/2),o=s+i;for(let l=this.zt.tt.from;l<this.zt.tt.to;l++){const a=this.zt.it[l],c=this.Ue[l-this.zt.tt.from],u=Math.round(a.st*r);let h,f;e.fillStyle=a.ce,u<=s?(h=u,f=o):(h=s,f=u-Math.floor(i/2)+i),e.fillRect(c.Os,h,c.ui-c.Os+1,f-h)}}qe(e){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return void(this.Ue=[]);const n=Math.ceil(this.zt.le*e)<=1?0:Math.max(1,Math.floor(e)),r=Math.round(this.zt.le*e)-n;this.Ue=new Array(this.zt.tt.to-this.zt.tt.from);for(let s=this.zt.tt.from;s<this.zt.tt.to;s++){const o=this.zt.it[s],l=Math.round(o.nt*e);let a,c;if(r%2){const u=(r-1)/2;a=l-u,c=l+u}else{const u=r/2;a=l-u,c=l+u-1}this.Ue[s-this.zt.tt.from]={Os:a,ui:c,Ze:l,Xe:o.nt*e,ot:o.ot}}for(let s=this.zt.tt.from+1;s<this.zt.tt.to;s++){const o=this.Ue[s-this.zt.tt.from],l=this.Ue[s-this.zt.tt.from-1];o.ot===l.ot+1&&o.Os-l.ui!==n+1&&(l.Ze>l.Xe?l.ui=o.Os-n-1:o.Os=l.ui+n+1)}let i=Math.ceil(this.zt.le*e);for(let s=this.zt.tt.from;s<this.zt.tt.to;s++){const o=this.Ue[s-this.zt.tt.from];o.ui<o.Os&&(o.ui=o.Os);const l=o.ui-o.Os+1;i=Math.min(l,i)}if(n>0&&i<4)for(let s=this.zt.tt.from;s<this.zt.tt.to;s++){const o=this.Ue[s-this.zt.tt.from];o.ui-o.Os+1>i&&(o.Ze>o.Xe?o.ui-=1:o.Os+=1)}}}class w3 extends Ud{constructor(){super(...arguments),this.js=new x3}se(e,n,r){return Object.assign(Object.assign({},this.ie(e,n)),r.$s(e))}Js(){const e={it:this.zs,le:this.Ns.St().le(),tt:this.Ls,Ye:this.Es.Dt().Rt(this.Es.W().base,K(this.Es.Ct()).Vt)};this.js.J(e)}}class b3 extends Ud{constructor(){super(...arguments),this.js=new nN}se(e,n,r){return Object.assign(Object.assign({},this.ie(e,n)),r.$s(e))}Js(){const e=this.Es.W(),n={it:this.zs,Nt:e.lineStyle,fs:e.lineVisible?e.lineType:void 0,et:e.lineWidth,Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,tt:this.Ls,ds:this.Ns.St().le()};this.js.J(n)}}const S3=/[2-9]/g;class da{constructor(e=50){this.Ke=0,this.Ge=1,this.Je=1,this.Qe={},this.tr=new Map,this.ir=e}nr(){this.Ke=0,this.tr.clear(),this.Ge=1,this.Je=1,this.Qe={}}xi(e,n,r){return this.sr(e,n,r).width}Mi(e,n,r){const i=this.sr(e,n,r);return((i.actualBoundingBoxAscent||0)-(i.actualBoundingBoxDescent||0))/2}sr(e,n,r){const i=r||S3,s=String(n).replace(i,"0");if(this.tr.has(s))return Pt(this.tr.get(s)).er;if(this.Ke===this.ir){const l=this.Qe[this.Je];delete this.Qe[this.Je],this.tr.delete(l),this.Je++,this.Ke--}e.save(),e.textBaseline="middle";const o=e.measureText(s);return e.restore(),o.width===0&&n.length||(this.tr.set(s,{er:o,rr:this.Ge}),this.Qe[this.Ge]=s,this.Ke++,this.Ge++),o}}class k3{constructor(e){this.hr=null,this.k=null,this.lr="right",this.ar=e}_r(e,n,r){this.hr=e,this.k=n,this.lr=r}X(e){this.k!==null&&this.hr!==null&&this.hr.X(e,this.k,this.ar,this.lr)}}class lN{constructor(e,n,r){this.ur=e,this.ar=new da(50),this.cr=n,this.F=r,this.j=-1,this.Wt=new k3(this.ar)}gt(){const e=this.F.dr(this.cr);if(e===null)return null;const n=e.vr(this.cr)?e.pr():this.cr.Dt();if(n===null)return null;const r=e.mr(n);if(r==="overlay")return null;const i=this.F.br();return i.P!==this.j&&(this.j=i.P,this.ar.nr()),this.Wt._r(this.ur.Ii(),i,r),this.Wt}}class C3 extends Fn{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}wr(e,n){var r;if(!(!((r=this.zt)===null||r===void 0)&&r.yt))return null;const{st:i,et:s,gr:o}=this.zt;return n>=i-s-7&&n<=i+s+7?{Mr:this.zt,gr:o}:null}K({context:e,bitmapSize:n,horizontalPixelRatio:r,verticalPixelRatio:i}){if(this.zt===null||this.zt.yt===!1)return;const s=Math.round(this.zt.st*i);s<0||s>n.height||(e.lineCap="butt",e.strokeStyle=this.zt.V,e.lineWidth=Math.floor(this.zt.et*r),as(e,this.zt.Nt),q_(e,s,0,n.width))}}class iv{constructor(e){this.Sr={st:0,V:"rgba(0, 0, 0, 0)",et:1,Nt:0,yt:!1},this.kr=new C3,this.ft=!0,this.Es=e,this.Ns=e.$t(),this.kr.J(this.Sr)}bt(){this.ft=!0}gt(){return this.Es.yt()?(this.ft&&(this.yr(),this.ft=!1),this.kr):null}}class E3 extends iv{constructor(e){super(e)}yr(){this.Sr.yt=!1;const e=this.Es.Dt(),n=e.Cr().Cr;if(n!==2&&n!==3)return;const r=this.Es.W();if(!r.baseLineVisible||!this.Es.yt())return;const i=this.Es.Ct();i!==null&&(this.Sr.yt=!0,this.Sr.st=e.Rt(i.Vt,i.Vt),this.Sr.V=r.baseLineColor,this.Sr.et=r.baseLineWidth,this.Sr.Nt=r.baseLineStyle)}}class _3 extends Fn{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}$e(){return this.zt}K({context:e,horizontalPixelRatio:n,verticalPixelRatio:r}){const i=this.zt;if(i===null)return;const s=Math.max(1,Math.floor(n)),o=s%2/2,l=Math.round(i.Xe.x*n)+o,a=i.Xe.y*r;e.fillStyle=i.Tr,e.beginPath();const c=Math.max(2,1.5*i.Pr)*n;e.arc(l,a,c,0,2*Math.PI,!1),e.fill(),e.fillStyle=i.Rr,e.beginPath(),e.arc(l,a,i.ht*n,0,2*Math.PI,!1),e.fill(),e.lineWidth=s,e.strokeStyle=i.Dr,e.beginPath(),e.arc(l,a,i.ht*n+s/2,0,2*Math.PI,!1),e.stroke()}}const N3=[{Vr:0,Or:.25,Br:4,Ar:10,Ir:.25,zr:0,Lr:.4,Er:.8},{Vr:.25,Or:.525,Br:10,Ar:14,Ir:0,zr:0,Lr:.8,Er:0},{Vr:.525,Or:1,Br:14,Ar:14,Ir:0,zr:0,Lr:0,Er:0}];function p0(t,e,n,r){return function(i,s){if(i==="transparent")return i;const o=aa(i),l=o[3];return`rgba(${o[0]}, ${o[1]}, ${o[2]}, ${s*l})`}(t,n+(r-n)*e)}function m0(t,e){const n=t%2600/2600;let r;for(const a of N3)if(n>=a.Vr&&n<=a.Or){r=a;break}Si(r!==void 0,"Last price animation internal logic error");const i=(n-r.Vr)/(r.Or-r.Vr);return{Rr:p0(e,i,r.Ir,r.zr),Dr:p0(e,i,r.Lr,r.Er),ht:(s=i,o=r.Br,l=r.Ar,o+(l-o)*s)};var s,o,l}class T3{constructor(e){this.Wt=new _3,this.ft=!0,this.Nr=!0,this.Fr=performance.now(),this.Wr=this.Fr-1,this.jr=e}Hr(){this.Wr=this.Fr-1,this.bt()}$r(){if(this.bt(),this.jr.W().lastPriceAnimation===2){const e=performance.now(),n=this.Wr-e;if(n>0)return void(n<650&&(this.Wr+=2600));this.Fr=e,this.Wr=e+2600}}bt(){this.ft=!0}Ur(){this.Nr=!0}yt(){return this.jr.W().lastPriceAnimation!==0}qr(){switch(this.jr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Wr}}gt(){return this.ft?(this.Mt(),this.ft=!1,this.Nr=!1):this.Nr&&(this.Yr(),this.Nr=!1),this.Wt}Mt(){this.Wt.J(null);const e=this.jr.$t().St(),n=e.Xs(),r=this.jr.Ct();if(n===null||r===null)return;const i=this.jr.Zr(!0);if(i.Xr||!n.Kr(i.ee))return;const s={x:e.It(i.ee),y:this.jr.Dt().Rt(i._t,r.Vt)},o=i.V,l=this.jr.W().lineWidth,a=m0(this.Gr(),o);this.Wt.J({Tr:o,Pr:l,Rr:a.Rr,Dr:a.Dr,ht:a.ht,Xe:s})}Yr(){const e=this.Wt.$e();if(e!==null){const n=m0(this.Gr(),e.Tr);e.Rr=n.Rr,e.Dr=n.Dr,e.ht=n.ht}}Gr(){return this.qr()?performance.now()-this.Fr:2599}}function xl(t,e){return eN(Math.min(Math.max(t,12),30)*e)}function ha(t,e){switch(t){case"arrowDown":case"arrowUp":return xl(e,1);case"circle":return xl(e,.8);case"square":return xl(e,.7)}}function aN(t){return function(e){const n=Math.ceil(e);return n%2!=0?n-1:n}(xl(t,1))}function g0(t){return Math.max(xl(t,.1),3)}function v0(t,e,n){return e?t:n?Math.ceil(t/2):0}function cN(t,e,n,r,i){const s=ha("square",n),o=(s-1)/2,l=t-o,a=e-o;return r>=l&&r<=l+s&&i>=a&&i<=a+s}function y0(t,e,n,r){const i=(ha("arrowUp",r)-1)/2*n.Jr,s=(eN(r/2)-1)/2*n.Jr;e.beginPath(),t?(e.moveTo(n.nt-i,n.st),e.lineTo(n.nt,n.st-i),e.lineTo(n.nt+i,n.st),e.lineTo(n.nt+s,n.st),e.lineTo(n.nt+s,n.st+i),e.lineTo(n.nt-s,n.st+i),e.lineTo(n.nt-s,n.st)):(e.moveTo(n.nt-i,n.st),e.lineTo(n.nt,n.st+i),e.lineTo(n.nt+i,n.st),e.lineTo(n.nt+s,n.st),e.lineTo(n.nt+s,n.st-i),e.lineTo(n.nt-s,n.st-i),e.lineTo(n.nt-s,n.st)),e.fill()}function P3(t,e,n,r,i,s){return cN(e,n,r,i,s)}class j3 extends Fn{constructor(){super(...arguments),this.zt=null,this.ar=new da,this.j=-1,this.H="",this.Qr=""}J(e){this.zt=e}_r(e,n){this.j===e&&this.H===n||(this.j=e,this.H=n,this.Qr=bo(e,n),this.ar.nr())}wr(e,n){if(this.zt===null||this.zt.tt===null)return null;for(let r=this.zt.tt.from;r<this.zt.tt.to;r++){const i=this.zt.it[r];if(M3(i,e,n))return{Mr:i.th,gr:i.gr}}return null}K({context:e,horizontalPixelRatio:n,verticalPixelRatio:r},i,s){if(this.zt!==null&&this.zt.tt!==null){e.textBaseline="middle",e.font=this.Qr;for(let o=this.zt.tt.from;o<this.zt.tt.to;o++){const l=this.zt.it[o];l.Kt!==void 0&&(l.Kt.Hi=this.ar.xi(e,l.Kt.ih),l.Kt.At=this.j,l.Kt.nt=l.nt-l.Kt.Hi/2),A3(l,e,n,r)}}}}function A3(t,e,n,r){e.fillStyle=t.V,t.Kt!==void 0&&function(i,s,o,l,a,c){i.save(),i.scale(a,c),i.fillText(s,o,l),i.restore()}(e,t.Kt.ih,t.Kt.nt,t.Kt.st,n,r),function(i,s,o){if(i.Ks!==0){switch(i.nh){case"arrowDown":return void y0(!1,s,o,i.Ks);case"arrowUp":return void y0(!0,s,o,i.Ks);case"circle":return void function(l,a,c){const u=(ha("circle",c)-1)/2;l.beginPath(),l.arc(a.nt,a.st,u*a.Jr,0,2*Math.PI,!1),l.fill()}(s,o,i.Ks);case"square":return void function(l,a,c){const u=ha("square",c),h=(u-1)*a.Jr/2,f=a.nt-h,p=a.st-h;l.fillRect(f,p,u*a.Jr,u*a.Jr)}(s,o,i.Ks)}i.nh}}(t,e,function(i,s,o){const l=Math.max(1,Math.floor(s))%2/2;return{nt:Math.round(i.nt*s)+l,st:i.st*o,Jr:s}}(t,n,r))}function M3(t,e,n){return!(t.Kt===void 0||!function(r,i,s,o,l,a){const c=o/2;return l>=r&&l<=r+s&&a>=i-c&&a<=i+c}(t.Kt.nt,t.Kt.st,t.Kt.Hi,t.Kt.At,e,n))||function(r,i,s){if(r.Ks===0)return!1;switch(r.nh){case"arrowDown":case"arrowUp":return P3(0,r.nt,r.st,r.Ks,i,s);case"circle":return function(o,l,a,c,u){const h=2+ha("circle",a)/2,f=o-c,p=l-u;return Math.sqrt(f*f+p*p)<=h}(r.nt,r.st,r.Ks,i,s);case"square":return cN(r.nt,r.st,r.Ks,i,s)}}(t,e,n)}function R3(t,e,n,r,i,s,o,l,a){const c=Gn(n)?n:n.Se,u=Gn(n)?n:n.Me,h=Gn(n)?n:n.xe,f=Gn(e.size)?Math.max(e.size,0):1,p=aN(l.le())*f,g=p/2;switch(t.Ks=p,e.position){case"inBar":return t.st=o.Rt(c,a),void(t.Kt!==void 0&&(t.Kt.st=t.st+g+s+.6*i));case"aboveBar":return t.st=o.Rt(u,a)-g-r.sh,t.Kt!==void 0&&(t.Kt.st=t.st-g-.6*i,r.sh+=1.2*i),void(r.sh+=p+s);case"belowBar":return t.st=o.Rt(h,a)+g+r.eh,t.Kt!==void 0&&(t.Kt.st=t.st+g+s+.6*i,r.eh+=1.2*i),void(r.eh+=p+s)}e.position}class I3{constructor(e,n){this.ft=!0,this.rh=!0,this.hh=!0,this.ah=null,this.oh=null,this.Wt=new j3,this.jr=e,this.$i=n,this.zt={it:[],tt:null}}bt(e){this.ft=!0,this.hh=!0,e==="data"&&(this.rh=!0,this.oh=null)}gt(e){if(!this.jr.yt())return null;this.ft&&this._h();const n=this.$i.W().layout;return this.Wt._r(n.fontSize,n.fontFamily),this.Wt.J(this.zt),this.Wt}uh(){if(this.hh){if(this.jr.dh().length>0){const e=this.$i.St().le(),n=g0(e),r=1.5*aN(e)+2*n,i=this.fh();this.ah={above:v0(r,i.aboveBar,i.inBar),below:v0(r,i.belowBar,i.inBar)}}else this.ah=null;this.hh=!1}return this.ah}fh(){return this.oh===null&&(this.oh=this.jr.dh().reduce((e,n)=>(e[n.position]||(e[n.position]=!0),e),{inBar:!1,aboveBar:!1,belowBar:!1})),this.oh}_h(){const e=this.jr.Dt(),n=this.$i.St(),r=this.jr.dh();this.rh&&(this.zt.it=r.map(u=>({ot:u.time,nt:0,st:0,Ks:0,nh:u.shape,V:u.color,th:u.th,gr:u.id,Kt:void 0})),this.rh=!1);const i=this.$i.W().layout;this.zt.tt=null;const s=n.Xs();if(s===null)return;const o=this.jr.Ct();if(o===null||this.zt.it.length===0)return;let l=NaN;const a=g0(n.le()),c={sh:a,eh:a};this.zt.tt=sN(this.zt.it,s,!0);for(let u=this.zt.tt.from;u<this.zt.tt.to;u++){const h=r[u];h.time!==l&&(c.sh=a,c.eh=a,l=h.time);const f=this.zt.it[u];f.nt=n.It(h.time),h.text!==void 0&&h.text.length>0&&(f.Kt={ih:h.text,nt:0,st:0,Hi:0,At:0});const p=this.jr.ph(h.time);p!==null&&R3(f,h,p,c,i.fontSize,a,e,n,o.Vt)}this.ft=!1}}class O3 extends iv{constructor(e){super(e)}yr(){const e=this.Sr;e.yt=!1;const n=this.Es.W();if(!n.priceLineVisible||!this.Es.yt())return;const r=this.Es.Zr(n.priceLineSource===0);r.Xr||(e.yt=!0,e.st=r.ki,e.V=this.Es.mh(r.V),e.et=n.priceLineWidth,e.Nt=n.priceLineStyle)}}class L3 extends Fd{constructor(e){super(),this.jt=e}zi(e,n,r){e.yt=!1,n.yt=!1;const i=this.jt;if(!i.yt())return;const s=i.W(),o=s.lastValueVisible,l=i.bh()!=="",a=s.seriesLastValueMode===0,c=i.Zr(!1);if(c.Xr)return;o&&(e.Kt=this.wh(c,o,a),e.yt=e.Kt.length!==0),(l||a)&&(n.Kt=this.gh(c,o,l,a),n.yt=n.Kt.length>0);const u=i.mh(c.V),h=Dd(u);r.t=h.t,r.ki=c.ki,n.Ot=i.$t().Bt(c.ki/i.Dt().At()),e.Ot=u,e.V=h.i,n.V=h.i}gh(e,n,r,i){let s="";const o=this.jt.bh();return r&&o.length!==0&&(s+=`${o} `),n&&i&&(s+=this.jt.Dt().Mh()?e.xh:e.Sh),s.trim()}wh(e,n,r){return n?r?this.jt.Dt().Mh()?e.Sh:e.xh:e.Kt:""}}function x0(t,e,n,r){const i=Number.isFinite(e),s=Number.isFinite(n);return i&&s?t(e,n):i||s?i?e:n:r}class Bt{constructor(e,n){this.kh=e,this.yh=n}Ch(e){return e!==null&&this.kh===e.kh&&this.yh===e.yh}Th(){return new Bt(this.kh,this.yh)}Ph(){return this.kh}Rh(){return this.yh}Dh(){return this.yh-this.kh}Ni(){return this.yh===this.kh||Number.isNaN(this.yh)||Number.isNaN(this.kh)}ts(e){return e===null?this:new Bt(x0(Math.min,this.Ph(),e.Ph(),-1/0),x0(Math.max,this.Rh(),e.Rh(),1/0))}Vh(e){if(!Gn(e)||this.yh-this.kh===0)return;const n=.5*(this.yh+this.kh);let r=this.yh-n,i=this.kh-n;r*=e,i*=e,this.yh=n+r,this.kh=n+i}Oh(e){Gn(e)&&(this.yh+=e,this.kh+=e)}Bh(){return{minValue:this.kh,maxValue:this.yh}}static Ah(e){return e===null?null:new Bt(e.minValue,e.maxValue)}}class Ou{constructor(e,n){this.Ih=e,this.zh=n||null}Lh(){return this.Ih}Eh(){return this.zh}Bh(){return this.Ih===null?null:{priceRange:this.Ih.Bh(),margins:this.zh||void 0}}static Ah(e){return e===null?null:new Ou(Bt.Ah(e.priceRange),e.margins)}}class z3 extends iv{constructor(e,n){super(e),this.Nh=n}yr(){const e=this.Sr;e.yt=!1;const n=this.Nh.W();if(!this.Es.yt()||!n.lineVisible)return;const r=this.Nh.Fh();r!==null&&(e.yt=!0,e.st=r,e.V=n.color,e.et=n.lineWidth,e.Nt=n.lineStyle,e.gr=this.Nh.W().id)}}class D3 extends Fd{constructor(e,n){super(),this.jr=e,this.Nh=n}zi(e,n,r){e.yt=!1,n.yt=!1;const i=this.Nh.W(),s=i.axisLabelVisible,o=i.title!=="",l=this.jr;if(!s||!l.yt())return;const a=this.Nh.Fh();if(a===null)return;o&&(n.Kt=i.title,n.yt=!0),n.Ot=l.$t().Bt(a/l.Dt().At()),e.Kt=this.Wh(i.price),e.yt=!0;const c=Dd(i.axisLabelColor||i.color);r.t=c.t;const u=i.axisLabelTextColor||c.i;e.V=u,n.V=u,r.ki=a}Wh(e){const n=this.jr.Ct();return n===null?"":this.jr.Dt().Fi(e,n.Vt)}}class $3{constructor(e,n){this.jr=e,this.cn=n,this.jh=new z3(e,this),this.ur=new D3(e,this),this.Hh=new lN(this.ur,e,e.$t())}$h(e){Ln(this.cn,e),this.bt(),this.jr.$t().Uh()}W(){return this.cn}qh(){return this.jh}Yh(){return this.Hh}Zh(){return this.ur}bt(){this.jh.bt(),this.ur.bt()}Fh(){const e=this.jr,n=e.Dt();if(e.$t().St().Ni()||n.Ni())return null;const r=e.Ct();return r===null?null:n.Rt(this.cn.price,r.Vt)}}class F3 extends tv{constructor(e){super(),this.$i=e}$t(){return this.$i}}const B3={Bar:(t,e,n,r)=>{var i;const s=e.upColor,o=e.downColor,l=K(t(n,r)),a=Bs(l.Vt[0])<=Bs(l.Vt[3]);return{ce:(i=l.V)!==null&&i!==void 0?i:a?s:o}},Candlestick:(t,e,n,r)=>{var i,s,o;const l=e.upColor,a=e.downColor,c=e.borderUpColor,u=e.borderDownColor,h=e.wickUpColor,f=e.wickDownColor,p=K(t(n,r)),g=Bs(p.Vt[0])<=Bs(p.Vt[3]);return{ce:(i=p.V)!==null&&i!==void 0?i:g?l:a,Ne:(s=p.Ot)!==null&&s!==void 0?s:g?c:u,Ee:(o=p.Xh)!==null&&o!==void 0?o:g?h:f}},Custom:(t,e,n,r)=>{var i;return{ce:(i=K(t(n,r)).V)!==null&&i!==void 0?i:e.color}},Area:(t,e,n,r)=>{var i,s,o,l;const a=K(t(n,r));return{ce:(i=a.lt)!==null&&i!==void 0?i:e.lineColor,lt:(s=a.lt)!==null&&s!==void 0?s:e.lineColor,Ps:(o=a.Ps)!==null&&o!==void 0?o:e.topColor,Rs:(l=a.Rs)!==null&&l!==void 0?l:e.bottomColor}},Baseline:(t,e,n,r)=>{var i,s,o,l,a,c;const u=K(t(n,r));return{ce:u.Vt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,Re:(i=u.Re)!==null&&i!==void 0?i:e.topLineColor,De:(s=u.De)!==null&&s!==void 0?s:e.bottomLineColor,ke:(o=u.ke)!==null&&o!==void 0?o:e.topFillColor1,ye:(l=u.ye)!==null&&l!==void 0?l:e.topFillColor2,Ce:(a=u.Ce)!==null&&a!==void 0?a:e.bottomFillColor1,Te:(c=u.Te)!==null&&c!==void 0?c:e.bottomFillColor2}},Line:(t,e,n,r)=>{var i,s;const o=K(t(n,r));return{ce:(i=o.V)!==null&&i!==void 0?i:e.color,lt:(s=o.V)!==null&&s!==void 0?s:e.color}},Histogram:(t,e,n,r)=>{var i;return{ce:(i=K(t(n,r)).V)!==null&&i!==void 0?i:e.color}}};class V3{constructor(e){this.Kh=(n,r)=>r!==void 0?r.Vt:this.jr.In().Gh(n),this.jr=e,this.Jh=B3[e.Qh()]}$s(e,n){return this.Jh(this.Kh,this.jr.W(),e,n)}}var w0;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})(w0||(w0={}));const Wr=30;class U3{constructor(){this.tl=[],this.il=new Map,this.nl=new Map}sl(){return this.Ks()>0?this.tl[this.tl.length-1]:null}el(){return this.Ks()>0?this.rl(0):null}An(){return this.Ks()>0?this.rl(this.tl.length-1):null}Ks(){return this.tl.length}Ni(){return this.Ks()===0}Kr(e){return this.hl(e,0)!==null}Gh(e){return this.ll(e)}ll(e,n=0){const r=this.hl(e,n);return r===null?null:Object.assign(Object.assign({},this.al(r)),{ee:this.rl(r)})}ne(){return this.tl}ol(e,n,r){if(this.Ni())return null;let i=null;for(const s of r)i=oc(i,this._l(e,n,s));return i}J(e){this.nl.clear(),this.il.clear(),this.tl=e}rl(e){return this.tl[e].ee}al(e){return this.tl[e]}hl(e,n){const r=this.ul(e);if(r===null&&n!==0)switch(n){case-1:return this.cl(e);case 1:return this.dl(e);default:throw new TypeError("Unknown search mode")}return r}cl(e){let n=this.fl(e);return n>0&&(n-=1),n!==this.tl.length&&this.rl(n)<e?n:null}dl(e){const n=this.vl(e);return n!==this.tl.length&&e<this.rl(n)?n:null}ul(e){const n=this.fl(e);return n===this.tl.length||e<this.tl[n].ee?null:n}fl(e){return Pa(this.tl,e,(n,r)=>n.ee<r)}vl(e){return iN(this.tl,e,(n,r)=>n.ee>r)}pl(e,n,r){let i=null;for(let s=e;s<n;s++){const o=this.tl[s].Vt[r];Number.isNaN(o)||(i===null?i={ml:o,bl:o}:(o<i.ml&&(i.ml=o),o>i.bl&&(i.bl=o)))}return i}_l(e,n,r){if(this.Ni())return null;let i=null;const s=K(this.el()),o=K(this.An()),l=Math.max(e,s),a=Math.min(n,o),c=Math.ceil(l/Wr)*Wr,u=Math.max(c,Math.floor(a/Wr)*Wr);{const f=this.fl(l),p=this.vl(Math.min(a,c,n));i=oc(i,this.pl(f,p,r))}let h=this.il.get(r);h===void 0&&(h=new Map,this.il.set(r,h));for(let f=Math.max(c+1,l);f<u;f+=Wr){const p=Math.floor(f/Wr);let g=h.get(p);if(g===void 0){const m=this.fl(p*Wr),w=this.vl((p+1)*Wr-1);g=this.pl(m,w,r),h.set(p,g)}i=oc(i,g)}{const f=this.fl(u),p=this.vl(a);i=oc(i,this.pl(f,p,r))}return i}}function oc(t,e){return t===null?e:e===null?t:{ml:Math.min(t.ml,e.ml),bl:Math.max(t.bl,e.bl)}}class W3{constructor(e){this.wl=e}X(e,n,r){this.wl.draw(e)}gl(e,n,r){var i,s;(s=(i=this.wl).drawBackground)===null||s===void 0||s.call(i,e)}}class qh{constructor(e){this.tr=null,this.wn=e}gt(){var e;const n=this.wn.renderer();if(n===null)return null;if(((e=this.tr)===null||e===void 0?void 0:e.Ml)===n)return this.tr.xl;const r=new W3(n);return this.tr={Ml:n,xl:r},r}Sl(){var e,n,r;return(r=(n=(e=this.wn).zOrder)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:"normal"}}function uN(t){var e,n,r,i,s;return{Kt:t.text(),ki:t.coordinate(),Si:(e=t.fixedCoordinate)===null||e===void 0?void 0:e.call(t),V:t.textColor(),t:t.backColor(),yt:(r=(n=t.visible)===null||n===void 0?void 0:n.call(t))===null||r===void 0||r,hi:(s=(i=t.tickVisible)===null||i===void 0?void 0:i.call(t))===null||s===void 0||s}}class H3{constructor(e,n){this.Wt=new Z_,this.kl=e,this.yl=n}gt(){return this.Wt.J(Object.assign({Hi:this.yl.Hi()},uN(this.kl))),this.Wt}}class q3 extends Fd{constructor(e,n){super(),this.kl=e,this.Li=n}zi(e,n,r){const i=uN(this.kl);r.t=i.t,e.V=i.V;const s=2/12*this.Li.P();r.wi=s,r.gi=s,r.ki=i.ki,r.Si=i.Si,e.Kt=i.Kt,e.yt=i.yt,e.hi=i.hi}}class K3{constructor(e,n){this.Cl=null,this.Tl=null,this.Pl=null,this.Rl=null,this.Dl=null,this.Vl=e,this.jr=n}Ol(){return this.Vl}Vn(){var e,n;(n=(e=this.Vl).updateAllViews)===null||n===void 0||n.call(e)}Pn(){var e,n,r,i;const s=(r=(n=(e=this.Vl).paneViews)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:[];if(((i=this.Cl)===null||i===void 0?void 0:i.Ml)===s)return this.Cl.xl;const o=s.map(l=>new qh(l));return this.Cl={Ml:s,xl:o},o}Qi(){var e,n,r,i;const s=(r=(n=(e=this.Vl).timeAxisViews)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:[];if(((i=this.Tl)===null||i===void 0?void 0:i.Ml)===s)return this.Tl.xl;const o=this.jr.$t().St(),l=s.map(a=>new H3(a,o));return this.Tl={Ml:s,xl:l},l}Rn(){var e,n,r,i;const s=(r=(n=(e=this.Vl).priceAxisViews)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:[];if(((i=this.Pl)===null||i===void 0?void 0:i.Ml)===s)return this.Pl.xl;const o=this.jr.Dt(),l=s.map(a=>new q3(a,o));return this.Pl={Ml:s,xl:l},l}Bl(){var e,n,r,i;const s=(r=(n=(e=this.Vl).priceAxisPaneViews)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:[];if(((i=this.Rl)===null||i===void 0?void 0:i.Ml)===s)return this.Rl.xl;const o=s.map(l=>new qh(l));return this.Rl={Ml:s,xl:o},o}Al(){var e,n,r,i;const s=(r=(n=(e=this.Vl).timeAxisPaneViews)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:[];if(((i=this.Dl)===null||i===void 0?void 0:i.Ml)===s)return this.Dl.xl;const o=s.map(l=>new qh(l));return this.Dl={Ml:s,xl:o},o}Il(e,n){var r,i,s;return(s=(i=(r=this.Vl).autoscaleInfo)===null||i===void 0?void 0:i.call(r,e,n))!==null&&s!==void 0?s:null}wr(e,n){var r,i,s;return(s=(i=(r=this.Vl).hitTest)===null||i===void 0?void 0:i.call(r,e,n))!==null&&s!==void 0?s:null}}function Kh(t,e,n,r){t.forEach(i=>{e(i).forEach(s=>{s.Sl()===n&&r.push(s)})})}function Yh(t){return t.Pn()}function Y3(t){return t.Bl()}function G3(t){return t.Al()}class sv extends F3{constructor(e,n,r,i,s){super(e),this.zt=new U3,this.jh=new O3(this),this.zl=[],this.Ll=new E3(this),this.El=null,this.Nl=null,this.Fl=[],this.Wl=[],this.jl=null,this.Hl=[],this.cn=n,this.$l=r;const o=new L3(this);this.rn=[o],this.Hh=new lN(o,this,e),r!=="Area"&&r!=="Line"&&r!=="Baseline"||(this.El=new T3(this)),this.Ul(),this.ql(s)}S(){this.jl!==null&&clearTimeout(this.jl)}mh(e){return this.cn.priceLineColor||e}Zr(e){const n={Xr:!0},r=this.Dt();if(this.$t().St().Ni()||r.Ni()||this.zt.Ni())return n;const i=this.$t().St().Xs(),s=this.Ct();if(i===null||s===null)return n;let o,l;if(e){const h=this.zt.sl();if(h===null)return n;o=h,l=h.ee}else{const h=this.zt.ll(i.ui(),-1);if(h===null||(o=this.zt.Gh(h.ee),o===null))return n;l=h.ee}const a=o.Vt[3],c=this.Us().$s(l,{Vt:o}),u=r.Rt(a,s.Vt);return{Xr:!1,_t:a,Kt:r.Fi(a,s.Vt),xh:r.Yl(a),Sh:r.Zl(a,s.Vt),V:c.ce,ki:u,ee:l}}Us(){return this.Nl!==null||(this.Nl=new V3(this)),this.Nl}W(){return this.cn}$h(e){const n=e.priceScaleId;n!==void 0&&n!==this.cn.priceScaleId&&this.$t().Xl(this,n),Ln(this.cn,e),e.priceFormat!==void 0&&(this.Ul(),this.$t().Kl()),this.$t().Gl(this),this.$t().Jl(),this.wn.bt("options")}J(e,n){this.zt.J(e),this.Ql(),this.wn.bt("data"),this.dn.bt("data"),this.El!==null&&(n&&n.ta?this.El.$r():e.length===0&&this.El.Hr());const r=this.$t().dr(this);this.$t().ia(r),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}na(e){this.Fl=e,this.Ql();const n=this.$t().dr(this);this.dn.bt("data"),this.$t().ia(n),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}sa(){return this.Fl}dh(){return this.Wl}ea(e){const n=new $3(this,e);return this.zl.push(n),this.$t().Gl(this),n}ra(e){const n=this.zl.indexOf(e);n!==-1&&this.zl.splice(n,1),this.$t().Gl(this)}Qh(){return this.$l}Ct(){const e=this.ha();return e===null?null:{Vt:e.Vt[3],la:e.ot}}ha(){const e=this.$t().St().Xs();if(e===null)return null;const n=e.Os();return this.zt.ll(n,1)}In(){return this.zt}ph(e){const n=this.zt.Gh(e);return n===null?null:this.$l==="Bar"||this.$l==="Candlestick"||this.$l==="Custom"?{ge:n.Vt[0],Me:n.Vt[1],xe:n.Vt[2],Se:n.Vt[3]}:n.Vt[3]}aa(e){const n=[];Kh(this.Hl,Yh,"top",n);const r=this.El;return r!==null&&r.yt()&&(this.jl===null&&r.qr()&&(this.jl=setTimeout(()=>{this.jl=null,this.$t().oa()},0)),r.Ur(),n.unshift(r)),n}Pn(){const e=[];this._a()||e.push(this.Ll),e.push(this.wn,this.jh,this.dn);const n=this.zl.map(r=>r.qh());return e.push(...n),Kh(this.Hl,Yh,"normal",e),e}ua(){return this.ca(Yh,"bottom")}da(e){return this.ca(Y3,e)}fa(e){return this.ca(G3,e)}va(e,n){return this.Hl.map(r=>r.wr(e,n)).filter(r=>r!==null)}Ji(e){return[this.Hh,...this.zl.map(n=>n.Yh())]}Rn(e,n){if(n!==this.Yi&&!this._a())return[];const r=[...this.rn];for(const i of this.zl)r.push(i.Zh());return this.Hl.forEach(i=>{r.push(...i.Rn())}),r}Qi(){const e=[];return this.Hl.forEach(n=>{e.push(...n.Qi())}),e}Il(e,n){if(this.cn.autoscaleInfoProvider!==void 0){const r=this.cn.autoscaleInfoProvider(()=>{const i=this.pa(e,n);return i===null?null:i.Bh()});return Ou.Ah(r)}return this.pa(e,n)}ma(){return this.cn.priceFormat.minMove}ba(){return this.wa}Vn(){var e;this.wn.bt(),this.dn.bt();for(const n of this.rn)n.bt();for(const n of this.zl)n.bt();this.jh.bt(),this.Ll.bt(),(e=this.El)===null||e===void 0||e.bt(),this.Hl.forEach(n=>n.Vn())}Dt(){return K(super.Dt())}kt(e){if(!((this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline")&&this.cn.crosshairMarkerVisible))return null;const n=this.zt.Gh(e);return n===null?null:{_t:n.Vt[3],ht:this.ga(),Ot:this.Ma(),Pt:this.xa(),Tt:this.Sa(e)}}bh(){return this.cn.title}yt(){return this.cn.visible}ka(e){this.Hl.push(new K3(e,this))}ya(e){this.Hl=this.Hl.filter(n=>n.Ol()!==e)}Ca(){if(this.wn instanceof Hh)return e=>this.wn.We(e)}Ta(){if(this.wn instanceof Hh)return e=>this.wn.je(e)}_a(){return!Bd(this.Dt().Pa())}pa(e,n){if(!ca(e)||!ca(n)||this.zt.Ni())return null;const r=this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline"||this.$l==="Histogram"?[3]:[2,1],i=this.zt.ol(e,n,r);let s=i!==null?new Bt(i.ml,i.bl):null;if(this.Qh()==="Histogram"){const l=this.cn.base,a=new Bt(l,l);s=s!==null?s.ts(a):a}let o=this.dn.uh();return this.Hl.forEach(l=>{const a=l.Il(e,n);if(a!=null&&a.priceRange){const p=new Bt(a.priceRange.minValue,a.priceRange.maxValue);s=s!==null?s.ts(p):p}var c,u,h,f;a!=null&&a.margins&&(c=o,u=a.margins,o={above:Math.max((h=c==null?void 0:c.above)!==null&&h!==void 0?h:0,u.above),below:Math.max((f=c==null?void 0:c.below)!==null&&f!==void 0?f:0,u.below)})}),new Ou(s,o)}ga(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerRadius}return 0}Ma(){switch(this.$l){case"Line":case"Area":case"Baseline":{const e=this.cn.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}xa(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerBorderWidth}return 0}Sa(e){switch(this.$l){case"Line":case"Area":case"Baseline":{const n=this.cn.crosshairMarkerBackgroundColor;if(n.length!==0)return n}}return this.Us().$s(e).ce}Ul(){switch(this.cn.priceFormat.type){case"custom":this.wa={format:this.cn.priceFormat.formatter};break;case"volume":this.wa=new n3(this.cn.priceFormat.precision);break;case"percent":this.wa=new X_(this.cn.priceFormat.precision);break;default:{const e=Math.pow(10,this.cn.priceFormat.precision);this.wa=new Vd(e,this.cn.priceFormat.minMove*e)}}this.Yi!==null&&this.Yi.Ra()}Ql(){const e=this.$t().St();if(!e.Da()||this.zt.Ni())return void(this.Wl=[]);const n=K(this.zt.el());this.Wl=this.Fl.map((r,i)=>{const s=K(e.Va(r.time,!0)),o=s<n?1:-1;return{time:K(this.zt.ll(s,o)).ee,position:r.position,shape:r.shape,color:r.color,id:r.id,th:i,text:r.text,size:r.size,originalTime:r.originalTime}})}ql(e){switch(this.dn=new I3(this,this.$t()),this.$l){case"Bar":this.wn=new d3(this,this.$t());break;case"Candlestick":this.wn=new g3(this,this.$t());break;case"Line":this.wn=new b3(this,this.$t());break;case"Custom":this.wn=new Hh(this,this.$t(),Pt(e));break;case"Area":this.wn=new c3(this,this.$t());break;case"Baseline":this.wn=new p3(this,this.$t());break;case"Histogram":this.wn=new w3(this,this.$t());break;default:throw Error("Unknown chart style assigned: "+this.$l)}}ca(e,n){const r=[];return Kh(this.Hl,e,n,r),r}}class Z3{constructor(e){this.cn=e}Oa(e,n,r){let i=e;if(this.cn.mode===0)return i;const s=r.vn(),o=s.Ct();if(o===null)return i;const l=s.Rt(e,o),a=r.Ba().filter(u=>u instanceof sv).reduce((u,h)=>{if(r.vr(h)||!h.yt())return u;const f=h.Dt(),p=h.In();if(f.Ni()||!p.Kr(n))return u;const g=p.Gh(n);if(g===null)return u;const m=Bs(h.Ct());return u.concat([f.Rt(g.Vt[3],m.Vt)])},[]);if(a.length===0)return i;a.sort((u,h)=>Math.abs(u-l)-Math.abs(h-l));const c=a[0];return i=s.pn(c,o),i}}class X3 extends Fn{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}K({context:e,bitmapSize:n,horizontalPixelRatio:r,verticalPixelRatio:i}){if(this.zt===null)return;const s=Math.max(1,Math.floor(r));e.lineWidth=s,function(o,l){o.save(),o.lineWidth%2&&o.translate(.5,.5),l(),o.restore()}(e,()=>{const o=K(this.zt);if(o.Aa){e.strokeStyle=o.Ia,as(e,o.za),e.beginPath();for(const l of o.La){const a=Math.round(l.Ea*r);e.moveTo(a,-s),e.lineTo(a,n.height+s)}e.stroke()}if(o.Na){e.strokeStyle=o.Fa,as(e,o.Wa),e.beginPath();for(const l of o.ja){const a=Math.round(l.Ea*i);e.moveTo(-s,a),e.lineTo(n.width+s,a)}e.stroke()}})}}class Q3{constructor(e){this.Wt=new X3,this.ft=!0,this.tn=e}bt(){this.ft=!0}gt(){if(this.ft){const e=this.tn.$t().W().grid,n={Na:e.horzLines.visible,Aa:e.vertLines.visible,Fa:e.horzLines.color,Ia:e.vertLines.color,Wa:e.horzLines.style,za:e.vertLines.style,ja:this.tn.vn().Ha(),La:(this.tn.$t().St().Ha()||[]).map(r=>({Ea:r.coord}))};this.Wt.J(n),this.ft=!1}return this.Wt}}class J3{constructor(e){this.wn=new Q3(e)}qh(){return this.wn}}const Gh={$a:4,Ua:1e-4};function Vs(t,e){const n=100*(t-e)/e;return e<0?-n:n}function eB(t,e){const n=Vs(t.Ph(),e),r=Vs(t.Rh(),e);return new Bt(n,r)}function wl(t,e){const n=100*(t-e)/e+100;return e<0?-n:n}function tB(t,e){const n=wl(t.Ph(),e),r=wl(t.Rh(),e);return new Bt(n,r)}function Lu(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const r=Math.log10(n+e.Ua)+e.$a;return t<0?-r:r}function bl(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const r=Math.pow(10,n-e.$a)-e.Ua;return t<0?-r:r}function Zo(t,e){if(t===null)return null;const n=Lu(t.Ph(),e),r=Lu(t.Rh(),e);return new Bt(n,r)}function lc(t,e){if(t===null)return null;const n=bl(t.Ph(),e),r=bl(t.Rh(),e);return new Bt(n,r)}function Zh(t){if(t===null)return Gh;const e=Math.abs(t.Rh()-t.Ph());if(e>=1||e<1e-15)return Gh;const n=Math.ceil(Math.abs(Math.log10(e))),r=Gh.$a+n;return{$a:r,Ua:1/Math.pow(10,r)}}class Xh{constructor(e,n){if(this.qa=e,this.Ya=n,function(r){if(r<0)return!1;for(let i=r;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.qa))this.Za=[2,2.5,2];else{this.Za=[];for(let r=this.qa;r!==1;){if(r%2==0)this.Za.push(2),r/=2;else{if(r%5!=0)throw new Error("unexpected base");this.Za.push(2,2.5),r/=5}if(this.Za.length>100)throw new Error("something wrong with base")}}}Xa(e,n,r){const i=this.qa===0?0:1/this.qa;let s=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-n)))),o=0,l=this.Ya[0];for(;;){const h=sc(s,i,1e-14)&&s>i+1e-14,f=sc(s,r*l,1e-14),p=sc(s,1,1e-14);if(!(h&&f&&p))break;s/=l,l=this.Ya[++o%this.Ya.length]}if(s<=i+1e-14&&(s=i),s=Math.max(1,s),this.Za.length>0&&(a=s,c=1,u=1e-14,Math.abs(a-c)<u))for(o=0,l=this.Za[0];sc(s,r*l,1e-14)&&s>i+1e-14;)s/=l,l=this.Za[++o%this.Za.length];var a,c,u;return s}}class b0{constructor(e,n,r,i){this.Ka=[],this.Li=e,this.qa=n,this.Ga=r,this.Ja=i}Xa(e,n){if(e<n)throw new Error("high < low");const r=this.Li.At(),i=(e-n)*this.Qa()/r,s=new Xh(this.qa,[2,2.5,2]),o=new Xh(this.qa,[2,2,2.5]),l=new Xh(this.qa,[2.5,2,2]),a=[];return a.push(s.Xa(e,n,i),o.Xa(e,n,i),l.Xa(e,n,i)),function(c){if(c.length<1)throw Error("array is empty");let u=c[0];for(let h=1;h<c.length;++h)c[h]<u&&(u=c[h]);return u}(a)}io(){const e=this.Li,n=e.Ct();if(n===null)return void(this.Ka=[]);const r=e.At(),i=this.Ga(r-1,n),s=this.Ga(0,n),o=this.Li.W().entireTextOnly?this.no()/2:0,l=o,a=r-1-o,c=Math.max(i,s),u=Math.min(i,s);if(c===u)return void(this.Ka=[]);let h=this.Xa(c,u),f=c%h;f+=f<0?h:0;const p=c>=u?1:-1;let g=null,m=0;for(let w=c-f;w>u;w-=h){const v=this.Ja(w,n,!0);g!==null&&Math.abs(v-g)<this.Qa()||v<l||v>a||(m<this.Ka.length?(this.Ka[m].Ea=v,this.Ka[m].so=e.eo(w)):this.Ka.push({Ea:v,so:e.eo(w)}),m++,g=v,e.ro()&&(h=this.Xa(w*p,u)))}this.Ka.length=m}Ha(){return this.Ka}no(){return this.Li.P()}Qa(){return Math.ceil(2.5*this.no())}}function dN(t){return t.slice().sort((e,n)=>K(e.Xi())-K(n.Xi()))}var S0;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(S0||(S0={}));const k0=new X_,C0=new Vd(100,1);class nB{constructor(e,n,r,i){this.ho=0,this.lo=null,this.Ih=null,this.ao=null,this.oo={_o:!1,uo:null},this.co=0,this.do=0,this.fo=new Xe,this.vo=new Xe,this.po=[],this.mo=null,this.bo=null,this.wo=null,this.Mo=null,this.wa=C0,this.xo=Zh(null),this.So=e,this.cn=n,this.ko=r,this.yo=i,this.Co=new b0(this,100,this.To.bind(this),this.Po.bind(this))}Pa(){return this.So}W(){return this.cn}$h(e){if(Ln(this.cn,e),this.Ra(),e.mode!==void 0&&this.Ro({Cr:e.mode}),e.scaleMargins!==void 0){const n=Pt(e.scaleMargins.top),r=Pt(e.scaleMargins.bottom);if(n<0||n>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${n}`);if(r<0||r>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${r}`);if(n+r>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${n+r}`);this.Do(),this.bo=null}}Vo(){return this.cn.autoScale}ro(){return this.cn.mode===1}Mh(){return this.cn.mode===2}Oo(){return this.cn.mode===3}Cr(){return{Wn:this.cn.autoScale,Bo:this.cn.invertScale,Cr:this.cn.mode}}Ro(e){const n=this.Cr();let r=null;e.Wn!==void 0&&(this.cn.autoScale=e.Wn),e.Cr!==void 0&&(this.cn.mode=e.Cr,e.Cr!==2&&e.Cr!==3||(this.cn.autoScale=!0),this.oo._o=!1),n.Cr===1&&e.Cr!==n.Cr&&(function(s,o){if(s===null)return!1;const l=bl(s.Ph(),o),a=bl(s.Rh(),o);return isFinite(l)&&isFinite(a)}(this.Ih,this.xo)?(r=lc(this.Ih,this.xo),r!==null&&this.Ao(r)):this.cn.autoScale=!0),e.Cr===1&&e.Cr!==n.Cr&&(r=Zo(this.Ih,this.xo),r!==null&&this.Ao(r));const i=n.Cr!==this.cn.mode;i&&(n.Cr===2||this.Mh())&&this.Ra(),i&&(n.Cr===3||this.Oo())&&this.Ra(),e.Bo!==void 0&&n.Bo!==e.Bo&&(this.cn.invertScale=e.Bo,this.Io()),this.vo.m(n,this.Cr())}zo(){return this.vo}P(){return this.ko.fontSize}At(){return this.ho}Lo(e){this.ho!==e&&(this.ho=e,this.Do(),this.bo=null)}Eo(){if(this.lo)return this.lo;const e=this.At()-this.No()-this.Fo();return this.lo=e,e}Lh(){return this.Wo(),this.Ih}Ao(e,n){const r=this.Ih;(n||r===null&&e!==null||r!==null&&!r.Ch(e))&&(this.bo=null,this.Ih=e)}Ni(){return this.Wo(),this.ho===0||!this.Ih||this.Ih.Ni()}jo(e){return this.Bo()?e:this.At()-1-e}Rt(e,n){return this.Mh()?e=Vs(e,n):this.Oo()&&(e=wl(e,n)),this.Po(e,n)}te(e,n,r){this.Wo();const i=this.Fo(),s=K(this.Lh()),o=s.Ph(),l=s.Rh(),a=this.Eo()-1,c=this.Bo(),u=a/(l-o),h=r===void 0?0:r.from,f=r===void 0?e.length:r.to,p=this.Ho();for(let g=h;g<f;g++){const m=e[g],w=m._t;if(isNaN(w))continue;let v=w;p!==null&&(v=p(m._t,n));const x=i+u*(v-o),b=c?x:this.ho-1-x;m.st=b}}be(e,n,r){this.Wo();const i=this.Fo(),s=K(this.Lh()),o=s.Ph(),l=s.Rh(),a=this.Eo()-1,c=this.Bo(),u=a/(l-o),h=r===void 0?0:r.from,f=r===void 0?e.length:r.to,p=this.Ho();for(let g=h;g<f;g++){const m=e[g];let w=m.ge,v=m.Me,x=m.xe,b=m.Se;p!==null&&(w=p(m.ge,n),v=p(m.Me,n),x=p(m.xe,n),b=p(m.Se,n));let S=i+u*(w-o),k=c?S:this.ho-1-S;m.pe=k,S=i+u*(v-o),k=c?S:this.ho-1-S,m.de=k,S=i+u*(x-o),k=c?S:this.ho-1-S,m.fe=k,S=i+u*(b-o),k=c?S:this.ho-1-S,m.me=k}}pn(e,n){const r=this.To(e,n);return this.$o(r,n)}$o(e,n){let r=e;return this.Mh()?r=function(i,s){return s<0&&(i=-i),i/100*s+s}(r,n):this.Oo()&&(r=function(i,s){return i-=100,s<0&&(i=-i),i/100*s+s}(r,n)),r}Ba(){return this.po}Uo(){if(this.mo)return this.mo;let e=[];for(let n=0;n<this.po.length;n++){const r=this.po[n];r.Xi()===null&&r.Ki(n+1),e.push(r)}return e=dN(e),this.mo=e,this.mo}qo(e){this.po.indexOf(e)===-1&&(this.po.push(e),this.Ra(),this.Yo())}Zo(e){const n=this.po.indexOf(e);if(n===-1)throw new Error("source is not attached to scale");this.po.splice(n,1),this.po.length===0&&(this.Ro({Wn:!0}),this.Ao(null)),this.Ra(),this.Yo()}Ct(){let e=null;for(const n of this.po){const r=n.Ct();r!==null&&(e===null||r.la<e.la)&&(e=r)}return e===null?null:e.Vt}Bo(){return this.cn.invertScale}Ha(){const e=this.Ct()===null;if(this.bo!==null&&(e||this.bo.Xo===e))return this.bo.Ha;this.Co.io();const n=this.Co.Ha();return this.bo={Ha:n,Xo:e},this.fo.m(),n}Ko(){return this.fo}Go(e){this.Mh()||this.Oo()||this.wo===null&&this.ao===null&&(this.Ni()||(this.wo=this.ho-e,this.ao=K(this.Lh()).Th()))}Jo(e){if(this.Mh()||this.Oo()||this.wo===null)return;this.Ro({Wn:!1}),(e=this.ho-e)<0&&(e=0);let n=(this.wo+.2*(this.ho-1))/(e+.2*(this.ho-1));const r=K(this.ao).Th();n=Math.max(n,.1),r.Vh(n),this.Ao(r)}Qo(){this.Mh()||this.Oo()||(this.wo=null,this.ao=null)}t_(e){this.Vo()||this.Mo===null&&this.ao===null&&(this.Ni()||(this.Mo=e,this.ao=K(this.Lh()).Th()))}i_(e){if(this.Vo()||this.Mo===null)return;const n=K(this.Lh()).Dh()/(this.Eo()-1);let r=e-this.Mo;this.Bo()&&(r*=-1);const i=r*n,s=K(this.ao).Th();s.Oh(i),this.Ao(s,!0),this.bo=null}n_(){this.Vo()||this.Mo!==null&&(this.Mo=null,this.ao=null)}ba(){return this.wa||this.Ra(),this.wa}Fi(e,n){switch(this.cn.mode){case 2:return this.s_(Vs(e,n));case 3:return this.ba().format(wl(e,n));default:return this.Wh(e)}}eo(e){switch(this.cn.mode){case 2:return this.s_(e);case 3:return this.ba().format(e);default:return this.Wh(e)}}Yl(e){return this.Wh(e,K(this.e_()).ba())}Zl(e,n){return e=Vs(e,n),this.s_(e,k0)}r_(){return this.po}h_(e){this.oo={uo:e,_o:!1}}Vn(){this.po.forEach(e=>e.Vn())}Ra(){this.bo=null;const e=this.e_();let n=100;e!==null&&(n=Math.round(1/e.ma())),this.wa=C0,this.Mh()?(this.wa=k0,n=100):this.Oo()?(this.wa=new Vd(100,1),n=100):e!==null&&(this.wa=e.ba()),this.Co=new b0(this,n,this.To.bind(this),this.Po.bind(this)),this.Co.io()}Yo(){this.mo=null}e_(){return this.po[0]||null}No(){return this.Bo()?this.cn.scaleMargins.bottom*this.At()+this.do:this.cn.scaleMargins.top*this.At()+this.co}Fo(){return this.Bo()?this.cn.scaleMargins.top*this.At()+this.co:this.cn.scaleMargins.bottom*this.At()+this.do}Wo(){this.oo._o||(this.oo._o=!0,this.l_())}Do(){this.lo=null}Po(e,n){if(this.Wo(),this.Ni())return 0;e=this.ro()&&e?Lu(e,this.xo):e;const r=K(this.Lh()),i=this.Fo()+(this.Eo()-1)*(e-r.Ph())/r.Dh();return this.jo(i)}To(e,n){if(this.Wo(),this.Ni())return 0;const r=this.jo(e),i=K(this.Lh()),s=i.Ph()+i.Dh()*((r-this.Fo())/(this.Eo()-1));return this.ro()?bl(s,this.xo):s}Io(){this.bo=null,this.Co.io()}l_(){const e=this.oo.uo;if(e===null)return;let n=null;const r=this.r_();let i=0,s=0;for(const a of r){if(!a.yt())continue;const c=a.Ct();if(c===null)continue;const u=a.Il(e.Os(),e.ui());let h=u&&u.Lh();if(h!==null){switch(this.cn.mode){case 1:h=Zo(h,this.xo);break;case 2:h=eB(h,c.Vt);break;case 3:h=tB(h,c.Vt)}if(n=n===null?h:n.ts(K(h)),u!==null){const f=u.Eh();f!==null&&(i=Math.max(i,f.above),s=Math.max(s,f.below))}}}if(i===this.co&&s===this.do||(this.co=i,this.do=s,this.bo=null,this.Do()),n!==null){if(n.Ph()===n.Rh()){const a=this.e_(),c=5*(a===null||this.Mh()||this.Oo()?1:a.ma());this.ro()&&(n=lc(n,this.xo)),n=new Bt(n.Ph()-c,n.Rh()+c),this.ro()&&(n=Zo(n,this.xo))}if(this.ro()){const a=lc(n,this.xo),c=Zh(a);if(o=c,l=this.xo,o.$a!==l.$a||o.Ua!==l.Ua){const u=this.ao!==null?lc(this.ao,this.xo):null;this.xo=c,n=Zo(a,c),u!==null&&(this.ao=Zo(u,c))}}this.Ao(n)}else this.Ih===null&&(this.Ao(new Bt(-.5,.5)),this.xo=Zh(null));var o,l;this.oo._o=!0}Ho(){return this.Mh()?Vs:this.Oo()?wl:this.ro()?e=>Lu(e,this.xo):null}a_(e,n,r){return n===void 0?(r===void 0&&(r=this.ba()),r.format(e)):n(e)}Wh(e,n){return this.a_(e,this.yo.priceFormatter,n)}s_(e,n){return this.a_(e,this.yo.percentageFormatter,n)}}class rB{constructor(e,n){this.po=[],this.o_=new Map,this.ho=0,this.__=0,this.u_=1e3,this.mo=null,this.c_=new Xe,this.yl=e,this.$i=n,this.d_=new J3(this);const r=n.W();this.f_=this.v_("left",r.leftPriceScale),this.p_=this.v_("right",r.rightPriceScale),this.f_.zo().l(this.m_.bind(this,this.f_),this),this.p_.zo().l(this.m_.bind(this,this.p_),this),this.b_(r)}b_(e){if(e.leftPriceScale&&this.f_.$h(e.leftPriceScale),e.rightPriceScale&&this.p_.$h(e.rightPriceScale),e.localization&&(this.f_.Ra(),this.p_.Ra()),e.overlayPriceScales){const n=Array.from(this.o_.values());for(const r of n){const i=K(r[0].Dt());i.$h(e.overlayPriceScales),e.localization&&i.Ra()}}}w_(e){switch(e){case"left":return this.f_;case"right":return this.p_}return this.o_.has(e)?Pt(this.o_.get(e))[0].Dt():null}S(){this.$t().g_().p(this),this.f_.zo().p(this),this.p_.zo().p(this),this.po.forEach(e=>{e.S&&e.S()}),this.c_.m()}M_(){return this.u_}x_(e){this.u_=e}$t(){return this.$i}Hi(){return this.__}At(){return this.ho}S_(e){this.__=e,this.k_()}Lo(e){this.ho=e,this.f_.Lo(e),this.p_.Lo(e),this.po.forEach(n=>{if(this.vr(n)){const r=n.Dt();r!==null&&r.Lo(e)}}),this.k_()}Ba(){return this.po}vr(e){const n=e.Dt();return n===null||this.f_!==n&&this.p_!==n}qo(e,n,r){const i=r!==void 0?r:this.C_().y_+1;this.T_(e,n,i)}Zo(e){const n=this.po.indexOf(e);Si(n!==-1,"removeDataSource: invalid data source"),this.po.splice(n,1);const r=K(e.Dt()).Pa();if(this.o_.has(r)){const s=Pt(this.o_.get(r)),o=s.indexOf(e);o!==-1&&(s.splice(o,1),s.length===0&&this.o_.delete(r))}const i=e.Dt();i&&i.Ba().indexOf(e)>=0&&i.Zo(e),i!==null&&(i.Yo(),this.P_(i)),this.mo=null}mr(e){return e===this.f_?"left":e===this.p_?"right":"overlay"}R_(){return this.f_}D_(){return this.p_}V_(e,n){e.Go(n)}O_(e,n){e.Jo(n),this.k_()}B_(e){e.Qo()}A_(e,n){e.t_(n)}I_(e,n){e.i_(n),this.k_()}z_(e){e.n_()}k_(){this.po.forEach(e=>{e.Vn()})}vn(){let e=null;return this.$i.W().rightPriceScale.visible&&this.p_.Ba().length!==0?e=this.p_:this.$i.W().leftPriceScale.visible&&this.f_.Ba().length!==0?e=this.f_:this.po.length!==0&&(e=this.po[0].Dt()),e===null&&(e=this.p_),e}pr(){let e=null;return this.$i.W().rightPriceScale.visible?e=this.p_:this.$i.W().leftPriceScale.visible&&(e=this.f_),e}P_(e){e!==null&&e.Vo()&&this.L_(e)}E_(e){const n=this.yl.Xs();e.Ro({Wn:!0}),n!==null&&e.h_(n),this.k_()}N_(){this.L_(this.f_),this.L_(this.p_)}F_(){this.P_(this.f_),this.P_(this.p_),this.po.forEach(e=>{this.vr(e)&&this.P_(e.Dt())}),this.k_(),this.$i.Uh()}Uo(){return this.mo===null&&(this.mo=dN(this.po)),this.mo}W_(){return this.c_}j_(){return this.d_}L_(e){const n=e.r_();if(n&&n.length>0&&!this.yl.Ni()){const r=this.yl.Xs();r!==null&&e.h_(r)}e.Vn()}C_(){const e=this.Uo();if(e.length===0)return{H_:0,y_:0};let n=0,r=0;for(let i=0;i<e.length;i++){const s=e[i].Xi();s!==null&&(s<n&&(n=s),s>r&&(r=s))}return{H_:n,y_:r}}T_(e,n,r){let i=this.w_(n);if(i===null&&(i=this.v_(n,this.$i.W().overlayPriceScales)),this.po.push(e),!Bd(n)){const s=this.o_.get(n)||[];s.push(e),this.o_.set(n,s)}i.qo(e),e.Gi(i),e.Ki(r),this.P_(i),this.mo=null}m_(e,n,r){n.Cr!==r.Cr&&this.L_(e)}v_(e,n){const r=Object.assign({visible:!0,autoScale:!0},Cr(n)),i=new nB(e,r,this.$i.W().layout,this.$i.W().localization);return i.Lo(this.At()),i}}class iB{constructor(e,n,r=50){this.Ke=0,this.Ge=1,this.Je=1,this.tr=new Map,this.Qe=new Map,this.U_=e,this.q_=n,this.ir=r}Y_(e){const n=e.time,r=this.q_.cacheKey(n),i=this.tr.get(r);if(i!==void 0)return i.Z_;if(this.Ke===this.ir){const o=this.Qe.get(this.Je);this.Qe.delete(this.Je),this.tr.delete(Pt(o)),this.Je++,this.Ke--}const s=this.U_(e);return this.tr.set(r,{Z_:s,rr:this.Ge}),this.Qe.set(this.Ge,r),this.Ke++,this.Ge++,s}}class Sl{constructor(e,n){Si(e<=n,"right should be >= left"),this.X_=e,this.K_=n}Os(){return this.X_}ui(){return this.K_}G_(){return this.K_-this.X_+1}Kr(e){return this.X_<=e&&e<=this.K_}Ch(e){return this.X_===e.Os()&&this.K_===e.ui()}}function E0(t,e){return t===null||e===null?t===e:t.Ch(e)}class sB{constructor(){this.J_=new Map,this.tr=null,this.Q_=!1}tu(e){this.Q_=e,this.tr=null}iu(e,n){this.nu(n),this.tr=null;for(let r=n;r<e.length;++r){const i=e[r];let s=this.J_.get(i.timeWeight);s===void 0&&(s=[],this.J_.set(i.timeWeight,s)),s.push({index:r,time:i.time,weight:i.timeWeight,originalTime:i.originalTime})}}su(e,n){const r=Math.ceil(n/e);return this.tr!==null&&this.tr.eu===r||(this.tr={Ha:this.ru(r),eu:r}),this.tr.Ha}nu(e){if(e===0)return void this.J_.clear();const n=[];this.J_.forEach((r,i)=>{e<=r[0].index?n.push(i):r.splice(Pa(r,e,s=>s.index<e),1/0)});for(const r of n)this.J_.delete(r)}ru(e){let n=[];for(const r of Array.from(this.J_.keys()).sort((i,s)=>s-i)){if(!this.J_.get(r))continue;const i=n;n=[];const s=i.length;let o=0;const l=Pt(this.J_.get(r)),a=l.length;let c=1/0,u=-1/0;for(let h=0;h<a;h++){const f=l[h],p=f.index;for(;o<s;){const g=i[o],m=g.index;if(!(m<p)){c=m;break}o++,n.push(g),u=m,c=1/0}if(c-p>=e&&p-u>=e)n.push(f),u=p;else if(this.Q_)return i}for(;o<s;o++)n.push(i[o])}return n}}class ro{constructor(e){this.hu=e}lu(){return this.hu===null?null:new Sl(Math.floor(this.hu.Os()),Math.ceil(this.hu.ui()))}au(){return this.hu}static ou(){return new ro(null)}}function oB(t,e){return t.weight>e.weight?t:e}class lB{constructor(e,n,r,i){this.__=0,this._u=null,this.uu=[],this.Mo=null,this.wo=null,this.cu=new sB,this.du=new Map,this.fu=ro.ou(),this.vu=!0,this.pu=new Xe,this.mu=new Xe,this.bu=new Xe,this.wu=null,this.gu=null,this.Mu=[],this.cn=n,this.yo=r,this.xu=n.rightOffset,this.Su=n.barSpacing,this.$i=e,this.q_=i,this.ku(),this.cu.tu(n.uniformDistribution)}W(){return this.cn}yu(e){Ln(this.yo,e),this.Cu(),this.ku()}$h(e,n){var r;Ln(this.cn,e),this.cn.fixLeftEdge&&this.Tu(),this.cn.fixRightEdge&&this.Pu(),e.barSpacing!==void 0&&this.$i.Gn(e.barSpacing),e.rightOffset!==void 0&&this.$i.Jn(e.rightOffset),e.minBarSpacing!==void 0&&this.$i.Gn((r=e.barSpacing)!==null&&r!==void 0?r:this.Su),this.Cu(),this.ku(),this.bu.m()}mn(e){var n,r;return(r=(n=this.uu[e])===null||n===void 0?void 0:n.time)!==null&&r!==void 0?r:null}Ui(e){var n;return(n=this.uu[e])!==null&&n!==void 0?n:null}Va(e,n){if(this.uu.length<1)return null;if(this.q_.key(e)>this.q_.key(this.uu[this.uu.length-1].time))return n?this.uu.length-1:null;const r=Pa(this.uu,this.q_.key(e),(i,s)=>this.q_.key(i.time)<s);return this.q_.key(e)<this.q_.key(this.uu[r].time)?n?r:null:r}Ni(){return this.__===0||this.uu.length===0||this._u===null}Da(){return this.uu.length>0}Xs(){return this.Ru(),this.fu.lu()}Du(){return this.Ru(),this.fu.au()}Vu(){const e=this.Xs();if(e===null)return null;const n={from:e.Os(),to:e.ui()};return this.Ou(n)}Ou(e){const n=Math.round(e.from),r=Math.round(e.to),i=K(this.Bu()),s=K(this.Au());return{from:K(this.Ui(Math.max(i,n))),to:K(this.Ui(Math.min(s,r)))}}Iu(e){return{from:K(this.Va(e.from,!0)),to:K(this.Va(e.to,!0))}}Hi(){return this.__}S_(e){if(!isFinite(e)||e<=0||this.__===e)return;const n=this.Du(),r=this.__;if(this.__=e,this.vu=!0,this.cn.lockVisibleTimeRangeOnResize&&r!==0){const i=this.Su*e/r;this.Su=i}if(this.cn.fixLeftEdge&&n!==null&&n.Os()<=0){const i=r-e;this.xu-=Math.round(i/this.Su)+1,this.vu=!0}this.zu(),this.Lu()}It(e){if(this.Ni()||!ca(e))return 0;const n=this.Eu()+this.xu-e;return this.__-(n+.5)*this.Su-1}Qs(e,n){const r=this.Eu(),i=n===void 0?0:n.from,s=n===void 0?e.length:n.to;for(let o=i;o<s;o++){const l=e[o].ot,a=r+this.xu-l,c=this.__-(a+.5)*this.Su-1;e[o].nt=c}}Nu(e){return Math.ceil(this.Fu(e))}Jn(e){this.vu=!0,this.xu=e,this.Lu(),this.$i.Wu(),this.$i.Uh()}le(){return this.Su}Gn(e){this.ju(e),this.Lu(),this.$i.Wu(),this.$i.Uh()}Hu(){return this.xu}Ha(){if(this.Ni())return null;if(this.gu!==null)return this.gu;const e=this.Su,n=5*(this.$i.W().layout.fontSize+4)/8*(this.cn.tickMarkMaxCharacterLength||8),r=Math.round(n/e),i=K(this.Xs()),s=Math.max(i.Os(),i.Os()-r),o=Math.max(i.ui(),i.ui()-r),l=this.cu.su(e,n),a=this.Bu()+r,c=this.Au()-r,u=this.$u(),h=this.cn.fixLeftEdge||u,f=this.cn.fixRightEdge||u;let p=0;for(const g of l){if(!(s<=g.index&&g.index<=o))continue;let m;p<this.Mu.length?(m=this.Mu[p],m.coord=this.It(g.index),m.label=this.Uu(g),m.weight=g.weight):(m={needAlignCoordinate:!1,coord:this.It(g.index),label:this.Uu(g),weight:g.weight},this.Mu.push(m)),this.Su>n/2&&!u?m.needAlignCoordinate=!1:m.needAlignCoordinate=h&&g.index<=a||f&&g.index>=c,p++}return this.Mu.length=p,this.gu=this.Mu,this.Mu}qu(){this.vu=!0,this.Gn(this.cn.barSpacing),this.Jn(this.cn.rightOffset)}Yu(e){this.vu=!0,this._u=e,this.Lu(),this.Tu()}Zu(e,n){const r=this.Fu(e),i=this.le(),s=i+n*(i/10);this.Gn(s),this.cn.rightBarStaysOnScroll||this.Jn(this.Hu()+(r-this.Fu(e)))}Go(e){this.Mo&&this.n_(),this.wo===null&&this.wu===null&&(this.Ni()||(this.wo=e,this.Xu()))}Jo(e){if(this.wu===null)return;const n=qp(this.__-e,0,this.__),r=qp(this.__-K(this.wo),0,this.__);n!==0&&r!==0&&this.Gn(this.wu.le*n/r)}Qo(){this.wo!==null&&(this.wo=null,this.Ku())}t_(e){this.Mo===null&&this.wu===null&&(this.Ni()||(this.Mo=e,this.Xu()))}i_(e){if(this.Mo===null)return;const n=(this.Mo-e)/this.le();this.xu=K(this.wu).Hu+n,this.vu=!0,this.Lu()}n_(){this.Mo!==null&&(this.Mo=null,this.Ku())}Gu(){this.Ju(this.cn.rightOffset)}Ju(e,n=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(n)||n<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const r=this.xu,i=performance.now();this.$i.Zn({Qu:s=>(s-i)/n>=1,tc:s=>{const o=(s-i)/n;return o>=1?e:r+(e-r)*o}})}bt(e,n){this.vu=!0,this.uu=e,this.cu.iu(e,n),this.Lu()}nc(){return this.pu}sc(){return this.mu}ec(){return this.bu}Eu(){return this._u||0}rc(e){const n=e.G_();this.ju(this.__/n),this.xu=e.ui()-this.Eu(),this.Lu(),this.vu=!0,this.$i.Wu(),this.$i.Uh()}hc(){const e=this.Bu(),n=this.Au();e!==null&&n!==null&&this.rc(new Sl(e,n+this.cn.rightOffset))}lc(e){const n=new Sl(e.from,e.to);this.rc(n)}qi(e){return this.yo.timeFormatter!==void 0?this.yo.timeFormatter(e.originalTime):this.q_.formatHorzItem(e.time)}$u(){const{handleScroll:e,handleScale:n}=this.$i.W();return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||n.axisDoubleClickReset.time||n.axisPressedMouseMove.time||n.mouseWheel||n.pinch)}Bu(){return this.uu.length===0?null:0}Au(){return this.uu.length===0?null:this.uu.length-1}ac(e){return(this.__-1-e)/this.Su}Fu(e){const n=this.ac(e),r=this.Eu()+this.xu-n;return Math.round(1e6*r)/1e6}ju(e){const n=this.Su;this.Su=e,this.zu(),n!==this.Su&&(this.vu=!0,this.oc())}Ru(){if(!this.vu)return;if(this.vu=!1,this.Ni())return void this._c(ro.ou());const e=this.Eu(),n=this.__/this.Su,r=this.xu+e,i=new Sl(r-n+1,r);this._c(new ro(i))}zu(){const e=this.uc();if(this.Su<e&&(this.Su=e,this.vu=!0),this.__!==0){const n=.5*this.__;this.Su>n&&(this.Su=n,this.vu=!0)}}uc(){return this.cn.fixLeftEdge&&this.cn.fixRightEdge&&this.uu.length!==0?this.__/this.uu.length:this.cn.minBarSpacing}Lu(){const e=this.cc();e!==null&&this.xu<e&&(this.xu=e,this.vu=!0);const n=this.dc();this.xu>n&&(this.xu=n,this.vu=!0)}cc(){const e=this.Bu(),n=this._u;return e===null||n===null?null:e-n-1+(this.cn.fixLeftEdge?this.__/this.Su:Math.min(2,this.uu.length))}dc(){return this.cn.fixRightEdge?0:this.__/this.Su-Math.min(2,this.uu.length)}Xu(){this.wu={le:this.le(),Hu:this.Hu()}}Ku(){this.wu=null}Uu(e){let n=this.du.get(e.weight);return n===void 0&&(n=new iB(r=>this.fc(r),this.q_),this.du.set(e.weight,n)),n.Y_(e)}fc(e){return this.q_.formatTickmark(e,this.yo)}_c(e){const n=this.fu;this.fu=e,E0(n.lu(),this.fu.lu())||this.pu.m(),E0(n.au(),this.fu.au())||this.mu.m(),this.oc()}oc(){this.gu=null}Cu(){this.oc(),this.du.clear()}ku(){this.q_.updateFormatter(this.yo)}Tu(){if(!this.cn.fixLeftEdge)return;const e=this.Bu();if(e===null)return;const n=this.Xs();if(n===null)return;const r=n.Os()-e;if(r<0){const i=this.xu-r-1;this.Jn(i)}this.zu()}Pu(){this.Lu(),this.zu()}}class aB{X(e,n,r){e.useMediaCoordinateSpace(i=>this.K(i,n,r))}gl(e,n,r){e.useMediaCoordinateSpace(i=>this.vc(i,n,r))}vc(e,n,r){}}class cB extends aB{constructor(e){super(),this.mc=new Map,this.zt=e}K(e){}vc(e){if(!this.zt.yt)return;const{context:n,mediaSize:r}=e;let i=0;for(const o of this.zt.bc){if(o.Kt.length===0)continue;n.font=o.R;const l=this.wc(n,o.Kt);l>r.width?o.Zu=r.width/l:o.Zu=1,i+=o.gc*o.Zu}let s=0;switch(this.zt.Mc){case"top":s=0;break;case"center":s=Math.max((r.height-i)/2,0);break;case"bottom":s=Math.max(r.height-i,0)}n.fillStyle=this.zt.V;for(const o of this.zt.bc){n.save();let l=0;switch(this.zt.xc){case"left":n.textAlign="left",l=o.gc/2;break;case"center":n.textAlign="center",l=r.width/2;break;case"right":n.textAlign="right",l=r.width-1-o.gc/2}n.translate(l,s),n.textBaseline="top",n.font=o.R,n.scale(o.Zu,o.Zu),n.fillText(o.Kt,0,o.Sc),n.restore(),s+=o.gc*o.Zu}}wc(e,n){const r=this.kc(e.font);let i=r.get(n);return i===void 0&&(i=e.measureText(n).width,r.set(n,i)),i}kc(e){let n=this.mc.get(e);return n===void 0&&(n=new Map,this.mc.set(e,n)),n}}class uB{constructor(e){this.ft=!0,this.Ft={yt:!1,V:"",bc:[],Mc:"center",xc:"center"},this.Wt=new cB(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.W(),n=this.Ft;n.yt=e.visible,n.yt&&(n.V=e.color,n.xc=e.horzAlign,n.Mc=e.vertAlign,n.bc=[{Kt:e.text,R:bo(e.fontSize,e.fontFamily,e.fontStyle),gc:1.2*e.fontSize,Sc:0,Zu:0}])}}class dB extends tv{constructor(e,n){super(),this.cn=n,this.wn=new uB(this)}Rn(){return[]}Pn(){return[this.wn]}W(){return this.cn}Vn(){this.wn.bt()}}var _0,N0,T0,Kp,Li;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(_0||(_0={}));class hB{constructor(e,n,r){this.yc=[],this.Cc=[],this.__=0,this.Tc=null,this.Pc=new Xe,this.Rc=new Xe,this.Dc=null,this.Vc=e,this.cn=n,this.q_=r,this.Oc=new WF(this),this.yl=new lB(this,n.timeScale,this.cn.localization,r),this.vt=new t3(this,n.crosshair),this.Bc=new Z3(n.crosshair),this.Ac=new dB(this,n.watermark),this.Ic(),this.yc[0].x_(2e3),this.zc=this.Lc(0),this.Ec=this.Lc(1)}Kl(){this.Nc(ut.es())}Uh(){this.Nc(ut.ss())}oa(){this.Nc(new ut(1))}Gl(e){const n=this.Fc(e);this.Nc(n)}Wc(){return this.Tc}jc(e){const n=this.Tc;this.Tc=e,n!==null&&this.Gl(n.Hc),e!==null&&this.Gl(e.Hc)}W(){return this.cn}$h(e){Ln(this.cn,e),this.yc.forEach(n=>n.b_(e)),e.timeScale!==void 0&&this.yl.$h(e.timeScale),e.localization!==void 0&&this.yl.yu(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Pc.m(),this.zc=this.Lc(0),this.Ec=this.Lc(1),this.Kl()}$c(e,n){if(e==="left")return void this.$h({leftPriceScale:n});if(e==="right")return void this.$h({rightPriceScale:n});const r=this.Uc(e);r!==null&&(r.Dt.$h(n),this.Pc.m())}Uc(e){for(const n of this.yc){const r=n.w_(e);if(r!==null)return{Ht:n,Dt:r}}return null}St(){return this.yl}qc(){return this.yc}Yc(){return this.Ac}Zc(){return this.vt}Xc(){return this.Rc}Kc(e,n){e.Lo(n),this.Wu()}S_(e){this.__=e,this.yl.S_(this.__),this.yc.forEach(n=>n.S_(e)),this.Wu()}Ic(e){const n=new rB(this.yl,this);e!==void 0?this.yc.splice(e,0,n):this.yc.push(n);const r=e===void 0?this.yc.length-1:e,i=ut.es();return i.Nn(r,{Fn:0,Wn:!0}),this.Nc(i),n}V_(e,n,r){e.V_(n,r)}O_(e,n,r){e.O_(n,r),this.Jl(),this.Nc(this.Gc(e,2))}B_(e,n){e.B_(n),this.Nc(this.Gc(e,2))}A_(e,n,r){n.Vo()||e.A_(n,r)}I_(e,n,r){n.Vo()||(e.I_(n,r),this.Jl(),this.Nc(this.Gc(e,2)))}z_(e,n){n.Vo()||(e.z_(n),this.Nc(this.Gc(e,2)))}E_(e,n){e.E_(n),this.Nc(this.Gc(e,2))}Jc(e){this.yl.Go(e)}Qc(e,n){const r=this.St();if(r.Ni()||n===0)return;const i=r.Hi();e=Math.max(1,Math.min(e,i)),r.Zu(e,n),this.Wu()}td(e){this.nd(0),this.sd(e),this.ed()}rd(e){this.yl.Jo(e),this.Wu()}hd(){this.yl.Qo(),this.Uh()}nd(e){this.yl.t_(e)}sd(e){this.yl.i_(e),this.Wu()}ed(){this.yl.n_(),this.Uh()}wt(){return this.Cc}ld(e,n,r,i,s){this.vt.gn(e,n);let o=NaN,l=this.yl.Nu(e);const a=this.yl.Xs();a!==null&&(l=Math.min(Math.max(a.Os(),l),a.ui()));const c=i.vn(),u=c.Ct();u!==null&&(o=c.pn(n,u)),o=this.Bc.Oa(o,l,i),this.vt.kn(l,o,i),this.oa(),s||this.Rc.m(this.vt.xt(),{x:e,y:n},r)}ad(e,n,r){const i=r.vn(),s=i.Ct(),o=i.Rt(e,K(s)),l=this.yl.Va(n,!0),a=this.yl.It(K(l));this.ld(a,o,null,r,!0)}od(e){this.Zc().Cn(),this.oa(),e||this.Rc.m(null,null,null)}Jl(){const e=this.vt.Ht();if(e!==null){const n=this.vt.xn(),r=this.vt.Sn();this.ld(n,r,null,e)}this.vt.Vn()}_d(e,n,r){const i=this.yl.mn(0);n!==void 0&&r!==void 0&&this.yl.bt(n,r);const s=this.yl.mn(0),o=this.yl.Eu(),l=this.yl.Xs();if(l!==null&&i!==null&&s!==null){const a=l.Kr(o),c=this.q_.key(i)>this.q_.key(s),u=e!==null&&e>o&&!c,h=this.yl.W().allowShiftVisibleRangeOnWhitespaceReplacement,f=a&&(r!==void 0||h)&&this.yl.W().shiftVisibleRangeOnNewBar;if(u&&!f){const p=e-o;this.yl.Jn(this.yl.Hu()-p)}}this.yl.Yu(e)}ia(e){e!==null&&e.F_()}dr(e){const n=this.yc.find(r=>r.Uo().includes(e));return n===void 0?null:n}Wu(){this.Ac.Vn(),this.yc.forEach(e=>e.F_()),this.Jl()}S(){this.yc.forEach(e=>e.S()),this.yc.length=0,this.cn.localization.priceFormatter=void 0,this.cn.localization.percentageFormatter=void 0,this.cn.localization.timeFormatter=void 0}ud(){return this.Oc}br(){return this.Oc.W()}g_(){return this.Pc}dd(e,n,r){const i=this.yc[0],s=this.fd(n,e,i,r);return this.Cc.push(s),this.Cc.length===1?this.Kl():this.Uh(),s}vd(e){const n=this.dr(e),r=this.Cc.indexOf(e);Si(r!==-1,"Series not found"),this.Cc.splice(r,1),K(n).Zo(e),e.S&&e.S()}Xl(e,n){const r=K(this.dr(e));r.Zo(e);const i=this.Uc(n);if(i===null){const s=e.Xi();r.qo(e,n,s)}else{const s=i.Ht===r?e.Xi():void 0;i.Ht.qo(e,n,s)}}hc(){const e=ut.ss();e.$n(),this.Nc(e)}pd(e){const n=ut.ss();n.Yn(e),this.Nc(n)}Kn(){const e=ut.ss();e.Kn(),this.Nc(e)}Gn(e){const n=ut.ss();n.Gn(e),this.Nc(n)}Jn(e){const n=ut.ss();n.Jn(e),this.Nc(n)}Zn(e){const n=ut.ss();n.Zn(e),this.Nc(n)}Un(){const e=ut.ss();e.Un(),this.Nc(e)}md(){return this.cn.rightPriceScale.visible?"right":"left"}bd(){return this.Ec}q(){return this.zc}Bt(e){const n=this.Ec,r=this.zc;if(n===r)return n;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Dc===null||this.Dc.Ps!==r||this.Dc.Rs!==n)this.Dc={Ps:r,Rs:n,wd:new Map};else{const s=this.Dc.wd.get(e);if(s!==void 0)return s}const i=function(s,o,l){const[a,c,u,h]=aa(s),[f,p,g,m]=aa(o),w=[ln(a+l*(f-a)),ln(c+l*(p-c)),ln(u+l*(g-u)),K_(h+l*(m-h))];return`rgba(${w[0]}, ${w[1]}, ${w[2]}, ${w[3]})`}(r,n,e/100);return this.Dc.wd.set(e,i),i}Gc(e,n){const r=new ut(n);if(e!==null){const i=this.yc.indexOf(e);r.Nn(i,{Fn:n})}return r}Fc(e,n){return n===void 0&&(n=2),this.Gc(this.dr(e),n)}Nc(e){this.Vc&&this.Vc(e),this.yc.forEach(n=>n.j_().qh().bt())}fd(e,n,r,i){const s=new sv(this,e,n,r,i),o=e.priceScaleId!==void 0?e.priceScaleId:this.md();return r.qo(s,o),Bd(o)||s.$h(e),s}Lc(e){const n=this.cn.layout;return n.background.type==="gradient"?e===0?n.background.topColor:n.background.bottomColor:n.background.color}}function Yp(t){return!Gn(t)&&!Ta(t)}function hN(t){return Gn(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(N0||(N0={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(T0||(T0={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(Kp||(Kp={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(Li||(Li={}));const P0=t=>t.getUTCFullYear();function fB(t,e,n){return e.replace(/yyyy/g,(r=>Er(P0(r),4))(t)).replace(/yy/g,(r=>Er(P0(r)%100,2))(t)).replace(/MMMM/g,((r,i)=>new Date(r.getUTCFullYear(),r.getUTCMonth(),1).toLocaleString(i,{month:"long"}))(t,n)).replace(/MMM/g,((r,i)=>new Date(r.getUTCFullYear(),r.getUTCMonth(),1).toLocaleString(i,{month:"short"}))(t,n)).replace(/MM/g,(r=>Er((i=>i.getUTCMonth()+1)(r),2))(t)).replace(/dd/g,(r=>Er((i=>i.getUTCDate())(r),2))(t))}class fN{constructor(e="yyyy-MM-dd",n="default"){this.gd=e,this.Md=n}Y_(e){return fB(e,this.gd,this.Md)}}class pB{constructor(e){this.xd=e||"%h:%m:%s"}Y_(e){return this.xd.replace("%h",Er(e.getUTCHours(),2)).replace("%m",Er(e.getUTCMinutes(),2)).replace("%s",Er(e.getUTCSeconds(),2))}}const mB={Sd:"yyyy-MM-dd",kd:"%h:%m:%s",yd:" ",Cd:"default"};class gB{constructor(e={}){const n=Object.assign(Object.assign({},mB),e);this.Td=new fN(n.Sd,n.Cd),this.Pd=new pB(n.kd),this.Rd=n.yd}Y_(e){return`${this.Td.Y_(e)}${this.Rd}${this.Pd.Y_(e)}`}}function ac(t){return 60*t*60*1e3}function Qh(t){return 60*t*1e3}const cc=[{Dd:(j0=1,1e3*j0),Vd:10},{Dd:Qh(1),Vd:20},{Dd:Qh(5),Vd:21},{Dd:Qh(30),Vd:22},{Dd:ac(1),Vd:30},{Dd:ac(3),Vd:31},{Dd:ac(6),Vd:32},{Dd:ac(12),Vd:33}];var j0;function A0(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let n=cc.length-1;n>=0;--n)if(Math.floor(e.getTime()/cc[n].Dd)!==Math.floor(t.getTime()/cc[n].Dd))return cc[n].Vd;return 0}function Jh(t){let e=t;if(Ta(t)&&(e=ov(t)),!Yp(e))throw new Error("time must be of type BusinessDay");const n=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{Od:Math.round(n.getTime()/1e3),Bd:e}}function M0(t){if(!hN(t))throw new Error("time must be of type isUTCTimestamp");return{Od:t}}function ov(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function R0(t){Ta(t.time)&&(t.time=ov(t.time))}class I0{options(){return this.cn}setOptions(e){this.cn=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(n){n.forEach(R0)}(e):R0(e)}createConverterToInternalObj(e){return K(function(n){return n.length===0?null:Yp(n[0].time)||Ta(n[0].time)?Jh:M0}(e))}key(e){return typeof e=="object"&&"Od"in e?e.Od:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const n=e;return n.Bd===void 0?new Date(1e3*n.Od).getTime():new Date(Date.UTC(n.Bd.year,n.Bd.month-1,n.Bd.day)).getTime()}convertHorzItemToInternal(e){return hN(n=e)?M0(n):Yp(n)?Jh(n):Jh(ov(n));var n}updateFormatter(e){if(!this.cn)return;const n=e.dateFormat;this.cn.timeScale.timeVisible?this.Ad=new gB({Sd:n,kd:this.cn.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",yd:"   ",Cd:e.locale}):this.Ad=new fN(n,e.locale)}formatHorzItem(e){const n=e;return this.Ad.Y_(new Date(1e3*n.Od))}formatTickmark(e,n){const r=function(s,o,l){switch(s){case 0:case 10:return o?l?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.cn.timeScale.timeVisible,this.cn.timeScale.secondsVisible),i=this.cn.timeScale;if(i.tickMarkFormatter!==void 0){const s=i.tickMarkFormatter(e.originalTime,r,n.locale);if(s!==null)return s}return function(s,o,l){const a={};switch(o){case 0:a.year="numeric";break;case 1:a.month="short";break;case 2:a.day="numeric";break;case 3:a.hour12=!1,a.hour="2-digit",a.minute="2-digit";break;case 4:a.hour12=!1,a.hour="2-digit",a.minute="2-digit",a.second="2-digit"}const c=s.Bd===void 0?new Date(1e3*s.Od):new Date(Date.UTC(s.Bd.year,s.Bd.month-1,s.Bd.day));return new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()).toLocaleString(l,a)}(e.time,r,n.locale)}maxTickMarkWeight(e){let n=e.reduce(oB,e[0]).weight;return n>30&&n<50&&(n=30),n}fillWeightsForPoints(e,n){(function(r,i=0){if(r.length===0)return;let s=i===0?null:r[i-1].time.Od,o=s!==null?new Date(1e3*s):null,l=0;for(let a=i;a<r.length;++a){const c=r[a],u=new Date(1e3*c.time.Od);o!==null&&(c.timeWeight=A0(u,o)),l+=c.time.Od-(s||c.time.Od),s=c.time.Od,o=u}if(i===0&&r.length>1){const a=Math.ceil(l/(r.length-1)),c=new Date(1e3*(r[0].time.Od-a));r[0].timeWeight=A0(new Date(1e3*r[0].time.Od),c)}})(e,n)}static Id(e){return Ln({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const So=typeof window<"u";function O0(){return!!So&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function ef(){return!!So&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function Gp(t){return t+t%2}function tf(t,e){return t.zd-e.zd}function nf(t,e,n){const r=(t.zd-e.zd)/(t.ot-e.ot);return Math.sign(r)*Math.min(Math.abs(r),n)}class vB{constructor(e,n,r,i){this.Ld=null,this.Ed=null,this.Nd=null,this.Fd=null,this.Wd=null,this.jd=0,this.Hd=0,this.$d=e,this.Ud=n,this.qd=r,this.rs=i}Yd(e,n){if(this.Ld!==null){if(this.Ld.ot===n)return void(this.Ld.zd=e);if(Math.abs(this.Ld.zd-e)<this.rs)return}this.Fd=this.Nd,this.Nd=this.Ed,this.Ed=this.Ld,this.Ld={ot:n,zd:e}}Vr(e,n){if(this.Ld===null||this.Ed===null||n-this.Ld.ot>50)return;let r=0;const i=nf(this.Ld,this.Ed,this.Ud),s=tf(this.Ld,this.Ed),o=[i],l=[s];if(r+=s,this.Nd!==null){const c=nf(this.Ed,this.Nd,this.Ud);if(Math.sign(c)===Math.sign(i)){const u=tf(this.Ed,this.Nd);if(o.push(c),l.push(u),r+=u,this.Fd!==null){const h=nf(this.Nd,this.Fd,this.Ud);if(Math.sign(h)===Math.sign(i)){const f=tf(this.Nd,this.Fd);o.push(h),l.push(f),r+=f}}}}let a=0;for(let c=0;c<o.length;++c)a+=l[c]/r*o[c];Math.abs(a)<this.$d||(this.Wd={zd:e,ot:n},this.Hd=a,this.jd=function(c,u){const h=Math.log(u);return Math.log(1*h/-c)/h}(Math.abs(a),this.qd))}tc(e){const n=K(this.Wd),r=e-n.ot;return n.zd+this.Hd*(Math.pow(this.qd,r)-1)/Math.log(this.qd)}Qu(e){return this.Wd===null||this.Zd(e)===this.jd}Zd(e){const n=e-K(this.Wd).ot;return Math.min(n,this.jd)}}class yB{constructor(e,n){this.Xd=void 0,this.Kd=void 0,this.Gd=void 0,this.en=!1,this.Jd=e,this.Qd=n,this.tf()}bt(){this.tf()}if(){this.Xd&&this.Jd.removeChild(this.Xd),this.Kd&&this.Jd.removeChild(this.Kd),this.Xd=void 0,this.Kd=void 0}nf(){return this.en!==this.sf()||this.Gd!==this.ef()}ef(){return Y_(aa(this.Qd.W().layout.textColor))>160?"dark":"light"}sf(){return this.Qd.W().layout.attributionLogo}rf(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}tf(){this.nf()&&(this.if(),this.en=this.sf(),this.en&&(this.Gd=this.ef(),this.Kd=document.createElement("style"),this.Kd.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Xd=document.createElement("a"),this.Xd.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.rf()}`,this.Xd.title="Charting by TradingView",this.Xd.id="tv-attr-logo",this.Xd.target="_blank",this.Xd.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 19" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Xd.toggleAttribute("data-dark",this.Gd==="dark"),this.Jd.appendChild(this.Kd),this.Jd.appendChild(this.Xd)))}}function cs(t,e){const n=K(t.ownerDocument).createElement("canvas");t.appendChild(n);const r=PF(n,{options:{allowResizeObserver:!1},transform:(i,s)=>({width:Math.max(i.width,s.width),height:Math.max(i.height,s.height)})});return r.resizeCanvasElement(e),r}function us(t){var e;t.width=1,t.height=1,(e=t.getContext("2d"))===null||e===void 0||e.clearRect(0,0,1,1)}function Zp(t,e,n,r){t.gl&&t.gl(e,n,r)}function Dc(t,e,n,r){t.X(e,n,r)}function Xp(t,e,n,r){const i=t(n,r);for(const s of i){const o=s.gt();o!==null&&e(o)}}function xB(t){So&&window.chrome!==void 0&&t.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class lv{constructor(e,n,r){this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.df=null,this.ff=!1,this.vf=null,this.pf=null,this.mf=!1,this.bf=!1,this.wf=!1,this.gf=null,this.Mf=null,this.xf=null,this.Sf=null,this.kf=null,this.yf=null,this.Cf=null,this.Tf=0,this.Pf=!1,this.Rf=!1,this.Df=!1,this.Vf=0,this.Of=null,this.Bf=!ef(),this.Af=i=>{this.If(i)},this.zf=i=>{if(this.Lf(i)){const s=this.Ef(i);if(++this._f,this.uf&&this._f>1){const{Nf:o}=this.Ff(Un(i),this.cf);o<30&&!this.wf&&this.Wf(s,this.Hf.jf),this.$f()}}else{const s=this.Ef(i);if(++this.hf,this.lf&&this.hf>1){const{Nf:o}=this.Ff(Un(i),this.af);o<5&&!this.bf&&this.Uf(s,this.Hf.qf),this.Yf()}}},this.Zf=e,this.Hf=n,this.cn=r,this.Xf()}S(){this.gf!==null&&(this.gf(),this.gf=null),this.Mf!==null&&(this.Mf(),this.Mf=null),this.Sf!==null&&(this.Sf(),this.Sf=null),this.kf!==null&&(this.kf(),this.kf=null),this.yf!==null&&(this.yf(),this.yf=null),this.xf!==null&&(this.xf(),this.xf=null),this.Kf(),this.Yf()}Gf(e){this.Sf&&this.Sf();const n=this.Jf.bind(this);if(this.Sf=()=>{this.Zf.removeEventListener("mousemove",n)},this.Zf.addEventListener("mousemove",n),this.Lf(e))return;const r=this.Ef(e);this.Uf(r,this.Hf.Qf),this.Bf=!0}Yf(){this.lf!==null&&clearTimeout(this.lf),this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}$f(){this.uf!==null&&clearTimeout(this.uf),this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Jf(e){if(this.Df||this.pf!==null||this.Lf(e))return;const n=this.Ef(e);this.Uf(n,this.Hf.tv),this.Bf=!0}iv(e){const n=rf(e.changedTouches,K(this.Of));if(n===null||(this.Vf=uc(e),this.Cf!==null)||this.Rf)return;this.Pf=!0;const r=this.Ff(Un(n),K(this.pf)),{nv:i,sv:s,Nf:o}=r;if(this.mf||!(o<5)){if(!this.mf){const l=.5*i,a=s>=l&&!this.cn.ev(),c=l>s&&!this.cn.rv();a||c||(this.Rf=!0),this.mf=!0,this.wf=!0,this.Kf(),this.$f()}if(!this.Rf){const l=this.Ef(e,n);this.Wf(l,this.Hf.hv),Ss(e)}}}lv(e){if(e.button!==0)return;const n=this.Ff(Un(e),K(this.vf)),{Nf:r}=n;if(r>=5&&(this.bf=!0,this.Yf()),this.bf){const i=this.Ef(e);this.Uf(i,this.Hf.av)}}Ff(e,n){const r=Math.abs(n.nt-e.nt),i=Math.abs(n.st-e.st);return{nv:r,sv:i,Nf:r+i}}ov(e){let n=rf(e.changedTouches,K(this.Of));if(n===null&&e.touches.length===0&&(n=e.changedTouches[0]),n===null)return;this.Of=null,this.Vf=uc(e),this.Kf(),this.pf=null,this.yf&&(this.yf(),this.yf=null);const r=this.Ef(e,n);if(this.Wf(r,this.Hf._v),++this._f,this.uf&&this._f>1){const{Nf:i}=this.Ff(Un(n),this.cf);i<30&&!this.wf&&this.Wf(r,this.Hf.jf),this.$f()}else this.wf||(this.Wf(r,this.Hf.uv),this.Hf.uv&&Ss(e));this._f===0&&Ss(e),e.touches.length===0&&this.ff&&(this.ff=!1,Ss(e))}If(e){if(e.button!==0)return;const n=this.Ef(e);if(this.vf=null,this.Df=!1,this.kf&&(this.kf(),this.kf=null),O0()&&this.Zf.ownerDocument.documentElement.removeEventListener("mouseleave",this.Af),!this.Lf(e))if(this.Uf(n,this.Hf.cv),++this.hf,this.lf&&this.hf>1){const{Nf:r}=this.Ff(Un(e),this.af);r<5&&!this.bf&&this.Uf(n,this.Hf.qf),this.Yf()}else this.bf||this.Uf(n,this.Hf.dv)}Kf(){this.df!==null&&(clearTimeout(this.df),this.df=null)}fv(e){if(this.Of!==null)return;const n=e.changedTouches[0];this.Of=n.identifier,this.Vf=uc(e);const r=this.Zf.ownerDocument.documentElement;this.wf=!1,this.mf=!1,this.Rf=!1,this.pf=Un(n),this.yf&&(this.yf(),this.yf=null);{const s=this.iv.bind(this),o=this.ov.bind(this);this.yf=()=>{r.removeEventListener("touchmove",s),r.removeEventListener("touchend",o)},r.addEventListener("touchmove",s,{passive:!1}),r.addEventListener("touchend",o,{passive:!1}),this.Kf(),this.df=setTimeout(this.vv.bind(this,e),240)}const i=this.Ef(e,n);this.Wf(i,this.Hf.pv),this.uf||(this._f=0,this.uf=setTimeout(this.$f.bind(this),500),this.cf=Un(n))}mv(e){if(e.button!==0)return;const n=this.Zf.ownerDocument.documentElement;O0()&&n.addEventListener("mouseleave",this.Af),this.bf=!1,this.vf=Un(e),this.kf&&(this.kf(),this.kf=null);{const i=this.lv.bind(this),s=this.If.bind(this);this.kf=()=>{n.removeEventListener("mousemove",i),n.removeEventListener("mouseup",s)},n.addEventListener("mousemove",i),n.addEventListener("mouseup",s)}if(this.Df=!0,this.Lf(e))return;const r=this.Ef(e);this.Uf(r,this.Hf.bv),this.lf||(this.hf=0,this.lf=setTimeout(this.Yf.bind(this),500),this.af=Un(e))}Xf(){this.Zf.addEventListener("mouseenter",this.Gf.bind(this)),this.Zf.addEventListener("touchcancel",this.Kf.bind(this));{const e=this.Zf.ownerDocument,n=r=>{this.Hf.wv&&(r.composed&&this.Zf.contains(r.composedPath()[0])||r.target&&this.Zf.contains(r.target)||this.Hf.wv())};this.Mf=()=>{e.removeEventListener("touchstart",n)},this.gf=()=>{e.removeEventListener("mousedown",n)},e.addEventListener("mousedown",n),e.addEventListener("touchstart",n,{passive:!0})}ef()&&(this.xf=()=>{this.Zf.removeEventListener("dblclick",this.zf)},this.Zf.addEventListener("dblclick",this.zf)),this.Zf.addEventListener("mouseleave",this.gv.bind(this)),this.Zf.addEventListener("touchstart",this.fv.bind(this),{passive:!0}),xB(this.Zf),this.Zf.addEventListener("mousedown",this.mv.bind(this)),this.Mv(),this.Zf.addEventListener("touchmove",()=>{},{passive:!1})}Mv(){this.Hf.xv===void 0&&this.Hf.Sv===void 0&&this.Hf.kv===void 0||(this.Zf.addEventListener("touchstart",e=>this.yv(e.touches),{passive:!0}),this.Zf.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Cf!==null&&this.Hf.Sv!==void 0){const n=L0(e.touches[0],e.touches[1])/this.Tf;this.Hf.Sv(this.Cf,n),Ss(e)}},{passive:!1}),this.Zf.addEventListener("touchend",e=>{this.yv(e.touches)}))}yv(e){e.length===1&&(this.Pf=!1),e.length!==2||this.Pf||this.ff?this.Cv():this.Tv(e)}Tv(e){const n=this.Zf.getBoundingClientRect()||{left:0,top:0};this.Cf={nt:(e[0].clientX-n.left+(e[1].clientX-n.left))/2,st:(e[0].clientY-n.top+(e[1].clientY-n.top))/2},this.Tf=L0(e[0],e[1]),this.Hf.xv!==void 0&&this.Hf.xv(),this.Kf()}Cv(){this.Cf!==null&&(this.Cf=null,this.Hf.kv!==void 0&&this.Hf.kv())}gv(e){if(this.Sf&&this.Sf(),this.Lf(e)||!this.Bf)return;const n=this.Ef(e);this.Uf(n,this.Hf.Pv),this.Bf=!ef()}vv(e){const n=rf(e.touches,K(this.Of));if(n===null)return;const r=this.Ef(e,n);this.Wf(r,this.Hf.Rv),this.wf=!0,this.ff=!0}Lf(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:uc(e)<this.Vf+500}Wf(e,n){n&&n.call(this.Hf,e)}Uf(e,n){n&&n.call(this.Hf,e)}Ef(e,n){const r=n||e,i=this.Zf.getBoundingClientRect()||{left:0,top:0};return{clientX:r.clientX,clientY:r.clientY,pageX:r.pageX,pageY:r.pageY,screenX:r.screenX,screenY:r.screenY,localX:r.clientX-i.left,localY:r.clientY-i.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Dv:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Vv:e.type,Ov:r.target,Bv:e.view,Av:()=>{e.type!=="touchstart"&&Ss(e)}}}}function L0(t,e){const n=t.clientX-e.clientX,r=t.clientY-e.clientY;return Math.sqrt(n*n+r*r)}function Ss(t){t.cancelable&&t.preventDefault()}function Un(t){return{nt:t.pageX,st:t.pageY}}function uc(t){return t.timeStamp||performance.now()}function rf(t,e){for(let n=0;n<t.length;++n)if(t[n].identifier===e)return t[n];return null}function dc(t){return{Hc:t.Hc,Iv:{gr:t.zv.externalId},Lv:t.zv.cursorStyle}}function wB(t,e,n){for(const r of t){const i=r.gt();if(i!==null&&i.wr){const s=i.wr(e,n);if(s!==null)return{Bv:r,Iv:s}}}return null}function sf(t,e){return n=>{var r,i,s,o;return((i=(r=n.Dt())===null||r===void 0?void 0:r.Pa())!==null&&i!==void 0?i:"")!==e?[]:(o=(s=n.da)===null||s===void 0?void 0:s.call(n,t))!==null&&o!==void 0?o:[]}}function z0(t,e,n,r){if(!t.length)return;let i=0;const s=n/2,o=t[0].At(r,!0);let l=e===1?s-(t[0].Vi()-o/2):t[0].Vi()-o/2-s;l=Math.max(0,l);for(let a=1;a<t.length;a++){const c=t[a],u=t[a-1],h=u.At(r,!1),f=c.Vi(),p=u.Vi();if(e===1?f>p-h:f<p+h){const g=p-h*e;c.Oi(g);const m=g-e*h/2;if((e===1?m<0:m>n)&&l>0){const w=e===1?-1-m:m-n,v=Math.min(w,l);for(let x=i;x<t.length;x++)t[x].Oi(t[x].Vi()+e*v);l-=v}}else i=a,l=e===1?p-h-f:f-(p+h)}}class D0{constructor(e,n,r,i){this.Li=null,this.Ev=null,this.Nv=!1,this.Fv=new da(200),this.Qr=null,this.Wv=0,this.jv=!1,this.Hv=()=>{this.jv||this.tn.$v().$t().Uh()},this.Uv=()=>{this.jv||this.tn.$v().$t().Uh()},this.tn=e,this.cn=n,this.ko=n.layout,this.Oc=r,this.qv=i==="left",this.Yv=sf("normal",i),this.Zv=sf("top",i),this.Xv=sf("bottom",i),this.Kv=document.createElement("div"),this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Kv.style.width="25px",this.Kv.style.left="0",this.Kv.style.position="relative",this.Gv=cs(this.Kv,Fe({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const s=this.Gv.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Jv=cs(this.Kv,Fe({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const o=this.Jv.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const l={bv:this.Qv.bind(this),pv:this.Qv.bind(this),av:this.tp.bind(this),hv:this.tp.bind(this),wv:this.ip.bind(this),cv:this.np.bind(this),_v:this.np.bind(this),qf:this.sp.bind(this),jf:this.sp.bind(this),Qf:this.ep.bind(this),Pv:this.rp.bind(this)};this.hp=new lv(this.Jv.canvasElement,l,{ev:()=>!this.cn.handleScroll.vertTouchDrag,rv:()=>!0})}S(){this.hp.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),us(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),us(this.Gv.canvasElement),this.Gv.dispose(),this.Li!==null&&this.Li.Ko().p(this),this.Li=null}lp(){return this.Kv}P(){return this.ko.fontSize}ap(){const e=this.Oc.W();return this.Qr!==e.R&&(this.Fv.nr(),this.Qr=e.R),e}op(){if(this.Li===null)return 0;let e=0;const n=this.ap(),r=K(this.Gv.canvasElement.getContext("2d"));r.save();const i=this.Li.Ha();r.font=this._p(),i.length>0&&(e=Math.max(this.Fv.xi(r,i[0].so),this.Fv.xi(r,i[i.length-1].so)));const s=this.up();for(let c=s.length;c--;){const u=this.Fv.xi(r,s[c].Kt());u>e&&(e=u)}const o=this.Li.Ct();if(o!==null&&this.Ev!==null&&(l=this.cn.crosshair).mode!==2&&l.horzLine.visible&&l.horzLine.labelVisible){const c=this.Li.pn(1,o),u=this.Li.pn(this.Ev.height-2,o);e=Math.max(e,this.Fv.xi(r,this.Li.Fi(Math.floor(Math.min(c,u))+.11111111111111,o)),this.Fv.xi(r,this.Li.Fi(Math.ceil(Math.max(c,u))-.11111111111111,o)))}var l;r.restore();const a=e||34;return Gp(Math.ceil(n.C+n.T+n.A+n.I+5+a))}cp(e){this.Ev!==null&&Ki(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`)}dp(){return K(this.Ev).width}Gi(e){this.Li!==e&&(this.Li!==null&&this.Li.Ko().p(this),this.Li=e,e.Ko().l(this.fo.bind(this),this))}Dt(){return this.Li}nr(){const e=this.tn.fp();this.tn.$v().$t().E_(e,K(this.Dt()))}vp(e){if(this.Ev===null)return;if(e!==1){this.pp(),this.Gv.applySuggestedBitmapSize();const r=ls(this.Gv);r!==null&&(r.useBitmapCoordinateSpace(i=>{this.mp(i),this.Ie(i)}),this.tn.bp(r,this.Xv),this.wp(r),this.tn.bp(r,this.Yv),this.gp(r))}this.Jv.applySuggestedBitmapSize();const n=ls(this.Jv);n!==null&&(n.useBitmapCoordinateSpace(({context:r,bitmapSize:i})=>{r.clearRect(0,0,i.width,i.height)}),this.Mp(n),this.tn.bp(n,this.Zv))}xp(){return this.Gv.bitmapSize}Sp(e,n,r){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,n,r)}bt(){var e;(e=this.Li)===null||e===void 0||e.Ha()}Qv(e){if(this.Li===null||this.Li.Ni()||!this.cn.handleScale.axisPressedMouseMove.price)return;const n=this.tn.$v().$t(),r=this.tn.fp();this.Nv=!0,n.V_(r,this.Li,e.localY)}tp(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const n=this.tn.$v().$t(),r=this.tn.fp(),i=this.Li;n.O_(r,i,e.localY)}ip(){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.tn.$v().$t(),n=this.tn.fp(),r=this.Li;this.Nv&&(this.Nv=!1,e.B_(n,r))}np(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const n=this.tn.$v().$t(),r=this.tn.fp();this.Nv=!1,n.B_(r,this.Li)}sp(e){this.cn.handleScale.axisDoubleClickReset.price&&this.nr()}ep(e){this.Li!==null&&(!this.tn.$v().$t().W().handleScale.axisPressedMouseMove.price||this.Li.Mh()||this.Li.Oo()||this.kp(1))}rp(e){this.kp(0)}up(){const e=[],n=this.Li===null?void 0:this.Li;return(r=>{for(let i=0;i<r.length;++i){const s=r[i].Rn(this.tn.fp(),n);for(let o=0;o<s.length;o++)e.push(s[o])}})(this.tn.fp().Uo()),e}mp({context:e,bitmapSize:n}){const{width:r,height:i}=n,s=this.tn.fp().$t(),o=s.q(),l=s.bd();o===l?$d(e,0,0,r,i,o):G_(e,0,0,r,i,o,l)}Ie({context:e,bitmapSize:n,horizontalPixelRatio:r}){if(this.Ev===null||this.Li===null||!this.Li.W().borderVisible)return;e.fillStyle=this.Li.W().borderColor;const i=Math.max(1,Math.floor(this.ap().C*r));let s;s=this.qv?n.width-i:0,e.fillRect(s,0,i,n.height)}wp(e){if(this.Ev===null||this.Li===null)return;const n=this.Li.Ha(),r=this.Li.W(),i=this.ap(),s=this.qv?this.Ev.width-i.T:0;r.borderVisible&&r.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:l,verticalPixelRatio:a})=>{o.fillStyle=r.borderColor;const c=Math.max(1,Math.floor(a)),u=Math.floor(.5*a),h=Math.round(i.T*l);o.beginPath();for(const f of n)o.rect(Math.floor(s*l),Math.round(f.Ea*a)-u,h,c);o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{var l;o.font=this._p(),o.fillStyle=(l=r.textColor)!==null&&l!==void 0?l:this.ko.textColor,o.textAlign=this.qv?"right":"left",o.textBaseline="middle";const a=this.qv?Math.round(s-i.A):Math.round(s+i.T+i.A),c=n.map(u=>this.Fv.Mi(o,u.so));for(let u=n.length;u--;){const h=n[u];o.fillText(h.so,a,h.Ea+c[u])}})}pp(){if(this.Ev===null||this.Li===null)return;const e=[],n=this.Li.Uo().slice(),r=this.tn.fp(),i=this.ap();this.Li===r.pr()&&this.tn.fp().Uo().forEach(o=>{r.vr(o)&&n.push(o)});const s=this.Li;n.forEach(o=>{o.Rn(r,s).forEach(l=>{l.Oi(null),l.Bi()&&e.push(l)})}),e.forEach(o=>o.Oi(o.ki())),this.Li.W().alignLabels&&this.yp(e,i)}yp(e,n){if(this.Ev===null)return;const r=this.Ev.height/2,i=e.filter(o=>o.ki()<=r),s=e.filter(o=>o.ki()>r);i.sort((o,l)=>l.ki()-o.ki()),s.sort((o,l)=>o.ki()-l.ki());for(const o of e){const l=Math.floor(o.At(n)/2),a=o.ki();a>-l&&a<l&&o.Oi(l),a>this.Ev.height-l&&a<this.Ev.height+l&&o.Oi(this.Ev.height-l)}z0(i,1,this.Ev.height,n),z0(s,-1,this.Ev.height,n)}gp(e){if(this.Ev===null)return;const n=this.up(),r=this.ap(),i=this.qv?"right":"left";n.forEach(s=>{s.Ai()&&s.gt(K(this.Li)).X(e,r,this.Fv,i)})}Mp(e){if(this.Ev===null||this.Li===null)return;const n=this.tn.$v().$t(),r=[],i=this.tn.fp(),s=n.Zc().Rn(i,this.Li);s.length&&r.push(s);const o=this.ap(),l=this.qv?"right":"left";r.forEach(a=>{a.forEach(c=>{c.gt(K(this.Li)).X(e,o,this.Fv,l)})})}kp(e){this.Kv.style.cursor=e===1?"ns-resize":"default"}fo(){const e=this.op();this.Wv<e&&this.tn.$v().$t().Kl(),this.Wv=e}_p(){return bo(this.ko.fontSize,this.ko.fontFamily)}}function bB(t,e){var n,r;return(r=(n=t.ua)===null||n===void 0?void 0:n.call(t,e))!==null&&r!==void 0?r:[]}function hc(t,e){var n,r;return(r=(n=t.Pn)===null||n===void 0?void 0:n.call(t,e))!==null&&r!==void 0?r:[]}function SB(t,e){var n,r;return(r=(n=t.Ji)===null||n===void 0?void 0:n.call(t,e))!==null&&r!==void 0?r:[]}function kB(t,e){var n,r;return(r=(n=t.aa)===null||n===void 0?void 0:n.call(t,e))!==null&&r!==void 0?r:[]}class av{constructor(e,n){this.Ev=Fe({width:0,height:0}),this.Cp=null,this.Tp=null,this.Pp=null,this.Rp=null,this.Dp=!1,this.Vp=new Xe,this.Op=new Xe,this.Bp=0,this.Ap=!1,this.Ip=null,this.zp=!1,this.Lp=null,this.Ep=null,this.jv=!1,this.Hv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Uv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Qd=e,this.Np=n,this.Np.W_().l(this.Fp.bind(this),this,!0),this.Wp=document.createElement("td"),this.Wp.style.padding="0",this.Wp.style.position="relative";const r=document.createElement("div");r.style.width="100%",r.style.height="100%",r.style.position="relative",r.style.overflow="hidden",this.jp=document.createElement("td"),this.jp.style.padding="0",this.Hp=document.createElement("td"),this.Hp.style.padding="0",this.Wp.appendChild(r),this.Gv=cs(r,Fe({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const i=this.Gv.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Jv=cs(r,Fe({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const s=this.Jv.canvasElement;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.$p=document.createElement("tr"),this.$p.appendChild(this.jp),this.$p.appendChild(this.Wp),this.$p.appendChild(this.Hp),this.Up(),this.hp=new lv(this.Jv.canvasElement,this,{ev:()=>this.Ip===null&&!this.Qd.W().handleScroll.vertTouchDrag,rv:()=>this.Ip===null&&!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.Cp!==null&&this.Cp.S(),this.Tp!==null&&this.Tp.S(),this.Pp=null,this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),us(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),us(this.Gv.canvasElement),this.Gv.dispose(),this.Np!==null&&this.Np.W_().p(this),this.hp.S()}fp(){return K(this.Np)}qp(e){var n,r;this.Np!==null&&this.Np.W_().p(this),this.Np=e,this.Np!==null&&this.Np.W_().l(av.prototype.Fp.bind(this),this,!0),this.Up(),this.Qd.Yp().indexOf(this)===this.Qd.Yp().length-1?(this.Pp=(n=this.Pp)!==null&&n!==void 0?n:new yB(this.Wp,this.Qd),this.Pp.bt()):((r=this.Pp)===null||r===void 0||r.if(),this.Pp=null)}$v(){return this.Qd}lp(){return this.$p}Up(){if(this.Np!==null&&(this.Zp(),this.$i().wt().length!==0)){if(this.Cp!==null){const e=this.Np.R_();this.Cp.Gi(K(e))}if(this.Tp!==null){const e=this.Np.D_();this.Tp.Gi(K(e))}}}Xp(){this.Cp!==null&&this.Cp.bt(),this.Tp!==null&&this.Tp.bt()}M_(){return this.Np!==null?this.Np.M_():0}x_(e){this.Np&&this.Np.x_(e)}Qf(e){if(!this.Np)return;this.Kp();const n=e.localX,r=e.localY;this.Gp(n,r,e)}bv(e){this.Kp(),this.Jp(),this.Gp(e.localX,e.localY,e)}tv(e){var n;if(!this.Np)return;this.Kp();const r=e.localX,i=e.localY;this.Gp(r,i,e);const s=this.wr(r,i);this.Qd.Qp((n=s==null?void 0:s.Lv)!==null&&n!==void 0?n:null),this.$i().jc(s&&{Hc:s.Hc,Iv:s.Iv})}dv(e){this.Np!==null&&(this.Kp(),this.tm(e))}qf(e){this.Np!==null&&this.im(this.Op,e)}jf(e){this.qf(e)}av(e){this.Kp(),this.nm(e),this.Gp(e.localX,e.localY,e)}cv(e){this.Np!==null&&(this.Kp(),this.Ap=!1,this.sm(e))}uv(e){this.Np!==null&&this.tm(e)}Rv(e){if(this.Ap=!0,this.Ip===null){const n={x:e.localX,y:e.localY};this.rm(n,n,e)}}Pv(e){this.Np!==null&&(this.Kp(),this.Np.$t().jc(null),this.hm())}lm(){return this.Vp}am(){return this.Op}xv(){this.Bp=1,this.$i().Un()}Sv(e,n){if(!this.Qd.W().handleScale.pinch)return;const r=5*(n-this.Bp);this.Bp=n,this.$i().Qc(e.nt,r)}pv(e){this.Ap=!1,this.zp=this.Ip!==null,this.Jp();const n=this.$i().Zc();this.Ip!==null&&n.yt()&&(this.Lp={x:n.Yt(),y:n.Zt()},this.Ip={x:e.localX,y:e.localY})}hv(e){if(this.Np===null)return;const n=e.localX,r=e.localY;if(this.Ip===null)this.nm(e);else{this.zp=!1;const i=K(this.Lp),s=i.x+(n-this.Ip.x),o=i.y+(r-this.Ip.y);this.Gp(s,o,e)}}_v(e){this.$v().W().trackingMode.exitMode===0&&(this.zp=!0),this.om(),this.sm(e)}wr(e,n){const r=this.Np;return r===null?null:function(i,s,o){const l=i.Uo(),a=function(c,u,h){var f,p;let g,m;for(const x of c){const b=(p=(f=x.va)===null||f===void 0?void 0:f.call(x,u,h))!==null&&p!==void 0?p:[];for(const S of b)w=S.zOrder,(!(v=g==null?void 0:g.zOrder)||w==="top"&&v!=="top"||w==="normal"&&v==="bottom")&&(g=S,m=x)}var w,v;return g&&m?{zv:g,Hc:m}:null}(l,s,o);if((a==null?void 0:a.zv.zOrder)==="top")return dc(a);for(const c of l){if(a&&a.Hc===c&&a.zv.zOrder!=="bottom"&&!a.zv.isBackground)return dc(a);const u=wB(c.Pn(i),s,o);if(u!==null)return{Hc:c,Bv:u.Bv,Iv:u.Iv};if(a&&a.Hc===c&&a.zv.zOrder!=="bottom"&&a.zv.isBackground)return dc(a)}return a!=null&&a.zv?dc(a):null}(r,e,n)}_m(e,n){K(n==="left"?this.Cp:this.Tp).cp(Fe({width:e,height:this.Ev.height}))}um(){return this.Ev}cp(e){Ki(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Wp.style.width=e.width+"px",this.Wp.style.height=e.height+"px")}dm(){const e=K(this.Np);e.P_(e.R_()),e.P_(e.D_());for(const n of e.Ba())if(e.vr(n)){const r=n.Dt();r!==null&&e.P_(r),n.Vn()}}xp(){return this.Gv.bitmapSize}Sp(e,n,r){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,n,r)}vp(e){if(e===0||this.Np===null)return;if(e>1&&this.dm(),this.Cp!==null&&this.Cp.vp(e),this.Tp!==null&&this.Tp.vp(e),e!==1){this.Gv.applySuggestedBitmapSize();const r=ls(this.Gv);r!==null&&(r.useBitmapCoordinateSpace(i=>{this.mp(i)}),this.Np&&(this.fm(r,bB),this.vm(r),this.pm(r),this.fm(r,hc),this.fm(r,SB)))}this.Jv.applySuggestedBitmapSize();const n=ls(this.Jv);n!==null&&(n.useBitmapCoordinateSpace(({context:r,bitmapSize:i})=>{r.clearRect(0,0,i.width,i.height)}),this.bm(n),this.fm(n,kB))}wm(){return this.Cp}gm(){return this.Tp}bp(e,n){this.fm(e,n)}Fp(){this.Np!==null&&this.Np.W_().p(this),this.Np=null}tm(e){this.im(this.Vp,e)}im(e,n){const r=n.localX,i=n.localY;e.M()&&e.m(this.$i().St().Nu(r),{x:r,y:i},n)}mp({context:e,bitmapSize:n}){const{width:r,height:i}=n,s=this.$i(),o=s.q(),l=s.bd();o===l?$d(e,0,0,r,i,l):G_(e,0,0,r,i,o,l)}vm(e){const n=K(this.Np).j_().qh().gt();n!==null&&n.X(e,!1)}pm(e){const n=this.$i().Yc();this.Mm(e,hc,Zp,n),this.Mm(e,hc,Dc,n)}bm(e){this.Mm(e,hc,Dc,this.$i().Zc())}fm(e,n){const r=K(this.Np).Uo();for(const i of r)this.Mm(e,n,Zp,i);for(const i of r)this.Mm(e,n,Dc,i)}Mm(e,n,r,i){const s=K(this.Np),o=s.$t().Wc(),l=o!==null&&o.Hc===i,a=o!==null&&l&&o.Iv!==void 0?o.Iv.Mr:void 0;Xp(n,c=>r(c,e,l,a),i,s)}Zp(){if(this.Np===null)return;const e=this.Qd,n=this.Np.R_().W().visible,r=this.Np.D_().W().visible;n||this.Cp===null||(this.jp.removeChild(this.Cp.lp()),this.Cp.S(),this.Cp=null),r||this.Tp===null||(this.Hp.removeChild(this.Tp.lp()),this.Tp.S(),this.Tp=null);const i=e.$t().ud();n&&this.Cp===null&&(this.Cp=new D0(this,e.W(),i,"left"),this.jp.appendChild(this.Cp.lp())),r&&this.Tp===null&&(this.Tp=new D0(this,e.W(),i,"right"),this.Hp.appendChild(this.Tp.lp()))}xm(e){return e.Dv&&this.Ap||this.Ip!==null}Sm(e){return Math.max(0,Math.min(e,this.Ev.width-1))}km(e){return Math.max(0,Math.min(e,this.Ev.height-1))}Gp(e,n,r){this.$i().ld(this.Sm(e),this.km(n),r,K(this.Np))}hm(){this.$i().od()}om(){this.zp&&(this.Ip=null,this.hm())}rm(e,n,r){this.Ip=e,this.zp=!1,this.Gp(n.x,n.y,r);const i=this.$i().Zc();this.Lp={x:i.Yt(),y:i.Zt()}}$i(){return this.Qd.$t()}sm(e){if(!this.Dp)return;const n=this.$i(),r=this.fp();if(n.z_(r,r.vn()),this.Rp=null,this.Dp=!1,n.ed(),this.Ep!==null){const i=performance.now(),s=n.St();this.Ep.Vr(s.Hu(),i),this.Ep.Qu(i)||n.Zn(this.Ep)}}Kp(){this.Ip=null}Jp(){if(this.Np){if(this.$i().Un(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)K(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Np.vn().Ni()&&this.$i().St().Ni()}}nm(e){if(this.Np===null)return;const n=this.$i(),r=n.St();if(r.Ni())return;const i=this.Qd.W(),s=i.handleScroll,o=i.kineticScroll;if((!s.pressedMouseMove||e.Dv)&&(!s.horzTouchDrag&&!s.vertTouchDrag||!e.Dv))return;const l=this.Np.vn(),a=performance.now();if(this.Rp!==null||this.xm(e)||(this.Rp={x:e.clientX,y:e.clientY,Od:a,ym:e.localX,Cm:e.localY}),this.Rp!==null&&!this.Dp&&(this.Rp.x!==e.clientX||this.Rp.y!==e.clientY)){if(e.Dv&&o.touch||!e.Dv&&o.mouse){const c=r.le();this.Ep=new vB(.2/c,7/c,.997,15/c),this.Ep.Yd(r.Hu(),this.Rp.Od)}else this.Ep=null;l.Ni()||n.A_(this.Np,l,e.localY),n.nd(e.localX),this.Dp=!0}this.Dp&&(l.Ni()||n.I_(this.Np,l,e.localY),n.sd(e.localX),this.Ep!==null&&this.Ep.Yd(r.Hu(),a))}}class $0{constructor(e,n,r,i,s){this.ft=!0,this.Ev=Fe({width:0,height:0}),this.Hv=()=>this.vp(3),this.qv=e==="left",this.Oc=r.ud,this.cn=n,this.Tm=i,this.Pm=s,this.Kv=document.createElement("div"),this.Kv.style.width="25px",this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Gv=cs(this.Kv,Fe({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv)}S(){this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),us(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Kv}um(){return this.Ev}cp(e){Ki(this.Ev,e)||(this.Ev=e,this.Gv.resizeCanvasElement(e),this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.ft=!0)}vp(e){if(e<3&&!this.ft||this.Ev.width===0||this.Ev.height===0)return;this.ft=!1,this.Gv.applySuggestedBitmapSize();const n=ls(this.Gv);n!==null&&n.useBitmapCoordinateSpace(r=>{this.mp(r),this.Ie(r)})}xp(){return this.Gv.bitmapSize}Sp(e,n,r){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,n,r)}Ie({context:e,bitmapSize:n,horizontalPixelRatio:r,verticalPixelRatio:i}){if(!this.Tm())return;e.fillStyle=this.cn.timeScale.borderColor;const s=Math.floor(this.Oc.W().C*r),o=Math.floor(this.Oc.W().C*i),l=this.qv?n.width-s:0;e.fillRect(l,0,s,o)}mp({context:e,bitmapSize:n}){$d(e,0,0,n.width,n.height,this.Pm())}}function cv(t){return e=>{var n,r;return(r=(n=e.fa)===null||n===void 0?void 0:n.call(e,t))!==null&&r!==void 0?r:[]}}const CB=cv("normal"),EB=cv("top"),_B=cv("bottom");class NB{constructor(e,n){this.Rm=null,this.Dm=null,this.k=null,this.Vm=!1,this.Ev=Fe({width:0,height:0}),this.Om=new Xe,this.Fv=new da(5),this.jv=!1,this.Hv=()=>{this.jv||this.Qd.$t().Uh()},this.Uv=()=>{this.jv||this.Qd.$t().Uh()},this.Qd=e,this.q_=n,this.cn=e.W().layout,this.Xd=document.createElement("tr"),this.Bm=document.createElement("td"),this.Bm.style.padding="0",this.Am=document.createElement("td"),this.Am.style.padding="0",this.Kv=document.createElement("td"),this.Kv.style.height="25px",this.Kv.style.padding="0",this.Im=document.createElement("div"),this.Im.style.width="100%",this.Im.style.height="100%",this.Im.style.position="relative",this.Im.style.overflow="hidden",this.Kv.appendChild(this.Im),this.Gv=cs(this.Im,Fe({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const r=this.Gv.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Jv=cs(this.Im,Fe({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const i=this.Jv.canvasElement;i.style.position="absolute",i.style.zIndex="2",i.style.left="0",i.style.top="0",this.Xd.appendChild(this.Bm),this.Xd.appendChild(this.Kv),this.Xd.appendChild(this.Am),this.zm(),this.Qd.$t().g_().l(this.zm.bind(this),this),this.hp=new lv(this.Jv.canvasElement,this,{ev:()=>!0,rv:()=>!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.hp.S(),this.Rm!==null&&this.Rm.S(),this.Dm!==null&&this.Dm.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),us(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),us(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Xd}Lm(){return this.Rm}Em(){return this.Dm}bv(e){if(this.Vm)return;this.Vm=!0;const n=this.Qd.$t();!n.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&n.Jc(e.localX)}pv(e){this.bv(e)}wv(){const e=this.Qd.$t();!e.St().Ni()&&this.Vm&&(this.Vm=!1,this.Qd.W().handleScale.axisPressedMouseMove.time&&e.hd())}av(e){const n=this.Qd.$t();!n.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&n.rd(e.localX)}hv(e){this.av(e)}cv(){this.Vm=!1;const e=this.Qd.$t();e.St().Ni()&&!this.Qd.W().handleScale.axisPressedMouseMove.time||e.hd()}_v(){this.cv()}qf(){this.Qd.W().handleScale.axisDoubleClickReset.time&&this.Qd.$t().Kn()}jf(){this.qf()}Qf(){this.Qd.$t().W().handleScale.axisPressedMouseMove.time&&this.kp(1)}Pv(){this.kp(0)}um(){return this.Ev}Nm(){return this.Om}Fm(e,n,r){Ki(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.Om.m(e)),this.Rm!==null&&this.Rm.cp(Fe({width:n,height:e.height})),this.Dm!==null&&this.Dm.cp(Fe({width:r,height:e.height}))}Wm(){const e=this.jm();return Math.ceil(e.C+e.T+e.P+e.L+e.B+e.Hm)}bt(){this.Qd.$t().St().Ha()}xp(){return this.Gv.bitmapSize}Sp(e,n,r){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,n,r)}vp(e){if(e===0)return;if(e!==1){this.Gv.applySuggestedBitmapSize();const r=ls(this.Gv);r!==null&&(r.useBitmapCoordinateSpace(i=>{this.mp(i),this.Ie(i),this.$m(r,_B)}),this.wp(r),this.$m(r,CB)),this.Rm!==null&&this.Rm.vp(e),this.Dm!==null&&this.Dm.vp(e)}this.Jv.applySuggestedBitmapSize();const n=ls(this.Jv);n!==null&&(n.useBitmapCoordinateSpace(({context:r,bitmapSize:i})=>{r.clearRect(0,0,i.width,i.height)}),this.Um([...this.Qd.$t().wt(),this.Qd.$t().Zc()],n),this.$m(n,EB))}$m(e,n){const r=this.Qd.$t().wt();for(const i of r)Xp(n,s=>Zp(s,e,!1,void 0),i,void 0);for(const i of r)Xp(n,s=>Dc(s,e,!1,void 0),i,void 0)}mp({context:e,bitmapSize:n}){$d(e,0,0,n.width,n.height,this.Qd.$t().bd())}Ie({context:e,bitmapSize:n,verticalPixelRatio:r}){if(this.Qd.W().timeScale.borderVisible){e.fillStyle=this.qm();const i=Math.max(1,Math.floor(this.jm().C*r));e.fillRect(0,0,n.width,i)}}wp(e){const n=this.Qd.$t().St(),r=n.Ha();if(!r||r.length===0)return;const i=this.q_.maxTickMarkWeight(r),s=this.jm(),o=n.W();o.borderVisible&&o.ticksVisible&&e.useBitmapCoordinateSpace(({context:l,horizontalPixelRatio:a,verticalPixelRatio:c})=>{l.strokeStyle=this.qm(),l.fillStyle=this.qm();const u=Math.max(1,Math.floor(a)),h=Math.floor(.5*a);l.beginPath();const f=Math.round(s.T*c);for(let p=r.length;p--;){const g=Math.round(r[p].coord*a);l.rect(g-h,0,u,f)}l.fill()}),e.useMediaCoordinateSpace(({context:l})=>{const a=s.C+s.T+s.L+s.P/2;l.textAlign="center",l.textBaseline="middle",l.fillStyle=this.$(),l.font=this._p();for(const c of r)if(c.weight<i){const u=c.needAlignCoordinate?this.Ym(l,c.coord,c.label):c.coord;l.fillText(c.label,u,a)}this.Qd.W().timeScale.allowBoldLabels&&(l.font=this.Zm());for(const c of r)if(c.weight>=i){const u=c.needAlignCoordinate?this.Ym(l,c.coord,c.label):c.coord;l.fillText(c.label,u,a)}})}Ym(e,n,r){const i=this.Fv.xi(e,r),s=i/2,o=Math.floor(n-s)+.5;return o<0?n+=Math.abs(0-o):o+i>this.Ev.width&&(n-=Math.abs(this.Ev.width-(o+i))),n}Um(e,n){const r=this.jm();for(const i of e)for(const s of i.Qi())s.gt().X(n,r)}qm(){return this.Qd.W().timeScale.borderColor}$(){return this.cn.textColor}j(){return this.cn.fontSize}_p(){return bo(this.j(),this.cn.fontFamily)}Zm(){return bo(this.j(),this.cn.fontFamily,"bold")}jm(){this.k===null&&(this.k={C:1,N:NaN,L:NaN,B:NaN,ji:NaN,T:5,P:NaN,R:"",Wi:new da,Hm:0});const e=this.k,n=this._p();if(e.R!==n){const r=this.j();e.P=r,e.R=n,e.L=3*r/12,e.B=3*r/12,e.ji=9*r/12,e.N=0,e.Hm=4*r/12,e.Wi.nr()}return this.k}kp(e){this.Kv.style.cursor=e===1?"ew-resize":"default"}zm(){const e=this.Qd.$t(),n=e.W();n.leftPriceScale.visible||this.Rm===null||(this.Bm.removeChild(this.Rm.lp()),this.Rm.S(),this.Rm=null),n.rightPriceScale.visible||this.Dm===null||(this.Am.removeChild(this.Dm.lp()),this.Dm.S(),this.Dm=null);const r={ud:this.Qd.$t().ud()},i=()=>n.leftPriceScale.borderVisible&&e.St().W().borderVisible,s=()=>e.bd();n.leftPriceScale.visible&&this.Rm===null&&(this.Rm=new $0("left",n,r,i,s),this.Bm.appendChild(this.Rm.lp())),n.rightPriceScale.visible&&this.Dm===null&&(this.Dm=new $0("right",n,r,i,s),this.Am.appendChild(this.Dm.lp()))}}const TB=!!So&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!So&&(!((of=navigator==null?void 0:navigator.userAgentData)===null||of===void 0)&&of.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);var of;class PB{constructor(e,n,r){var i;this.Xm=[],this.Km=0,this.ho=0,this.__=0,this.Gm=0,this.Jm=0,this.Qm=null,this.tb=!1,this.Vp=new Xe,this.Op=new Xe,this.Rc=new Xe,this.ib=null,this.nb=null,this.Jd=e,this.cn=n,this.q_=r,this.Xd=document.createElement("div"),this.Xd.classList.add("tv-lightweight-charts"),this.Xd.style.overflow="hidden",this.Xd.style.direction="ltr",this.Xd.style.width="100%",this.Xd.style.height="100%",(i=this.Xd).style.userSelect="none",i.style.webkitUserSelect="none",i.style.msUserSelect="none",i.style.MozUserSelect="none",i.style.webkitTapHighlightColor="transparent",this.sb=document.createElement("table"),this.sb.setAttribute("cellspacing","0"),this.Xd.appendChild(this.sb),this.eb=this.rb.bind(this),lf(this.cn)&&this.hb(!0),this.$i=new hB(this.Vc.bind(this),this.cn,r),this.$t().Xc().l(this.lb.bind(this),this),this.ab=new NB(this,this.q_),this.sb.appendChild(this.ab.lp());const s=n.autoSize&&this.ob();let o=this.cn.width,l=this.cn.height;if(s||o===0||l===0){const a=e.getBoundingClientRect();o=o||a.width,l=l||a.height}this._b(o,l),this.ub(),e.appendChild(this.Xd),this.cb(),this.$i.St().ec().l(this.$i.Kl.bind(this.$i),this),this.$i.g_().l(this.$i.Kl.bind(this.$i),this)}$t(){return this.$i}W(){return this.cn}Yp(){return this.Xm}fb(){return this.ab}S(){this.hb(!1),this.Km!==0&&window.cancelAnimationFrame(this.Km),this.$i.Xc().p(this),this.$i.St().ec().p(this),this.$i.g_().p(this),this.$i.S();for(const e of this.Xm)this.sb.removeChild(e.lp()),e.lm().p(this),e.am().p(this),e.S();this.Xm=[],K(this.ab).S(),this.Xd.parentElement!==null&&this.Xd.parentElement.removeChild(this.Xd),this.Rc.S(),this.Vp.S(),this.Op.S(),this.pb()}_b(e,n,r=!1){if(this.ho===n&&this.__===e)return;const i=function(l){const a=Math.floor(l.width),c=Math.floor(l.height);return Fe({width:a-a%2,height:c-c%2})}(Fe({width:e,height:n}));this.ho=i.height,this.__=i.width;const s=this.ho+"px",o=this.__+"px";K(this.Xd).style.height=s,K(this.Xd).style.width=o,this.sb.style.height=s,this.sb.style.width=o,r?this.mb(ut.es(),performance.now()):this.$i.Kl()}vp(e){e===void 0&&(e=ut.es());for(let n=0;n<this.Xm.length;n++)this.Xm[n].vp(e.Hn(n).Fn);this.cn.timeScale.visible&&this.ab.vp(e.jn())}$h(e){const n=lf(this.cn);this.$i.$h(e);const r=lf(this.cn);r!==n&&this.hb(r),this.cb(),this.bb(e)}lm(){return this.Vp}am(){return this.Op}Xc(){return this.Rc}wb(){this.Qm!==null&&(this.mb(this.Qm,performance.now()),this.Qm=null);const e=this.gb(null),n=document.createElement("canvas");n.width=e.width,n.height=e.height;const r=K(n.getContext("2d"));return this.gb(r),n}Mb(e){return e==="left"&&!this.xb()||e==="right"&&!this.Sb()||this.Xm.length===0?0:K(e==="left"?this.Xm[0].wm():this.Xm[0].gm()).dp()}kb(){return this.cn.autoSize&&this.ib!==null}yb(){return this.Xd}Qp(e){this.nb=e,this.nb?this.yb().style.setProperty("cursor",e):this.yb().style.removeProperty("cursor")}Cb(){return this.nb}Tb(){return Pt(this.Xm[0]).um()}bb(e){(e.autoSize!==void 0||!this.ib||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.ib&&this.ob(),e.autoSize===!1&&this.ib!==null&&this.pb(),e.autoSize||e.width===void 0&&e.height===void 0||this._b(e.width||this.__,e.height||this.ho))}gb(e){let n=0,r=0;const i=this.Xm[0],s=(l,a)=>{let c=0;for(let u=0;u<this.Xm.length;u++){const h=this.Xm[u],f=K(l==="left"?h.wm():h.gm()),p=f.xp();e!==null&&f.Sp(e,a,c),c+=p.height}};this.xb()&&(s("left",0),n+=K(i.wm()).xp().width);for(let l=0;l<this.Xm.length;l++){const a=this.Xm[l],c=a.xp();e!==null&&a.Sp(e,n,r),r+=c.height}n+=i.xp().width,this.Sb()&&(s("right",n),n+=K(i.gm()).xp().width);const o=(l,a,c)=>{K(l==="left"?this.ab.Lm():this.ab.Em()).Sp(K(e),a,c)};if(this.cn.timeScale.visible){const l=this.ab.xp();if(e!==null){let a=0;this.xb()&&(o("left",a,r),a=K(i.wm()).xp().width),this.ab.Sp(e,a,r),a+=l.width,this.Sb()&&o("right",a,r)}r+=l.height}return Fe({width:n,height:r})}Pb(){let e=0,n=0,r=0;for(const g of this.Xm)this.xb()&&(n=Math.max(n,K(g.wm()).op(),this.cn.leftPriceScale.minimumWidth)),this.Sb()&&(r=Math.max(r,K(g.gm()).op(),this.cn.rightPriceScale.minimumWidth)),e+=g.M_();n=Gp(n),r=Gp(r);const i=this.__,s=this.ho,o=Math.max(i-n-r,0),l=this.cn.timeScale.visible;let a=l?Math.max(this.ab.Wm(),this.cn.timeScale.minimumHeight):0;var c;a=(c=a)+c%2;const u=0+a,h=s<u?0:s-u,f=h/e;let p=0;for(let g=0;g<this.Xm.length;++g){const m=this.Xm[g];m.qp(this.$i.qc()[g]);let w=0,v=0;v=g===this.Xm.length-1?h-p:Math.round(m.M_()*f),w=Math.max(v,2),p+=w,m.cp(Fe({width:o,height:w})),this.xb()&&m._m(n,"left"),this.Sb()&&m._m(r,"right"),m.fp()&&this.$i.Kc(m.fp(),w)}this.ab.Fm(Fe({width:l?o:0,height:a}),l?n:0,l?r:0),this.$i.S_(o),this.Gm!==n&&(this.Gm=n),this.Jm!==r&&(this.Jm=r)}hb(e){e?this.Xd.addEventListener("wheel",this.eb,{passive:!1}):this.Xd.removeEventListener("wheel",this.eb)}Rb(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return TB?1/window.devicePixelRatio:1}rb(e){if(!(e.deltaX!==0&&this.cn.handleScroll.mouseWheel||e.deltaY!==0&&this.cn.handleScale.mouseWheel))return;const n=this.Rb(e),r=n*e.deltaX/100,i=-n*e.deltaY/100;if(e.cancelable&&e.preventDefault(),i!==0&&this.cn.handleScale.mouseWheel){const s=Math.sign(i)*Math.min(1,Math.abs(i)),o=e.clientX-this.Xd.getBoundingClientRect().left;this.$t().Qc(o,s)}r!==0&&this.cn.handleScroll.mouseWheel&&this.$t().td(-80*r)}mb(e,n){var r;const i=e.jn();i===3&&this.Db(),i!==3&&i!==2||(this.Vb(e),this.Ob(e,n),this.ab.bt(),this.Xm.forEach(s=>{s.Xp()}),((r=this.Qm)===null||r===void 0?void 0:r.jn())===3&&(this.Qm.ts(e),this.Db(),this.Vb(this.Qm),this.Ob(this.Qm,n),e=this.Qm,this.Qm=null)),this.vp(e)}Ob(e,n){for(const r of e.Qn())this.ns(r,n)}Vb(e){const n=this.$i.qc();for(let r=0;r<n.length;r++)e.Hn(r).Wn&&n[r].N_()}ns(e,n){const r=this.$i.St();switch(e.qn){case 0:r.hc();break;case 1:r.lc(e.Vt);break;case 2:r.Gn(e.Vt);break;case 3:r.Jn(e.Vt);break;case 4:r.qu();break;case 5:e.Vt.Qu(n)||r.Jn(e.Vt.tc(n))}}Vc(e){this.Qm!==null?this.Qm.ts(e):this.Qm=e,this.tb||(this.tb=!0,this.Km=window.requestAnimationFrame(n=>{if(this.tb=!1,this.Km=0,this.Qm!==null){const r=this.Qm;this.Qm=null,this.mb(r,n);for(const i of r.Qn())if(i.qn===5&&!i.Vt.Qu(n)){this.$t().Zn(i.Vt);break}}}))}Db(){this.ub()}ub(){const e=this.$i.qc(),n=e.length,r=this.Xm.length;for(let i=n;i<r;i++){const s=Pt(this.Xm.pop());this.sb.removeChild(s.lp()),s.lm().p(this),s.am().p(this),s.S()}for(let i=r;i<n;i++){const s=new av(this,e[i]);s.lm().l(this.Bb.bind(this),this),s.am().l(this.Ab.bind(this),this),this.Xm.push(s),this.sb.insertBefore(s.lp(),this.ab.lp())}for(let i=0;i<n;i++){const s=e[i],o=this.Xm[i];o.fp()!==s?o.qp(s):o.Up()}this.cb(),this.Pb()}Ib(e,n,r){var i;const s=new Map;e!==null&&this.$i.wt().forEach(u=>{const h=u.In().ll(e);h!==null&&s.set(u,h)});let o;if(e!==null){const u=(i=this.$i.St().Ui(e))===null||i===void 0?void 0:i.originalTime;u!==void 0&&(o=u)}const l=this.$t().Wc(),a=l!==null&&l.Hc instanceof sv?l.Hc:void 0,c=l!==null&&l.Iv!==void 0?l.Iv.gr:void 0;return{zb:o,ee:e??void 0,Lb:n??void 0,Eb:a,Nb:s,Fb:c,Wb:r??void 0}}Bb(e,n,r){this.Vp.m(()=>this.Ib(e,n,r))}Ab(e,n,r){this.Op.m(()=>this.Ib(e,n,r))}lb(e,n,r){this.Rc.m(()=>this.Ib(e,n,r))}cb(){const e=this.cn.timeScale.visible?"":"none";this.ab.lp().style.display=e}xb(){return this.Xm[0].fp().R_().W().visible}Sb(){return this.Xm[0].fp().D_().W().visible}ob(){return"ResizeObserver"in window&&(this.ib=new ResizeObserver(e=>{const n=e.find(r=>r.target===this.Jd);n&&this._b(n.contentRect.width,n.contentRect.height)}),this.ib.observe(this.Jd,{box:"border-box"}),!0)}pb(){this.ib!==null&&this.ib.disconnect(),this.ib=null}}function lf(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function jB(t){return function(e){return e.open!==void 0}(t)||function(e){return e.value!==void 0}(t)}function pN(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function F0(t,e,n,r){const i=n.value,s={ee:e,ot:t,Vt:[i,i,i,i],zb:r};return n.color!==void 0&&(s.V=n.color),s}function AB(t,e,n,r){const i=n.value,s={ee:e,ot:t,Vt:[i,i,i,i],zb:r};return n.lineColor!==void 0&&(s.lt=n.lineColor),n.topColor!==void 0&&(s.Ps=n.topColor),n.bottomColor!==void 0&&(s.Rs=n.bottomColor),s}function MB(t,e,n,r){const i=n.value,s={ee:e,ot:t,Vt:[i,i,i,i],zb:r};return n.topLineColor!==void 0&&(s.Re=n.topLineColor),n.bottomLineColor!==void 0&&(s.De=n.bottomLineColor),n.topFillColor1!==void 0&&(s.ke=n.topFillColor1),n.topFillColor2!==void 0&&(s.ye=n.topFillColor2),n.bottomFillColor1!==void 0&&(s.Ce=n.bottomFillColor1),n.bottomFillColor2!==void 0&&(s.Te=n.bottomFillColor2),s}function RB(t,e,n,r){const i={ee:e,ot:t,Vt:[n.open,n.high,n.low,n.close],zb:r};return n.color!==void 0&&(i.V=n.color),i}function IB(t,e,n,r){const i={ee:e,ot:t,Vt:[n.open,n.high,n.low,n.close],zb:r};return n.color!==void 0&&(i.V=n.color),n.borderColor!==void 0&&(i.Ot=n.borderColor),n.wickColor!==void 0&&(i.Xh=n.wickColor),i}function OB(t,e,n,r,i){const s=Pt(i)(n),o=Math.max(...s),l=Math.min(...s),a=s[s.length-1],c=[a,o,l,a],u=n,{time:h,color:f}=u;return{ee:e,ot:t,Vt:c,zb:r,$e:pN(u,["time","color"]),V:f}}function fc(t){return t.Vt!==void 0}function B0(t,e){return e.customValues!==void 0&&(t.jb=e.customValues),t}function Ri(t){return(e,n,r,i,s,o)=>function(l,a){return a?a(l):(c=l).open===void 0&&c.value===void 0;var c}(r,o)?B0({ot:e,ee:n,zb:i},r):B0(t(e,n,r,i,s),r)}function V0(t){return{Candlestick:Ri(IB),Bar:Ri(RB),Area:Ri(AB),Baseline:Ri(MB),Histogram:Ri(F0),Line:Ri(F0),Custom:Ri(OB)}[t]}function U0(t){return{ee:0,Hb:new Map,la:t}}function W0(t,e){if(t!==void 0&&t.length!==0)return{$b:e.key(t[0].ot),Ub:e.key(t[t.length-1].ot)}}function H0(t){let e;return t.forEach(n=>{e===void 0&&(e=n.zb)}),Pt(e)}class LB{constructor(e){this.qb=new Map,this.Yb=new Map,this.Zb=new Map,this.Xb=[],this.q_=e}S(){this.qb.clear(),this.Yb.clear(),this.Zb.clear(),this.Xb=[]}Kb(e,n){let r=this.qb.size!==0,i=!1;const s=this.Yb.get(e);if(s!==void 0)if(this.Yb.size===1)r=!1,i=!0,this.qb.clear();else for(const a of this.Xb)a.pointData.Hb.delete(e)&&(i=!0);let o=[];if(n.length!==0){const a=n.map(p=>p.time),c=this.q_.createConverterToInternalObj(n),u=V0(e.Qh()),h=e.Ca(),f=e.Ta();o=n.map((p,g)=>{const m=c(p.time),w=this.q_.key(m);let v=this.qb.get(w);v===void 0&&(v=U0(m),this.qb.set(w,v),i=!0);const x=u(m,v.ee,p,a[g],h,f);return v.Hb.set(e,x),x})}r&&this.Gb(),this.Jb(e,o);let l=-1;if(i){const a=[];this.qb.forEach(c=>{a.push({timeWeight:0,time:c.la,pointData:c,originalTime:H0(c.Hb)})}),a.sort((c,u)=>this.q_.key(c.time)-this.q_.key(u.time)),l=this.Qb(a)}return this.tw(e,l,function(a,c,u){const h=W0(a,u),f=W0(c,u);if(h!==void 0&&f!==void 0)return{ta:h.Ub>=f.Ub&&h.$b>=f.$b}}(this.Yb.get(e),s,this.q_))}vd(e){return this.Kb(e,[])}iw(e,n){const r=n;(function(m){m.zb===void 0&&(m.zb=m.time)})(r),this.q_.preprocessData(n);const i=this.q_.createConverterToInternalObj([n])(n.time),s=this.Zb.get(e);if(s!==void 0&&this.q_.key(i)<this.q_.key(s))throw new Error(`Cannot update oldest data, last time=${s}, new time=${i}`);let o=this.qb.get(this.q_.key(i));const l=o===void 0;o===void 0&&(o=U0(i),this.qb.set(this.q_.key(i),o));const a=V0(e.Qh()),c=e.Ca(),u=e.Ta(),h=a(i,o.ee,n,r.zb,c,u);o.Hb.set(e,h),this.nw(e,h);const f={ta:fc(h)};if(!l)return this.tw(e,-1,f);const p={timeWeight:0,time:o.la,pointData:o,originalTime:H0(o.Hb)},g=Pa(this.Xb,this.q_.key(p.time),(m,w)=>this.q_.key(m.time)<w);this.Xb.splice(g,0,p);for(let m=g;m<this.Xb.length;++m)af(this.Xb[m].pointData,m);return this.q_.fillWeightsForPoints(this.Xb,g),this.tw(e,g,f)}nw(e,n){let r=this.Yb.get(e);r===void 0&&(r=[],this.Yb.set(e,r));const i=r.length!==0?r[r.length-1]:null;i===null||this.q_.key(n.ot)>this.q_.key(i.ot)?fc(n)&&r.push(n):fc(n)?r[r.length-1]=n:r.splice(-1,1),this.Zb.set(e,n.ot)}Jb(e,n){n.length!==0?(this.Yb.set(e,n.filter(fc)),this.Zb.set(e,n[n.length-1].ot)):(this.Yb.delete(e),this.Zb.delete(e))}Gb(){for(const e of this.Xb)e.pointData.Hb.size===0&&this.qb.delete(this.q_.key(e.time))}Qb(e){let n=-1;for(let r=0;r<this.Xb.length&&r<e.length;++r){const i=this.Xb[r],s=e[r];if(this.q_.key(i.time)!==this.q_.key(s.time)){n=r;break}s.timeWeight=i.timeWeight,af(s.pointData,r)}if(n===-1&&this.Xb.length!==e.length&&(n=Math.min(this.Xb.length,e.length)),n===-1)return-1;for(let r=n;r<e.length;++r)af(e[r].pointData,r);return this.q_.fillWeightsForPoints(e,n),this.Xb=e,n}sw(){if(this.Yb.size===0)return null;let e=0;return this.Yb.forEach(n=>{n.length!==0&&(e=Math.max(e,n[n.length-1].ee))}),e}tw(e,n,r){const i={ew:new Map,St:{Eu:this.sw()}};if(n!==-1)this.Yb.forEach((s,o)=>{i.ew.set(o,{$e:s,rw:o===e?r:void 0})}),this.Yb.has(e)||i.ew.set(e,{$e:[],rw:r}),i.St.hw=this.Xb,i.St.lw=n;else{const s=this.Yb.get(e);i.ew.set(e,{$e:s||[],rw:r})}return i}}function af(t,e){t.ee=e,t.Hb.forEach(n=>{n.ee=e})}function uv(t){const e={value:t.Vt[3],time:t.zb};return t.jb!==void 0&&(e.customValues=t.jb),e}function q0(t){const e=uv(t);return t.V!==void 0&&(e.color=t.V),e}function zB(t){const e=uv(t);return t.lt!==void 0&&(e.lineColor=t.lt),t.Ps!==void 0&&(e.topColor=t.Ps),t.Rs!==void 0&&(e.bottomColor=t.Rs),e}function DB(t){const e=uv(t);return t.Re!==void 0&&(e.topLineColor=t.Re),t.De!==void 0&&(e.bottomLineColor=t.De),t.ke!==void 0&&(e.topFillColor1=t.ke),t.ye!==void 0&&(e.topFillColor2=t.ye),t.Ce!==void 0&&(e.bottomFillColor1=t.Ce),t.Te!==void 0&&(e.bottomFillColor2=t.Te),e}function mN(t){const e={open:t.Vt[0],high:t.Vt[1],low:t.Vt[2],close:t.Vt[3],time:t.zb};return t.jb!==void 0&&(e.customValues=t.jb),e}function $B(t){const e=mN(t);return t.V!==void 0&&(e.color=t.V),e}function FB(t){const e=mN(t),{V:n,Ot:r,Xh:i}=t;return n!==void 0&&(e.color=n),r!==void 0&&(e.borderColor=r),i!==void 0&&(e.wickColor=i),e}function Qp(t){return{Area:zB,Line:q0,Baseline:DB,Histogram:q0,Bar:$B,Candlestick:FB,Custom:BB}[t]}function BB(t){const e=t.zb;return Object.assign(Object.assign({},t.$e),{time:e})}const VB={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},UB={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},WB={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Jg,attributionLogo:!0},cf={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},HB={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0},qB={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:Jg,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function K0(){return{width:0,height:0,autoSize:!1,layout:WB,crosshair:VB,grid:UB,overlayPriceScales:Object.assign({},cf),leftPriceScale:Object.assign(Object.assign({},cf),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},cf),{visible:!0}),timeScale:HB,watermark:qB,localization:{locale:So?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class KB{constructor(e,n){this.aw=e,this.ow=n}applyOptions(e){this.aw.$t().$c(this.ow,e)}options(){return this.Li().W()}width(){return Bd(this.ow)?this.aw.Mb(this.ow):0}Li(){return K(this.aw.$t().Uc(this.ow)).Dt}}function Y0(t,e,n){const r=pN(t,["time","originalTime"]),i=Object.assign({time:e},r);return n!==void 0&&(i.originalTime=n),i}const YB={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class GB{constructor(e){this.Nh=e}applyOptions(e){this.Nh.$h(e)}options(){return this.Nh.W()}_w(){return this.Nh}}class ZB{constructor(e,n,r,i,s){this.uw=new Xe,this.Es=e,this.cw=n,this.dw=r,this.q_=s,this.fw=i}S(){this.uw.S()}priceFormatter(){return this.Es.ba()}priceToCoordinate(e){const n=this.Es.Ct();return n===null?null:this.Es.Dt().Rt(e,n.Vt)}coordinateToPrice(e){const n=this.Es.Ct();return n===null?null:this.Es.Dt().pn(e,n.Vt)}barsInLogicalRange(e){if(e===null)return null;const n=new ro(new Sl(e.from,e.to)).lu(),r=this.Es.In();if(r.Ni())return null;const i=r.ll(n.Os(),1),s=r.ll(n.ui(),-1),o=K(r.el()),l=K(r.An());if(i!==null&&s!==null&&i.ee>s.ee)return{barsBefore:e.from-o,barsAfter:l-e.to};const a={barsBefore:i===null||i.ee===o?e.from-o:i.ee-o,barsAfter:s===null||s.ee===l?l-e.to:l-s.ee};return i!==null&&s!==null&&(a.from=i.zb,a.to=s.zb),a}setData(e){this.q_,this.Es.Qh(),this.cw.pw(this.Es,e),this.mw("full")}update(e){this.Es.Qh(),this.cw.bw(this.Es,e),this.mw("update")}dataByIndex(e,n){const r=this.Es.In().ll(e,n);return r===null?null:Qp(this.seriesType())(r)}data(){const e=Qp(this.seriesType());return this.Es.In().ne().map(n=>e(n))}subscribeDataChanged(e){this.uw.l(e)}unsubscribeDataChanged(e){this.uw.v(e)}setMarkers(e){this.q_;const n=e.map(r=>Y0(r,this.q_.convertHorzItemToInternal(r.time),r.time));this.Es.na(n)}markers(){return this.Es.sa().map(e=>Y0(e,e.originalTime,void 0))}applyOptions(e){this.Es.$h(e)}options(){return Cr(this.Es.W())}priceScale(){return this.dw.priceScale(this.Es.Dt().Pa())}createPriceLine(e){const n=Ln(Cr(YB),e),r=this.Es.ea(n);return new GB(r)}removePriceLine(e){this.Es.ra(e._w())}seriesType(){return this.Es.Qh()}attachPrimitive(e){this.Es.ka(e),e.attached&&e.attached({chart:this.fw,series:this,requestUpdate:()=>this.Es.$t().Kl()})}detachPrimitive(e){this.Es.ya(e),e.detached&&e.detached()}mw(e){this.uw.M()&&this.uw.m(e)}}class XB{constructor(e,n,r){this.ww=new Xe,this.mu=new Xe,this.Om=new Xe,this.$i=e,this.yl=e.St(),this.ab=n,this.yl.nc().l(this.gw.bind(this)),this.yl.sc().l(this.Mw.bind(this)),this.ab.Nm().l(this.xw.bind(this)),this.q_=r}S(){this.yl.nc().p(this),this.yl.sc().p(this),this.ab.Nm().p(this),this.ww.S(),this.mu.S(),this.Om.S()}scrollPosition(){return this.yl.Hu()}scrollToPosition(e,n){n?this.yl.Ju(e,1e3):this.$i.Jn(e)}scrollToRealTime(){this.yl.Gu()}getVisibleRange(){const e=this.yl.Vu();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const n={from:this.q_.convertHorzItemToInternal(e.from),to:this.q_.convertHorzItemToInternal(e.to)},r=this.yl.Iu(n);this.$i.pd(r)}getVisibleLogicalRange(){const e=this.yl.Du();return e===null?null:{from:e.Os(),to:e.ui()}}setVisibleLogicalRange(e){Si(e.from<=e.to,"The from index cannot be after the to index."),this.$i.pd(e)}resetTimeScale(){this.$i.Kn()}fitContent(){this.$i.hc()}logicalToCoordinate(e){const n=this.$i.St();return n.Ni()?null:n.It(e)}coordinateToLogical(e){return this.yl.Ni()?null:this.yl.Nu(e)}timeToCoordinate(e){const n=this.q_.convertHorzItemToInternal(e),r=this.yl.Va(n,!1);return r===null?null:this.yl.It(r)}coordinateToTime(e){const n=this.$i.St(),r=n.Nu(e),i=n.Ui(r);return i===null?null:i.originalTime}width(){return this.ab.um().width}height(){return this.ab.um().height}subscribeVisibleTimeRangeChange(e){this.ww.l(e)}unsubscribeVisibleTimeRangeChange(e){this.ww.v(e)}subscribeVisibleLogicalRangeChange(e){this.mu.l(e)}unsubscribeVisibleLogicalRangeChange(e){this.mu.v(e)}subscribeSizeChange(e){this.Om.l(e)}unsubscribeSizeChange(e){this.Om.v(e)}applyOptions(e){this.yl.$h(e)}options(){return Object.assign(Object.assign({},Cr(this.yl.W())),{barSpacing:this.yl.le()})}gw(){this.ww.M()&&this.ww.m(this.getVisibleRange())}Mw(){this.mu.M()&&this.mu.m(this.getVisibleLogicalRange())}xw(e){this.Om.m(e.width,e.height)}}function QB(t){if(t===void 0||t.type==="custom")return;const e=t;e.minMove!==void 0&&e.precision===void 0&&(e.precision=function(n){if(n>=1)return 0;let r=0;for(;r<8;r++){const i=Math.round(n);if(Math.abs(i-n)<1e-8)return r;n*=10}return r}(e.minMove))}function G0(t){return function(e){if(ic(e.handleScale)){const r=e.handleScale;e.handleScale={axisDoubleClickReset:{time:r,price:r},axisPressedMouseMove:{time:r,price:r},mouseWheel:r,pinch:r}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:r,axisDoubleClickReset:i}=e.handleScale;ic(r)&&(e.handleScale.axisPressedMouseMove={time:r,price:r}),ic(i)&&(e.handleScale.axisDoubleClickReset={time:i,price:i})}const n=e.handleScroll;ic(n)&&(e.handleScroll={horzTouchDrag:n,vertTouchDrag:n,mouseWheel:n,pressedMouseMove:n})}(t),t}class JB{constructor(e,n,r){this.Sw=new Map,this.kw=new Map,this.yw=new Xe,this.Cw=new Xe,this.Tw=new Xe,this.Pw=new LB(n);const i=r===void 0?Cr(K0()):Ln(Cr(K0()),G0(r));this.q_=n,this.aw=new PB(e,i,n),this.aw.lm().l(o=>{this.yw.M()&&this.yw.m(this.Rw(o()))},this),this.aw.am().l(o=>{this.Cw.M()&&this.Cw.m(this.Rw(o()))},this),this.aw.Xc().l(o=>{this.Tw.M()&&this.Tw.m(this.Rw(o()))},this);const s=this.aw.$t();this.Dw=new XB(s,this.aw.fb(),this.q_)}remove(){this.aw.lm().p(this),this.aw.am().p(this),this.aw.Xc().p(this),this.Dw.S(),this.aw.S(),this.Sw.clear(),this.kw.clear(),this.yw.S(),this.Cw.S(),this.Tw.S(),this.Pw.S()}resize(e,n,r){this.autoSizeActive()||this.aw._b(e,n,r)}addCustomSeries(e,n){const r=Bs(e),i=Object.assign(Object.assign({},W_),r.defaultOptions());return this.Vw("Custom",i,n,r)}addAreaSeries(e){return this.Vw("Area",LF,e)}addBaselineSeries(e){return this.Vw("Baseline",zF,e)}addBarSeries(e){return this.Vw("Bar",IF,e)}addCandlestickSeries(e={}){return function(n){n.borderColor!==void 0&&(n.borderUpColor=n.borderColor,n.borderDownColor=n.borderColor),n.wickColor!==void 0&&(n.wickUpColor=n.wickColor,n.wickDownColor=n.wickColor)}(e),this.Vw("Candlestick",RF,e)}addHistogramSeries(e){return this.Vw("Histogram",DF,e)}addLineSeries(e){return this.Vw("Line",OF,e)}removeSeries(e){const n=Pt(this.Sw.get(e)),r=this.Pw.vd(n);this.aw.$t().vd(n),this.Ow(r),this.Sw.delete(e),this.kw.delete(n)}pw(e,n){this.Ow(this.Pw.Kb(e,n))}bw(e,n){this.Ow(this.Pw.iw(e,n))}subscribeClick(e){this.yw.l(e)}unsubscribeClick(e){this.yw.v(e)}subscribeCrosshairMove(e){this.Tw.l(e)}unsubscribeCrosshairMove(e){this.Tw.v(e)}subscribeDblClick(e){this.Cw.l(e)}unsubscribeDblClick(e){this.Cw.v(e)}priceScale(e){return new KB(this.aw,e)}timeScale(){return this.Dw}applyOptions(e){this.aw.$h(G0(e))}options(){return this.aw.W()}takeScreenshot(){return this.aw.wb()}autoSizeActive(){return this.aw.kb()}chartElement(){return this.aw.yb()}paneSize(){const e=this.aw.Tb();return{height:e.height,width:e.width}}setCrosshairPosition(e,n,r){const i=this.Sw.get(r);if(i===void 0)return;const s=this.aw.$t().dr(i);s!==null&&this.aw.$t().ad(e,n,s)}clearCrosshairPosition(){this.aw.$t().od(!0)}Vw(e,n,r={},i){QB(r.priceFormat);const s=Ln(Cr(H_),Cr(n),r),o=this.aw.$t().dd(e,s,i),l=new ZB(o,this,this,this,this.q_);return this.Sw.set(l,o),this.kw.set(o,l),l}Ow(e){const n=this.aw.$t();n._d(e.St.Eu,e.St.hw,e.St.lw),e.ew.forEach((r,i)=>i.J(r.$e,r.rw)),n.Wu()}Bw(e){return Pt(this.kw.get(e))}Rw(e){const n=new Map;e.Nb.forEach((i,s)=>{const o=s.Qh(),l=Qp(o)(i);if(o!=="Custom")Si(jB(l));else{const a=s.Ta();Si(!a||a(l)===!1)}n.set(this.Bw(s),l)});const r=e.Eb!==void 0&&this.kw.has(e.Eb)?this.Bw(e.Eb):void 0;return{time:e.zb,logical:e.ee,point:e.Lb,hoveredSeries:r,hoveredObjectId:e.Fb,seriesData:n,sourceEvent:e.Wb}}}function e5(t,e,n){let r;if(Ta(t)){const s=document.getElementById(t);Si(s!==null,`Cannot find element in DOM with id=${t}`),r=s}else r=t;const i=new JB(r,e,n);return e.setOptions(i.options()),i}function t5(t,e){return e5(t,new I0,I0.Id(e))}Object.assign(Object.assign({},H_),W_);const ks={dark:{background:"#01091A",text:"#F9FAFC",grid:"#1C2330",border:"#1C2330",success:"#1F734C",destructive:"#A53232"},light:{background:"#FFFFFF",text:"#01091A",grid:"#E4E7EB",border:"#E4E7EB",success:"#299966",destructive:"#EB4444"}},n5=50,r5=30,Z0=t=>{const e=new Date(t*1e3);try{return e.toLocaleTimeString("ru-RU",{timeZone:"Europe/Moscow",hour:"2-digit",minute:"2-digit"})}catch(n){console.error("Error formatting time with timeZone:",n);const r=3*60*60*1e3,i=new Date(e.getTime()+r),s=i.getUTCHours().toString().padStart(2,"0"),o=i.getUTCMinutes().toString().padStart(2,"0");return`${s}:${o}`}},i5=t=>new Date(t*1e3).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}),gN=({data:t,chartType:e,period:n,className:r="h-full w-full",chartOptions:i,seriesOptions:s})=>{const o=y.useRef(null),l=y.useRef(null),a=y.useRef(null),c=qi(f=>f.preference),u=f=>{const p=ks[f];return{layout:{background:{type:Kp.Solid,color:p.background},textColor:p.text,attributionLogo:!1,fontSize:11},grid:{vertLines:{color:p.grid},horzLines:{color:p.grid}},timeScale:{borderColor:p.border},rightPriceScale:{borderColor:p.border},crosshair:{mode:Hp.Normal,vertLine:{width:1,color:f==="dark"?"rgba(220, 220, 220, 0.4)":"rgba(50, 50, 50, 0.4)",labelVisible:!0,labelBackgroundColor:f==="dark"?"#3B4150":"#E0E3EB"},horzLine:{width:1,color:f==="dark"?"rgba(220, 220, 220, 0.4)":"rgba(50, 50, 50, 0.4)",labelVisible:!0,labelBackgroundColor:f==="dark"?"#3B4150":"#E0E3EB"}}}},h=f=>{const p=ks[f],g={lastValueVisible:!1,priceLineVisible:!1,priceFormat:{type:"price",precision:2,minMove:.01},priceLineSource:0,...e==="line"&&{crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:f==="dark"?p.background:p.border}};if(e==="candle")return{...g,upColor:p.success,downColor:p.destructive,borderVisible:!1,wickVisible:!0,wickUpColor:p.success,wickDownColor:p.destructive};{const m=p.destructive;return{...g,color:m,lineWidth:2,crosshairMarkerBackgroundColor:m}}};return y.useEffect(()=>{if(!o.current)return;const f=()=>{l.current&&o.current&&l.current.resize(o.current.clientWidth,o.current.clientHeight)},p=6;let g;const m=qi.getState().preference;m==="system"?g=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":g=m;const w=u(g),v={width:o.current.clientWidth,height:o.current.clientHeight,localization:{locale:"ru-RU",priceFormatter:b=>xr(b*100,"₽",!1),timeFormatter:b=>n==="1D"?Z0(b):i5(b)},rightPriceScale:{scaleMargins:{top:.1,bottom:.1},borderColor:ks[g].border,visible:!0,autoScale:!0,invertScale:!1},timeScale:{rightOffset:0,barSpacing:p,fixLeftEdge:!0,fixRightEdge:!0,borderColor:ks[g].border,timeVisible:!0,secondsVisible:!1,tickMarkFormatter:(b,S)=>{const k=new Date(b*1e3),C="ru-RU";switch(S){case Li.Year:return k.toLocaleDateString(C,{year:"numeric"});case Li.Month:return k.toLocaleDateString(C,{month:"short",year:"numeric"});case Li.DayOfMonth:return k.toLocaleDateString(C,{day:"2-digit",month:"2-digit"});case Li.Time:case Li.TimeWithSeconds:return Z0(b);default:return k.toLocaleDateString(C)}}},handleScroll:{vertTouchDrag:!1,mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0},handleScale:{mouseWheel:!0,pinch:!0,axisPressedMouseMove:!0,axisDoubleClickReset:!0},watermark:{visible:!1}},x={...v,...w,...i||{},localization:{...v.localization||{},...w.localization||{},...(i==null?void 0:i.localization)||{}},timeScale:{...v.timeScale||{},...w.timeScale||{},...(i==null?void 0:i.timeScale)||{}},rightPriceScale:{...v.rightPriceScale||{},...w.rightPriceScale||{},...(i==null?void 0:i.rightPriceScale)||{}},crosshair:{...v.crosshair||{},...w.crosshair||{},...(i==null?void 0:i.crosshair)||{}}};return l.current=t5(o.current,x),window.addEventListener("resize",f),()=>{window.removeEventListener("resize",f),l.current&&(l.current.remove(),l.current=null)}},[i,n]),y.useLayoutEffect(()=>{if(!l.current)return;let f;c==="system"?f=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":f=c;const p=u(f);if(p.timeScale={...p.timeScale||{},borderColor:ks[f].border},p.rightPriceScale={...p.rightPriceScale||{},borderColor:ks[f].border},l.current.applyOptions(p),a.current){const g=h(f);a.current.applyOptions(g)}},[c,e,t]),y.useEffect(()=>{if(!l.current||!t)return;a.current&&(l.current.removeSeries(a.current),a.current=null);let f;const p=qi.getState().preference;p==="system"?f=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":f=p;const w={...h(f),...s||{}};let v=null;if(e==="candle"){v=l.current.addCandlestickSeries(w);const x=t.map(b=>({time:b.time,open:b.open,high:b.high,low:b.low,close:b.close}));v.setData(x)}else{v=l.current.addLineSeries(w);const x=t.map(b=>({time:b.time,value:b.close}));v.setData(x)}if(a.current=v,t.length>0){const x=e==="line"?n5:r5,b=Math.max(0,t.length-x),S=t.length-1;l.current.timeScale().setVisibleLogicalRange({from:b,to:S}),console.log(`[LightweightChart] Set initial visible range: ${b} to ${S}`),l.current.timeScale().applyOptions({fixLeftEdge:!0,fixRightEdge:!0})}else l.current.timeScale().applyOptions({fixLeftEdge:!1,fixRightEdge:!1})},[t,e,c,s]),d.jsx("div",{ref:o,className:r})};var dv="Tabs",[s5,Z9]=Mt(dv,[zd]),vN=zd(),[o5,hv]=s5(dv),yN=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:s,orientation:o="horizontal",dir:l,activationMode:a="automatic",...c}=t,u=Ea(l),[h,f]=gn({prop:r,onChange:i,defaultProp:s});return d.jsx(o5,{scope:n,baseId:Jn(),value:h,onValueChange:f,orientation:o,dir:u,activationMode:a,children:d.jsx(le.div,{dir:u,"data-orientation":o,...c,ref:e})})});yN.displayName=dv;var xN="TabsList",wN=y.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,s=hv(xN,n),o=vN(n);return d.jsx(u_,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:r,children:d.jsx(le.div,{role:"tablist","aria-orientation":s.orientation,...i,ref:e})})});wN.displayName=xN;var bN="TabsTrigger",SN=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...s}=t,o=hv(bN,n),l=vN(n),a=EN(o.baseId,r),c=_N(o.baseId,r),u=r===o.value;return d.jsx(d_,{asChild:!0,...l,focusable:!i,active:u,children:d.jsx(le.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:a,...s,ref:e,onMouseDown:ae(t.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:ae(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:ae(t.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!i&&h&&o.onValueChange(r)})})})});SN.displayName=bN;var kN="TabsContent",CN=y.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:s,...o}=t,l=hv(kN,n),a=EN(l.baseId,r),c=_N(l.baseId,r),u=r===l.value,h=y.useRef(u);return y.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),d.jsx(Dr,{present:i||u,children:({present:f})=>d.jsx(le.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":a,hidden:!f,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:f&&s})})});CN.displayName=kN;function EN(t,e){return`${t}-trigger-${e}`}function _N(t,e){return`${t}-content-${e}`}var l5=yN,NN=wN,TN=SN,PN=CN;const fv=l5,Wd=y.forwardRef(({className:t,...e},n)=>d.jsx(NN,{ref:n,className:H("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Wd.displayName=NN.displayName;const Ot=y.forwardRef(({className:t,...e},n)=>d.jsx(TN,{ref:n,className:H("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Ot.displayName=TN.displayName;const a5=y.forwardRef(({className:t,...e},n)=>d.jsx(PN,{ref:n,className:H("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));a5.displayName=PN.displayName;const c5=()=>{const{id:t}=ms(),e=Number(t),n=ft(),{accounts:r,isLoading:i,error:s}=nr(),[o,l]=y.useState(null),[a,c]=y.useState(!0),[u,h]=y.useState(null),{tg:f}=Dn(),[p,g]=y.useState("1M"),[m,w]=y.useState("line"),[v,x]=y.useState([]),[b,S]=y.useState(!0),[k,C]=y.useState(null),_=y.useMemo(()=>p==="1D"?"line":m,[p,m]),P=y.useMemo(()=>o?[o.ticker]:[],[o]),{prices:O,isLoading:A,error:T}=md(P),R=y.useMemo(()=>o?O.get(o.ticker):null,[o,O]),$=y.useMemo(()=>R?Math.round(R.price*100):null,[R]),M=async()=>{if(!e||isNaN(e)){c(!1),h("Неверный ID актива.");return}c(!0),h(null),l(null);try{const z=await ck(e);if(!z||typeof z.isSuccess!="boolean")throw new Error("Некорректный ответ от getAssetById.");if(z.isSuccess&&z.resultObject)l(z.resultObject),h(null);else{const j=z.errorMessage||`Актив ${e} не найден.`;h(j),l(null)}}catch(z){h(z.message||"Ошибка загрузки"),l(null)}finally{c(!1)}};y.useEffect(()=>{M()},[e]),y.useEffect(()=>{let z=!0;return(async()=>{if(!(o!=null&&o.id)){x([]),S(!1),C(null);return}S(!0),C(null),console.log(`[AssetPage] Fetching chart history for asset ${o.id}, period ${p}`);try{const D=await dk(o.id,p);z&&(D.isSuccess&&Array.isArray(D.resultObject)?x(D.resultObject):(C(D.errorMessage||`Не удалось загрузить историю для ${p}.`),x([])))}catch(D){z&&(C(D.message||"Ошибка загрузки истории цен."),x([]))}finally{z&&S(!1)}})(),()=>{z=!1}},[o==null?void 0:o.id,p]),y.useEffect(()=>{const z=()=>n("/market");return f&&(f.BackButton.show(),f.onEvent("backButtonClicked",z)),()=>{f&&(f.BackButton.hide(),f.offEvent("backButtonClicked",z))}},[f,n]);const I=y.useMemo(()=>(r==null?void 0:r.filter(z=>!!(z!=null&&z.brokerAccount)&&!z.brokerAccount.isDeleted))??[],[r]);if(a||i)return d.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-8rem)]",children:d.jsx(Ne,{size:"lg"})});if(s)return d.jsxs("div",{className:"p-4 text-center",children:[" ",d.jsx(xt,{message:`Ошибка загрузки данных портфеля: ${s}`})," ",d.jsxs(ce,{variant:"outline",onClick:()=>n(-1),className:"mt-4",children:[d.jsx(Et,{className:"mr-2 h-4 w-4"})," Назад"]})," "]});if(!o||u){const z=u||`Актив с ID ${e} не найден или произошла ошибка.`;return d.jsxs("div",{className:"p-4 text-center",children:[" ",d.jsx(xt,{message:z})," ",d.jsxs(ce,{variant:"outline",onClick:()=>n(-1),className:"mt-4",children:[d.jsx(Et,{className:"mr-2 h-4 w-4"})," Назад"]})," "]})}const L=z=>{w(z)};return d.jsxs("div",{className:"p-4 space-y-6 pb-32",children:[d.jsxs("div",{className:"relative flex items-center justify-between h-12",children:[d.jsx(ce,{variant:"ghost",size:"icon",className:"text-foreground/80 h-9 w-9 z-10",onClick:()=>n("/market"),children:d.jsx(Et,{className:"h-5 w-5"})}),d.jsxs("div",{className:"flex flex-col items-center text-center flex-grow mx-2 min-w-0",children:[d.jsxs("h1",{className:"text-lg font-semibold truncate leading-tight",title:o.title||o.shortName||o.ticker,children:[" ",vg(o)," "]}),d.jsx("span",{className:"text-sm text-muted-foreground uppercase mt-0.5",children:o.ticker}),d.jsxs("div",{className:"text-xs mt-1",children:[" ",A&&$===null?d.jsx(Ne,{size:"sm"}):$!==null?d.jsx(Ut,{value:$,className:"text-foreground"}):T?d.jsx("span",{className:"text-destructive",title:T,children:"Ошибка цены"}):d.jsx("span",{className:"text-muted-foreground",children:"—"})," "]})]}),d.jsxs("div",{className:"flex-shrink-0",children:[" ",d.jsx(z_,{asset:o,priceInfo:R||null,isLoadingPrice:A,priceError:T})," "]})]}),d.jsxs("div",{className:"mt-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2 px-1 gap-2",children:[d.jsx(fv,{defaultValue:p,onValueChange:z=>g(z),className:"flex-grow",children:d.jsxs(Wd,{className:"grid grid-cols-6 h-9 w-full",children:[" ",d.jsx(Ot,{value:"1D",className:"text-xs h-full",children:"1D"})," ",d.jsx(Ot,{value:"1W",className:"text-xs h-full",children:"1W"})," ",d.jsx(Ot,{value:"1M",className:"text-xs h-full",children:"1M"})," ",d.jsx(Ot,{value:"1Y",className:"text-xs h-full",children:"1Y"})," ",d.jsx(Ot,{value:"5Y",className:"text-xs h-full",children:"5Y"})," ",d.jsx(Ot,{value:"ALL",className:"text-xs h-full",children:"All"})," "]})}),d.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[d.jsx(ce,{variant:_==="line"?"secondary":"ghost",size:"icon",className:"h-9 w-9",onClick:()=>L("line"),title:"Линейный график",children:d.jsx(xk,{className:"h-4 w-4"})}),d.jsx(ce,{variant:_==="candle"?"secondary":"ghost",size:"icon",className:"h-9 w-9",onClick:()=>L("candle"),title:"Свечной график",disabled:p==="1D",children:d.jsx(fk,{className:"h-4 w-4"})})]})]}),d.jsxs("div",{className:"relative h-[250px] w-full",children:[d.jsxs("div",{className:"absolute bottom-0 right-2 z-10",children:[" ",d.jsxs(ce,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>n(`/asset/${o.id}/chart`),title:"На весь экран",children:[" ",d.jsx(LO,{className:"h-3.5 w-3.5"})," "]})," "]}),b?d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/50 z-0",children:d.jsx(Ne,{})}):k?d.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 z-0",children:d.jsxs("div",{className:"text-center p-4 border border-destructive/50 rounded-md bg-destructive/10 text-destructive",children:[d.jsx("span",{className:"text-2xl mr-2",children:"⚠️"})," ",k]})}):v.length>0?d.jsx(gN,{data:v,chartType:_,period:p}):d.jsx("div",{className:H("flex items-center justify-center text-muted-foreground h-full"),children:" Нет данных о цене за этот период. "})]})]}),d.jsx(U_,{asset:o,accounts:I})]})},u5=(t,e)=>{let n=null;const r=(...i)=>{n&&clearTimeout(n),n=setTimeout(()=>{t(...i),n=null},e)};return r.cancel=()=>{n&&(clearTimeout(n),n=null)},r},d5=20,h5=()=>{const{searchTerm:t,activeTabValue:e,searchResults:n,totalResults:r,isLoading:i,error:s,didPerformSearch:o,marketTabs:l,isTypesLoading:a,typesError:c}=mr(T=>({searchTerm:T.searchTerm,activeTabValue:T.activeTabValue,searchResults:T.searchResults,totalResults:T.totalResults,isLoading:T.isLoading,error:T.error,didPerformSearch:T.didPerformSearch,marketTabs:T.marketTabs,isTypesLoading:T.isTypesLoading,typesError:T.typesError}),Xs),u=mr(T=>T.setSearchTerm),h=mr(T=>T.setActiveTab),f=mr(T=>T.fetchMarketAssets),p=mr(T=>T.fetchMarketTabs),g=ft(),m=y.useRef(null);y.useEffect(()=>{mr.getState().marketTabs.length<=1&&!a&&p()},[p,a]);const w=y.useRef(u5(T=>{u(T)},400)).current,v=T=>{w(T.target.value)};y.useEffect(()=>{const T=mr.getState();!T.didPerformSearch&&!T.isTypesLoading&&!T.isLoading&&T.marketTabs.length>0&&f(!1)},[a]);const x=y.useCallback(T=>{const $=mr.getState().marketTabs.find(M=>M.value===T);$&&h(T,$.apiTitles)},[h]),b=y.useMemo(()=>n.map(T=>T==null?void 0:T.ticker).filter(T=>!!T&&T!=="RUB"),[n]),{prices:S,isLoading:k,error:C}=md(b),_=T=>{T&&g(`/asset/${T}`)},P=y.useCallback(()=>{!i&&n.length<r&&f(!0)},[i,n.length,r,f]),O=!i&&n.length>0&&n.length<r;y.useEffect(()=>{const T=m.current;if(!T)return;const R=new IntersectionObserver(([$])=>{$.isIntersecting&&O&&!i&&P()},{threshold:.1});return R.observe(T),()=>{T&&R.unobserve(T)}},[O,P,i]);const A=T=>d.jsxs("div",{className:"flex items-center justify-between p-3 space-x-3 animate-pulse",children:[d.jsxs("div",{className:"flex items-center space-x-2 overflow-hidden flex-grow",children:[d.jsx("div",{className:"h-8 w-8 rounded-full bg-muted flex-shrink-0"}),d.jsxs("div",{className:"space-y-1.5 flex-grow",children:[d.jsx("div",{className:"h-3 rounded bg-muted w-3/4"}),d.jsx("div",{className:"h-2.5 rounded bg-muted w-1/2"})]})]}),d.jsx("div",{className:"h-4 w-16 rounded bg-muted flex-shrink-0 ml-2"})]},`skel-${T}`);return d.jsxs("div",{className:"p-4 space-y-4 flex flex-col",children:[d.jsxs(Nt,{className:"flex-shrink-0 shadow-sm border border-border rounded-lg overflow-hidden bg-card",children:[d.jsxs(zr,{className:"pb-3 pt-4 px-4",children:[d.jsx(Ni,{className:"text-lg mb-2",children:"Биржа"}),d.jsxs("div",{className:"relative",children:[d.jsx($O,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),d.jsx(Pn,{type:"search",placeholder:"Название или тикер...",defaultValue:t,onChange:v,className:"pl-9 h-10 rounded-md text-sm","aria-label":"Поиск активов"})]})]}),d.jsx(mn,{className:"pt-1 pb-3 px-4",children:d.jsx("div",{className:"min-h-[40px]",children:a?d.jsx("div",{className:"flex justify-center p-2",children:d.jsx(Ne,{size:"sm"})}):c?d.jsx("div",{className:"text-destructive text-xs p-2 text-center",children:c}):l.length>0?d.jsx(fv,{value:e,onValueChange:x,children:d.jsx(Wd,{className:"flex flex-wrap h-auto justify-start -m-1 p-0 bg-transparent",children:l.map(T=>d.jsx(Ot,{value:T.value,className:H("text-xs h-8 px-3 py-1 m-1 rounded-full transition-all border shadow-sm","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring","data-[state=active]:bg-primary data-[state=active]:text-primary-foreground data-[state=active]:border-primary data-[state=active]:shadow","data-[state=inactive]:bg-card data-[state=inactive]:border-border data-[state=inactive]:text-muted-foreground hover:data-[state=inactive]:bg-muted/60"),disabled:i||a,children:T.label},T.value))})}):null})})]}),d.jsxs("div",{className:"relative flex-grow overflow-y-auto no-scrollbar border border-border rounded-lg shadow-sm bg-card",children:[i&&n.length===0&&!s&&d.jsxs("div",{className:"divide-y divide-border",children:[" ",Array.from({length:8}).map((T,R)=>A(R))," "]}),s&&n.length===0&&!i&&d.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[" ",d.jsx(xt,{message:s})," "]}),o&&n.length===0&&!i&&!s&&d.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground p-4 text-center",children:"Ничего не найдено."}),n.length>0&&d.jsxs("div",{className:"divide-y divide-border",children:[n.map(T=>{if(!T)return null;const R=S.get(T.ticker),$=R?Math.round(R.price*100):null;return d.jsxs("div",{className:"flex items-center justify-between p-3 space-x-3 cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>_(T.id),children:[d.jsx(gd,{asset:T,showLotSize:!0,className:"flex-grow min-w-0",iconClassName:"h-8 w-8 rounded-full flex-shrink-0"}),d.jsx("div",{className:"text-right flex-shrink-0 ml-2",children:k&&$===null&&!C?d.jsx(Ne,{size:"sm"}):$!==null?d.jsx(Ut,{value:$,className:"text-sm"}):C?d.jsx("span",{className:"text-xs text-destructive",title:C,children:d.jsx(Ek,{size:12,className:"inline -mt-0.5"})}):d.jsx("span",{className:"text-xs text-muted-foreground",children:"—"})})]},T.id)}),d.jsx("div",{ref:m,style:{height:"1px"},"aria-hidden":"true"}),i&&n.length>0&&d.jsx("div",{className:"flex justify-center p-4",children:d.jsx(Ne,{size:"sm"})}),!i&&!O&&n.length>0&&r>d5&&d.jsx("p",{className:"p-4 text-center text-sm text-muted-foreground",children:"Конец списка"})]}),C&&n.length>0&&!k&&d.jsx("div",{className:"sticky bottom-0 p-1 text-center text-xs bg-destructive/10 text-destructive border-t border-destructive/30 z-10 rounded-b-lg",role:"alert",children:" Ошибка обновления цен. "})]})]})},f5=({investor:t,index:e})=>{const[n,r]=y.useState(!1);if(!(t!=null&&t.telegramUser))return null;const i=t.telegramUser,s=i.userId;Me.useEffect(()=>{r(!1)},[s]);const o=(p,g)=>{var v,x;const m=(v=p==null?void 0:p[0])==null?void 0:v.toUpperCase(),w=(x=g==null?void 0:g[0])==null?void 0:x.toUpperCase();return m&&w?`${m}${w}`:m||"?"},l=i.firstName?`${i.firstName}${i.lastName?` ${i.lastName}`:""}`:i.username?`@${i.username}`:`User ID: ${s}`,a=o(i.firstName,i.lastName),c=i.photo_url||i.photoUrl||null,u=()=>{n||r(!0)},h=e===0?"text-yellow-500":e===1?"text-gray-500 dark:text-gray-400":e===2?"text-orange-500 dark:text-orange-400":"text-foreground/80",f=e+1;return d.jsxs("li",{className:"flex items-center justify-between px-4 py-4 space-x-4 hover:bg-muted/50 transition-colors duration-100",children:[d.jsxs("div",{className:"flex items-center space-x-4 flex-grow min-w-0",children:[d.jsx("div",{className:H("flex-shrink-0 w-8 h-10 flex items-center justify-center font-semibold text-sm tabular-nums"),children:f===1?d.jsx(PO,{size:18,className:H("inline -mt-0.5",h),fill:"currentColor"}):d.jsx("span",{className:h,children:`${f}.`})}),d.jsxs(Md,{className:"w-10 h-10 flex-shrink-0 border",children:[!n&&c&&d.jsx(Rd,{src:c,alt:l,onError:u},c),d.jsx(Id,{className:"text-sm",children:a})]}),d.jsxs("div",{className:"overflow-hidden",children:[d.jsx("p",{className:"text-base font-semibold truncate leading-tight",title:l,children:l}),i.username&&d.jsxs("p",{className:"text-sm text-muted-foreground truncate leading-tight",children:["@",i.username]})]})]}),d.jsx("div",{className:"flex-shrink-0 ml-2 text-right",children:d.jsx(Ut,{value:t.totalAmountCopecks,className:"text-base font-semibold"})})]})},p5=(t,e)=>{var r;if(!t||t.data===null||typeof t.data>"u"||typeof t.data.isSuccess!="boolean"){console.error("[API Helper] Invalid/Undefined Response Structure:",t);let i=e;return(t==null?void 0:t.data)===null?i="Received null data from server.":(r=t==null?void 0:t.data)!=null&&r.errorMessage?i=t.data.errorMessage:t!=null&&t.statusText&&(i=t.statusText),{isSuccess:!1,errorMessage:i,resultObject:null}}return t.data},m5=(t,e)=>{var r,i;console.error(`[API Error Handler] ${e}:`,t);let n=e;return t instanceof Error?n=t.message:typeof t=="string"?n=t:t!=null&&t.response?n=`Request failed (${t.response.status}): ${((r=t.response.data)==null?void 0:r.errorMessage)||((i=t.response.data)==null?void 0:i.title)||t.response.statusText||"Server error"}`:t!=null&&t.request?n="No response received from server.":t!=null&&t.errorMessage&&(n=t.errorMessage),{isSuccess:!1,errorMessage:n,resultObject:null}},g5=async()=>{var e;const t="Failed to get top investors.";console.log("[API/Investors] getTop10Investors called");try{const n=await at.get("/api/BrokerAccountUser/GetTop10MostRichInvestors");console.log("[API/Investors] getTop10Investors response received:",(e=n==null?void 0:n.data)==null?void 0:e.isSuccess);const r=p5(n,t);return r.isSuccess&&r.resultObject===null&&(console.warn("[API/Investors] getTop10Investors success but resultObject is null. Returning empty array."),r.resultObject=[]),r}catch(n){return m5(n,t)}},v5=()=>{const[t,e]=y.useState([]),[n,r]=y.useState(!0),[i,s]=y.useState(null);return y.useEffect(()=>{(async()=>{r(!0),s(null);try{const l=await g5();if(l!=null&&l.isSuccess&&l.resultObject){const a=l.resultObject.sort((c,u)=>u.totalAmountCopecks-c.totalAmountCopecks);console.log("[TopInvestorsPage] Fetched investors:",a),e(a)}else throw new Error((l==null?void 0:l.errorMessage)||"Failed to load top investors")}catch(l){s(l.message||"Error fetching data"),e([])}finally{r(!1)}})()},[]),d.jsx("div",{className:"p-4 space-y-4 pb-20 flex flex-col h-full",children:d.jsxs(Nt,{className:"flex flex-col flex-grow overflow-hidden shadow-md rounded-xl border",children:[d.jsxs(zr,{className:"flex-shrink-0 border-b pb-3 pt-4 text-center",children:[d.jsx(Ni,{className:"text-lg font-semibold",children:"Топ 10 Инвесторов"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"(По общей стоимости портфеля)"})]}),d.jsxs(mn,{className:"flex-grow overflow-y-auto no-scrollbar p-0",children:[n&&d.jsx("div",{className:"flex justify-center items-center h-48",children:d.jsx(Ne,{})}),i&&d.jsx("div",{className:"p-4",children:d.jsx(xt,{message:i})}),!n&&!i&&d.jsx(d.Fragment,{children:t.length>0?d.jsx("ol",{className:"divide-y divide-border/60",children:t.map((o,l)=>{var a;return d.jsx(f5,{investor:o,index:l},((a=o.telegramUser)==null?void 0:a.userId)||l)})}):d.jsx("p",{className:"text-center text-muted-foreground py-16",children:"Список инвесторов пуст."})})]})]})})},y5=`
## Что такое акции и как на них заработать?

Акция — это ценная бумага, которая подтверждает, что вы владеете долей в компании. Покупая акцию, вы становитесь **акционером** и совладельцем бизнеса.

### Зачем компании выпускают акции?

*   **Привлечение капитала:** Компании продают акции, чтобы получить деньги на развитие: запуск новых продуктов, строительство заводов, выход на новые рынки.
*   **Публичность:** Выход на биржу повышает узнаваемость компании.

### Зачем инвесторы покупают акции?

1.  **Рост стоимости:** Цена акции может вырасти со временем, если дела у компании идут хорошо. Инвестор может продать акцию дороже, чем купил, получив **прибыль**.
2.  **Дивиденды:** Некоторые компании делятся частью своей прибыли с акционерами, выплачивая **дивиденды**. Это регулярный доход для инвестора.

### Виды акций

*   **Обыкновенные:** Дают право голоса на собрании акционеров и право на получение дивидендов (если компания их выплачивает).
*   **Привилегированные ("префы"):** Обычно не дают права голоса, но гарантируют получение фиксированных дивидендов (если компания получила прибыль). При банкротстве владельцы "префов" получают выплаты раньше владельцев обыкновенных акций.

### Риски

*   **Рыночный риск:** Цена акции может не только расти, но и падать из-за общих экономических условий или проблем у конкретной компании.
*   **Риск банкротства:** Если компания обанкротится, акционеры могут потерять все вложенные деньги.

**Важно:** Инвестиции в акции связаны с риском. Перед покупкой изучите компанию и оцените свои финансовые возможности.
`,x5=`
## Как найти потерянные акции?

Если вы или ваши родственники когда-то покупали акции (например, в 1990-е годы во время приватизации), но документы утеряны, есть способы попытаться их найти.

### Шаг 1: Соберите информацию

Вспомните или найдите любые данные:
*   Название компании, акции которой покупались.
*   Примерное время покупки.
*   Имя человека, на которого оформлялись акции.
*   Любые старые документы: выписки со счета, сертификаты акций (хотя сейчас они обычно бездокументарные).

### Шаг 2: Обратитесь к регистратору

Акции учитываются в специальных организациях — **регистраторах**.
*   **Узнайте регистратора компании:** Найдите на сайте компании (в разделе "Акционерам" или "Инвесторам") или на сайтах раскрытия информации (например, e-disclosure.ru) название регистратора, который ведет реестр ее акционеров.
*   **Отправьте запрос регистратору:** Свяжитесь с регистратором (по телефону, почте или через сайт) и объясните ситуацию. Укажите всю собранную информацию о предполагаемом владельце акций. Возможно, потребуется предоставить документы, подтверждающие личность или родство (если ищете акции родственника). Регистратор проверит свои записи.

### Шаг 3: Обратитесь к брокеру или депозитарию (если акции покупались через них)

Если акции покупались через брокера или учитывались в депозитарии, можно попробовать обратиться к ним.
*   Вспомните название брокера/депозитария.
*   Свяжитесь с ними и запросите информацию о наличии счета и акций на имя предполагаемого владельца.

### Шаг 4: Проверьте наследство

Если вы ищете акции умершего родственника, они могли войти в **наследственную массу**.
*   Обратитесь к нотариусу, который вел наследственное дело. Он мог делать запросы регистраторам и депозитариям.
*   Если наследственное дело не открывалось или акции не были включены, возможно, придется обращаться в суд для включения акций в наследство.

### Что делать, если акции нашлись?

*   **У регистратора:** Вам нужно будет открыть счет у брокера или в депозитарии, а затем дать поручение регистратору перевести акции на этот счет. Для этого потребуется личный визит к регистратору или нотариально заверенные документы.
*   **У брокера/депозитария:** Если счет еще активен, вы сможете управлять акциями через этого брокера. Если счет закрыт или неактивен, уточните у брокера/депозитария процедуру восстановления доступа или перевода акций.

**Важно:** Процесс поиска может быть долгим и потребовать настойчивости. Некоторые регистраторы и брокеры могут взимать плату за поиск информации или восстановление документов.
`,w5=`
## Зачем нужны депозитарные расписки?

Депозитарная расписка (ДР) — это ценная бумага, которая **удостоверяет право собственности на акции иностранной компании**. Сами акции при этом хранятся в банке-кастодиане в стране происхождения компании, а банк-депозитарий (обычно крупный международный банк) выпускает на них расписки, которые торгуются на других биржах.

### Виды депозитарных расписок:

*   **АДР (ADR, American Depositary Receipt):** Торгуются на американских биржах (NYSE, NASDAQ).
*   **ГДР (GDR, Global Depositary Receipt):** Торгуются на европейских и азиатских биржах (Лондон, Франкфурт, Сингапур и др.).
*   **РДР (Российские депозитарные расписки):** Позволяли иностранным компаниям размещать свои бумаги на российских биржах (сейчас менее актуальны).

### Зачем они нужны?

*   **Инвесторам:**
    *   **Доступ к иностранным акциям:** Позволяют покупать акции иностранных компаний на своей локальной бирже без необходимости открывать счет у иностранного брокера.
    *   **Удобство:** Торгуются в привычной валюте и по правилам местной биржи.
    *   **Дивиденды:** Владельцы ДР обычно получают дивиденды так же, как и владельцы базовых акций (за вычетом комиссий банка-депозитария и налогов).
*   **Компаниям (эмитентам):**
    *   **Привлечение иностранных инвесторов:** Выпуск ДР позволяет компании расширить круг инвесторов и привлечь капитал на международных рынках.
    *   **Повышение ликвидности:** Торги на нескольких площадках увеличивают ликвидность бумаг.
    *   **Престиж:** Листинг на крупных мировых биржах повышает статус компании.

### Соотношение ДР и акций

Одна депозитарная расписка может соответствовать одной акции, нескольким акциям или даже доле акции. Это соотношение (ratio) устанавливается при выпуске ДР.

### Риски

*   **Рыночный риск:** Цена ДР зависит от цены базовой акции и подвержена тем же колебаниям.
*   **Валютный риск:** Если ДР торгуется в валюте, отличной от валюты базовой акции, ее цена будет зависеть и от обменного курса.
*   **Риск делистинга:** ДР могут быть сняты с торгов на бирже.
*   **Геополитические риски:** Санкции или законодательные изменения могут ограничить торговлю ДР или конвертацию их в акции (как это произошло с российскими компаниями, чьи ДР торговались за рубежом).

**В итоге:** Депозитарные расписки — удобный инструмент для диверсификации портфеля за счет иностранных акций, но важно помнить о связанных с ними рисках.
`,b5=`
## Что такое маржинальная торговля и в чем ее риски?

**Маржинальная торговля** — это совершение сделок на бирже с использованием заемных средств (денег или ценных бумаг), предоставляемых брокером под залог активов на вашем счете. Это позволяет покупать больше активов, чем у вас есть денег, или продавать активы, которых у вас нет (игра на понижение, "шорт").

### Как это работает?

1.  **Маржинальный счет:** Для маржинальной торговли нужен специальный брокерский счет с возможностью использования "кредитного плеча".
2.  **Обеспечение (маржа):** Часть ваших собственных средств и активов на счете выступает залогом (начальная маржа).
3.  **Кредитное плечо:** Брокер предоставляет вам заемные средства, превышающие ваше обеспечение в несколько раз (например, плечо 1:3 означает, что на 1 ваш рубль брокер дает еще 2 рубля в долг).
4.  **Сделки:** Вы совершаете сделки на сумму, превышающую ваши собственные средства.
5.  **Плата за плечо:** За использование заемных средств брокер взимает комиссию (обычно ежедневную).
6.  **Поддерживающая маржа:** Стоимость ваших активов (включая заемные) не должна опускаться ниже определенного уровня (поддерживающая маржа), установленного брокером.

### Виды маржинальных сделок:

*   **Лонг (Long):** Покупка активов на заемные деньги в расчете на рост их цены. Вы занимаете деньги.
*   **Шорт (Short, короткая продажа):** Продажа активов, взятых в долг у брокера, в расчете на падение их цены. Вы занимаете ценные бумаги. Чтобы закрыть позицию, вам нужно будет откупить эти бумаги на рынке (желательно дешевле) и вернуть брокеру.

### Преимущества:

*   **Потенциально высокая прибыль:** Кредитное плечо позволяет увеличить объем сделок и, соответственно, потенциальную прибыль от движения цены.
*   **Возможность заработка на падении:** Сделки "шорт" позволяют зарабатывать на снижении котировок.
*   **Гибкость:** Можно использовать для краткосрочных спекуляций или хеджирования рисков.

### Риски (Очень высокие!):

*   **Потенциально высокие убытки:** Кредитное плечо работает в обе стороны. Если цена идет против вас, убытки также умножаются на размер плеча и могут превысить ваши собственные вложения.
*   **Маржин-колл (Margin Call):** Если стоимость активов на вашем счете падает ниже уровня поддерживающей маржи, брокер потребует внести дополнительные средства или закрыть часть позиций для восстановления уровня маржи.
*   **Принудительное закрытие позиций:** Если вы не выполните требования маржин-колла, брокер имеет право принудительно закрыть ваши убыточные позиции по текущим рыночным ценам, чтобы покрыть долг перед ним. Это может зафиксировать значительные убытки.
*   **Плата за перенос позиций:** Комиссия за использование плеча может "съедать" прибыль, особенно при долгом удержании маржинальных позиций.
*   **Риск "шорт-сквиза" (Short Squeeze):** При игре на понижение резкий рост цены актива может заставить "шортистов" массово закрывать позиции (откупать бумаги), что еще больше толкает цену вверх, приводя к огромным убыткам.

**Вывод:** Маржинальная торговля — инструмент для **опытных** инвесторов и трейдеров, которые полностью понимают и принимают высокие риски. **Новичкам категорически не рекомендуется** использовать кредитное плечо досконально не разобравшись в механизмах и рисках.
`,S5=`
## Облигации: что это такое и как на них заработать?

**Облигация** — это долговая ценная бумага. Покупая облигацию, вы даете деньги в долг эмитенту (тому, кто выпустил облигацию), а он обязуется вернуть вам эту сумму в определенный срок и выплачивать процентный доход (купоны) в течение срока обращения облигации.

### Кто выпускает облигации (эмитенты)?

*   **Государство:** Министерство финансов (ОФЗ — Облигации Федерального Займа), регионы РФ (субфедеральные), города (муниципальные). Считаются самыми надежными.
*   **Компании (корпорации):** Крупные и средние предприятия для привлечения финансирования. Риск зависит от надежности компании.

### Основные параметры облигации:

*   **Номинал:** Сумма, которую эмитент вернет вам при погашении облигации. Обычно 1000 рублей.
*   **Рыночная цена:** Цена, по которой облигация торгуется на бирже. Может быть выше, ниже или равна номиналу. Выражается в процентах от номинала (например, 98,5% или 102%).
*   **Дата погашения:** Срок, когда эмитент вернет номинал облигации.
*   **Купон:** Процентный доход, который эмитент выплачивает владельцу облигации. Может быть:
    *   **Фиксированным:** Ставка купона известна заранее и не меняется (например, 8% годовых).
    *   **Переменным:** Ставка купона привязана к какому-либо индикатору (например, ставке ЦБ РФ RUONIA + 1%).
    *   **Нулевым (дисконтные облигации):** Купоны не выплачиваются, но облигация продается со скидкой (дисконтом) к номиналу. Доход инвестора — разница между ценой покупки и номиналом при погашении.
*   **Периодичность выплаты купонов:** Как часто выплачивается купон (например, раз в полгода, раз в квартал).
*   **Накопленный купонный доход (НКД):** Часть купона, которая "накопилась" с момента последней выплаты. При покупке облигации между датами выплаты купонов покупатель платит продавцу НКД, а при следующей выплате получает полный купон.

### Как заработать на облигациях?

1.  **Получение купонов:** Регулярные выплаты процентного дохода.
2.  **Погашение по номиналу:** Получение номинальной стоимости в конце срока. Если вы купили облигацию дешевле номинала (с дисконтом), то разница — ваш дополнительный доход.
3.  **Продажа дороже цены покупки:** Если рыночная цена облигации вырастет (например, из-за снижения процентных ставок в экономике), вы можете продать ее до погашения и получить прибыль.

### Доходность облигаций:

*   **Купонная доходность:** Годовой купон / Номинал.
*   **Текущая доходность:** Годовой купон / Текущая рыночная цена.
*   **Доходность к погашению (YTM, Yield to Maturity):** Самый важный показатель. Учитывает все будущие купонные выплаты и разницу между текущей ценой и номиналом до даты погашения. Показывает реальную годовую доходность, которую вы получите, если продержите облигацию до конца срока.

### Риски:

*   **Кредитный риск (риск дефолта):** Эмитент может оказаться не в состоянии выплатить купоны или вернуть номинал. Чем ниже надежность эмитента, тем выше риск и, как правило, выше доходность.
*   **Процентный риск:** Если процентные ставки в экономике растут, цены уже выпущенных облигаций (особенно с фиксированным купоном) падают, так как новые облигации выпускаются с более высокой доходностью.
*   **Инфляционный риск:** Инфляция может "съесть" доходность облигации, если реальная доходность (доходность минус инфляция) окажется низкой или отрицательной.
*   **Риск ликвидности:** Некоторые облигации (особенно небольших компаний) может быть сложно быстро продать по справедливой рыночной цене.

**Вывод:** Облигации считаются более консервативным и предсказуемым инструментом, чем акции. Они подходят для инвесторов, ищущих регулярный доход и меньший риск (особенно государственные облигации). Однако важно оценивать кредитное качество эмитента и понимать процентные риски.
`,k5=`
## Брокер: как его выбрать и как с ним работать?

**Брокер** — это профессиональный участник рынка ценных бумаг, посредник между инвестором и биржей. Без брокера частное лицо не может напрямую покупать или продавать акции, облигации и другие биржевые инструменты.

### Зачем нужен брокер?

*   **Доступ к бирже:** Открывает вам брокерский счет и предоставляет доступ к торговым системам биржи.
*   **Исполнение сделок:** Выполняет ваши поручения (заявки) на покупку или продажу ценных бумаг.
*   **Учет активов:** Ведет учет ваших денег и ценных бумаг на брокерском счете и в депозитарии.
*   **Налоговый агент:** Рассчитывает, удерживает и перечисляет налог на доходы (НДФЛ) с вашей прибыли от сделок и дивидендов (по российским бумагам).
*   **Предоставление информации:** Дает доступ к котировкам, новостям, аналитике (объем и качество зависят от брокера).
*   **Дополнительные услуги:** Может предлагать маржинальное кредитование, структурные продукты, доверительное управление, ИИС и т.д.

### Как выбрать брокера?

1.  **Наличие лицензии:** **Самое главное!** Убедитесь, что у брокера есть лицензия Банка России на осуществление брокерской деятельности. Проверить можно на сайте ЦБ РФ в разделе "Справочник участников финансового рынка". Работа без лицензии незаконна.
2.  **Надежность:** Оцените историю компании, ее репутацию, финансовое состояние (если доступно). Крупные брокеры, связанные с банками, часто воспринимаются как более надежные.
3.  **Тарифы и комиссии:** Внимательно изучите все комиссии:
    *   За сделки (покупку/продажу) — % от суммы или фикс. сумма.
    *   Депозитарная комиссия — за хранение ценных бумаг.
    *   За ведение счета (может быть при отсутствии сделок или низкой сумме активов).
    *   За вывод денег.
    *   За использование торгового терминала (если он платный).
    *   За маржинальное кредитование (если планируете использовать).
    Выберите тариф, подходящий под ваш стиль инвестирования (частота сделок, суммы).
4.  **Доступные инструменты и биржи:** Убедитесь, что брокер дает доступ к тем биржам (Московская, СПБ Биржа) и инструментам (акции РФ, иностранные акции, облигации, фонды, фьючерсы), которые вам интересны.
5.  **Торговые платформы:** Оцените удобство и функциональность:
    *   **Мобильное приложение:** Основной инструмент для многих начинающих инвесторов. Должно быть понятным и стабильным.
    *   **Веб-терминал:** Торговля через браузер.
    *   **Десктопный терминал (QUIK, MetaTrader и др.):** Для активных трейдеров, предлагает больше возможностей для анализа и выставления заявок.
6.  **Минимальная сумма:** Узнайте, есть ли требования к минимальной сумме для открытия счета или для доступа к определенным тарифам/услугам.
7.  **Качество поддержки:** Как быстро и компетентно отвечает поддержка на вопросы? Можно почитать отзывы или задать пару вопросов перед открытием счета.
8.  **Дополнительные сервисы:** Наличие ИИС, аналитика, обучение, персональные рекомендации (если это важно для вас).

### Как работать с брокером?

1.  **Заключение договора:** Обычно происходит онлайн через сайт или приложение брокера с подтверждением через Госуслуги или встречу с представителем.
2.  **Открытие счета:** Брокер открывает вам брокерский счет и счет в депозитарии.
3.  **Пополнение счета:** Перевод денег на брокерский счет (обычно с банковского счета или карты).
4.  **Подача поручений (заявок):** Через торговую платформу вы выставляете заявки на покупку или продажу:
    *   **Рыночная заявка:** Исполняется немедленно по лучшей доступной цене на рынке.
    *   **Лимитная заявка:** Исполняется только по указанной вами цене или лучше.
5.  **Контроль счета:** Следите за состоянием портфеля, открытыми позициями, доступными средствами.
6.  **Вывод средств:** Подача поручения на вывод денег с брокерского счета на банковский.

**Помните:** Брокер — это посредник. Он исполняет ваши приказы, но не несет ответственности за ваши инвестиционные решения и возможные убытки.
`,C5=`
## Что такое доверительное управление и зачем оно начинающему инвестору?

**Доверительное управление (ДУ)** — это услуга, при которой вы передаете свои деньги или ценные бумаги профессиональному управляющему (управляющей компании, УК), а он инвестирует их от вашего имени с целью получения дохода. Вы остаетесь собственником активов, но право принимать инвестиционные решения переходит к управляющему.

### Как это работает?

1.  **Договор ДУ:** Вы заключаете договор с управляющей компанией, где прописываются:
    *   **Инвестиционная стратегия:** Цели, уровень риска, разрешенные инструменты (например, только акции РФ, смешанная стратегия, только облигации).
    *   **Срок договора.**
    *   **Вознаграждение управляющего:** Обычно это процент от среднегодовой стоимости активов под управлением (management fee) и/или процент от полученной прибыли сверх определенного уровня (success fee).
    *   **Порядок отчетности:** Как часто УК будет отчитываться перед вами о результатах.
2.  **Передача активов:** Вы переводите деньги на специальный счет, открытый на ваше имя в рамках ДУ.
3.  **Управление:** Управляющий формирует портфель в соответствии с выбранной стратегией и активно им управляет (покупает/продает активы).
4.  **Отчетность:** УК регулярно предоставляет вам отчеты о составе портфеля и результатах управления.
5.  **Получение дохода / возврат активов:** По окончании срока договора или при досрочном расторжении (если это предусмотрено) вы получаете назад свои активы (деньги и/или ценные бумаги) и полученный инвестиционный доход (за вычетом вознаграждения УК и налогов).

### Плюсы ДУ для начинающего инвестора:

*   **Профессиональное управление:** Вашими деньгами управляют опытные специалисты с доступом к аналитике и ресурсам, которых может не быть у новичка.
*   **Экономия времени:** Вам не нужно самостоятельно анализировать рынок, выбирать бумаги и совершать сделки.
*   **Доступ к сложным стратегиям:** УК могут предлагать стратегии, которые сложно реализовать самостоятельно.
*   **Диверсификация:** Готовые стратегии часто предполагают вложения в разные классы активов.

### Минусы и риски ДУ:

*   **Нет гарантии доходности:** Управляющий не гарантирует прибыль. Результаты зависят от рыночной ситуации и мастерства управляющего. Возможны убытки.
*   **Высокий порог входа:** Часто для открытия договора ДУ требуется значительная сумма (сотни тысяч или миллионы рублей), хотя появляются и более доступные варианты.
*   **Комиссии:** Вознаграждение управляющего может существенно снизить вашу итоговую доходность, особенно если она невелика.
*   **Отсутствие контроля:** Вы не можете влиять на конкретные сделки управляющего в рамках выбранной стратегии.
*   **Риск выбора УК:** Важно выбрать надежную управляющую компанию с хорошей репутацией и прозрачными условиями.
*   **Налоги:** Доход от ДУ облагается НДФЛ. Обычно УК выступает налоговым агентом.

### ДУ vs Самостоятельное инвестирование vs ПИФы:

*   **ДУ vs Сам:** ДУ подходит тем, кто не хочет или не может тратить время на инвестиции, готов платить за управление и доверяет профессионалам. Самостоятельное инвестирование требует знаний, времени, но дает полный контроль и экономию на комиссиях за управление.
*   **ДУ vs ПИФы:** ПИФы (Паевые Инвестиционные Фонды) — это коллективные инвестиции, где много инвесторов вкладывают деньги в общий портфель под управлением УК. ПИФы обычно имеют более низкий порог входа, чем ДУ, и стандартизированные стратегии. ДУ часто предлагает более индивидуальный подход (хотя есть и стандартные стратегии ДУ).

**Вывод:** Доверительное управление может быть вариантом для начинающих инвесторов с **крупным капиталом**, которые хотят передать управление профессионалам и готовы платить за это комиссии, осознавая при этом все риски и отсутствие гарантий. Для инвесторов с небольшими суммами или желающих больше контроля, более подходящими могут быть самостоятельные инвестиции или ПИФы/БПИФы.
`,E5=`
## Зачем нужен инвестиционный советник и как его выбрать?

**Инвестиционный советник** — это профессионал или компания, которые дают **индивидуальные инвестиционные рекомендации (ИИР)** клиентам на основе их финансовых целей, опыта, отношения к риску и других параметров.

### Отличие от брокера и управляющего:

*   **Брокер:** Исполняет ваши сделки, предоставляет доступ к бирже. Не дает индивидуальных рекомендаций (может предоставлять общую аналитику).
*   **Управляющий (ДУ):** Самостоятельно управляет вашими активами в рамках согласованной стратегии. Вы не принимаете решения по конкретным сделкам.
*   **Инвестсоветник:** **Рекомендует**, что купить или продать, но **решение принимаете вы сами**. Он помогает сформировать стратегию и подобрать инструменты, но не управляет вашими деньгами напрямую.

### Зачем нужен инвестсоветник?

*   **Персональный план:** Помогает определить финансовые цели (накопить на пенсию, купить квартиру, образование детей) и разработать долгосрочную инвестиционную стратегию для их достижения.
*   **Оценка риск-профиля:** Определяет вашу готовность к риску и подбирает соответствующие инструменты.
*   **Подбор активов:** Дает конкретные рекомендации по покупке/продаже акций, облигаций, фондов и других инструментов, подходящих под вашу стратегию и риск-профиль.
*   **Формирование и ребалансировка портфеля:** Помогает собрать диверсифицированный портфель и корректировать его со временем.
*   **Обучение и информация:** Объясняет принципы инвестирования, риски, особенности инструментов.
*   **Психологическая поддержка:** Помогает избежать эмоциональных решений во время рыночных колебаний.

### Кому может быть полезен инвестсоветник?

*   **Начинающим инвесторам:** Которые не знают, с чего начать, боятся ошибок и хотят получить персональный план.
*   **Занятым людям:** У которых нет времени самостоятельно изучать рынок и управлять портфелем.
*   **Инвесторам с крупным капиталом:** Которые ищут индивидуальные решения и комплексное управление финансами.
*   **Тем, кто хочет получить "второе мнение"** по своей стратегии.

### Как выбрать инвестсоветника?

1.  **Реестр Банка России:** **Обязательно!** Проверьте, состоит ли советник (человек или компания) в **Едином реестре инвестиционных советников** на сайте ЦБ РФ. Только члены реестра имеют право давать ИИР.
2.  **Опыт и квалификация:** Изучите опыт работы советника, наличие квалификационных аттестатов (ФСФР/ЦБ), образование.
3.  **Специализация:** Некоторые советники специализируются на определенных рынках или инструментах. Убедитесь, что их экспертиза соответствует вашим потребностям.
4.  **Модель оплаты:** Как советник получает вознаграждение?
    *   **Фиксированная плата:** За консультацию, разработку плана или годовое сопровождение.
    *   **Процент от активов:** Годовой процент от суммы активов, по которым даются рекомендации.
    *   **Процент от дохода:** Вознаграждение зависит от прибыли клиента (менее распространено и может создавать конфликт интересов).
    *   **Комиссии от продуктов:** Советник может получать комиссии от продажи определенных инвестпродуктов (самый высокий риск конфликта интересов!). **Избегайте таких советников.**
    Предпочтительны модели с фиксированной платой или % от активов, так как они минимизируют конфликт интересов.
5.  **Прозрачность и договор:** Внимательно изучите договор. В нем должны быть четко прописаны услуги, ответственность сторон, порядок предоставления рекомендаций, стоимость услуг, порядок расторжения.
6.  **Отзывы и репутация:** Поищите отзывы других клиентов, но относитесь к ним критически.
7.  **Личное общение:** Проведите встречу (или онлайн-звонок), чтобы понять, комфортно ли вам общаться с этим человеком/представителем компании, совпадают ли ваши взгляды на инвестиции.

**Важно:** Инвестиционный советник дает рекомендации, но **ответственность за принятие решения и его последствия лежит на вас**. Советник не гарантирует доходность и не несет ответственности за рыночные убытки, если его рекомендации соответствовали вашему профилю и договору.
`,_5=`
## Паевые фонды (ПИФы): как они работают и как на них заработать?

**Паевой инвестиционный фонд (ПИФ)** — это форма коллективных инвестиций. Множество инвесторов (пайщиков) объединяют свои деньги в один большой портфель, которым управляет профессиональная **управляющая компания (УК)** в соответствии с заранее определенной стратегией.

### Как это работает?

1.  **Формирование фонда:** УК создает фонд с определенной инвестиционной стратегией (например, ПИФ акций российских компаний, ПИФ облигаций, смешанный ПИФ).
2.  **Покупка паев:** Инвесторы покупают **паи** — доли в этом фонде. Цена пая зависит от общей стоимости активов фонда (Стоимость Чистых Активов, СЧА), деленной на количество паев в обращении.
3.  **Управление активами:** УК на деньги пайщиков покупает ценные бумаги и другие активы согласно стратегии фонда. Цель УК — увеличить стоимость активов фонда.
4.  **Рост/падение стоимости пая:** Если активы в фонде дорожают, растет СЧА и, соответственно, цена пая. Если активы дешевеют — пай тоже дешевеет.
5.  **Продажа (погашение) паев:** Инвестор может продать свои паи обратно управляющей компании (если это открытый ПИФ) или другому инвестору на бирже (если это биржевой ПИФ).

### Виды ПИФов по доступности паев:

*   **Открытые (ОПИФ):** Паи можно купить и продать (погасить) в любой рабочий день напрямую у управляющей компании или ее агентов. Самый распространенный тип.
*   **Интервальные (ИПИФ):** Купить и продать паи можно только в определенные периоды (интервалы), установленные правилами фонда (например, раз в квартал или полгода).
*   **Закрытые (ЗПИФ):** Паи покупаются при формировании фонда, а погасить их можно только при его закрытии (часто через несколько лет). Иногда паи ЗПИФов могут торговаться на бирже или внебиржевом рынке. Обычно инвестируют в менее ликвидные активы (недвижимость, венчурные проекты).

### Виды ПИФов по составу активов:

*   **Фонды акций:** Инвестируют в акции компаний.
*   **Фонды облигаций:** Инвестируют в государственные или корпоративные облигации.
*   **Смешанные фонды:** Инвестируют и в акции, и в облигации в разных пропорциях.
*   **Фонды денежного рынка:** Вкладывают в краткосрочные долговые инструменты и депозиты.
*   **Индексные фонды:** Стараются повторить структуру и доходность определенного биржевого индекса (например, индекса МосБиржи).
*   **Фонды недвижимости (ЗПИФы):** Инвестируют в объекты недвижимости.
*   **И другие** (товарные, венчурные и т.д.)

### Как заработать на ПИФах?

Основной способ — **рост стоимости пая**. Вы покупаете пай дешевле, а продаете дороже. Дивиденды и купоны, полученные фондом от активов внутри, обычно **реинвестируются**, то есть направляются на покупку новых активов, что увеличивает стоимость пая. Некоторые фонды могут предусматривать выплату промежуточного дохода пайщикам, но это встречается реже.

### Плюсы ПИФов:

*   **Профессиональное управление:** Не нужно самому выбирать бумаги.
*   **Диверсификация:** Даже небольшая сумма инвестируется сразу в корзину активов, что снижает риск.
*   **Доступность:** Начать инвестировать можно с небольших сумм (часто от 1000 рублей).
*   **Регулирование:** Деятельность УК и ПИФов контролируется Банком России.

### Минусы и риски ПИФов:

*   **Нет гарантии доходности:** Стоимость пая может не только расти, но и падать. Возможны убытки.
*   **Комиссии:** УК берет плату за управление (процент от СЧА), также могут быть надбавки при покупке и скидки при продаже паев. Комиссии снижают итоговую доходность.
*   **Зависимость от УК:** Результат зависит от профессионализма управляющей компании.
*   **Ограничения интервальных и закрытых ПИФов:** Сложно быстро продать паи.

**Вывод:** ПИФы — хороший инструмент для начинающих инвесторов, позволяющий диверсифицировать вложения и доверить управление профессионалам при относительно низком пороге входа. Важно выбрать фонд с подходящей стратегией, низкими комиссиями и надежной УК.
`,N5=`
## Биржевые фонды (БПИФы, ETF): что это и стоит ли вкладывать?

**Биржевой паевой инвестиционный фонд (БПИФ)** и **Exchange Traded Fund (ETF)** — это инвестиционные фонды, паи (или акции) которых торгуются на бирже так же свободно, как и обычные акции.

### Сходства и различия:

*   **Общее:** И БПИФы, и ETF представляют собой готовый портфель активов (акций, облигаций, золота и т.д.), собранный по определенному принципу (часто по индексу). Покупая один пай/акцию фонда, вы инвестируете сразу во все активы внутри него.
*   **БПИФ:** Создается по **российскому** законодательству. Управляется российской управляющей компанией (УК). Активы могут быть как российскими, так и иностранными (но с учетом текущих ограничений). Торгуются на Московской бирже за рубли.
*   **ETF:** Создается по **иностранному** законодательству (например, Ирландия, Люксембург). Управляется иностранным провайдером (FinEx, BlackRock, Vanguard и др.). Активы обычно иностранные. Ранее торговались на МосБирже и СПБ Бирже, но из-за санкций и ограничений ЦБ РФ **торги большинством иностранных ETF для неквалифицированных инвесторов в России сейчас недоступны или приостановлены**.

**По сути, для российского инвестора сегодня БПИФ — это основной доступный аналог ETF.**

### Как работают БПИФы?

1.  **Следование индексу (чаще всего):** Большинство БПИФов являются **индексными**. Они стремятся максимально точно повторить состав и структуру выбранного биржевого индекса (например, Индекс МосБиржи IMOEX, Индекс гособлигаций RGBI, индекс акций IT-сектора и т.д.).
2.  **Формирование портфеля:** УК покупает активы в тех же пропорциях, что и в индексе.
3.  **Торги на бирже:** Паи фонда выпускаются и торгуются на бирже в течение всего торгового дня. Цена пая колеблется в зависимости от спроса/предложения и стоимости базовых активов.
4.  **Маркет-мейкеры:** Специальные участники торгов (авторизованные УК) следят за тем, чтобы цена пая на бирже не сильно отклонялась от реальной стоимости активов внутри фонда (СЧА на пай). Они выставляют заявки на покупку/продажу паев около справедливой цены.
5.  **Реинвестирование доходов:** Дивиденды и купоны, полученные фондом, обычно реинвестируются, увеличивая стоимость пая.

### Плюсы БПИФов (и ETF):

*   **Мгновенная диверсификация:** Покупка одного пая дает долю во множестве активов.
*   **Низкий порог входа:** Цена одного пая обычно невелика, можно начать с малых сумм.
*   **Прозрачность:** Состав индексных фондов обычно известен и соответствует индексу. СЧА публикуется регулярно.
*   **Ликвидность:** Паи можно купить/продать на бирже в любой момент в течение торговой сессии (в отличие от ОПИФов, где расчеты занимают несколько дней).
*   **Низкие издержки (часто):** Комиссии за управление у индексных БПИФов обычно ниже, чем у активно управляемых ОПИФов.

### Минусы и риски БПИФов (и ETF):

*   **Рыночный риск:** Стоимость пая зависит от динамики базовых активов. Если рынок падает, пай тоже дешевеет.
*   **Ошибка слежения (Tracking Error):** Цена пая может незначительно отклоняться от динамики индекса из-за комиссий, налогов, особенностей репликации индекса.
*   **Комиссии фонда:** УК берет комиссию за управление, также есть другие расходы фонда (депозитарные, аудиторские), которые включены в стоимость пая.
*   **Биржевые комиссии:** При покупке/продаже пая на бирже вы платите стандартную брокерскую комиссию.
*   **Риск контрагента (для ETF):** Хотя и маловероятный, но существует риск банкротства иностранного провайдера или кастодиана.
*   **Санкционные риски (особенно для ETF и БПИФов на иностранные активы):** Возможность блокировки активов, приостановки торгов, проблемы с получением выплат.

### Стоит ли вкладывать?

БПИФы (особенно индексные) — **отличный инструмент для начинающих и долгосрочных инвесторов** благодаря простоте, диверсификации и низкому порогу входа. Они позволяют легко инвестировать в широкий рынок акций или облигаций.

**При выборе БПИФа обращайте внимание на:**

*   **Базовый актив/индекс:** Во что инвестирует фонд? Соответствует ли это вашей стратегии?
*   **Комиссии:** Суммарная комиссия фонда (TER/СГР). Чем ниже, тем лучше.
*   **Ошибка слежения:** Насколько точно фонд следует за индексом (если применимо).
*   **Ликвидность:** Объемы торгов паями на бирже.
*   **Управляющая компания:** Ее надежность и опыт.

С иностранными ETF в текущих условиях нужно быть **очень осторожным** из-за высоких рисков блокировок и ограничений для российских инвесторов.
`,T5=`
## Закрытые паевые фонды (ЗПИФы): в чем их особенности и подходят ли они начинающим инвесторам?

**Закрытый паевой инвестиционный фонд (ЗПИФ)** — это вид ПИФа, паи которого можно купить только во время его формирования (первичного размещения), а погасить (продать обратно управляющей компании) — только при завершении работы фонда, дата которого определена заранее (например, через 5, 10 или 15 лет).

### Ключевые особенности ЗПИФов:

1.  **Ограниченный вход и выход:** В отличие от открытых ПИФов (ОПИФов), где паи можно купить/продать в любой рабочий день, в ЗПИФе инвестор "замораживает" свои деньги на весь срок существования фонда.
2.  **Инвестиции в неликвидные активы:** Закрытая структура позволяет управляющей компании инвестировать в активы, которые сложно быстро купить или продать по справедливой цене. Чаще всего это:
    *   **Недвижимость:** Строящиеся или готовые объекты (жилая, коммерческая, складская).
    *   **Прямые инвестиции (Private Equity):** Доли в непубличных компаниях.
    *   **Венчурные инвестиции:** Вложения в стартапы на ранних стадиях.
    *   **Предметы искусства, антиквариат.**
    *   Иногда — биржевые инструменты, но с долгосрочной стратегией.
3.  **Высокий порог входа:** Как правило, минимальная сумма для покупки пая ЗПИФа значительно выше, чем у ОПИФов или БПИФов (может составлять сотни тысяч или миллионы рублей).
4.  **Доступность для "квалов":** Большинство ЗПИФов предназначены **только для квалифицированных инвесторов**. Неквалифицированным инвесторам доступны лишь некоторые ЗПИФы (обычно на недвижимость), паи которых торгуются на бирже.
5.  **Вторичный рынок:** Иногда паи ЗПИФов могут обращаться на бирже или внебиржевом рынке. Это дает возможность выйти из фонда до его закрытия, продав пай другому инвестору. Однако ликвидность таких торгов часто низкая, и цена пая на вторичном рынке может сильно отличаться от его расчетной стоимости (СЧА).
6.  **Выплата дохода:** Некоторые ЗПИФы (особенно рентные фонды недвижимости) могут предусматривать периодическую выплату дохода пайщикам (например, от сдачи недвижимости в аренду). В других случаях весь доход реинвестируется и выплачивается только при закрытии фонда.

### Плюсы ЗПИФов:

*   **Доступ к уникальным активам:** Позволяют инвестировать в недвижимость, частные компании и другие активы, недоступные напрямую широкому кругу инвесторов.
*   **Потенциально высокая доходность:** Инвестиции в непубличные активы могут принести более высокую прибыль, чем традиционные биржевые инструменты (но и риски выше).
*   **Защита от эмоциональных решений:** Невозможность быстро продать пай удерживает инвестора от панических продаж во время рыночных спадов.

### Минусы и риски ЗПИФов:

*   **Низкая ликвидность:** Основной минус. Сложно или невозможно быстро вернуть вложенные деньги до закрытия фонда.
*   **Высокий порог входа.**
*   **Ограниченный доступ для "неквалов".**
*   **Высокие риски базовых активов:** Инвестиции в недвижимость, стартапы, непубличные компании inherently более рискованны.
*   **Сложность оценки:** Трудно оценить справедливую стоимость пая, особенно если он не торгуется на бирже.
*   **Комиссии УК:** Могут быть выше, чем у ОПИФов/БПИФов.
*   **Риск управляющей компании:** Результат сильно зависит от профессионализма УК.

### Подходят ли ЗПИФы начинающим инвесторам?

**Как правило, нет.** Из-за высокого порога входа, низкой ликвидности, сложности активов и частого требования статуса квалифицированного инвестора, ЗПИФы — это инструмент для **опытных и состоятельных инвесторов**, которые готовы "заморозить" значительную часть капитала на долгий срок и принять высокие риски ради потенциально высокой доходности от альтернативных инвестиций.

Начинающим инвесторам лучше сосредоточиться на более простых, ликвидных и доступных инструментах, таких как ОФЗ, корпоративные облигации, ОПИФы и БПИФы на акции и облигации.
`,P5=`
## Как устроена фондовая биржа?

**Фондовая биржа** — это организованный рынок, где встречаются продавцы и покупатели ценных бумаг (акций, облигаций, паев фондов и др.) и заключают сделки по установленным правилам.

### Основные функции биржи:

1.  **Организация торгов:** Предоставляет инфраструктуру (торговую систему) и устанавливает правила для проведения сделок.
2.  **Сведение заявок:** Автоматически находит встречные заявки на покупку и продажу по совпадающим ценам и заключает сделки.
3.  **Определение рыночной цены:** В результате множества сделок формируется справедливая рыночная цена на активы.
4.  **Гарантия исполнения сделок:** Через центрального контрагента (см. ниже) биржа гарантирует, что покупатель получит бумаги, а продавец — деньги.
5.  **Листинг:** Допускает ценные бумаги компаний к торгам после проверки их соответствия определенным требованиям (финансовое состояние, прозрачность и т.д.).
6.  **Раскрытие информации:** Обеспечивает доступ участников торгов к информации о котировках, объемах торгов и новостях эмитентов.
7.  **Клиринг и расчеты:** Учитывает взаимные обязательства участников по итогам сделок и организует их исполнение.

### Участники биржевых торгов:

*   **Эмитенты:** Компании или государство, выпускающие ценные бумаги для привлечения капитала.
*   **Инвесторы:** Частные лица и организации (фонды, банки, страховые компании), которые покупают и продают ценные бумаги с целью получения дохода. **Частные инвесторы торгуют не напрямую, а через посредников.**
*   **Брокеры:** Профессиональные посредники, которые исполняют заявки инвесторов на бирже. Имеют лицензию ЦБ.
*   **Депозитарии:** Организации, которые хранят ценные бумаги (в электронном виде) и учитывают права собственности на них.
*   **Регистраторы:** Ведут реестр владельцев ценных бумаг конкретного эмитента.
*   **Управляющие компании:** Управляют активами паевых фондов (ПИФов) или активами клиентов в рамках доверительного управления.
*   **Маркет-мейкеры:** Участники торгов, которые обязуются поддерживать ликвидность по определенным бумагам, постоянно выставляя заявки на покупку и продажу.
*   **Биржа:** Организатор торгов.
*   **Центральный контрагент (ЦК):** Специальная организация (в России — НКЦ, Национальный Клиринговый Центр), которая выступает посредником во всех сделках. Покупатель покупает у ЦК, а продавец продает ЦК. Это снижает риск неисполнения сделки, если одна из сторон окажется недобросовестной.
*   **Клиринговая организация:** Проводит взаимозачет требований и обязательств участников по итогам торгового дня.
*   **Регулятор:** Центральный банк (в России — Банк России), который контролирует и регулирует деятельность всех участников рынка.

### Как происходит сделка?

1.  Инвестор через торговую платформу брокера выставляет **заявку** (приказ) на покупку или продажу определенного количества бумаг по определенной цене (лимитная заявка) или по текущей рыночной цене (рыночная заявка).
2.  Заявка попадает в **"стакан"** — биржевой список всех активных заявок на покупку (бид, bid) и продажу (аск, ask) по данному активу, отсортированных по цене.
3.  **Торговая система биржи** ищет встречные заявки:
    *   Если вы выставили заявку на покупку, система ищет самую дешевую заявку на продажу.
    *   Если вы выставили заявку на продажу, система ищет самую дорогую заявку на покупку.
4.  Если находится встречная заявка с подходящей ценой, **сделка заключается** автоматически.
5.  Информация о сделке передается в **клиринговый центр** и **центральному контрагенту**.
6.  Происходит **клиринг** (взаимозачет) и **расчеты** (обычно на второй рабочий день после сделки, режим Т+2): деньги списываются со счета покупателя и зачисляются продавцу, а ценные бумаги переводятся из депозитария продавца в депозитарий покупателя.

Биржа — это сложный механизм, обеспечивающий прозрачность, надежность и ликвидность для торговли ценными бумагами.
`,j5=`
## Какие налоги платит инвестор?

Инвестируя на бирже, вы можете получать два основных вида дохода, которые облагаются налогом на доходы физических лиц (НДФЛ) в России:

1.  **Доход от продажи ценных бумаг:** Разница между ценой продажи и ценой покупки (а также сопутствующими расходами, например, комиссиями брокера).
2.  **Дивиденды и купоны:** Выплаты от компаний (дивиденды по акциям) или эмитентов облигаций (купоны).

### Ставка НДФЛ

*   **Основная ставка:** **13%** для налоговых резидентов РФ, если совокупный доход за год не превышает 5 млн рублей.
*   **Повышенная ставка:** **15%** с суммы дохода, превышающей 5 млн рублей за год.
*   **Нерезиденты РФ:** Платят **30%** с доходов от продажи бумаг и **15%** с дивидендов (если иное не предусмотрено соглашением об избежании двойного налогообложения).

### Кто платит налог?

*   **Брокер как налоговый агент:** По операциям с **российскими ценными бумагами** на счетах, открытых у **российского брокера**, брокер сам рассчитывает, удерживает и перечисляет НДФЛ в бюджет. Он делает это:
    *   При выводе денег с брокерского счета.
    *   По окончании налогового периода (календарного года).
    *   При расторжении договора с брокером.
    Брокер также удерживает налог с **дивидендов по российским акциям** в момент их зачисления на счет.
    С **купонов по большинству российских облигаций** (ОФЗ, муниципальные, корпоративные, выпущенные с 2017 года) налог удерживать не нужно (они освобождены). Исключение — купоны по облигациям, выпущенным до 2017 года, или если ставка купона превышает определенный порог (ставка ЦБ + 5%).
*   **Инвестор самостоятельно:** Вам нужно будет самостоятельно подать декларацию 3-НДФЛ и уплатить налог в следующих случаях:
    *   **Доход от продажи иностранных ценных бумаг** (даже если они куплены через российского брокера).
    *   **Дивиденды по иностранным акциям.** Брокер удержит налог по ставке страны эмитента (например, 10% в США при подписанной форме W-8BEN), а вам нужно будет доплатить разницу до 13% (или 15%) в России, подав декларацию. Если налог у источника был 15% или выше, доплачивать не нужно, но отчитаться о доходе все равно надо.
    *   **Доход получен через иностранного брокера.**
    *   В некоторых других специфических случаях.

### Налоговые вычеты и льготы для инвесторов:

*   **Индивидуальный инвестиционный счет (ИИС):** Позволяет получать налоговые вычеты:
    *   **Тип А:** Вычет на взносы (до 52 000 руб. в год). Подходит тем, у кого есть официальный доход, облагаемый НДФЛ 13%.
    *   **Тип Б:** Освобождение от налога на прибыль от сделок по истечении срока ИИС (минимум 3 года).
    *   **ИИС-3 (новый тип с 2024 г.):** Совмещает вычеты на взносы и освобождение от налога на прибыль при длительном сроке (от 5 до 10 лет, в зависимости от года открытия).
*   **Льгота на долгосрочное владение (ЛДВ):** Если вы владели ценными бумагами (допущенными к торгам на российских биржах) **более 3 лет**, то при их продаже вы освобождаетесь от НДФЛ с прибыли. Максимальная сумма необлагаемого дохода — 3 млн рублей за каждый год владения.
*   **Перенос убытков:** Убытки, полученные от операций с ценными бумагами в прошлые годы, можно перенести на будущие периоды (до 10 лет) и уменьшить на их сумму налогооблагаемую прибыль.

**Важно:** Налоговое законодательство может меняться. Всегда уточняйте актуальную информацию и при необходимости консультируйтесь с налоговыми специалистами или вашим брокером.
`,A5=`
## Во что инвестировать новичку на бирже? Что дает статус «квала» и в каких случаях придется проходить тестирование?

Начиная инвестировать, важно выбирать инструменты, соответствующие вашему уровню знаний, опыту и готовности к риску.

### Инструменты для начинающих (обычно доступны без ограничений):

1.  **Облигации Федерального Займа (ОФЗ):** Долговые бумаги Министерства финансов РФ. Считаются самым надежным инструментом на российском рынке. Риск минимален, доходность обычно немного выше банковских вкладов. Подходят для консервативных инвесторов.
2.  **Надежные корпоративные облигации:** Облигации крупных, стабильных российских компаний с высоким кредитным рейтингом. Риск чуть выше ОФЗ, доходность тоже.
3.  **Паи Биржевых Паевых Инвестиционных Фондов (БПИФ) и ETF (на российские активы):** Покупая пай фонда, вы сразу инвестируете в готовую корзину активов (например, акции крупнейших российских компаний — индекс МосБиржи, или облигации). Это обеспечивает **диверсификацию** (снижение риска за счет распределения вложений) и не требует самостоятельного выбора отдельных бумаг. Обращайте внимание на комиссию фонда.
4.  **Акции "голубых фишек":** Акции самых крупных, известных и ликвидных российских компаний (например, Сбербанк, Газпром, Лукойл). Они менее волатильны, чем акции небольших компаний, но все равно несут рыночный риск.

### Инструменты, требующие тестирования или статуса "квала":

С 1 октября 2021 года Банк России ввел **обязательное тестирование** для неквалифицированных инвесторов перед допуском к некоторым сложным или рискованным инструментам. Цель — убедиться, что инвестор понимает особенности и риски продукта.

**Тестирование обычно требуется для:**

*   **Маржинальная торговля:** Сделки с кредитным плечом (необеспеченные сделки).
*   **Производные финансовые инструменты (ПФИ):** Фьючерсы, опционы.
*   **Структурные облигации.**
*   **Облигации со структурным доходом.**
*   **Акции иностранных компаний, не входящих в ведущие мировые индексы.**
*   **Иностранные ETF.**
*   **Паи Закрытых ПИФов (ЗПИФ).**
*   **Облигации российских компаний с низким кредитным рейтингом (или без него).**
*   **Договоры РЕПО.**

Тестирование проводится **бесплатно** у вашего брокера (обычно онлайн). Количество попыток не ограничено. Вопросы проверяют понимание основных характеристик и рисков инструмента.

### Статус квалифицированного инвестора ("квал")

**Квалифицированный инвестор** — это инвестор, обладающий достаточными знаниями, опытом или финансовыми ресурсами, которому доступны **все** инструменты на рынке без необходимости проходить тестирование.

**Как получить статус "квала" (нужно соответствовать ОДНОМУ из условий):**

1.  **Активы:** Владеть ценными бумагами и/или деньгами на счетах у брокеров/банков на сумму **не менее 6 млн рублей**.
2.  **Опыт работы:** Иметь опыт работы в организации, совершавшей сделки с ценными бумагами (не менее 2 лет, если она сама "квал", или 3 года в ином случае).
3.  **Образование:** Иметь высшее экономическое образование в ВУЗе, который мог аттестовывать в сфере проф. деятельности на рынке ценных бумаг, ИЛИ квалификационный аттестат специалиста финансового рынка (ФСФР/ЦБ), CFA, CIIA, FRM.
4.  **Оборот сделок:** Совершить за последние 4 квартала сделки с ценными бумагами на сумму **не менее 6 млн рублей**, при этом не менее 10 сделок в квартал и не реже 1 сделки в месяц.

Статус присваивается брокером по вашему заявлению и предоставленным подтверждающим документам.

**Нужен ли статус "квала" новичку?**

**Нет.** Большинству начинающих инвесторов доступны все необходимые инструменты (ОФЗ, надежные облигации, БПИФы на индекс МосБиржи, акции "голубых фишек") **без** статуса "квала" и без тестирования (кроме акций). Статус "квала" нужен для доступа к более сложным, рискованным или иностранным инструментам.

**Рекомендация новичку:** Начните с простых и понятных инструментов (ОФЗ, БПИФы на индекс). Постепенно изучайте рынок. Если захотите использовать более сложные инструменты, пройдите тестирование у брокера. Не гонитесь за статусом "квала", если не понимаете, зачем он вам нужен.
`,M5=`
## Что такое ИИС-3?

**ИИС-3 (Индивидуальный инвестиционный счет третьего типа)** — это новый тип ИИС, введенный в России с 1 января 2024 года. Он пришел на смену старым типам ИИС (Тип А и Тип Б), открытие которых стало невозможным с 2024 года (но ранее открытые продолжают действовать на прежних условиях).

### Ключевые особенности ИИС-3:

1.  **Объединение вычетов:** ИИС-3 сочетает в себе преимущества старых типов:
    *   **Налоговый вычет на взносы:** Как у ИИС типа А. Можно вернуть 13% (или 15%) от суммы, внесенной на ИИС за год, но не более чем с 400 000 рублей (т.е. максимальный возврат — 52 000 или 60 000 рублей в год). Вычет можно получать ежегодно. Условие: наличие официального дохода, облагаемого НДФЛ по ставке 13%/15%.
    *   **Освобождение от НДФЛ на доход:** Как у ИИС типа Б. Весь финансовый результат (прибыль от продажи ценных бумаг, купоны) освобождается от налога при закрытии счета по истечении минимального срока.
2.  **Минимальный срок владения:** Это главное отличие. Чтобы получить налоговые льготы, ИИС-3 нужно держать **минимум 10 лет**. Однако предусмотрен **переходный период:**
    *   Для счетов, открытых в 2024-2026 гг. — минимальный срок **5 лет**.
    *   Далее срок будет постепенно увеличиваться на 1 год ежегодно, пока не достигнет 10 лет в 2031 году.
3.  **Количество счетов:** Можно иметь **до трех** счетов ИИС-3 одновременно у разных брокеров/УК. Старые ИИС (А или Б) также учитываются, т.е. если у вас уже есть старый ИИС, вы можете открыть еще два ИИС-3. **Важно:** Налоговый вычет на взносы (52/60 тыс. руб.) предоставляется **суммарно по всем ИИС**, а не на каждый счет отдельно.
4.  **Сумма взносов:** Вносить на ИИС-3 можно **любую сумму** (в отличие от старых ИИС, где был лимит 1 млн руб. в год). Однако вычет на взносы по-прежнему ограничен суммой 400 000 руб. в год.
5.  **Вывод средств:** Вывести деньги с ИИС-3 без потери льгот и закрытия счета можно только в **особых жизненных ситуациях** (например, для оплаты дорогостоящего лечения), перечень которых должно определить Правительство РФ. В остальных случаях досрочный вывод средств ведет к потере права на все налоговые льготы (придется вернуть полученные вычеты и уплатить налог с дохода).
6.  **Трансформация старых ИИС:** Владельцы старых ИИС (А или Б), открытых до 31 декабря 2023 года, могут:
    *   Продолжать пользоваться ими на прежних условиях до истечения 3-летнего срока (или дольше).
    *   Трансформировать свой старый ИИС в ИИС-3. При этом срок владения старым ИИС (но не более 3 лет) зачтется в минимальный срок владения ИИС-3.

### Плюсы ИИС-3:

*   Сочетание двух типов налоговых льгот.
*   Возможность иметь до трех счетов.
*   Отсутствие лимита на годовые взносы (хотя вычет ограничен).

### Минусы ИИС-3:

*   **Длительный минимальный срок владения (5-10 лет):** Основной недостаток. Деньги "замораживаются" на долгий срок для получения льгот.
*   Ограничения на вывод средств без потери льгот.

**Вывод:** ИИС-3 — это инструмент для **долгосрочных** инвесторов, которые готовы вкладывать деньги на 5-10 лет и более, и хотят получить максимальные налоговые льготы. Если вам может потребоваться доступ к деньгам раньше, возможно, стоит рассмотреть обычный брокерский счет (с ЛДВ) или пока не трансформировать старый ИИС (если он есть).
`,R5=`
## Как продать заблокированные активы?

С 2022 года многие российские инвесторы столкнулись с блокировкой части своих **иностранных ценных бумаг** (акций, ETF, депозитарных расписок), купленных через российских брокеров. Это произошло из-за санкций, нарушивших связь между российскими и иностранными депозитариями (НРД, Euroclear, Clearstream).

**Что значит "заблокированные"?** Эти бумаги по-прежнему принадлежат вам, но вы не можете ими торговать (продать на бирже) или получать по ним выплаты (дивиденды, купоны), так как инфраструктура для этого нарушена.

### Способы продажи (или обмена) заблокированных активов:

1.  **Указ Президента № 844 (Обмен активами):**
    *   **Суть:** Позволяет российским инвесторам продать заблокированные иностранные бумаги нерезидентам, которые хотят купить российские активы на свои средства со счетов типа "С".
    *   **Организатор:** Брокер "Инвестиционная палата".
    *   **Лимит:** Каждый инвестор мог подать заявку на продажу активов на сумму **не более 100 000 рублей**.
    *   **Статус:** Сбор заявок от инвесторов завершился 8 мая 2024 года. Сейчас идет этап сбора заявок от нерезидентов (до 5 июля 2024) и определения единой цены выкупа для каждого актива. Расчеты ожидаются до 1 сентября 2024 года. **Новые заявки от россиян уже не принимаются.**
    *   **Что делать:** Если вы подавали заявку, следите за информацией от вашего брокера и организатора торгов.

2.  **Конвертация депозитарных расписок (ГДР/АДР) российских компаний:**
    *   **Суть:** Российские компании, чьи расписки торговались за рубежом, обязаны были провести их конвертацию в обыкновенные акции, торгующиеся на МосБирже.
    *   **Статус:** Основная волна конвертаций прошла в 2022-2023 годах. Большинство брокеров автоматически или по заявлению клиента провели эту процедуру.
    *   **Что делать:** Проверьте свой брокерский отчет. Если у вас были ГДР/АДР российских компаний (Сбер, Газпром, Лукойл и др.), они должны были замениться на соответствующие акции. Если этого не произошло, срочно свяжитесь с брокером.

3.  **Перевод активов к другому брокеру (не под санкциями):**
    *   **Суть:** Если ваш брокер попал под блокирующие санкции (Сбер, ВТБ, Альфа и др.), он обычно предлагал (или предлагает) перевести иностранные активы к другому российскому брокеру, не находящемуся под такими санкциями.
    *   **Статус:** Актуально, если вы еще не перевели активы.
    *   **Что делать:** Свяжитесь с вашим санкционным брокером и уточните процедуру и возможных брокеров-партнеров для перевода. **Важно:** Сам по себе перевод не гарантирует разблокировки, если бумаги учитывались через НРД/Euroclear, но может упростить участие в будущих схемах обмена или получение выплат, если они возобновятся.

4.  **Индивидуальные лицензии (для крупных инвесторов):**
    *   **Суть:** Получение разрешения от европейских регуляторов (например, Минфина Бельгии, где находится Euroclear) на разблокировку и перевод активов.
    *   **Статус:** Сложный, дорогой и долгий процесс, актуальный в основном для инвесторов с очень крупными портфелями заблокированных активов (миллионы долларов/евро). Требует привлечения юристов.

5.  **Ожидание системного решения:**
    *   **Суть:** Надежда на то, что в будущем будет найдено общее решение на уровне регуляторов или через новые механизмы обмена для разблокировки активов всех инвесторов.
    *   **Статус:** Перспективы туманны и зависят от геополитической ситуации.

**Что НЕЛЬЗЯ сделать сейчас (в большинстве случаев):**

*   Продать заблокированные иностранные акции на МосБирже или СПБ Бирже.
*   Перевести их к иностранному брокеру напрямую.
*   Получить по ним дивиденды или купоны (они "зависают" в иностранной инфраструктуре).

**Рекомендация:** Следите за новостями от вашего брокера и Банка России. Если вы участвовали в обмене по Указу № 844, ждите результатов. Если ваши активы у санкционного брокера, рассмотрите возможность перевода к несанкционному.
`,I5=`
## Брокер или доверительный управляющий оказались под санкциями: что делать?

Если ваш российский брокер или управляющая компания (УК), через которую вы инвестировали (например, в ПИФы или ДУ), попали под блокирующие санкции США, ЕС или Великобритании, это может повлиять на ваши инвестиции, особенно в иностранные активы.

### Возможные последствия санкций:

*   **Блокировка иностранных активов:** Наиболее частое последствие. Из-за разрыва связей с иностранными депозитариями (Euroclear/Clearstream) вы теряете возможность торговать иностранными акциями, ETF, еврооблигациями и получать по ним выплаты. Сами активы остаются вашими, но "заморожены".
*   **Ограничения на операции с валютой:** Могут возникнуть сложности с покупкой/продажей/выводом долларов США, евро и других "недружественных" валют.
*   **Проблемы с доступом к торговым платформам:** В редких случаях возможны временные сбои в работе приложений или терминалов.
*   **Принудительный перевод активов:** Брокер/УК может инициировать перевод ваших активов (особенно иностранных) к другому участнику рынка, не находящемуся под санкциями.

### Что делать инвестору?

1.  **Не паниковать:** Санкции против брокера не означают потерю ваших активов. Ваши ценные бумаги хранятся в депозитарии, а деньги на специальных счетах, отдельно от средств брокера.
2.  **Следить за информацией от брокера/УК:** Они обязаны информировать клиентов о последствиях санкций и дальнейших действиях. Проверяйте сообщения в приложении, на сайте, по email.
3.  **Оценить состав портфеля:**
    *   **Российские активы (акции РФ, ОФЗ, рублевые корп. облигации):** Как правило, санкции на них напрямую не влияют. Вы можете продолжать ими торговать на МосБирже через этого же брокера (если он сохраняет доступ к торгам) или перевести их к другому брокеру при желании.
    *   **Иностранные активы:** Если они заблокированы, см. рекомендации по продаже/обмену заблокированных активов. Если они *не* заблокированы (например, учитывались не через НРД), уточните у брокера возможность их продажи или перевода.
    *   **Валюта:** Уточните у брокера лимиты и комиссии на операции с "недружественными" валютами. Возможно, имеет смысл перевести ее на банковский счет или конвертировать в рубли или "дружественные" валюты (юань).
4.  **Перевод активов (если предлагается/необходимо):**
    *   **Иностранные ценные бумаги:** Если брокер предлагает перевод к несанкционному партнеру, **обычно стоит соглашаться**. Это не гарантирует разблокировку, но может упростить дальнейшие действия. Внимательно изучите условия перевода (сроки, комиссии, брокер-получатель).
    *   **Российские ценные бумаги и рубли:** Вы можете перевести их к любому другому российскому брокеру по стандартной процедуре (подача поручений у обоих брокеров), если вас не устраивает работа с санкционным брокером.
5.  **ПИФы под управлением санкционной УК:**
    *   **Открытые ПИФы (ОПИФы):** Если фонд инвестировал в российские активы, санкции на УК обычно не влияют на возможность купить/продать паи. Если фонд инвестировал в иностранные активы, они могут быть заблокированы внутри фонда, что отразится на стоимости пая и возможности его погашения. Следите за информацией от УК.
    *   **Биржевые ПИФы (БПИФы):** Аналогично ОПИФам. Если базовые активы заблокированы, торги паями на бирже могут быть приостановлены или цена пая будет нерелевантной.
    *   **Закрытые ПИФы (ЗПИФы):** Уточняйте информацию у УК.
6.  **Доверительное управление (ДУ) у санкционной УК:** Свяжитесь с управляющей компанией и уточните статус ваших активов и дальнейшие действия в соответствии с вашим договором ДУ.

**Главное:** Взаимодействуйте с вашим брокером/УК, читайте их официальные сообщения и следуйте инструкциям. При необходимости обращайтесь в их службу поддержки.
`,O5=[{id:"stocks",title:"Акции",isActive:!0,articles:[{id:"what-are-stocks",title:"Что такое акции и как на них заработать?",url:"https://fincult.info/article/chto-takoe-aktsii-i-kak-na-nikh-zarabotat/",content:y5},{id:"find-lost-stocks",title:"Как найти потерянные акции?",url:"https://fincult.info/article/kak-nayti-poteryannye-aktsii/",content:x5},{id:"depository-receipts",title:"Зачем нужны депозитарные расписки?",url:"https://fincult.info/article/zachem-nuzhny-depozitarnye-raspiski/",content:w5},{id:"margin-trading",title:"Что такое маржинальная торговля и в чем ее риски?",url:"https://fincult.info/article/chto-takoe-marzhinalnaya-torgovlya-i-v-chem-ee-riski/",content:b5}]},{id:"bonds",title:"Облигации",isActive:!0,articles:[{id:"what-are-bonds",title:"Облигации: что это такое и как на них заработать?",url:"https://fincult.info/article/obligatsii-chto-eto-takoe-i-kak-na-nikh-zarabotat/",content:S5}]},{id:"brokers-and-management",title:"Брокеры и управление",isActive:!0,articles:[{id:"choose-broker",title:"Брокер: как его выбрать и как с ним работать?",url:"https://fincult.info/article/broker-kak-ego-vybrat-i-kak-s-nim-rabotat/",content:k5},{id:"trust-management",title:"Что такое доверительное управление и зачем оно начинающему инвестору?",url:"https://fincult.info/article/chto-takoe-doveritelnoe-upravlenie-i-zachem-ono-nachinayushchemu-investoru/",content:C5},{id:"investment-advisor",title:"Зачем нужен инвестиционный советник и как его выбрать?",url:"https://fincult.info/article/zachem-nuzhen-investitsionnyy-sovetnik-i-kak-ego-vybrat/",content:E5}]},{id:"funds",title:"Фонды (ПИФы, БПИФы, ETF)",isActive:!0,articles:[{id:"mutual-funds",title:"Паевые фонды (ПИФы): как они работают и как на них заработать?",url:"https://fincult.info/article/paevye-fondy-kak-oni-rabotayut-i-kak-na-nikh-zarabotat/",content:_5},{id:"etfs",title:"Биржевые фонды (БПИФы, ETF): что это и стоит ли вкладывать?",url:"https://fincult.info/article/birzhevye-fondy-ili-etf-chto-eto-i-stoit-li-vkladyvat-v-nikh-dengi/",content:N5},{id:"closed-end-funds",title:"Закрытые паевые фонды (ЗПИФы): в чем их особенности?",url:"https://fincult.info/article/zakrytye-paevye-fondy-v-chem-ikh-osobennosti-i-podkhodyat-li-oni-nachinayushchim-investoram/",content:T5}]},{id:"general-investing",title:"Общие вопросы инвестирования",isActive:!0,articles:[{id:"stock-exchange",title:"Как устроена фондовая биржа?",url:"https://fincult.info/article/kak-ustroena-fondovaya-birzha/",content:P5},{id:"investor-taxes",title:"Какие налоги платит инвестор?",url:"https://fincult.info/article/kakie-nalogi-platit-investor/",content:j5},{id:"newbie-investing",title:"Во что инвестировать новичку на бирже? Что дает статус «квала»?",url:"https://fincult.info/article/vo-chto-investirovat-novichku-na-birzhe-chto-daet-status-kvala-i-v-kakikh-sluchayakh-pridetsya-prokh/",content:A5},{id:"iis-3",title:"Что такое ИИС-3?",url:"https://fincult.info/article/chto-takoe-iis-3/",content:M5}]},{id:"sanctions",title:"Санкции и блокировки",isActive:!0,articles:[{id:"sell-blocked-assets",title:"Как продать заблокированные активы?",url:"https://fincult.info/article/kak-prodat-zablokirovannye-aktivy/",content:R5},{id:"broker-sanctions",title:"Брокер или доверительный управляющий оказались под санкциями: что делать?",url:"https://fincult.info/article/broker-ili-doveritelnyy-upravlyayushchiy-okazalis-pod-sanktsiyami-chto-delat/",content:I5}]}],Jp=t=>`${t}-${Date.now()}-${Math.random().toString(36).substring(2,7)}`,L5=O5.map(t=>({...t,isActive:t.isActive??!0,articles:t.articles.map(e=>({...e,id:e.id||Jp(`art-${t.id}`)}))})),Zt=_i()(ba((t,e)=>({categories:L5,setCategories:n=>t({categories:n}),addCategory:n=>{const r=n.trim();if(!r)return null;const i=Jp("cat"),s={id:i,title:r,articles:[],isActive:!0};return t(o=>({categories:[...o.categories,s]})),console.log(`[FaqStore] Added category: ${i} - ${r}`),i},deleteCategory:n=>t(r=>({categories:r.categories.filter(i=>i.id!==n)})),updateCategoryTitle:(n,r)=>{const i=r.trim();i&&t(s=>({categories:s.categories.map(o=>o.id===n?{...o,title:i}:o)}))},toggleCategoryActive:n=>t(r=>({categories:r.categories.map(i=>i.id===n?{...i,isActive:!(i.isActive??!0)}:i)})),addArticle:(n,r,i="")=>{const s=r.trim();if(!s)return null;const o=Jp(`art-${n}`),l={id:o,title:s,content:i,url:""};let a=!1;return t(c=>({categories:c.categories.map(u=>u.id===n?(a=!0,{...u,articles:[...u.articles,l]}):u)})),a?(console.log(`[FaqStore] Added article ${o} to category ${n}`),o):(console.error(`[FaqStore] Category ${n} not found when trying to add article.`),null)},deleteArticle:(n,r)=>t(i=>({categories:i.categories.map(s=>s.id===n?{...s,articles:s.articles.filter(o=>o.id!==r)}:s)})),updateArticle:(n,r,i)=>{const s={...i};if(delete s.id,delete s.url,Object.keys(s).length===0){console.log(`[FaqStore] No valid updates provided for article ${r}.`);return}t(o=>({categories:o.categories.map(l=>l.id===n?{...l,articles:l.articles.map(a=>a.id===r?{...a,...s}:a)}:l)})),console.log(`[FaqStore] Updated article ${r} in category ${n} with:`,s)},getCategoryById:n=>e().categories.find(r=>r.id===n),getArticleByIds:(n,r)=>{const i=e().getCategoryById(n);return i==null?void 0:i.articles.find(s=>s.id===r)}}),{name:"faq-storage",storage:Po(()=>localStorage),onRehydrateStorage:()=>t=>{console.log("[FaqStore] Hydration finished.")}}));console.log("[FaqStore] Initialized with data:",Zt.getState().categories);const z5=()=>{const t=ft(),{tg:e}=Dn(),n=Zt(s=>s.categories);y.useEffect(()=>{const s=()=>t("/profile");return e&&(e.BackButton.show(),e.onEvent("backButtonClicked",s),console.log("[FaqPage] Telegram BackButton shown and handler attached.")),()=>{e&&(e.BackButton.hide(),e.offEvent("backButtonClicked",s),console.log("[FaqPage] Telegram BackButton hidden and handler removed."))}},[e,t]);const r=s=>{t(`/faq/${s}`)},i=n.filter(s=>s.isActive??!0);return d.jsxs("div",{className:"p-4 space-y-4 pb-4 flex flex-col h-full",children:[d.jsxs("div",{className:"relative flex items-center justify-center h-12 mb-2 flex-shrink-0",children:[d.jsx(ce,{variant:"ghost",size:"icon",className:"absolute left-0 top-1/2 -translate-y-1/2 text-foreground/80 h-9 w-9 z-10",onClick:()=>t("/profile"),children:d.jsx(Et,{className:"h-5 w-5"})}),d.jsx("h1",{className:"text-lg font-semibold text-center",children:"Часто задаваемые вопросы"}),d.jsx("div",{className:"h-9 w-9 absolute right-0"})," "]}),d.jsx(Nt,{className:"flex-grow shadow-sm border rounded-lg overflow-hidden flex flex-col",children:d.jsx(mn,{className:"p-0 flex-grow overflow-y-auto no-scrollbar",children:d.jsx("div",{className:"divide-y divide-border/60",children:i.length>0?i.map(s=>d.jsxs("button",{onClick:()=>r(s.id),className:H("flex items-center w-full text-left p-4 transition-colors","hover:bg-muted/50 active:bg-muted/80 cursor-pointer"),children:[d.jsx("span",{className:"text-base flex-grow",children:s.title}),d.jsx(gk,{className:"h-5 w-5 flex-shrink-0 text-muted-foreground"})]},s.id)):d.jsx("p",{className:"p-6 text-center text-muted-foreground",children:"Нет доступных категорий."})})})})]})},D5=()=>{const{categoryId:t}=ms(),e=ft(),{tg:n}=Dn(),{getCategoryById:r}=Zt(),i=Zt.persist.hasHydrated(),s=y.useMemo(()=>{if(!(!i||!t))return console.log(`[FaqCategoryPage] Store hydrated, getting category: ${t}`),r(t)},[t,r,i]);y.useEffect(()=>{const l=()=>e("/faq");return n&&(n.BackButton.show(),n.onEvent("backButtonClicked",l),console.log("[FaqCategoryPage] Telegram BackButton shown and handler attached.")),()=>{n&&(n.BackButton.hide(),n.offEvent("backButtonClicked",l),console.log("[FaqCategoryPage] Telegram BackButton hidden and handler removed."))}},[n,e]);const o=l=>{console.log("[FaqCategoryPage handleArticleClick] Clicked article:",l),l.content||l.id?(console.log("[FaqCategoryPage handleArticleClick] Navigating internally..."),e(`/faq/${t}/${l.id}`)):console.error("[FaqCategoryPage handleArticleClick] Article has no content or id!",l)};if(!i)return d.jsx("div",{className:"flex items-center justify-center h-screen",children:d.jsx(Ne,{size:"lg"})});if(!s||!(s.isActive??!0)){const l=s?`Категория "${s.title}" временно недоступна.`:`Категория FAQ "${t}" не найдена.`;return d.jsxs("div",{className:"p-4 text-center",children:[d.jsx(xt,{message:l}),d.jsxs(ce,{variant:"outline",onClick:()=>e("/faq"),className:"mt-4",children:[d.jsx(Et,{className:"mr-2 h-4 w-4"})," К списку категорий"]})]})}return d.jsxs("div",{className:"p-4 space-y-4 pb-4 flex flex-col h-full",children:[d.jsxs("div",{className:"relative flex items-center justify-center h-12 mb-2 flex-shrink-0",children:[d.jsx(ce,{variant:"ghost",size:"icon",className:"absolute left-0 top-1/2 -translate-y-1/2 text-foreground/80 h-9 w-9 z-10",onClick:()=>e("/faq"),children:d.jsx(Et,{className:"h-5 w-5"})}),d.jsx("h1",{className:"text-lg font-semibold text-center truncate max-w-[calc(100%-5rem)]",title:s.title,children:s.title}),d.jsx("div",{className:"h-9 w-9 absolute right-0"})]}),d.jsx(Nt,{className:"flex-grow shadow-sm border rounded-lg overflow-hidden flex flex-col",children:d.jsx(mn,{className:"p-0 flex-grow overflow-y-auto no-scrollbar",children:d.jsx("div",{className:"divide-y divide-border/60",children:s.articles.length>0?s.articles.map(l=>d.jsxs("button",{onClick:()=>o(l),className:H("flex items-center w-full text-left p-4 transition-colors","hover:bg-muted/50 active:bg-muted/80 cursor-pointer"),children:[d.jsx("span",{className:"text-base flex-grow mr-2",children:l.title}),d.jsx(CO,{className:"h-4 w-4 flex-shrink-0 text-muted-foreground"})]},l.id)):d.jsx("p",{className:"p-6 text-center text-muted-foreground",children:"В этой категории пока нет статей."})})})})]})};function $5(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const F5=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,B5=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,V5={};function X0(t,e){return(V5.jsx?B5:F5).test(t)}const U5=/[ \t\n\f\r]/g;function W5(t){return typeof t=="object"?t.type==="text"?Q0(t.value):!1:Q0(t)}function Q0(t){return t.replace(U5,"")===""}class ja{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}ja.prototype.normal={};ja.prototype.property={};ja.prototype.space=void 0;function jN(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new ja(n,r,e)}function em(t){return t.toLowerCase()}class Wt{constructor(e,n){this.attribute=n,this.property=e}}Wt.prototype.attribute="";Wt.prototype.booleanish=!1;Wt.prototype.boolean=!1;Wt.prototype.commaOrSpaceSeparated=!1;Wt.prototype.commaSeparated=!1;Wt.prototype.defined=!1;Wt.prototype.mustUseProperty=!1;Wt.prototype.number=!1;Wt.prototype.overloadedBoolean=!1;Wt.prototype.property="";Wt.prototype.spaceSeparated=!1;Wt.prototype.space=void 0;let H5=0;const me=gs(),et=gs(),AN=gs(),G=gs(),Oe=gs(),io=gs(),qt=gs();function gs(){return 2**++H5}const tm=Object.freeze(Object.defineProperty({__proto__:null,boolean:me,booleanish:et,commaOrSpaceSeparated:qt,commaSeparated:io,number:G,overloadedBoolean:AN,spaceSeparated:Oe},Symbol.toStringTag,{value:"Module"})),uf=Object.keys(tm);class pv extends Wt{constructor(e,n,r,i){let s=-1;if(super(e,n),J0(this,"space",i),typeof r=="number")for(;++s<uf.length;){const o=uf[s];J0(this,uf[s],(r&tm[o])===tm[o])}}}pv.prototype.defined=!0;function J0(t,e,n){n&&(t[e]=n)}function Io(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new pv(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[em(r)]=r,n[em(s.attribute)]=r}return new ja(e,n,t.space)}const MN=Io({properties:{ariaActiveDescendant:null,ariaAtomic:et,ariaAutoComplete:null,ariaBusy:et,ariaChecked:et,ariaColCount:G,ariaColIndex:G,ariaColSpan:G,ariaControls:Oe,ariaCurrent:null,ariaDescribedBy:Oe,ariaDetails:null,ariaDisabled:et,ariaDropEffect:Oe,ariaErrorMessage:null,ariaExpanded:et,ariaFlowTo:Oe,ariaGrabbed:et,ariaHasPopup:null,ariaHidden:et,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Oe,ariaLevel:G,ariaLive:null,ariaModal:et,ariaMultiLine:et,ariaMultiSelectable:et,ariaOrientation:null,ariaOwns:Oe,ariaPlaceholder:null,ariaPosInSet:G,ariaPressed:et,ariaReadOnly:et,ariaRelevant:null,ariaRequired:et,ariaRoleDescription:Oe,ariaRowCount:G,ariaRowIndex:G,ariaRowSpan:G,ariaSelected:et,ariaSetSize:G,ariaSort:null,ariaValueMax:G,ariaValueMin:G,ariaValueNow:G,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function RN(t,e){return e in t?t[e]:e}function IN(t,e){return RN(t,e.toLowerCase())}const q5=Io({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:io,acceptCharset:Oe,accessKey:Oe,action:null,allow:null,allowFullScreen:me,allowPaymentRequest:me,allowUserMedia:me,alt:null,as:null,async:me,autoCapitalize:null,autoComplete:Oe,autoFocus:me,autoPlay:me,blocking:Oe,capture:null,charSet:null,checked:me,cite:null,className:Oe,cols:G,colSpan:null,content:null,contentEditable:et,controls:me,controlsList:Oe,coords:G|io,crossOrigin:null,data:null,dateTime:null,decoding:null,default:me,defer:me,dir:null,dirName:null,disabled:me,download:AN,draggable:et,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:me,formTarget:null,headers:Oe,height:G,hidden:me,high:G,href:null,hrefLang:null,htmlFor:Oe,httpEquiv:Oe,id:null,imageSizes:null,imageSrcSet:null,inert:me,inputMode:null,integrity:null,is:null,isMap:me,itemId:null,itemProp:Oe,itemRef:Oe,itemScope:me,itemType:Oe,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:me,low:G,manifest:null,max:null,maxLength:G,media:null,method:null,min:null,minLength:G,multiple:me,muted:me,name:null,nonce:null,noModule:me,noValidate:me,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:me,optimum:G,pattern:null,ping:Oe,placeholder:null,playsInline:me,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:me,referrerPolicy:null,rel:Oe,required:me,reversed:me,rows:G,rowSpan:G,sandbox:Oe,scope:null,scoped:me,seamless:me,selected:me,shadowRootClonable:me,shadowRootDelegatesFocus:me,shadowRootMode:null,shape:null,size:G,sizes:null,slot:null,span:G,spellCheck:et,src:null,srcDoc:null,srcLang:null,srcSet:null,start:G,step:null,style:null,tabIndex:G,target:null,title:null,translate:null,type:null,typeMustMatch:me,useMap:null,value:et,width:G,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Oe,axis:null,background:null,bgColor:null,border:G,borderColor:null,bottomMargin:G,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:me,declare:me,event:null,face:null,frame:null,frameBorder:null,hSpace:G,leftMargin:G,link:null,longDesc:null,lowSrc:null,marginHeight:G,marginWidth:G,noResize:me,noHref:me,noShade:me,noWrap:me,object:null,profile:null,prompt:null,rev:null,rightMargin:G,rules:null,scheme:null,scrolling:et,standby:null,summary:null,text:null,topMargin:G,valueType:null,version:null,vAlign:null,vLink:null,vSpace:G,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:me,disableRemotePlayback:me,prefix:null,property:null,results:G,security:null,unselectable:null},space:"html",transform:IN}),K5=Io({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:qt,accentHeight:G,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:G,amplitude:G,arabicForm:null,ascent:G,attributeName:null,attributeType:null,azimuth:G,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:G,by:null,calcMode:null,capHeight:G,className:Oe,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:G,diffuseConstant:G,direction:null,display:null,dur:null,divisor:G,dominantBaseline:null,download:me,dx:null,dy:null,edgeMode:null,editable:null,elevation:G,enableBackground:null,end:null,event:null,exponent:G,externalResourcesRequired:null,fill:null,fillOpacity:G,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:io,g2:io,glyphName:io,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:G,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:G,horizOriginX:G,horizOriginY:G,id:null,ideographic:G,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:G,k:G,k1:G,k2:G,k3:G,k4:G,kernelMatrix:qt,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:G,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:G,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:G,overlineThickness:G,paintOrder:null,panose1:null,path:null,pathLength:G,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Oe,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:G,pointsAtY:G,pointsAtZ:G,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:qt,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:qt,rev:qt,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:qt,requiredFeatures:qt,requiredFonts:qt,requiredFormats:qt,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:G,specularExponent:G,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:G,strikethroughThickness:G,string:null,stroke:null,strokeDashArray:qt,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:G,strokeOpacity:G,strokeWidth:null,style:null,surfaceScale:G,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:qt,tabIndex:G,tableValues:null,target:null,targetX:G,targetY:G,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:qt,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:G,underlineThickness:G,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:G,values:null,vAlphabetic:G,vMathematical:G,vectorEffect:null,vHanging:G,vIdeographic:G,version:null,vertAdvY:G,vertOriginX:G,vertOriginY:G,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:G,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:RN}),ON=Io({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),LN=Io({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:IN}),zN=Io({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),Y5={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},G5=/[A-Z]/g,ew=/-[a-z]/g,Z5=/^data[-\w.:]+$/i;function X5(t,e){const n=em(e);let r=e,i=Wt;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Z5.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(ew,J5);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!ew.test(s)){let o=s.replace(G5,Q5);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=pv}return new i(r,e)}function Q5(t){return"-"+t.toLowerCase()}function J5(t){return t.charAt(1).toUpperCase()}const eV=jN([MN,q5,ON,LN,zN],"html"),mv=jN([MN,K5,ON,LN,zN],"svg");function tV(t){return t.join(" ").trim()}var gv={},tw=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,nV=/\n/g,rV=/^\s*/,iV=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,sV=/^:\s*/,oV=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,lV=/^[;\s]*/,aV=/^\s+|\s+$/g,cV=`
`,nw="/",rw="*",zi="",uV="comment",dV="declaration",hV=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function i(g){var m=g.match(nV);m&&(n+=m.length);var w=g.lastIndexOf(cV);r=~w?g.length-w:r+g.length}function s(){var g={line:n,column:r};return function(m){return m.position=new o(g),c(),m}}function o(g){this.start=g,this.end={line:n,column:r},this.source=e.source}o.prototype.content=t;function l(g){var m=new Error(e.source+":"+n+":"+r+": "+g);if(m.reason=g,m.filename=e.source,m.line=n,m.column=r,m.source=t,!e.silent)throw m}function a(g){var m=g.exec(t);if(m){var w=m[0];return i(w),t=t.slice(w.length),m}}function c(){a(rV)}function u(g){var m;for(g=g||[];m=h();)m!==!1&&g.push(m);return g}function h(){var g=s();if(!(nw!=t.charAt(0)||rw!=t.charAt(1))){for(var m=2;zi!=t.charAt(m)&&(rw!=t.charAt(m)||nw!=t.charAt(m+1));)++m;if(m+=2,zi===t.charAt(m-1))return l("End of comment missing");var w=t.slice(2,m-2);return r+=2,i(w),t=t.slice(m),r+=2,g({type:uV,comment:w})}}function f(){var g=s(),m=a(iV);if(m){if(h(),!a(sV))return l("property missing ':'");var w=a(oV),v=g({type:dV,property:iw(m[0].replace(tw,zi)),value:w?iw(w[0].replace(tw,zi)):zi});return a(lV),v}}function p(){var g=[];u(g);for(var m;m=f();)m!==!1&&(g.push(m),u(g));return g}return c(),p()};function iw(t){return t?t.replace(aV,zi):zi}var fV=tr&&tr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gv,"__esModule",{value:!0});gv.default=mV;var pV=fV(hV);function mV(t,e){var n=null;if(!t||typeof t!="string")return n;var r=(0,pV.default)(t),i=typeof e=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,l=s.value;i?e(o,l,s):l&&(n=n||{},n[o]=l)}}),n}var Hd={};Object.defineProperty(Hd,"__esModule",{value:!0});Hd.camelCase=void 0;var gV=/^--[a-zA-Z0-9_-]+$/,vV=/-([a-z])/g,yV=/^[^-]+$/,xV=/^-(webkit|moz|ms|o|khtml)-/,wV=/^-(ms)-/,bV=function(t){return!t||yV.test(t)||gV.test(t)},SV=function(t,e){return e.toUpperCase()},sw=function(t,e){return"".concat(e,"-")},kV=function(t,e){return e===void 0&&(e={}),bV(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(wV,sw):t=t.replace(xV,sw),t.replace(vV,SV))};Hd.camelCase=kV;var CV=tr&&tr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},EV=CV(gv),_V=Hd;function nm(t,e){var n={};return!t||typeof t!="string"||(0,EV.default)(t,function(r,i){r&&i&&(n[(0,_V.camelCase)(r,e)]=i)}),n}nm.default=nm;var NV=nm;const TV=lr(NV),DN=$N("end"),vv=$N("start");function $N(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function PV(t){const e=vv(t),n=DN(t);if(e&&n)return{start:e,end:n}}function kl(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?ow(t.position):"start"in t||"end"in t?ow(t):"line"in t||"column"in t?rm(t):""}function rm(t){return lw(t&&t.line)+":"+lw(t&&t.column)}function ow(t){return rm(t&&t.start)+"-"+rm(t&&t.end)}function lw(t){return t&&typeof t=="number"?t:1}class St extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const a=r.indexOf(":");a===-1?s.ruleId=r:(s.source=r.slice(0,a),s.ruleId=r.slice(a+1))}if(!s.place&&s.ancestors&&s.ancestors){const a=s.ancestors[s.ancestors.length-1];a&&(s.place=a.position)}const l=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=l?l.line:void 0,this.name=kl(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}St.prototype.file="";St.prototype.name="";St.prototype.reason="";St.prototype.message="";St.prototype.stack="";St.prototype.column=void 0;St.prototype.line=void 0;St.prototype.ancestors=void 0;St.prototype.cause=void 0;St.prototype.fatal=void 0;St.prototype.place=void 0;St.prototype.ruleId=void 0;St.prototype.source=void 0;const yv={}.hasOwnProperty,jV=new Map,AV=/[A-Z]/g,MV=new Set(["table","tbody","thead","tfoot","tr"]),RV=new Set(["td","th"]),FN="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function IV(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=VV(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=BV(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?mv:eV,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=BN(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function BN(t,e,n){if(e.type==="element")return OV(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return LV(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return DV(t,e,n);if(e.type==="mdxjsEsm")return zV(t,e);if(e.type==="root")return $V(t,e,n);if(e.type==="text")return FV(t,e)}function OV(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=mv,t.schema=i),t.ancestors.push(e);const s=UN(t,e.tagName,!1),o=UV(t,e);let l=wv(t,e);return MV.has(e.tagName)&&(l=l.filter(function(a){return typeof a=="string"?!W5(a):!0})),VN(t,o,s,e),xv(o,l),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function LV(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}fa(t,e.position)}function zV(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);fa(t,e.position)}function DV(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=mv,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:UN(t,e.name,!0),o=WV(t,e),l=wv(t,e);return VN(t,o,s,e),xv(o,l),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function $V(t,e,n){const r={};return xv(r,wv(t,e)),t.create(e,t.Fragment,r,n)}function FV(t,e){return e.value}function VN(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function xv(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function BV(t,e,n){return r;function r(i,s,o,l){const c=Array.isArray(o.children)?n:e;return l?c(s,o,l):c(s,o)}}function VV(t,e){return n;function n(r,i,s,o){const l=Array.isArray(s.children),a=vv(r);return e(i,s,o,l,{columnNumber:a?a.column-1:void 0,fileName:t,lineNumber:a?a.line:void 0},void 0)}}function UV(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&yv.call(e.properties,i)){const s=HV(t,i,e.properties[i]);if(s){const[o,l]=s;t.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&RV.has(e.tagName)?r=l:n[o]=l}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function WV(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,t.evaluater.evaluateExpression(l.argument))}else fa(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const l=r.value.data.estree.body[0];l.type,s=t.evaluater.evaluateExpression(l.expression)}else fa(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function wv(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:jV;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const a=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(a){const c=i.get(a)||0;o=a+"-"+c,i.set(a,c+1)}}const l=BN(t,s,o);l!==void 0&&n.push(l)}return n}function HV(t,e,n){const r=X5(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?$5(n):tV(n)),r.property==="style"){let i=typeof n=="object"?n:qV(t,String(n));return t.stylePropertyNameCase==="css"&&(i=KV(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?Y5[r.property]||r.property:r.attribute,n]}}function qV(t,e){try{return TV(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new St("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=FN+"#cannot-parse-style-attribute",i}}function UN(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const l=X0(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(s&&l.type==="Literal"),optional:!1}:l}r=o}else r=X0(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return yv.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);fa(t)}function fa(t,e){const n=new St("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=FN+"#cannot-handle-mdx-estrees-without-createevaluater",n}function KV(t){const e={};let n;for(n in t)yv.call(t,n)&&(e[YV(n)]=t[n]);return e}function YV(t){let e=t.replace(AV,GV);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function GV(t){return"-"+t.toLowerCase()}const df={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},ZV={};function XV(t,e){const n=ZV,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return WN(t,r,i)}function WN(t,e,n){if(QV(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return aw(t.children,e,n)}return Array.isArray(t)?aw(t,e,n):""}function aw(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=WN(t[i],e,n);return r.join("")}function QV(t){return!!(t&&typeof t=="object")}const cw=document.createElement("i");function bv(t){const e="&"+t+";";cw.innerHTML=e;const n=cw.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function or(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function un(t,e){return t.length>0?(or(t,t.length,0,e),t):e}const uw={}.hasOwnProperty;function JV(t){const e={};let n=-1;for(;++n<t.length;)eU(e,t[n]);return e}function eU(t,e){let n;for(n in e){const i=(uw.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){uw.call(i,o)||(i[o]=[]);const l=s[o];tU(i[o],Array.isArray(l)?l:l?[l]:[])}}}function tU(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);or(t,0,0,r)}function HN(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function so(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Yn=ji(/[A-Za-z]/),Xt=ji(/[\dA-Za-z]/),nU=ji(/[#-'*+\--9=?A-Z^-~]/);function im(t){return t!==null&&(t<32||t===127)}const sm=ji(/\d/),rU=ji(/[\dA-Fa-f]/),iU=ji(/[!-/:-@[-`{-~]/);function fe(t){return t!==null&&t<-2}function Vt(t){return t!==null&&(t<0||t===32)}function je(t){return t===-2||t===-1||t===32}const sU=ji(new RegExp("\\p{P}|\\p{S}","u")),oU=ji(/\s/);function ji(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Oo(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&Xt(t.charCodeAt(n+1))&&Xt(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const l=t.charCodeAt(n+1);s<56320&&l>56319&&l<57344?(o=String.fromCharCode(s,l),i=1):o="�"}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function ze(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(a){return je(a)?(t.enter(n),l(a)):e(a)}function l(a){return je(a)&&s++<i?(t.consume(a),l):(t.exit(n),e(a))}}const lU={tokenize:aU};function aU(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),ze(t,e,"linePrefix")}function i(l){return t.enter("paragraph"),s(l)}function s(l){const a=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=a),n=a,o(l)}function o(l){if(l===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(l);return}return fe(l)?(t.consume(l),t.exit("chunkText"),s):(t.consume(l),o)}}const cU={tokenize:uU},dw={tokenize:dU};function uU(t){const e=this,n=[];let r=0,i,s,o;return l;function l(b){if(r<n.length){const S=n[r];return e.containerState=S[1],t.attempt(S[0].continuation,a,c)(b)}return c(b)}function a(b){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&x();const S=e.events.length;let k=S,C;for(;k--;)if(e.events[k][0]==="exit"&&e.events[k][1].type==="chunkFlow"){C=e.events[k][1].end;break}v(r);let _=S;for(;_<e.events.length;)e.events[_][1].end={...C},_++;return or(e.events,k+1,0,e.events.slice(S)),e.events.length=_,c(b)}return l(b)}function c(b){if(r===n.length){if(!i)return f(b);if(i.currentConstruct&&i.currentConstruct.concrete)return g(b);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(dw,u,h)(b)}function u(b){return i&&x(),v(r),f(b)}function h(b){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,g(b)}function f(b){return e.containerState={},t.attempt(dw,p,g)(b)}function p(b){return r++,n.push([e.currentConstruct,e.containerState]),f(b)}function g(b){if(b===null){i&&x(),v(0),t.consume(b);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),m(b)}function m(b){if(b===null){w(t.exit("chunkFlow"),!0),v(0),t.consume(b);return}return fe(b)?(t.consume(b),w(t.exit("chunkFlow")),r=0,e.interrupt=void 0,l):(t.consume(b),m)}function w(b,S){const k=e.sliceStream(b);if(S&&k.push(null),b.previous=s,s&&(s.next=b),s=b,i.defineSkip(b.start),i.write(k),e.parser.lazy[b.start.line]){let C=i.events.length;for(;C--;)if(i.events[C][1].start.offset<o&&(!i.events[C][1].end||i.events[C][1].end.offset>o))return;const _=e.events.length;let P=_,O,A;for(;P--;)if(e.events[P][0]==="exit"&&e.events[P][1].type==="chunkFlow"){if(O){A=e.events[P][1].end;break}O=!0}for(v(r),C=_;C<e.events.length;)e.events[C][1].end={...A},C++;or(e.events,P+1,0,e.events.slice(_)),e.events.length=C}}function v(b){let S=n.length;for(;S-- >b;){const k=n[S];e.containerState=k[1],k[0].exit.call(e,t)}n.length=b}function x(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function dU(t,e,n){return ze(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function hw(t){if(t===null||Vt(t)||oU(t))return 1;if(sU(t))return 2}function Sv(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const om={name:"attention",resolveAll:hU,tokenize:fU};function hU(t,e){let n=-1,r,i,s,o,l,a,c,u;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;a=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const h={...t[r][1].end},f={...t[n][1].start};fw(h,-a),fw(f,a),o={type:a>1?"strongSequence":"emphasisSequence",start:h,end:{...t[r][1].end}},l={type:a>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:f},s={type:a>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:a>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},t[r][1].end={...o.start},t[n][1].start={...l.end},c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=un(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=un(c,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),c=un(c,Sv(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=un(c,[["exit",s,e],["enter",l,e],["exit",l,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(u=2,c=un(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):u=0,or(t,r-1,n-r+3,c),n=r+c.length-u-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function fU(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=hw(r);let s;return o;function o(a){return s=a,t.enter("attentionSequence"),l(a)}function l(a){if(a===s)return t.consume(a),l;const c=t.exit("attentionSequence"),u=hw(a),h=!u||u===2&&i||n.includes(a),f=!i||i===2&&u||n.includes(r);return c._open=!!(s===42?h:h&&(i||!f)),c._close=!!(s===42?f:f&&(u||!h)),e(a)}}function fw(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const pU={name:"autolink",tokenize:mU};function mU(t,e,n){let r=0;return i;function i(p){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(p){return Yn(p)?(t.consume(p),o):p===64?n(p):c(p)}function o(p){return p===43||p===45||p===46||Xt(p)?(r=1,l(p)):c(p)}function l(p){return p===58?(t.consume(p),r=0,a):(p===43||p===45||p===46||Xt(p))&&r++<32?(t.consume(p),l):(r=0,c(p))}function a(p){return p===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),e):p===null||p===32||p===60||im(p)?n(p):(t.consume(p),a)}function c(p){return p===64?(t.consume(p),u):nU(p)?(t.consume(p),c):n(p)}function u(p){return Xt(p)?h(p):n(p)}function h(p){return p===46?(t.consume(p),r=0,u):p===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(p),t.exit("autolinkMarker"),t.exit("autolink"),e):f(p)}function f(p){if((p===45||Xt(p))&&r++<63){const g=p===45?f:h;return t.consume(p),g}return n(p)}}const qd={partial:!0,tokenize:gU};function gU(t,e,n){return r;function r(s){return je(s)?ze(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||fe(s)?e(s):n(s)}}const qN={continuation:{tokenize:yU},exit:xU,name:"blockQuote",tokenize:vU};function vU(t,e,n){const r=this;return i;function i(o){if(o===62){const l=r.containerState;return l.open||(t.enter("blockQuote",{_container:!0}),l.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return je(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function yU(t,e,n){const r=this;return i;function i(o){return je(o)?ze(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(qN,e,n)(o)}}function xU(t){t.exit("blockQuote")}const KN={name:"characterEscape",tokenize:wU};function wU(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return iU(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const YN={name:"characterReference",tokenize:bU};function bU(t,e,n){const r=this;let i=0,s,o;return l;function l(h){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),a}function a(h){return h===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(h),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),s=31,o=Xt,u(h))}function c(h){return h===88||h===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(h),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=rU,u):(t.enter("characterReferenceValue"),s=7,o=sm,u(h))}function u(h){if(h===59&&i){const f=t.exit("characterReferenceValue");return o===Xt&&!bv(r.sliceSerialize(f))?n(h):(t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(h)&&i++<s?(t.consume(h),u):n(h)}}const pw={partial:!0,tokenize:kU},mw={concrete:!0,name:"codeFenced",tokenize:SU};function SU(t,e,n){const r=this,i={partial:!0,tokenize:k};let s=0,o=0,l;return a;function a(C){return c(C)}function c(C){const _=r.events[r.events.length-1];return s=_&&_[1].type==="linePrefix"?_[2].sliceSerialize(_[1],!0).length:0,l=C,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),u(C)}function u(C){return C===l?(o++,t.consume(C),u):o<3?n(C):(t.exit("codeFencedFenceSequence"),je(C)?ze(t,h,"whitespace")(C):h(C))}function h(C){return C===null||fe(C)?(t.exit("codeFencedFence"),r.interrupt?e(C):t.check(pw,m,S)(C)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),f(C))}function f(C){return C===null||fe(C)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),h(C)):je(C)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),ze(t,p,"whitespace")(C)):C===96&&C===l?n(C):(t.consume(C),f)}function p(C){return C===null||fe(C)?h(C):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),g(C))}function g(C){return C===null||fe(C)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),h(C)):C===96&&C===l?n(C):(t.consume(C),g)}function m(C){return t.attempt(i,S,w)(C)}function w(C){return t.enter("lineEnding"),t.consume(C),t.exit("lineEnding"),v}function v(C){return s>0&&je(C)?ze(t,x,"linePrefix",s+1)(C):x(C)}function x(C){return C===null||fe(C)?t.check(pw,m,S)(C):(t.enter("codeFlowValue"),b(C))}function b(C){return C===null||fe(C)?(t.exit("codeFlowValue"),x(C)):(t.consume(C),b)}function S(C){return t.exit("codeFenced"),e(C)}function k(C,_,P){let O=0;return A;function A(I){return C.enter("lineEnding"),C.consume(I),C.exit("lineEnding"),T}function T(I){return C.enter("codeFencedFence"),je(I)?ze(C,R,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):R(I)}function R(I){return I===l?(C.enter("codeFencedFenceSequence"),$(I)):P(I)}function $(I){return I===l?(O++,C.consume(I),$):O>=o?(C.exit("codeFencedFenceSequence"),je(I)?ze(C,M,"whitespace")(I):M(I)):P(I)}function M(I){return I===null||fe(I)?(C.exit("codeFencedFence"),_(I)):P(I)}}}function kU(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const hf={name:"codeIndented",tokenize:EU},CU={partial:!0,tokenize:_U};function EU(t,e,n){const r=this;return i;function i(c){return t.enter("codeIndented"),ze(t,s,"linePrefix",5)(c)}function s(c){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(c):n(c)}function o(c){return c===null?a(c):fe(c)?t.attempt(CU,o,a)(c):(t.enter("codeFlowValue"),l(c))}function l(c){return c===null||fe(c)?(t.exit("codeFlowValue"),o(c)):(t.consume(c),l)}function a(c){return t.exit("codeIndented"),e(c)}}function _U(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):fe(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):ze(t,s,"linePrefix",5)(o)}function s(o){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):fe(o)?i(o):n(o)}}const NU={name:"codeText",previous:PU,resolve:TU,tokenize:jU};function TU(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function PU(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function jU(t,e,n){let r=0,i,s;return o;function o(h){return t.enter("codeText"),t.enter("codeTextSequence"),l(h)}function l(h){return h===96?(t.consume(h),r++,l):(t.exit("codeTextSequence"),a(h))}function a(h){return h===null?n(h):h===32?(t.enter("space"),t.consume(h),t.exit("space"),a):h===96?(s=t.enter("codeTextSequence"),i=0,u(h)):fe(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),a):(t.enter("codeTextData"),c(h))}function c(h){return h===null||h===32||h===96||fe(h)?(t.exit("codeTextData"),a(h)):(t.consume(h),c)}function u(h){return h===96?(t.consume(h),i++,u):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(h)):(s.type="codeTextData",c(h))}}class AU{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Xo(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Xo(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Xo(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Xo(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Xo(this.left,n.reverse())}}}function Xo(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function GN(t){const e={};let n=-1,r,i,s,o,l,a,c;const u=new AU(t);for(;++n<u.length;){for(;n in e;)n=e[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(a=r[1]._tokenizer.events,s=0,s<a.length&&a[s][1].type==="lineEndingBlank"&&(s+=2),s<a.length&&a[s][1].type==="content"))for(;++s<a.length&&a[s][1].type!=="content";)a[s][1].type==="chunkText"&&(a[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,MU(u,n)),n=e[n],c=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=u.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...u.get(i)[1].start},l=u.slice(i,n),l.unshift(r),u.splice(i,n-i+1,l))}}return or(t,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function MU(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,a=[],c={};let u,h,f=-1,p=n,g=0,m=0;const w=[m];for(;p;){for(;t.get(++i)[1]!==p;);s.push(i),p._tokenizer||(u=r.sliceStream(p),p.next||u.push(null),h&&o.defineSkip(p.start),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),p._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=p,p=p.next}for(p=n;++f<l.length;)l[f][0]==="exit"&&l[f-1][0]==="enter"&&l[f][1].type===l[f-1][1].type&&l[f][1].start.line!==l[f][1].end.line&&(m=f+1,w.push(m),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(o.events=[],p?(p._tokenizer=void 0,p.previous=void 0):w.pop(),f=w.length;f--;){const v=l.slice(w[f],w[f+1]),x=s.pop();a.push([x,x+v.length-1]),t.splice(x,2,v)}for(a.reverse(),f=-1;++f<a.length;)c[g+a[f][0]]=g+a[f][1],g+=a[f][1]-a[f][0]-1;return c}const RU={resolve:OU,tokenize:LU},IU={partial:!0,tokenize:zU};function OU(t){return GN(t),t}function LU(t,e){let n;return r;function r(l){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(l)}function i(l){return l===null?s(l):fe(l)?t.check(IU,o,s)(l):(t.consume(l),i)}function s(l){return t.exit("chunkContent"),t.exit("content"),e(l)}function o(l){return t.consume(l),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function zU(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),ze(t,s,"linePrefix")}function s(o){if(o===null||fe(o))return n(o);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function ZN(t,e,n,r,i,s,o,l,a){const c=a||Number.POSITIVE_INFINITY;let u=0;return h;function h(v){return v===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(v),t.exit(s),f):v===null||v===32||v===41||im(v)?n(v):(t.enter(r),t.enter(o),t.enter(l),t.enter("chunkString",{contentType:"string"}),m(v))}function f(v){return v===62?(t.enter(s),t.consume(v),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(l),t.enter("chunkString",{contentType:"string"}),p(v))}function p(v){return v===62?(t.exit("chunkString"),t.exit(l),f(v)):v===null||v===60||fe(v)?n(v):(t.consume(v),v===92?g:p)}function g(v){return v===60||v===62||v===92?(t.consume(v),p):p(v)}function m(v){return!u&&(v===null||v===41||Vt(v))?(t.exit("chunkString"),t.exit(l),t.exit(o),t.exit(r),e(v)):u<c&&v===40?(t.consume(v),u++,m):v===41?(t.consume(v),u--,m):v===null||v===32||v===40||im(v)?n(v):(t.consume(v),v===92?w:m)}function w(v){return v===40||v===41||v===92?(t.consume(v),m):m(v)}}function XN(t,e,n,r,i,s){const o=this;let l=0,a;return c;function c(p){return t.enter(r),t.enter(i),t.consume(p),t.exit(i),t.enter(s),u}function u(p){return l>999||p===null||p===91||p===93&&!a||p===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(p):p===93?(t.exit(s),t.enter(i),t.consume(p),t.exit(i),t.exit(r),e):fe(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),u):(t.enter("chunkString",{contentType:"string"}),h(p))}function h(p){return p===null||p===91||p===93||fe(p)||l++>999?(t.exit("chunkString"),u(p)):(t.consume(p),a||(a=!je(p)),p===92?f:h)}function f(p){return p===91||p===92||p===93?(t.consume(p),l++,h):h(p)}}function QN(t,e,n,r,i,s){let o;return l;function l(f){return f===34||f===39||f===40?(t.enter(r),t.enter(i),t.consume(f),t.exit(i),o=f===40?41:f,a):n(f)}function a(f){return f===o?(t.enter(i),t.consume(f),t.exit(i),t.exit(r),e):(t.enter(s),c(f))}function c(f){return f===o?(t.exit(s),a(o)):f===null?n(f):fe(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),ze(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),u(f))}function u(f){return f===o||f===null||fe(f)?(t.exit("chunkString"),c(f)):(t.consume(f),f===92?h:u)}function h(f){return f===o||f===92?(t.consume(f),u):u(f)}}function Cl(t,e){let n;return r;function r(i){return fe(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):je(i)?ze(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const DU={name:"definition",tokenize:FU},$U={partial:!0,tokenize:BU};function FU(t,e,n){const r=this;let i;return s;function s(p){return t.enter("definition"),o(p)}function o(p){return XN.call(r,t,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(p)}function l(p){return i=so(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),p===58?(t.enter("definitionMarker"),t.consume(p),t.exit("definitionMarker"),a):n(p)}function a(p){return Vt(p)?Cl(t,c)(p):c(p)}function c(p){return ZN(t,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(p)}function u(p){return t.attempt($U,h,h)(p)}function h(p){return je(p)?ze(t,f,"whitespace")(p):f(p)}function f(p){return p===null||fe(p)?(t.exit("definition"),r.parser.defined.push(i),e(p)):n(p)}}function BU(t,e,n){return r;function r(l){return Vt(l)?Cl(t,i)(l):n(l)}function i(l){return QN(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return je(l)?ze(t,o,"whitespace")(l):o(l)}function o(l){return l===null||fe(l)?e(l):n(l)}}const VU={name:"hardBreakEscape",tokenize:UU};function UU(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return fe(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const WU={name:"headingAtx",resolve:HU,tokenize:qU};function HU(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},or(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function qU(t,e,n){let r=0;return i;function i(u){return t.enter("atxHeading"),s(u)}function s(u){return t.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&r++<6?(t.consume(u),o):u===null||Vt(u)?(t.exit("atxHeadingSequence"),l(u)):n(u)}function l(u){return u===35?(t.enter("atxHeadingSequence"),a(u)):u===null||fe(u)?(t.exit("atxHeading"),e(u)):je(u)?ze(t,l,"whitespace")(u):(t.enter("atxHeadingText"),c(u))}function a(u){return u===35?(t.consume(u),a):(t.exit("atxHeadingSequence"),l(u))}function c(u){return u===null||u===35||Vt(u)?(t.exit("atxHeadingText"),l(u)):(t.consume(u),c)}}const KU=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],gw=["pre","script","style","textarea"],YU={concrete:!0,name:"htmlFlow",resolveTo:XU,tokenize:QU},GU={partial:!0,tokenize:e6},ZU={partial:!0,tokenize:JU};function XU(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function QU(t,e,n){const r=this;let i,s,o,l,a;return c;function c(N){return u(N)}function u(N){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(N),h}function h(N){return N===33?(t.consume(N),f):N===47?(t.consume(N),s=!0,m):N===63?(t.consume(N),i=3,r.interrupt?e:E):Yn(N)?(t.consume(N),o=String.fromCharCode(N),w):n(N)}function f(N){return N===45?(t.consume(N),i=2,p):N===91?(t.consume(N),i=5,l=0,g):Yn(N)?(t.consume(N),i=4,r.interrupt?e:E):n(N)}function p(N){return N===45?(t.consume(N),r.interrupt?e:E):n(N)}function g(N){const se="CDATA[";return N===se.charCodeAt(l++)?(t.consume(N),l===se.length?r.interrupt?e:R:g):n(N)}function m(N){return Yn(N)?(t.consume(N),o=String.fromCharCode(N),w):n(N)}function w(N){if(N===null||N===47||N===62||Vt(N)){const se=N===47,be=o.toLowerCase();return!se&&!s&&gw.includes(be)?(i=1,r.interrupt?e(N):R(N)):KU.includes(o.toLowerCase())?(i=6,se?(t.consume(N),v):r.interrupt?e(N):R(N)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(N):s?x(N):b(N))}return N===45||Xt(N)?(t.consume(N),o+=String.fromCharCode(N),w):n(N)}function v(N){return N===62?(t.consume(N),r.interrupt?e:R):n(N)}function x(N){return je(N)?(t.consume(N),x):A(N)}function b(N){return N===47?(t.consume(N),A):N===58||N===95||Yn(N)?(t.consume(N),S):je(N)?(t.consume(N),b):A(N)}function S(N){return N===45||N===46||N===58||N===95||Xt(N)?(t.consume(N),S):k(N)}function k(N){return N===61?(t.consume(N),C):je(N)?(t.consume(N),k):b(N)}function C(N){return N===null||N===60||N===61||N===62||N===96?n(N):N===34||N===39?(t.consume(N),a=N,_):je(N)?(t.consume(N),C):P(N)}function _(N){return N===a?(t.consume(N),a=null,O):N===null||fe(N)?n(N):(t.consume(N),_)}function P(N){return N===null||N===34||N===39||N===47||N===60||N===61||N===62||N===96||Vt(N)?k(N):(t.consume(N),P)}function O(N){return N===47||N===62||je(N)?b(N):n(N)}function A(N){return N===62?(t.consume(N),T):n(N)}function T(N){return N===null||fe(N)?R(N):je(N)?(t.consume(N),T):n(N)}function R(N){return N===45&&i===2?(t.consume(N),L):N===60&&i===1?(t.consume(N),z):N===62&&i===4?(t.consume(N),W):N===63&&i===3?(t.consume(N),E):N===93&&i===5?(t.consume(N),D):fe(N)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(GU,ee,$)(N)):N===null||fe(N)?(t.exit("htmlFlowData"),$(N)):(t.consume(N),R)}function $(N){return t.check(ZU,M,ee)(N)}function M(N){return t.enter("lineEnding"),t.consume(N),t.exit("lineEnding"),I}function I(N){return N===null||fe(N)?$(N):(t.enter("htmlFlowData"),R(N))}function L(N){return N===45?(t.consume(N),E):R(N)}function z(N){return N===47?(t.consume(N),o="",j):R(N)}function j(N){if(N===62){const se=o.toLowerCase();return gw.includes(se)?(t.consume(N),W):R(N)}return Yn(N)&&o.length<8?(t.consume(N),o+=String.fromCharCode(N),j):R(N)}function D(N){return N===93?(t.consume(N),E):R(N)}function E(N){return N===62?(t.consume(N),W):N===45&&i===2?(t.consume(N),E):R(N)}function W(N){return N===null||fe(N)?(t.exit("htmlFlowData"),ee(N)):(t.consume(N),W)}function ee(N){return t.exit("htmlFlow"),e(N)}}function JU(t,e,n){const r=this;return i;function i(o){return fe(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function e6(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(qd,e,n)}}const t6={name:"htmlText",tokenize:n6};function n6(t,e,n){const r=this;let i,s,o;return l;function l(E){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(E),a}function a(E){return E===33?(t.consume(E),c):E===47?(t.consume(E),k):E===63?(t.consume(E),b):Yn(E)?(t.consume(E),P):n(E)}function c(E){return E===45?(t.consume(E),u):E===91?(t.consume(E),s=0,g):Yn(E)?(t.consume(E),x):n(E)}function u(E){return E===45?(t.consume(E),p):n(E)}function h(E){return E===null?n(E):E===45?(t.consume(E),f):fe(E)?(o=h,z(E)):(t.consume(E),h)}function f(E){return E===45?(t.consume(E),p):h(E)}function p(E){return E===62?L(E):E===45?f(E):h(E)}function g(E){const W="CDATA[";return E===W.charCodeAt(s++)?(t.consume(E),s===W.length?m:g):n(E)}function m(E){return E===null?n(E):E===93?(t.consume(E),w):fe(E)?(o=m,z(E)):(t.consume(E),m)}function w(E){return E===93?(t.consume(E),v):m(E)}function v(E){return E===62?L(E):E===93?(t.consume(E),v):m(E)}function x(E){return E===null||E===62?L(E):fe(E)?(o=x,z(E)):(t.consume(E),x)}function b(E){return E===null?n(E):E===63?(t.consume(E),S):fe(E)?(o=b,z(E)):(t.consume(E),b)}function S(E){return E===62?L(E):b(E)}function k(E){return Yn(E)?(t.consume(E),C):n(E)}function C(E){return E===45||Xt(E)?(t.consume(E),C):_(E)}function _(E){return fe(E)?(o=_,z(E)):je(E)?(t.consume(E),_):L(E)}function P(E){return E===45||Xt(E)?(t.consume(E),P):E===47||E===62||Vt(E)?O(E):n(E)}function O(E){return E===47?(t.consume(E),L):E===58||E===95||Yn(E)?(t.consume(E),A):fe(E)?(o=O,z(E)):je(E)?(t.consume(E),O):L(E)}function A(E){return E===45||E===46||E===58||E===95||Xt(E)?(t.consume(E),A):T(E)}function T(E){return E===61?(t.consume(E),R):fe(E)?(o=T,z(E)):je(E)?(t.consume(E),T):O(E)}function R(E){return E===null||E===60||E===61||E===62||E===96?n(E):E===34||E===39?(t.consume(E),i=E,$):fe(E)?(o=R,z(E)):je(E)?(t.consume(E),R):(t.consume(E),M)}function $(E){return E===i?(t.consume(E),i=void 0,I):E===null?n(E):fe(E)?(o=$,z(E)):(t.consume(E),$)}function M(E){return E===null||E===34||E===39||E===60||E===61||E===96?n(E):E===47||E===62||Vt(E)?O(E):(t.consume(E),M)}function I(E){return E===47||E===62||Vt(E)?O(E):n(E)}function L(E){return E===62?(t.consume(E),t.exit("htmlTextData"),t.exit("htmlText"),e):n(E)}function z(E){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(E),t.exit("lineEnding"),j}function j(E){return je(E)?ze(t,D,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(E):D(E)}function D(E){return t.enter("htmlTextData"),o(E)}}const kv={name:"labelEnd",resolveAll:o6,resolveTo:l6,tokenize:a6},r6={tokenize:c6},i6={tokenize:u6},s6={tokenize:d6};function o6(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&or(t,0,t.length,n),t}function l6(t,e){let n=t.length,r=0,i,s,o,l;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const a={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},u={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return l=[["enter",a,e],["enter",c,e]],l=un(l,t.slice(s+1,s+r+3)),l=un(l,[["enter",u,e]]),l=un(l,Sv(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),l=un(l,[["exit",u,e],t[o-2],t[o-1],["exit",c,e]]),l=un(l,t.slice(o+1)),l=un(l,[["exit",a,e]]),or(t,s,t.length,l),t}function a6(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return l;function l(f){return s?s._inactive?h(f):(o=r.parser.defined.includes(so(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(f),t.exit("labelMarker"),t.exit("labelEnd"),a):n(f)}function a(f){return f===40?t.attempt(r6,u,o?u:h)(f):f===91?t.attempt(i6,u,o?c:h)(f):o?u(f):h(f)}function c(f){return t.attempt(s6,u,h)(f)}function u(f){return e(f)}function h(f){return s._balanced=!0,n(f)}}function c6(t,e,n){return r;function r(h){return t.enter("resource"),t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),i}function i(h){return Vt(h)?Cl(t,s)(h):s(h)}function s(h){return h===41?u(h):ZN(t,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return Vt(h)?Cl(t,a)(h):u(h)}function l(h){return n(h)}function a(h){return h===34||h===39||h===40?QN(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):u(h)}function c(h){return Vt(h)?Cl(t,u)(h):u(h)}function u(h){return h===41?(t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),t.exit("resource"),e):n(h)}}function u6(t,e,n){const r=this;return i;function i(l){return XN.call(r,t,s,o,"reference","referenceMarker","referenceString")(l)}function s(l){return r.parser.defined.includes(so(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(l):n(l)}function o(l){return n(l)}}function d6(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const h6={name:"labelStartImage",resolveAll:kv.resolveAll,tokenize:f6};function f6(t,e,n){const r=this;return i;function i(l){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(l),t.exit("labelImageMarker"),s}function s(l){return l===91?(t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):e(l)}}const p6={name:"labelStartLink",resolveAll:kv.resolveAll,tokenize:m6};function m6(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const ff={name:"lineEnding",tokenize:g6};function g6(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),ze(t,e,"linePrefix")}}const $c={name:"thematicBreak",tokenize:v6};function v6(t,e,n){let r=0,i;return s;function s(c){return t.enter("thematicBreak"),o(c)}function o(c){return i=c,l(c)}function l(c){return c===i?(t.enter("thematicBreakSequence"),a(c)):r>=3&&(c===null||fe(c))?(t.exit("thematicBreak"),e(c)):n(c)}function a(c){return c===i?(t.consume(c),r++,a):(t.exit("thematicBreakSequence"),je(c)?ze(t,l,"whitespace")(c):l(c))}}const Rt={continuation:{tokenize:b6},exit:k6,name:"list",tokenize:w6},y6={partial:!0,tokenize:C6},x6={partial:!0,tokenize:S6};function w6(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return l;function l(p){const g=r.containerState.type||(p===42||p===43||p===45?"listUnordered":"listOrdered");if(g==="listUnordered"?!r.containerState.marker||p===r.containerState.marker:sm(p)){if(r.containerState.type||(r.containerState.type=g,t.enter(g,{_container:!0})),g==="listUnordered")return t.enter("listItemPrefix"),p===42||p===45?t.check($c,n,c)(p):c(p);if(!r.interrupt||p===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),a(p)}return n(p)}function a(p){return sm(p)&&++o<10?(t.consume(p),a):(!r.interrupt||o<2)&&(r.containerState.marker?p===r.containerState.marker:p===41||p===46)?(t.exit("listItemValue"),c(p)):n(p)}function c(p){return t.enter("listItemMarker"),t.consume(p),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||p,t.check(qd,r.interrupt?n:u,t.attempt(y6,f,h))}function u(p){return r.containerState.initialBlankLine=!0,s++,f(p)}function h(p){return je(p)?(t.enter("listItemPrefixWhitespace"),t.consume(p),t.exit("listItemPrefixWhitespace"),f):n(p)}function f(p){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(p)}}function b6(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(qd,i,s);function i(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ze(t,e,"listItemIndent",r.containerState.size+1)(l)}function s(l){return r.containerState.furtherBlankLines||!je(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(x6,e,o)(l))}function o(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,ze(t,t.attempt(Rt,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function S6(t,e,n){const r=this;return ze(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function k6(t){t.exit(this.containerState.type)}function C6(t,e,n){const r=this;return ze(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!je(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const vw={name:"setextUnderline",resolveTo:E6,tokenize:_6};function E6(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function _6(t,e,n){const r=this;let i;return s;function s(c){let u=r.events.length,h;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){h=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(t.enter("setextHeadingLine"),i=c,o(c)):n(c)}function o(c){return t.enter("setextHeadingLineSequence"),l(c)}function l(c){return c===i?(t.consume(c),l):(t.exit("setextHeadingLineSequence"),je(c)?ze(t,a,"lineSuffix")(c):a(c))}function a(c){return c===null||fe(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const N6={tokenize:T6};function T6(t){const e=this,n=t.attempt(qd,r,t.attempt(this.parser.constructs.flowInitial,i,ze(t,t.attempt(this.parser.constructs.flow,i,t.attempt(RU,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const P6={resolveAll:eT()},j6=JN("string"),A6=JN("text");function JN(t){return{resolveAll:eT(t==="text"?M6:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,l);return o;function o(u){return c(u)?s(u):l(u)}function l(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),a}function a(u){return c(u)?(n.exit("data"),s(u)):(n.consume(u),a)}function c(u){if(u===null)return!0;const h=i[u];let f=-1;if(h)for(;++f<h.length;){const p=h[f];if(!p.previous||p.previous.call(r,r.previous))return!0}return!1}}}function eT(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function M6(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,l=0,a;for(;s--;){const c=i[s];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(c===-2)a=!0,l++;else if(c!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(l=0),l){const c={type:n===t.length||a||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}const R6={42:Rt,43:Rt,45:Rt,48:Rt,49:Rt,50:Rt,51:Rt,52:Rt,53:Rt,54:Rt,55:Rt,56:Rt,57:Rt,62:qN},I6={91:DU},O6={[-2]:hf,[-1]:hf,32:hf},L6={35:WU,42:$c,45:[vw,$c],60:YU,61:vw,95:$c,96:mw,126:mw},z6={38:YN,92:KN},D6={[-5]:ff,[-4]:ff,[-3]:ff,33:h6,38:YN,42:om,60:[pU,t6],91:p6,92:[VU,KN],93:kv,95:om,96:NU},$6={null:[om,P6]},F6={null:[42,95]},B6={null:[]},V6=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:F6,contentInitial:I6,disable:B6,document:R6,flow:L6,flowInitial:O6,insideSpan:$6,string:z6,text:D6},Symbol.toStringTag,{value:"Module"}));function U6(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],l=[];const a={attempt:_(k),check:_(C),consume:x,enter:b,exit:S,interrupt:_(C,{interrupt:!0})},c={code:null,containerState:{},defineSkip:m,events:[],now:g,parser:t,previous:null,sliceSerialize:f,sliceStream:p,write:h};let u=e.tokenize.call(c,a);return e.resolveAll&&s.push(e),c;function h(T){return o=un(o,T),w(),o[o.length-1]!==null?[]:(P(e,0),c.events=Sv(s,c.events,c),c.events)}function f(T,R){return H6(p(T),R)}function p(T){return W6(o,T)}function g(){const{_bufferIndex:T,_index:R,line:$,column:M,offset:I}=r;return{_bufferIndex:T,_index:R,line:$,column:M,offset:I}}function m(T){i[T.line]=T.column,A()}function w(){let T;for(;r._index<o.length;){const R=o[r._index];if(typeof R=="string")for(T=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===T&&r._bufferIndex<R.length;)v(R.charCodeAt(r._bufferIndex));else v(R)}}function v(T){u=u(T)}function x(T){fe(T)?(r.line++,r.column=1,r.offset+=T===-3?2:1,A()):T!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=T}function b(T,R){const $=R||{};return $.type=T,$.start=g(),c.events.push(["enter",$,c]),l.push($),$}function S(T){const R=l.pop();return R.end=g(),c.events.push(["exit",R,c]),R}function k(T,R){P(T,R.from)}function C(T,R){R.restore()}function _(T,R){return $;function $(M,I,L){let z,j,D,E;return Array.isArray(M)?ee(M):"tokenize"in M?ee([M]):W(M);function W(he){return J;function J(Q){const B=Q!==null&&he[Q],U=Q!==null&&he.null,ne=[...Array.isArray(B)?B:B?[B]:[],...Array.isArray(U)?U:U?[U]:[]];return ee(ne)(Q)}}function ee(he){return z=he,j=0,he.length===0?L:N(he[j])}function N(he){return J;function J(Q){return E=O(),D=he,he.partial||(c.currentConstruct=he),he.name&&c.parser.constructs.disable.null.includes(he.name)?be():he.tokenize.call(R?Object.assign(Object.create(c),R):c,a,se,be)(Q)}}function se(he){return T(D,E),I}function be(he){return E.restore(),++j<z.length?N(z[j]):L}}}function P(T,R){T.resolveAll&&!s.includes(T)&&s.push(T),T.resolve&&or(c.events,R,c.events.length-R,T.resolve(c.events.slice(R),c)),T.resolveTo&&(c.events=T.resolveTo(c.events,c))}function O(){const T=g(),R=c.previous,$=c.currentConstruct,M=c.events.length,I=Array.from(l);return{from:M,restore:L};function L(){r=T,c.previous=R,c.currentConstruct=$,c.events.length=M,l=I,A()}}function A(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function W6(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function H6(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function q6(t){const r={constructs:JV([V6,...(t||{}).extensions||[]]),content:i(lU),defined:[],document:i(cU),flow:i(N6),lazy:{},string:i(j6),text:i(A6)};return r;function i(s){return o;function o(l){return U6(r,s,l)}}}function K6(t){for(;!GN(t););return t}const yw=/[\0\t\n\r]/g;function Y6(){let t=1,e="",n=!0,r;return i;function i(s,o,l){const a=[];let c,u,h,f,p;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),h=0,e="",n&&(s.charCodeAt(0)===65279&&h++,n=void 0);h<s.length;){if(yw.lastIndex=h,c=yw.exec(s),f=c&&c.index!==void 0?c.index:s.length,p=s.charCodeAt(f),!c){e=s.slice(h);break}if(p===10&&h===f&&r)a.push(-3),r=void 0;else switch(r&&(a.push(-5),r=void 0),h<f&&(a.push(s.slice(h,f)),t+=f-h),p){case 0:{a.push(65533),t++;break}case 9:{for(u=Math.ceil(t/4)*4,a.push(-2);t++<u;)a.push(-1);break}case 10:{a.push(-4),t=1;break}default:r=!0,t=1}h=f+1}return l&&(r&&a.push(-5),e&&a.push(e),a.push(null)),a}}const G6=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Z6(t){return t.replace(G6,X6)}function X6(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return HN(n.slice(s?2:1),s?16:10)}return bv(n)||t}const tT={}.hasOwnProperty;function Q6(t,e,n){return typeof e!="string"&&(n=e,e=void 0),J6(n)(K6(q6(n).document().write(Y6()(t,e,!0))))}function J6(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(vn),autolinkProtocol:O,autolinkEmail:O,atxHeading:s(Ye),blockQuote:s(U),characterEscape:O,characterReference:O,codeFenced:s(ne),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(ne,o),codeText:s(oe,o),codeTextData:O,data:O,codeFlowValue:O,definition:s(_e),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Re),hardBreakEscape:s(Je),hardBreakTrailing:s(Je),htmlFlow:s(on,o),htmlFlowData:O,htmlText:s(on,o),htmlTextData:O,image:s(Ai),label:o,link:s(vn),listItem:s(dP),listItemValue:f,listOrdered:s(Xd,h),listUnordered:s(Xd),paragraph:s(hP),reference:N,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Ye),strong:s(fP),thematicBreak:s(mP)},exit:{atxHeading:a(),atxHeadingSequence:k,autolink:a(),autolinkEmail:B,autolinkProtocol:Q,blockQuote:a(),characterEscapeValue:A,characterReferenceMarkerHexadecimal:be,characterReferenceMarkerNumeric:be,characterReferenceValue:he,characterReference:J,codeFenced:a(w),codeFencedFence:m,codeFencedFenceInfo:p,codeFencedFenceMeta:g,codeFlowValue:A,codeIndented:a(v),codeText:a(I),codeTextData:A,data:A,definition:a(),definitionDestinationString:S,definitionLabelString:x,definitionTitleString:b,emphasis:a(),hardBreakEscape:a(R),hardBreakTrailing:a(R),htmlFlow:a($),htmlFlowData:A,htmlText:a(M),htmlTextData:A,image:a(z),label:D,labelText:j,lineEnding:T,link:a(L),listItem:a(),listOrdered:a(),listUnordered:a(),paragraph:a(),referenceString:se,resourceDestinationString:E,resourceTitleString:W,resource:ee,setextHeading:a(P),setextHeadingLineSequence:_,setextHeadingText:C,strong:a(),thematicBreak:a()}};nT(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(V){let Z={type:"root",children:[]};const pe={stack:[Z],tokenStack:[],config:e,enter:l,exit:c,buffer:o,resume:u,data:n},ke=[];let Ie=-1;for(;++Ie<V.length;)if(V[Ie][1].type==="listOrdered"||V[Ie][1].type==="listUnordered")if(V[Ie][0]==="enter")ke.push(Ie);else{const yn=ke.pop();Ie=i(V,yn,Ie)}for(Ie=-1;++Ie<V.length;){const yn=e[V[Ie][0]];tT.call(yn,V[Ie][1].type)&&yn[V[Ie][1].type].call(Object.assign({sliceSerialize:V[Ie][2].sliceSerialize},pe),V[Ie][1])}if(pe.tokenStack.length>0){const yn=pe.tokenStack[pe.tokenStack.length-1];(yn[1]||xw).call(pe,void 0,yn[0])}for(Z.position={start:Hr(V.length>0?V[0][1].start:{line:1,column:1,offset:0}),end:Hr(V.length>0?V[V.length-2][1].end:{line:1,column:1,offset:0})},Ie=-1;++Ie<e.transforms.length;)Z=e.transforms[Ie](Z)||Z;return Z}function i(V,Z,pe){let ke=Z-1,Ie=-1,yn=!1,Mi,dr,Lo,zo;for(;++ke<=pe;){const Ht=V[ke];switch(Ht[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ht[0]==="enter"?Ie++:Ie--,zo=void 0;break}case"lineEndingBlank":{Ht[0]==="enter"&&(Mi&&!zo&&!Ie&&!Lo&&(Lo=ke),zo=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:zo=void 0}if(!Ie&&Ht[0]==="enter"&&Ht[1].type==="listItemPrefix"||Ie===-1&&Ht[0]==="exit"&&(Ht[1].type==="listUnordered"||Ht[1].type==="listOrdered")){if(Mi){let vs=ke;for(dr=void 0;vs--;){const hr=V[vs];if(hr[1].type==="lineEnding"||hr[1].type==="lineEndingBlank"){if(hr[0]==="exit")continue;dr&&(V[dr][1].type="lineEndingBlank",yn=!0),hr[1].type="lineEnding",dr=vs}else if(!(hr[1].type==="linePrefix"||hr[1].type==="blockQuotePrefix"||hr[1].type==="blockQuotePrefixWhitespace"||hr[1].type==="blockQuoteMarker"||hr[1].type==="listItemIndent"))break}Lo&&(!dr||Lo<dr)&&(Mi._spread=!0),Mi.end=Object.assign({},dr?V[dr][1].start:Ht[1].end),V.splice(dr||ke,0,["exit",Mi,Ht[2]]),ke++,pe++}if(Ht[1].type==="listItemPrefix"){const vs={type:"listItem",_spread:!1,start:Object.assign({},Ht[1].start),end:void 0};Mi=vs,V.splice(ke,0,["enter",vs,Ht[2]]),ke++,pe++,Lo=void 0,zo=!0}}}return V[Z][1]._spread=yn,pe}function s(V,Z){return pe;function pe(ke){l.call(this,V(ke),ke),Z&&Z.call(this,ke)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(V,Z,pe){this.stack[this.stack.length-1].children.push(V),this.stack.push(V),this.tokenStack.push([Z,pe||void 0]),V.position={start:Hr(Z.start),end:void 0}}function a(V){return Z;function Z(pe){V&&V.call(this,pe),c.call(this,pe)}}function c(V,Z){const pe=this.stack.pop(),ke=this.tokenStack.pop();if(ke)ke[0].type!==V.type&&(Z?Z.call(this,V,ke[0]):(ke[1]||xw).call(this,V,ke[0]));else throw new Error("Cannot close `"+V.type+"` ("+kl({start:V.start,end:V.end})+"): it’s not open");pe.position.end=Hr(V.end)}function u(){return XV(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function f(V){if(this.data.expectingFirstListItemValue){const Z=this.stack[this.stack.length-2];Z.start=Number.parseInt(this.sliceSerialize(V),10),this.data.expectingFirstListItemValue=void 0}}function p(){const V=this.resume(),Z=this.stack[this.stack.length-1];Z.lang=V}function g(){const V=this.resume(),Z=this.stack[this.stack.length-1];Z.meta=V}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function w(){const V=this.resume(),Z=this.stack[this.stack.length-1];Z.value=V.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const V=this.resume(),Z=this.stack[this.stack.length-1];Z.value=V.replace(/(\r?\n|\r)$/g,"")}function x(V){const Z=this.resume(),pe=this.stack[this.stack.length-1];pe.label=Z,pe.identifier=so(this.sliceSerialize(V)).toLowerCase()}function b(){const V=this.resume(),Z=this.stack[this.stack.length-1];Z.title=V}function S(){const V=this.resume(),Z=this.stack[this.stack.length-1];Z.url=V}function k(V){const Z=this.stack[this.stack.length-1];if(!Z.depth){const pe=this.sliceSerialize(V).length;Z.depth=pe}}function C(){this.data.setextHeadingSlurpLineEnding=!0}function _(V){const Z=this.stack[this.stack.length-1];Z.depth=this.sliceSerialize(V).codePointAt(0)===61?1:2}function P(){this.data.setextHeadingSlurpLineEnding=void 0}function O(V){const pe=this.stack[this.stack.length-1].children;let ke=pe[pe.length-1];(!ke||ke.type!=="text")&&(ke=pP(),ke.position={start:Hr(V.start),end:void 0},pe.push(ke)),this.stack.push(ke)}function A(V){const Z=this.stack.pop();Z.value+=this.sliceSerialize(V),Z.position.end=Hr(V.end)}function T(V){const Z=this.stack[this.stack.length-1];if(this.data.atHardBreak){const pe=Z.children[Z.children.length-1];pe.position.end=Hr(V.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Z.type)&&(O.call(this,V),A.call(this,V))}function R(){this.data.atHardBreak=!0}function $(){const V=this.resume(),Z=this.stack[this.stack.length-1];Z.value=V}function M(){const V=this.resume(),Z=this.stack[this.stack.length-1];Z.value=V}function I(){const V=this.resume(),Z=this.stack[this.stack.length-1];Z.value=V}function L(){const V=this.stack[this.stack.length-1];if(this.data.inReference){const Z=this.data.referenceType||"shortcut";V.type+="Reference",V.referenceType=Z,delete V.url,delete V.title}else delete V.identifier,delete V.label;this.data.referenceType=void 0}function z(){const V=this.stack[this.stack.length-1];if(this.data.inReference){const Z=this.data.referenceType||"shortcut";V.type+="Reference",V.referenceType=Z,delete V.url,delete V.title}else delete V.identifier,delete V.label;this.data.referenceType=void 0}function j(V){const Z=this.sliceSerialize(V),pe=this.stack[this.stack.length-2];pe.label=Z6(Z),pe.identifier=so(Z).toLowerCase()}function D(){const V=this.stack[this.stack.length-1],Z=this.resume(),pe=this.stack[this.stack.length-1];if(this.data.inReference=!0,pe.type==="link"){const ke=V.children;pe.children=ke}else pe.alt=Z}function E(){const V=this.resume(),Z=this.stack[this.stack.length-1];Z.url=V}function W(){const V=this.resume(),Z=this.stack[this.stack.length-1];Z.title=V}function ee(){this.data.inReference=void 0}function N(){this.data.referenceType="collapsed"}function se(V){const Z=this.resume(),pe=this.stack[this.stack.length-1];pe.label=Z,pe.identifier=so(this.sliceSerialize(V)).toLowerCase(),this.data.referenceType="full"}function be(V){this.data.characterReferenceType=V.type}function he(V){const Z=this.sliceSerialize(V),pe=this.data.characterReferenceType;let ke;pe?(ke=HN(Z,pe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ke=bv(Z);const Ie=this.stack[this.stack.length-1];Ie.value+=ke}function J(V){const Z=this.stack.pop();Z.position.end=Hr(V.end)}function Q(V){A.call(this,V);const Z=this.stack[this.stack.length-1];Z.url=this.sliceSerialize(V)}function B(V){A.call(this,V);const Z=this.stack[this.stack.length-1];Z.url="mailto:"+this.sliceSerialize(V)}function U(){return{type:"blockquote",children:[]}}function ne(){return{type:"code",lang:null,meta:null,value:""}}function oe(){return{type:"inlineCode",value:""}}function _e(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Re(){return{type:"emphasis",children:[]}}function Ye(){return{type:"heading",depth:0,children:[]}}function Je(){return{type:"break"}}function on(){return{type:"html",value:""}}function Ai(){return{type:"image",title:null,url:"",alt:null}}function vn(){return{type:"link",title:null,url:"",children:[]}}function Xd(V){return{type:"list",ordered:V.type==="listOrdered",start:null,spread:V._spread,children:[]}}function dP(V){return{type:"listItem",spread:V._spread,checked:null,children:[]}}function hP(){return{type:"paragraph",children:[]}}function fP(){return{type:"strong",children:[]}}function pP(){return{type:"text",value:""}}function mP(){return{type:"thematicBreak"}}}function Hr(t){return{line:t.line,column:t.column,offset:t.offset}}function nT(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?nT(t,r):eW(t,r)}}function eW(t,e){let n;for(n in e)if(tT.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function xw(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+kl({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+kl({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+kl({start:e.start,end:e.end})+") is still open")}function tW(t){const e=this;e.parser=n;function n(r){return Q6(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function nW(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function rW(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function iW(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function sW(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function oW(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function lW(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=Oo(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,l=t.footnoteCounts.get(r);l===void 0?(l=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,l+=1,t.footnoteCounts.set(r,l);const a={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,a);const c={type:"element",tagName:"sup",properties:{},children:[a]};return t.patch(e,c),t.applyData(e,c)}function aW(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function cW(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function rT(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function uW(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return rT(t,e);const i={src:Oo(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function dW(t,e){const n={src:Oo(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function hW(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function fW(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return rT(t,e);const i={href:Oo(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function pW(t,e){const n={href:Oo(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function mW(t,e,n){const r=t.all(e),i=n?gW(n):iT(e),s={},o=[];if(typeof e.checked=="boolean"){const u=r[0];let h;u&&u.type==="element"&&u.tagName==="p"?h=u:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const u=r[l];(i||l!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!i?o.push(...u.children):o.push(u)}const a=r[r.length-1];a&&(i||a.type!=="element"||a.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,c),t.applyData(e,c)}function gW(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=iT(n[r])}return e}function iT(t){const e=t.spread;return e??t.children.length>1}function vW(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function yW(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function xW(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function wW(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function bW(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},l=vv(e.children[1]),a=DN(e.children[e.children.length-1]);l&&a&&(o.position={start:l,end:a}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function SW(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:e.children.length;let a=-1;const c=[];for(;++a<l;){const h=e.children[a],f={},p=o?o[a]:void 0;p&&(f.align=p);let g={type:"element",tagName:s,properties:f,children:[]};h&&(g.children=t.all(h),t.patch(h,g),g=t.applyData(h,g)),c.push(g)}const u={type:"element",tagName:"tr",properties:{},children:t.wrap(c,!0)};return t.patch(e,u),t.applyData(e,u)}function kW(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const ww=9,bw=32;function CW(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(Sw(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(Sw(e.slice(i),i>0,!1)),s.join("")}function Sw(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===ww||s===bw;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===ww||s===bw;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function EW(t,e){const n={type:"text",value:CW(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function _W(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const NW={blockquote:nW,break:rW,code:iW,delete:sW,emphasis:oW,footnoteReference:lW,heading:aW,html:cW,imageReference:uW,image:dW,inlineCode:hW,linkReference:fW,link:pW,listItem:mW,list:vW,paragraph:yW,root:xW,strong:wW,table:bW,tableCell:kW,tableRow:SW,text:EW,thematicBreak:_W,toml:pc,yaml:pc,definition:pc,footnoteDefinition:pc};function pc(){}const sT=-1,Kd=0,El=1,zu=2,Cv=3,Ev=4,_v=5,Nv=6,oT=7,lT=8,kw=typeof self=="object"?self:globalThis,TW=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case Kd:case sT:return n(o,i);case El:{const l=n([],i);for(const a of o)l.push(r(a));return l}case zu:{const l=n({},i);for(const[a,c]of o)l[r(a)]=r(c);return l}case Cv:return n(new Date(o),i);case Ev:{const{source:l,flags:a}=o;return n(new RegExp(l,a),i)}case _v:{const l=n(new Map,i);for(const[a,c]of o)l.set(r(a),r(c));return l}case Nv:{const l=n(new Set,i);for(const a of o)l.add(r(a));return l}case oT:{const{name:l,message:a}=o;return n(new kw[l](a),i)}case lT:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new kw[s](o),i)};return r},Cw=t=>TW(new Map,t)(0),Cs="",{toString:PW}={},{keys:jW}=Object,Qo=t=>{const e=typeof t;if(e!=="object"||!t)return[Kd,e];const n=PW.call(t).slice(8,-1);switch(n){case"Array":return[El,Cs];case"Object":return[zu,Cs];case"Date":return[Cv,Cs];case"RegExp":return[Ev,Cs];case"Map":return[_v,Cs];case"Set":return[Nv,Cs];case"DataView":return[El,n]}return n.includes("Array")?[El,n]:n.includes("Error")?[oT,n]:[zu,n]},mc=([t,e])=>t===Kd&&(e==="function"||e==="symbol"),AW=(t,e,n,r)=>{const i=(o,l)=>{const a=r.push(o)-1;return n.set(l,a),a},s=o=>{if(n.has(o))return n.get(o);let[l,a]=Qo(o);switch(l){case Kd:{let u=o;switch(a){case"bigint":l=lT,u=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+a);u=null;break;case"undefined":return i([sT],o)}return i([l,u],o)}case El:{if(a){let f=o;return a==="DataView"?f=new Uint8Array(o.buffer):a==="ArrayBuffer"&&(f=new Uint8Array(o)),i([a,[...f]],o)}const u=[],h=i([l,u],o);for(const f of o)u.push(s(f));return h}case zu:{if(a)switch(a){case"BigInt":return i([a,o.toString()],o);case"Boolean":case"Number":case"String":return i([a,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const u=[],h=i([l,u],o);for(const f of jW(o))(t||!mc(Qo(o[f])))&&u.push([s(f),s(o[f])]);return h}case Cv:return i([l,o.toISOString()],o);case Ev:{const{source:u,flags:h}=o;return i([l,{source:u,flags:h}],o)}case _v:{const u=[],h=i([l,u],o);for(const[f,p]of o)(t||!(mc(Qo(f))||mc(Qo(p))))&&u.push([s(f),s(p)]);return h}case Nv:{const u=[],h=i([l,u],o);for(const f of o)(t||!mc(Qo(f)))&&u.push(s(f));return h}}const{message:c}=o;return i([l,{name:a,message:c}],o)};return s},Ew=(t,{json:e,lossy:n}={})=>{const r=[];return AW(!(e||n),!!e,new Map,r)(t),r},Du=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?Cw(Ew(t,e)):structuredClone(t):(t,e)=>Cw(Ew(t,e));function MW(t,e){const n=[{type:"text",value:"↩"}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function RW(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function IW(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||MW,r=t.options.footnoteBackLabel||RW,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let a=-1;for(;++a<t.footnoteOrder.length;){const c=t.footnoteById.get(t.footnoteOrder[a]);if(!c)continue;const u=t.all(c),h=String(c.identifier).toUpperCase(),f=Oo(h.toLowerCase());let p=0;const g=[],m=t.footnoteCounts.get(h);for(;m!==void 0&&++p<=m;){g.length>0&&g.push({type:"text",value:" "});let x=typeof n=="string"?n:n(a,p);typeof x=="string"&&(x={type:"text",value:x}),g.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+f+(p>1?"-"+p:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(a,p),className:["data-footnote-backref"]},children:Array.isArray(x)?x:[x]})}const w=u[u.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const x=w.children[w.children.length-1];x&&x.type==="text"?x.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(...g)}else u.push(...g);const v={type:"element",tagName:"li",properties:{id:e+"fn-"+f},children:t.wrap(u,!0)};t.patch(c,v),l.push(v)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Du(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(l,!0)},{type:"text",value:`
`}]}}const aT=function(t){if(t==null)return DW;if(typeof t=="function")return Yd(t);if(typeof t=="object")return Array.isArray(t)?OW(t):LW(t);if(typeof t=="string")return zW(t);throw new Error("Expected function, string, or object as test")};function OW(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=aT(t[n]);return Yd(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function LW(t){const e=t;return Yd(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function zW(t){return Yd(e);function e(n){return n&&n.type===t}}function Yd(t){return e;function e(n,r,i){return!!($W(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function DW(){return!0}function $W(t){return t!==null&&typeof t=="object"&&"type"in t}const cT=[],FW=!0,_w=!1,BW="skip";function VW(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=aT(i),o=r?-1:1;l(t,void 0,[])();function l(a,c,u){const h=a&&typeof a=="object"?a:{};if(typeof h.type=="string"){const p=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(a.type+(p?"<"+p+">":""))+")"})}return f;function f(){let p=cT,g,m,w;if((!e||s(a,c,u[u.length-1]||void 0))&&(p=UW(n(a,u)),p[0]===_w))return p;if("children"in a&&a.children){const v=a;if(v.children&&p[0]!==BW)for(m=(r?v.children.length:-1)+o,w=u.concat(v);m>-1&&m<v.children.length;){const x=v.children[m];if(g=l(x,m,w)(),g[0]===_w)return g;m=typeof g[1]=="number"?g[1]:m+o}}return p}}}function UW(t){return Array.isArray(t)?t:typeof t=="number"?[FW,t]:t==null?cT:[t]}function uT(t,e,n,r){let i,s,o;typeof e=="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),VW(t,s,l,i);function l(a,c){const u=c[c.length-1],h=u?u.children.indexOf(a):void 0;return o(a,h,u)}}const lm={}.hasOwnProperty,WW={};function HW(t,e){const n=e||WW,r=new Map,i=new Map,s=new Map,o={...NW,...n.handlers},l={all:c,applyData:KW,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:a,options:n,patch:qW,wrap:GW};return uT(t,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const h=u.type==="definition"?r:i,f=String(u.identifier).toUpperCase();h.has(f)||h.set(f,u)}}),l;function a(u,h){const f=u.type,p=l.handlers[f];if(lm.call(l.handlers,f)&&p)return p(l,u,h);if(l.options.passThrough&&l.options.passThrough.includes(f)){if("children"in u){const{children:m,...w}=u,v=Du(w);return v.children=l.all(u),v}return Du(u)}return(l.options.unknownHandler||YW)(l,u,h)}function c(u){const h=[];if("children"in u){const f=u.children;let p=-1;for(;++p<f.length;){const g=l.one(f[p],u);if(g){if(p&&f[p-1].type==="break"&&(!Array.isArray(g)&&g.type==="text"&&(g.value=Nw(g.value)),!Array.isArray(g)&&g.type==="element")){const m=g.children[0];m&&m.type==="text"&&(m.value=Nw(m.value))}Array.isArray(g)?h.push(...g):h.push(g)}}}return h}}function qW(t,e){t.position&&(e.position=PV(t))}function KW(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,Du(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function YW(t,e){const n=e.data||{},r="value"in e&&!(lm.call(n,"hProperties")||lm.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function GW(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function Nw(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function Tw(t,e){const n=HW(t,e),r=n.one(t,void 0),i=IW(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function ZW(t,e){return t&&"run"in t?async function(n,r){const i=Tw(n,{file:r,...e});await t.run(i,r)}:function(n,r){return Tw(n,{file:r,...t||e})}}function Pw(t){if(t)throw t}var Fc=Object.prototype.hasOwnProperty,dT=Object.prototype.toString,jw=Object.defineProperty,Aw=Object.getOwnPropertyDescriptor,Mw=function(e){return typeof Array.isArray=="function"?Array.isArray(e):dT.call(e)==="[object Array]"},Rw=function(e){if(!e||dT.call(e)!=="[object Object]")return!1;var n=Fc.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&Fc.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var i;for(i in e);return typeof i>"u"||Fc.call(e,i)},Iw=function(e,n){jw&&n.name==="__proto__"?jw(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},Ow=function(e,n){if(n==="__proto__")if(Fc.call(e,n)){if(Aw)return Aw(e,n).value}else return;return e[n]},XW=function t(){var e,n,r,i,s,o,l=arguments[0],a=1,c=arguments.length,u=!1;for(typeof l=="boolean"&&(u=l,l=arguments[1]||{},a=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});a<c;++a)if(e=arguments[a],e!=null)for(n in e)r=Ow(l,n),i=Ow(e,n),l!==i&&(u&&i&&(Rw(i)||(s=Mw(i)))?(s?(s=!1,o=r&&Mw(r)?r:[]):o=r&&Rw(r)?r:{},Iw(l,{name:n,newValue:t(u,o,i)})):typeof i<"u"&&Iw(l,{name:n,newValue:i}));return l};const pf=lr(XW);function am(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function QW(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...i);function l(a,...c){const u=t[++s];let h=-1;if(a){o(a);return}for(;++h<i.length;)(c[h]===null||c[h]===void 0)&&(c[h]=i[h]);i=c,u?JW(u,l)(...c):o(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function JW(t,e){let n;return r;function r(...o){const l=t.length>o.length;let a;l&&o.push(i);try{a=t.apply(this,o)}catch(c){const u=c;if(l&&n)throw u;return i(u)}l||(a&&a.then&&typeof a.then=="function"?a.then(s,i):a instanceof Error?i(a):s(a))}function i(o,...l){n||(n=!0,e(o,...l))}function s(o){i(null,o)}}const Hn={basename:eH,dirname:tH,extname:nH,join:rH,sep:"/"};function eH(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Aa(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,l=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),l>-1&&(t.codePointAt(i)===e.codePointAt(l--)?l<0&&(r=i):(l=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function tH(t){if(Aa(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function nH(t){Aa(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const l=t.codePointAt(e);if(l===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),l===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function rH(...t){let e=-1,n;for(;++e<t.length;)Aa(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":iH(n)}function iH(t){Aa(t);const e=t.codePointAt(0)===47;let n=sH(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function sH(t,e){let n="",r=0,i=-1,s=0,o=-1,l,a;for(;++o<=t.length;){if(o<t.length)l=t.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(a=n.lastIndexOf("/"),a!==n.length-1){a<0?(n="",r=0):(n=n.slice(0,a),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else l===46&&s>-1?s++:s=-1}return n}function Aa(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const oH={cwd:lH};function lH(){return"/"}function cm(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function aH(t){if(typeof t=="string")t=new URL(t);else if(!cm(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return cH(t)}function cH(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const mf=["history","path","basename","stem","extname","dirname"];class hT{constructor(e){let n;e?cm(e)?n={path:e}:typeof e=="string"||uH(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":oH.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<mf.length;){const s=mf[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)mf.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Hn.basename(this.path):void 0}set basename(e){vf(e,"basename"),gf(e,"basename"),this.path=Hn.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Hn.dirname(this.path):void 0}set dirname(e){Lw(this.basename,"dirname"),this.path=Hn.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Hn.extname(this.path):void 0}set extname(e){if(gf(e,"extname"),Lw(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Hn.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){cm(e)&&(e=aH(e)),vf(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Hn.basename(this.path,this.extname):void 0}set stem(e){vf(e,"stem"),gf(e,"stem"),this.path=Hn.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new St(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function gf(t,e){if(t&&t.includes(Hn.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Hn.sep+"`")}function vf(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function Lw(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function uH(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const dH=function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},hH={}.hasOwnProperty;class Tv extends dH{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=QW()}copy(){const e=new Tv;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(pf(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(wf("data",this.frozen),this.namespace[e]=n,this):hH.call(this.namespace,e)&&this.namespace[e]||void 0:e?(wf("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=gc(e),r=this.parser||this.Parser;return yf("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),yf("process",this.parser||this.Parser),xf("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const l=gc(e),a=r.parse(l);r.run(a,l,function(u,h,f){if(u||!h||!f)return c(u);const p=h,g=r.stringify(p,f);mH(g)?f.value=g:f.result=g,c(u,f)});function c(u,h){u||!h?o(u):s?s(h):n(void 0,h)}}}processSync(e){let n=!1,r;return this.freeze(),yf("processSync",this.parser||this.Parser),xf("processSync",this.compiler||this.Compiler),this.process(e,i),Dw("processSync","process",n),r;function i(s,o){n=!0,Pw(s),r=o}}run(e,n,r){zw(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,l){const a=gc(n);i.run(e,a,c);function c(u,h,f){const p=h||e;u?l(u):o?o(p):r(void 0,p,f)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),Dw("runSync","run",r),i;function s(o,l){Pw(o),i=l,r=!0}}stringify(e,n){this.freeze();const r=gc(n),i=this.compiler||this.Compiler;return xf("stringify",i),zw(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(wf("use",this.frozen),e!=null)if(typeof e=="function")a(e,n);else if(typeof e=="object")Array.isArray(e)?l(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(c){if(typeof c=="function")a(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...h]=c;a(u,h)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(c.plugins),c.settings&&(i.settings=pf(!0,i.settings,c.settings))}function l(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const h=c[u];s(h)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function a(c,u){let h=-1,f=-1;for(;++h<r.length;)if(r[h][0]===c){f=h;break}if(f===-1)r.push([c,...u]);else if(u.length>0){let[p,...g]=u;const m=r[f][1];am(m)&&am(p)&&(p=pf(!0,m,p)),r[f]=[c,p,...g]}}}}const fH=new Tv().freeze();function yf(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function xf(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function wf(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function zw(t){if(!am(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function Dw(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function gc(t){return pH(t)?t:new hT(t)}function pH(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function mH(t){return typeof t=="string"||gH(t)}function gH(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const vH="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",$w=[],Fw={allowDangerousHtml:!0},yH=/^(https?|ircs?|mailto|xmpp)$/i,xH=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function wH(t){const e=bH(t),n=SH(t);return kH(e.runSync(e.parse(n),n),t)}function bH(t){const e=t.rehypePlugins||$w,n=t.remarkPlugins||$w,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...Fw}:Fw;return fH().use(tW).use(n).use(ZW,r).use(e)}function SH(t){const e=t.children||"",n=new hT;return typeof e=="string"&&(n.value=e),n}function kH(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,l=e.unwrapDisallowed,a=e.urlTransform||CH;for(const u of xH)Object.hasOwn(e,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+vH+u.id,void 0);return uT(t,c),IV(t,{Fragment:d.Fragment,components:i,ignoreInvalidStyle:!0,jsx:d.jsx,jsxs:d.jsxs,passKeys:!0,passNode:!0});function c(u,h,f){if(u.type==="raw"&&f&&typeof h=="number")return o?f.children.splice(h,1):f.children[h]={type:"text",value:u.value},h;if(u.type==="element"){let p;for(p in df)if(Object.hasOwn(df,p)&&Object.hasOwn(u.properties,p)){const g=u.properties[p],m=df[p];(m===null||m.includes(u.tagName))&&(u.properties[p]=a(String(g||""),p,u))}}if(u.type==="element"){let p=n?!n.includes(u.tagName):s?s.includes(u.tagName):!1;if(!p&&r&&typeof h=="number"&&(p=!r(u,h,f)),p&&f&&typeof h=="number")return l&&u.children?f.children.splice(h,1,...u.children):f.children.splice(h,1),h}}}function CH(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||yH.test(t.slice(0,e))?t:""}const EH=()=>{const{categoryId:t,articleId:e}=ms(),n=ft(),{tg:r}=Dn(),i=Zt(a=>a.getArticleByIds),s=Zt(a=>a.getCategoryById),o=y.useMemo(()=>i(t||"",e||""),[t,e,i]),l=y.useMemo(()=>s(t||""),[t,s]);if(y.useEffect(()=>{const a=()=>n(`/faq/${t}`);return r&&(r.BackButton.show(),r.onEvent("backButtonClicked",a),console.log("[FaqArticlePage] Telegram BackButton shown and handler attached.")),()=>{r&&(r.BackButton.hide(),r.offEvent("backButtonClicked",a),console.log("[FaqArticlePage] Telegram BackButton hidden and handler removed."))}},[r,n,t]),!l||!(l.isActive??!0)||!o||!o.content){const a=!l||!(l.isActive??!0)?`Категория FAQ "${t}" не найдена или неактивна.`:`Статья FAQ "${e}" не найдена или не имеет контента.`;return d.jsxs("div",{className:"p-4 text-center",children:[d.jsx(xt,{message:a}),d.jsxs(ce,{variant:"outline",onClick:()=>n(`/faq/${t}`),className:"mt-4",children:[d.jsx(Et,{className:"mr-2 h-4 w-4"})," К списку статей"]})]})}return d.jsxs("div",{className:"p-4 pb-6 flex flex-col h-full",children:[d.jsxs("div",{className:"relative flex items-center justify-center h-12 mb-4 flex-shrink-0 border-b pb-4",children:[d.jsx(ce,{variant:"ghost",size:"icon",className:"absolute left-0 top-1/2 -translate-y-1/2 text-foreground/80 h-9 w-9 z-10",onClick:()=>n(`/faq/${t}`),children:d.jsx(Et,{className:"h-5 w-5"})}),d.jsx("h1",{className:"text-lg font-semibold text-center truncate max-w-[calc(100%-5rem)]",title:o.title,children:o.title}),d.jsx("div",{className:"h-9 w-9 absolute right-0"})," "]}),d.jsx("div",{className:H("flex-grow overflow-y-auto no-scrollbar","prose prose-sm dark:prose-invert","max-w-none","prose-headings:font-semibold prose-a:text-primary hover:prose-a:underline","prose-li:my-1 prose-p:leading-relaxed","prose-strong:font-semibold","prose-headings:mt-6 prose-headings:mb-2 first:prose-headings:mt-0","prose-ul:pl-5 prose-ol:pl-5"),children:d.jsx(wH,{children:o.content})})]})},_H=()=>{const[t,e]=y.useState(""),[n,r]=y.useState(""),[i,s]=y.useState(!1),{toast:o}=ur(),l=ft(),a=Sr(f=>f.login),c=An(f=>f.login),u=async()=>{var f;s(!0);try{console.log("[AdminLogin] Attempting login via /Account/LoginByLogPassPair...");const p=await yF(t,n);if(p.isSuccess&&((f=p.resultObject)!=null&&f.jwt))console.log("[AdminLogin] API login successful. Setting user and admin state."),c(p.resultObject.userId,p.resultObject.jwt),a(),o({title:"Успешный вход",description:"Добро пожаловать, администратор!",variant:"success"}),l("/admin/panel");else throw new Error(p.errorMessage||"Не удалось войти. Проверьте логин и пароль.")}catch(p){console.error("[AdminLogin] Login failed:",p),o({title:"Ошибка входа",description:p.message||"Произошла неизвестная ошибка.",variant:"destructive"}),s(!1)}},h=t.length>0&&n.length>0&&!i;return d.jsx("div",{className:"flex items-center justify-center min-h-screen p-4 bg-muted/40",children:d.jsxs(Nt,{className:"w-full max-w-sm shadow-lg rounded-xl",children:[d.jsxs(zr,{className:"items-center text-center space-y-2 pt-8 pb-6",children:[d.jsx(Sk,{className:"h-12 w-12 text-primary mb-2"}),d.jsx(Ni,{className:"text-2xl font-bold",children:"Вход для администратора"}),d.jsx(pd,{children:"Введите учетные данные"})]}),d.jsxs(mn,{className:"space-y-5 px-6 pb-8",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx(yt,{htmlFor:"username",children:"Логин"}),d.jsx(Pn,{id:"username",type:"text",placeholder:"Ваш логин",value:t,onChange:f=>e(f.target.value),disabled:i,autoComplete:"username"})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx(yt,{htmlFor:"password",children:"Пароль"}),d.jsx(Pn,{id:"password",type:"password",placeholder:"••••••••",value:n,onChange:f=>r(f.target.value),disabled:i,autoComplete:"current-password"})]}),d.jsx(ce,{className:"w-full h-11 text-base font-semibold mt-4",onClick:u,disabled:!h,children:i?d.jsx(Ne,{size:"sm"}):"Войти"}),d.jsx(ce,{variant:"link",className:"text-xs text-muted-foreground hover:text-primary h-auto p-0 w-full mt-2",onClick:()=>l("/login"),children:"Вернуться к обычному входу"})]})]})})};var Pv="Switch",[NH,X9]=Mt(Pv),[TH,PH]=NH(Pv),fT=y.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:s,required:o,disabled:l,value:a="on",onCheckedChange:c,form:u,...h}=t,[f,p]=y.useState(null),g=Te(e,b=>p(b)),m=y.useRef(!1),w=f?u||!!f.closest("form"):!0,[v=!1,x]=gn({prop:i,defaultProp:s,onChange:c});return d.jsxs(TH,{scope:n,checked:v,disabled:l,children:[d.jsx(le.button,{type:"button",role:"switch","aria-checked":v,"aria-required":o,"data-state":gT(v),"data-disabled":l?"":void 0,disabled:l,value:a,...h,ref:g,onClick:ae(t.onClick,b=>{x(S=>!S),w&&(m.current=b.isPropagationStopped(),m.current||b.stopPropagation())})}),w&&d.jsx(jH,{control:f,bubbles:!m.current,name:r,value:a,checked:v,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});fT.displayName=Pv;var pT="SwitchThumb",mT=y.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,i=PH(pT,n);return d.jsx(le.span,{"data-state":gT(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:e})});mT.displayName=pT;var jH=t=>{const{control:e,checked:n,bubbles:r=!0,...i}=t,s=y.useRef(null),o=_d(n),l=Cd(e);return y.useEffect(()=>{const a=s.current,c=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(c,"checked").set;if(o!==n&&h){const f=new Event("click",{bubbles:r});h.call(a,n),a.dispatchEvent(f)}},[o,n,r]),d.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:s,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function gT(t){return t?"checked":"unchecked"}var vT=fT,AH=mT;const jv=y.forwardRef(({className:t,...e},n)=>d.jsx(vT,{className:H("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:d.jsx(AH,{className:H("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));jv.displayName=vT.displayName;var yT="AlertDialog",[MH,Q9]=Mt(yT,[$E]),Fr=$E(),xT=t=>{const{__scopeAlertDialog:e,...n}=t,r=Fr(e);return d.jsx(t_,{...r,...n,modal:!0})};xT.displayName=yT;var RH="AlertDialogTrigger",wT=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Fr(n);return d.jsx(O4,{...i,...r,ref:e})});wT.displayName=RH;var IH="AlertDialogPortal",bT=t=>{const{__scopeAlertDialog:e,...n}=t,r=Fr(e);return d.jsx(n_,{...r,...n})};bT.displayName=IH;var OH="AlertDialogOverlay",ST=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Fr(n);return d.jsx(Hg,{...i,...r,ref:e})});ST.displayName=OH;var oo="AlertDialogContent",[LH,zH]=MH(oo),kT=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...i}=t,s=Fr(n),o=y.useRef(null),l=Te(e,o),a=y.useRef(null);return d.jsx(A4,{contentName:oo,titleName:CT,docsSlug:"alert-dialog",children:d.jsx(LH,{scope:n,cancelRef:a,children:d.jsxs(qg,{role:"alertdialog",...s,...i,ref:l,onOpenAutoFocus:ae(i.onOpenAutoFocus,c=>{var u;c.preventDefault(),(u=a.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[d.jsx(Lk,{children:r}),d.jsx($H,{contentRef:o})]})})})});kT.displayName=oo;var CT="AlertDialogTitle",ET=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Fr(n);return d.jsx(Kg,{...i,...r,ref:e})});ET.displayName=CT;var _T="AlertDialogDescription",NT=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Fr(n);return d.jsx(Yg,{...i,...r,ref:e})});NT.displayName=_T;var DH="AlertDialogAction",TT=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,i=Fr(n);return d.jsx(Od,{...i,...r,ref:e})});TT.displayName=DH;var PT="AlertDialogCancel",jT=y.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:i}=zH(PT,n),s=Fr(n),o=Te(e,i);return d.jsx(Od,{...s,...r,ref:o})});jT.displayName=PT;var $H=({contentRef:t})=>{const e=`\`${oo}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${oo}\` by passing a \`${_T}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${oo}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return y.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},FH=xT,BH=wT,VH=bT,AT=ST,MT=kT,RT=TT,IT=jT,OT=ET,LT=NT;const zT=FH,DT=BH,UH=VH,$T=y.forwardRef(({className:t,...e},n)=>d.jsx(AT,{className:H("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));$T.displayName=AT.displayName;const Av=y.forwardRef(({className:t,...e},n)=>d.jsxs(UH,{children:[d.jsx($T,{}),d.jsx(MT,{ref:n,className:H("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));Av.displayName=MT.displayName;const Mv=({className:t,...e})=>d.jsx("div",{className:H("flex flex-col space-y-2 text-center sm:text-left",t),...e});Mv.displayName="AlertDialogHeader";const Rv=({className:t,...e})=>d.jsx("div",{className:H("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Rv.displayName="AlertDialogFooter";const Iv=y.forwardRef(({className:t,...e},n)=>d.jsx(OT,{ref:n,className:H("text-lg font-semibold",t),...e}));Iv.displayName=OT.displayName;const Ov=y.forwardRef(({className:t,...e},n)=>d.jsx(LT,{ref:n,className:H("text-sm text-muted-foreground",t),...e}));Ov.displayName=LT.displayName;const Lv=y.forwardRef(({className:t,...e},n)=>d.jsx(RT,{ref:n,className:H(Ca(),t),...e}));Lv.displayName=RT.displayName;const zv=y.forwardRef(({className:t,...e},n)=>d.jsx(IT,{ref:n,className:H(Ca({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));zv.displayName=IT.displayName;const Dv=(t,e)=>{var r;if(!t||t.data===null||typeof t.data>"u"||typeof t.data.isSuccess!="boolean"){console.error("[API Helper] Invalid/Undefined Response Structure:",t);let i=e;return(t==null?void 0:t.data)===null?i="Received null data from server.":(r=t==null?void 0:t.data)!=null&&r.errorMessage?i=t.data.errorMessage:t!=null&&t.statusText&&(i=t.statusText),{isSuccess:!1,errorMessage:i,resultObject:null}}return t.data},$v=(t,e)=>{var r,i,s,o;console.error(`[API Error Handler] ${e}:`,t);let n=e;return t instanceof Error?n=t.message:typeof t=="string"?n=t:((r=t==null?void 0:t.response)==null?void 0:r.status)===401||((i=t==null?void 0:t.response)==null?void 0:i.status)===403?n="Ошибка прав доступа. Требуются права администратора.":t!=null&&t.response?n=`Request failed (${t.response.status}): ${((s=t.response.data)==null?void 0:s.errorMessage)||((o=t.response.data)==null?void 0:o.title)||t.response.statusText||"Server error"}`:t!=null&&t.request?n="No response received from server.":t!=null&&t.errorMessage&&(n=t.errorMessage),{isSuccess:!1,errorMessage:n,resultObject:null}},WH=async()=>{const t="Failed to trigger Moex assets update.";console.log("[API/Admin] Triggering Moex assets update...");try{const e=await at.post("/api/Admin/FillDatabaseWithMoexAssets");return console.log("[API/Admin] Update Moex Assets response:",e==null?void 0:e.data),Dv(e,t)}catch(e){return $v(e,t)}},HH=async t=>{const e="Failed to get system variables.";if(!t||t.length===0)return{isSuccess:!0,errorMessage:null,resultObject:[]};console.log("[API/SystemVariables] Getting variables:",t);try{const n={SystemVariableNames:t},r=await at.post("/api/SystemVariables/GetSystemVariables",n);console.log("[API/SystemVariables] Get response:",r==null?void 0:r.data);const i=Dv(r,e);return i.isSuccess&&i.resultObject===null&&(i.resultObject=[]),i}catch(n){return $v(n,e)}},qH=async t=>{const e="Failed to set system variables.";if(!t||t.length===0)return{isSuccess:!1,errorMessage:"No variables provided to set.",resultObject:null};console.log("[API/SystemVariables] Setting variables:",t);try{const n={SystemVariables:t},r=await at.post("/api/SystemVariables/SetSystemVariables",n);return console.log("[API/SystemVariables] Set response:",r==null?void 0:r.data),Dv(r,e)}catch(n){return $v(n,e)}},qr=[{name:"telegramLink",backendName:"chat_link",label:"Ссылка на Telegram чат",placeholder:"https://t.me/your_chat",type:"url"}],KH=()=>{var Q;const[t,e]=y.useState(!1),[n,r]=y.useState({}),[i,s]=y.useState({}),[o,l]=y.useState(!0),[a,c]=y.useState(null),[u,h]=y.useState(!1),{toast:f}=ur(),p=ft(),g=ar(),m=Sr(B=>B.logout),w=An(B=>B.logout),{categories:v,toggleCategoryActive:x,addCategory:b,deleteCategory:S,updateCategoryTitle:k}=Zt(),[C,_]=y.useState(""),[P,O]=y.useState(!1),[A,T]=y.useState(null),[R,$]=y.useState(""),M=y.useCallback(async()=>{const B=qr.map(U=>U.backendName||U.name);if(B.length===0){l(!1);return}console.log("[AdminPanelPage] Fetching system variables (backend names):",B),l(!0),c(null);try{const U=await HH(B);if(U.isSuccess&&U.resultObject){const ne={};qr.forEach(oe=>{var Ye;const _e=oe.backendName||oe.name,Re=(Ye=U.resultObject)==null?void 0:Ye.find(Je=>Je.name===_e);ne[oe.name]=(Re==null?void 0:Re.value)||""}),r(ne),s(ne),console.log("[AdminPanelPage] System variables fetched (UI state):",ne)}else throw new Error(U.errorMessage||"Не удалось загрузить системные переменные.")}catch(U){console.error("[AdminPanelPage] Error fetching system variables:",U),c(U.message);const ne={};qr.forEach(oe=>ne[oe.name]=""),r(ne),s(ne)}finally{l(!1)}},[]);y.useEffect(()=>{M()},[M]);const I=async()=>{e(!0),console.log("[AdminPanelPage] Triggering Moex assets update...");try{const B=await WH();if(B.isSuccess)f({title:"Обновление запущено",description:"База данных активов обновляется в фоновом режиме.",variant:"success"});else throw new Error(B.errorMessage||"Не удалось запустить обновление.")}catch(B){console.error("[AdminPanelPage] Error triggering Moex update:",B),f({title:"Ошибка обновления",description:B.message,variant:"destructive"})}finally{e(!1)}},L=(B,U)=>{r(ne=>({...ne,[B]:U}))},z=async()=>{const B=qr.filter(U=>n[U.name]!==i[U.name]).map(U=>({Name:U.backendName||U.name,Value:n[U.name]}));if(B.length===0){f({title:"Нет изменений",description:"Значения системных переменных не были изменены.",duration:2e3});return}h(!0),c(null),console.log("[AdminPanelPage] Saving system variables payload:",B);try{const U=await qH(B);if(U.isSuccess){const ne={...i};B.forEach(oe=>{const _e=qr.find(Re=>(Re.backendName||Re.name)===oe.Name);_e&&(ne[_e.name]=oe.Value)}),s(ne),f({title:"Настройки сохранены",description:`Обновлено ${B.length} переменных.`,variant:"success"})}else throw new Error(U.errorMessage||"Не удалось сохранить настройки.")}catch(U){console.error("[AdminPanelPage] Error saving system variables:",U),c(U.message),f({title:"Ошибка сохранения",description:U.message,variant:"destructive"})}finally{h(!1)}},j=()=>{console.log("[AdminPanelPage] Logging out..."),m(),w(),f({title:"Выход выполнен",duration:2e3}),p("/login")},D=y.useCallback(B=>{x(B);const U=Zt.getState().categories.find(ne=>ne.id===B);f({title:`Категория "${(U==null?void 0:U.title)||B}"`,description:`Теперь ${U!=null&&U.isActive?"активна":"скрыта"}`,duration:2e3})},[x,f]),E=y.useCallback(()=>{const B=C.trim();B?(O(!0),b(B)?(f({title:"Категория добавлена",description:`"${B}"`,variant:"success"}),_("")):f({title:"Ошибка",description:"Не удалось добавить категорию.",variant:"destructive"}),O(!1)):f({title:"Ошибка",description:"Название категории не может быть пустым.",variant:"destructive"})},[C,b,f]),W=y.useCallback((B,U)=>{S(B),f({title:"Категория удалена",description:`"${U}"`,variant:"success"})},[S,f]),ee=y.useCallback((B,U)=>{T(B),$(U)},[]),N=y.useCallback(()=>{T(null),$("")},[]),se=y.useCallback(()=>{A&&R.trim()?(k(A,R),f({title:"Название обновлено",variant:"success",duration:1500}),N()):f({title:"Ошибка",description:"Название не может быть пустым.",variant:"destructive"})},[A,R,k,f,N]),be=y.useCallback(B=>{p(`/admin/faq/${B}`)},[p]),he=qr.some(B=>n[B.name]!==i[B.name]),J=((Q=g.state)==null?void 0:Q.fromProfile)===!0;return d.jsx("div",{className:"flex items-center justify-center min-h-screen p-4 bg-muted/40 overflow-y-auto",children:d.jsxs(Nt,{className:"w-full max-w-lg shadow-lg rounded-xl my-auto",children:[d.jsxs(zr,{className:"items-center text-center pt-6 pb-4 border-b relative",children:[J&&d.jsx(ce,{variant:"ghost",size:"icon",className:"absolute left-2 top-1/2 -translate-y-1/2 text-foreground/80 h-9 w-9 z-10",onClick:()=>p("/profile"),children:d.jsx(Et,{className:"h-5 w-5"})}),d.jsx(Ni,{className:"text-xl font-bold",children:"Панель администратора"}),d.jsx(pd,{children:"Управление приложением"})]}),d.jsxs(mn,{className:"p-6 space-y-6",children:[d.jsxs("div",{className:"space-y-3 p-4 border rounded-lg bg-card",children:[d.jsxs(yt,{className:"flex items-center gap-2 font-medium text-base",children:[d.jsx(jO,{className:"h-5 w-5 text-primary"}),"База данных активов"]}),d.jsx(ce,{className:"w-full h-10",onClick:I,disabled:t,children:t?d.jsx(Ne,{size:"sm"}):"Обновить активы с МосБиржи"})]}),d.jsxs("div",{className:"space-y-4 p-4 border rounded-lg bg-card",children:[d.jsxs(yt,{className:"flex items-center gap-2 font-medium text-base",children:[d.jsx(BO,{className:"h-5 w-5 text-primary"}),"Системные настройки"]}),o?d.jsx("div",{className:"flex justify-center p-4",children:d.jsx(Ne,{})}):a?d.jsx(xt,{message:a}):qr.map(B=>d.jsxs("div",{className:"space-y-1.5",children:[d.jsx(yt,{htmlFor:B.name,children:B.label}),d.jsx(Pn,{id:B.name,type:B.type||"text",value:n[B.name]??"",onChange:U=>L(B.name,U.target.value),placeholder:B.placeholder||"",disabled:u,className:"h-10"})]},B.name)),!o&&!a&&qr.length>0&&d.jsx(ce,{className:"w-full h-10 mt-3",onClick:z,disabled:u||!he,children:u?d.jsx(Ne,{size:"sm"}):"Сохранить настройки"})]}),d.jsxs("div",{className:"space-y-3 p-4 border rounded-lg bg-card",children:[d.jsxs(yt,{className:"flex items-center gap-2 font-medium text-base",children:[d.jsx(vk,{className:"h-5 w-5 text-primary"}),"Управление FAQ"]}),d.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2 -mr-2",children:v.map(B=>d.jsxs("div",{className:H("flex items-center justify-between gap-2 p-2 rounded hover:bg-muted/50",!B.isActive&&"opacity-60"),children:[A===B.id?d.jsxs("div",{className:"flex items-center gap-1 flex-grow",children:[d.jsx(Pn,{value:R,onChange:U=>$(U.target.value),className:"h-8 text-sm flex-grow",autoFocus:!0,onKeyDown:U=>U.key==="Enter"&&se()}),d.jsx(ce,{variant:"ghost",size:"icon",className:"h-7 w-7 text-success",onClick:se,children:d.jsx(mg,{size:16})}),d.jsx(ce,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground",onClick:N,children:d.jsx(fd,{size:16})})]}):d.jsxs("span",{className:"text-sm flex-grow mr-1 truncate cursor-pointer group",onClick:()=>ee(B.id,B.title),children:[B.title,d.jsx(bk,{className:"h-3 w-3 inline-block ml-1 text-muted-foreground opacity-0 group-hover:opacity-60 transition-opacity"})]}),d.jsxs("div",{className:"flex items-center flex-shrink-0",children:[d.jsx(jv,{id:`faq-active-${B.id}`,checked:B.isActive??!0,onCheckedChange:()=>D(B.id),className:"mr-2 scale-75","aria-label":`Активность категории ${B.title}`}),d.jsxs(ce,{variant:"ghost",size:"icon",className:"h-7 w-7 text-blue-600 hover:text-blue-700",onClick:()=>be(B.id),children:[d.jsx(kk,{className:"h-4 w-4"}),d.jsxs("span",{className:"sr-only",children:["Редактировать категорию ",B.title]})]}),d.jsxs(zT,{children:[d.jsx(DT,{asChild:!0,children:d.jsxs(ce,{variant:"ghost",size:"icon",className:"h-7 w-7 text-destructive hover:text-destructive",children:[d.jsx(Ck,{className:"h-4 w-4"}),d.jsxs("span",{className:"sr-only",children:["Удалить категорию ",B.title]})]})}),d.jsxs(Av,{children:[d.jsxs(Mv,{children:[d.jsx(Iv,{children:"Удалить категорию?"}),d.jsxs(Ov,{children:['Вы уверены, что хотите удалить категорию "',B.title||"Без названия",'" и все статьи в ней? Это действие необратимо.']})]}),d.jsxs(Rv,{children:[d.jsx(zv,{children:"Отмена"}),d.jsx(Lv,{onClick:()=>W(B.id,B.title||""),className:Ca({variant:"destructive"}),children:"Удалить"})]})]})]})]})]},B.id))}),d.jsxs("div",{className:"flex items-center gap-2 pt-3 border-t",children:[d.jsx(Pn,{type:"text",placeholder:"Название новой категории...",value:C,onChange:B=>_(B.target.value),className:"h-9 flex-grow",disabled:P,onKeyDown:B=>B.key==="Enter"&&E()}),d.jsx(ce,{size:"sm",onClick:E,disabled:P||!C.trim(),className:"gap-1 h-9",children:P?d.jsx(Ne,{size:"sm"}):d.jsxs(d.Fragment,{children:[d.jsx(yk,{size:16})," Добавить"]})})]})]}),d.jsxs(ce,{variant:"outline",className:"w-full mt-4 h-10",onClick:j,children:[d.jsx(wk,{className:"h-4 w-4 mr-2"}),"Выйти из панели"]})]})]})})},FT=y.forwardRef(({className:t,...e},n)=>d.jsx("textarea",{className:H("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));FT.displayName="Textarea";const YH=({isOpen:t,onClose:e,categoryId:n,article:r})=>{const{toast:i}=ur(),{updateArticle:s,addArticle:o}=Zt(),[l,a]=y.useState(""),[c,u]=y.useState(""),[h,f]=y.useState(!1),p=r!=null;y.useEffect(()=>{t?(a(p?(r==null?void 0:r.title)??"":""),u(p?(r==null?void 0:r.content)??"":""),console.log(`[FaqArticleEditModal] Initialized. Mode: ${p?"Edit":"Create"}. Article ID: ${r==null?void 0:r.id}`)):(a(""),u(""))},[t,r,p]);const g=y.useCallback(async()=>{if(!l.trim()){i({title:"Ошибка",description:"Заголовок статьи не может быть пустым.",variant:"destructive"});return}f(!0);try{if(p&&r){console.log(`[FaqArticleEditModal] Updating article ${r.id}`);const w={},v=l.trim();v&&v!==((r==null?void 0:r.title)??"")&&(w.title=v),c!==((r==null?void 0:r.content)??"")&&(w.content=c),Object.keys(w).length>0&&s(n,r.id,w),i({title:"Сохранено",description:`Статья "${v}" обновлена.`,variant:"success"})}else{if(p)throw new Error("Ошибка: Попытка обновить несуществующую статью.");if(console.log(`[FaqArticleEditModal] Adding new article to category ${n}`),o(n,l,c))i({title:"Статья добавлена",description:`"${l.trim()}"`,variant:"success"});else throw new Error("Не удалось добавить статью в стор.")}await new Promise(w=>setTimeout(w,200)),e()}catch(w){console.error("[FaqArticleEditModal] Save error:",w),i({title:"Ошибка сохранения",description:w.message||"Не удалось сохранить изменения.",variant:"destructive"})}finally{f(!1)}},[p,r,n,l,c,s,o,e,i]),m=p?`Измените заголовок и содержание статьи "${(r==null?void 0:r.title)||"(загрузка...)"}".`:"Создайте новую статью в категории.";return d.jsx(Vp,{open:t,onOpenChange:e,children:d.jsxs(Au,{className:"max-w-3xl w-[90vw] h-[85vh] flex flex-col",children:[d.jsxs(Mu,{children:[d.jsx(Ru,{children:p?"Редактировать статью":"Добавить новую статью"}),d.jsxs(Iu,{children:[m," Используйте Markdown."]})]}),d.jsxs("div",{className:"grid gap-4 py-4 flex-grow overflow-y-auto pr-6 -mr-6 pl-1",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx(yt,{htmlFor:"article-title",children:"Заголовок"}),d.jsx(Pn,{id:"article-title",value:l,onChange:w=>a(w.target.value),placeholder:"Введите заголовок статьи...",disabled:h,className:"text-base"})]}),d.jsxs("div",{className:"space-y-1 flex flex-col flex-grow",children:[d.jsx(yt,{htmlFor:"article-content",children:"Содержание (Markdown)"}),d.jsx(FT,{id:"article-content",value:c,onChange:w=>u(w.target.value),placeholder:"Введите содержание статьи...",disabled:h,className:"text-sm font-mono flex-grow"})]})]}),d.jsxs(Gg,{className:"mt-4 flex-shrink-0 pt-4 border-t",children:[d.jsx(r_,{asChild:!0,children:d.jsx(ce,{type:"button",variant:"outline",disabled:h,children:"Отмена"})}),d.jsx(ce,{type:"button",onClick:g,disabled:h||!l.trim(),children:h?d.jsx(Ne,{size:"sm"}):d.jsxs(d.Fragment,{children:[d.jsx(mg,{size:16,className:"mr-1.5"})," ",p?"Сохранить":"Добавить"]})})]})]})})},GH=()=>{const{categoryId:t}=ms(),e=ft(),{toast:n}=ur(),{deleteArticle:r,updateCategoryTitle:i,toggleCategoryActive:s}=Zt(),o=Zt.persist.hasHydrated(),l=Zt(R=>{if(!o||!t)return;const $=R.categories.find(M=>M.id===t);return $?{id:$.id,title:$.title,articles:$.articles,isActive:$.isActive??!0}:void 0},Xs),[a,c]=y.useState(void 0),[u,h]=y.useState(!1),[f,p]=y.useState(null),[g,m]=y.useState("");y.useEffect(()=>{h(a!==void 0)},[a]);const w=y.useCallback(R=>{c(R)},[]),v=y.useCallback(()=>{c(null)},[]),x=y.useCallback((R,$)=>{t&&(r(t,R),n({title:"Статья удалена",description:`"${$}"`,variant:"success"}))},[t,r,n]),b=y.useCallback(()=>{c(void 0)},[]),S=y.useCallback((R,$)=>{p(R),m($)},[]),k=y.useCallback(()=>{p(null),m("")},[]),C=y.useCallback(()=>{f&&g.trim()?(i(f,g),n({title:"Название обновлено",variant:"success",duration:1500}),k()):n({title:"Ошибка",description:"Название не может быть пустым.",variant:"destructive"})},[f,g,i,n,k]),_=y.useCallback(R=>{s(R);const $=Zt.getState().categories.find(M=>M.id===R);n({title:`Категория "${($==null?void 0:$.title)||R}"`,description:`Теперь ${$!=null&&$.isActive?"активна":"скрыта"}`,duration:2e3})},[s,n]);if(!o)return d.jsx("div",{className:"flex items-center justify-center h-screen",children:d.jsx(Ne,{size:"lg"})});if(!l)return d.jsxs("div",{className:"p-4 text-center",children:[d.jsx(xt,{message:`Категория FAQ "${t}" не найдена.`}),d.jsxs(ce,{variant:"outline",onClick:()=>e("/admin/panel"),className:"mt-4",children:[d.jsx(Et,{className:"mr-2 h-4 w-4"})," К панели администратора"]})]});const{id:P,title:O,articles:A,isActive:T}=l;return d.jsxs("div",{className:"p-4 space-y-4 pb-4 flex flex-col h-full",children:[d.jsxs("div",{className:"relative flex items-center justify-center h-12 mb-2 flex-shrink-0",children:[d.jsx(ce,{variant:"ghost",size:"icon",className:"absolute left-0 top-1/2 -translate-y-1/2 text-foreground/80 h-9 w-9 z-10",onClick:()=>e("/admin/panel"),children:d.jsx(Et,{className:"h-5 w-5"})}),f===P?d.jsxs("div",{className:"flex items-center gap-1 flex-grow mx-10",children:[d.jsx(Pn,{value:g,onChange:R=>m(R.target.value),className:"h-9 text-lg font-semibold text-center flex-grow",autoFocus:!0,onKeyDown:R=>R.key==="Enter"&&C()}),d.jsx(ce,{variant:"ghost",size:"icon",className:"h-8 w-8 text-success",onClick:C,children:d.jsx(mg,{size:18})}),d.jsx(ce,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground",onClick:k,children:d.jsx(fd,{size:18})})]}):d.jsxs("h1",{className:"text-lg font-semibold text-center truncate max-w-[calc(100%-5rem)] cursor-pointer group",title:`Редактировать название "${O}"`,onClick:()=>S(P,O),children:[O,d.jsx(bk,{className:"h-3.5 w-3.5 inline-block ml-1.5 text-muted-foreground opacity-0 group-hover:opacity-60 transition-opacity"})]}),d.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 flex items-center gap-1",children:d.jsx(jv,{id:`faq-active-${P}`,checked:T,onCheckedChange:()=>_(P),"aria-label":`Активность категории ${O}`})})]}),d.jsxs(Nt,{className:"flex-grow shadow-sm border rounded-lg overflow-hidden flex flex-col",children:[d.jsx(zr,{className:"px-4 pt-4 pb-2 border-b",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx(Ni,{className:"text-base",children:"Статьи в категории"}),d.jsxs(ce,{size:"sm",variant:"outline",onClick:v,className:"gap-1",children:[d.jsx(yk,{size:16})," Добавить статью"]})]})}),d.jsx(mn,{className:"p-0 flex-grow overflow-y-auto no-scrollbar",children:A.length>0?d.jsx("div",{className:"divide-y divide-border/60",children:A.map(R=>d.jsxs("div",{className:H("flex items-center justify-between gap-2 p-3 hover:bg-muted/50",!T&&"opacity-60"),children:[d.jsx("span",{className:"text-sm flex-grow mr-2 truncate",children:R.title}),d.jsxs("div",{className:"flex items-center flex-shrink-0",children:[d.jsxs(ce,{variant:"ghost",size:"icon",className:"h-8 w-8 text-blue-600 hover:text-blue-700",onClick:()=>w(R),children:[d.jsx(kk,{className:"h-4 w-4"}),d.jsxs("span",{className:"sr-only",children:["Редактировать статью ",R.title]})]}),d.jsxs(zT,{children:[d.jsx(DT,{asChild:!0,children:d.jsxs(ce,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",children:[d.jsx(Ck,{className:"h-4 w-4"}),d.jsxs("span",{className:"sr-only",children:["Удалить статью ",R.title]})]})}),d.jsxs(Av,{children:[d.jsxs(Mv,{children:[d.jsx(Iv,{children:"Удалить статью?"}),d.jsxs(Ov,{children:['Вы уверены, что хотите удалить статью "',R.title||"Без названия",'"? Это действие необратимо.']})]}),d.jsxs(Rv,{children:[d.jsx(zv,{children:"Отмена"}),d.jsx(Lv,{onClick:()=>x(R.id,R.title||""),className:Ca({variant:"destructive"}),children:"Удалить"})]})]})]})]})]},R.id))}):d.jsx("p",{className:"p-6 text-center text-muted-foreground",children:"В этой категории пока нет статей."})})]}),P&&d.jsx(YH,{isOpen:u,onClose:b,categoryId:P,article:a})]})},ZH=()=>{const{id:t}=ms(),e=Number(t),n=ft(),{tg:r}=Dn(),[i,s]=y.useState(null),[o,l]=y.useState("1M"),[a,c]=y.useState("line"),[u,h]=y.useState(null),[f,p]=y.useState(!0),[g,m]=y.useState(!0),[w,v]=y.useState(null),[x,b]=y.useState(null);y.useEffect(()=>{let C=!0;return(async()=>{if(!e||isNaN(e)){v("Неверный ID актива."),p(!1);return}p(!0),v(null);try{const P=await ck(e);C&&(P.isSuccess&&P.resultObject?s(P.resultObject):v(P.errorMessage||`Актив ${e} не найден.`))}catch(P){C&&v(P.message||"Ошибка загрузки данных актива.")}finally{C&&p(!1)}})(),()=>{C=!1}},[e]),y.useEffect(()=>{let C=!0;return i?(async()=>{if(!(!C||!(i!=null&&i.id))){m(!0),b(null),h(null),console.log(`[FullscreenChartPage] Fetching history for asset ${i.id}, period ${o}`);try{const P=await dk(i.id,o);if(C)if(P.isSuccess&&Array.isArray(P.resultObject)){const O=P.resultObject;h(O),console.log(`[FullscreenChartPage] History loaded successfully. Points: ${O.length}`)}else b(P.errorMessage||`Не удалось загрузить историю для ${o}.`),h([])}catch(P){C&&(b(P.message||"Ошибка загрузки истории цен."),h([]))}finally{C&&m(!1)}}})():m(!1),()=>{C=!1}},[i,o]),y.useEffect(()=>{const C=()=>n(`/asset/${e}`);return r&&(r.BackButton.show(),r.onEvent("backButtonClicked",C)),()=>{r&&(r.BackButton.hide(),r.offEvent("backButtonClicked",C))}},[r,n,e]);const S=y.useMemo(()=>o==="1D"?"line":a,[o,a]),k=()=>g?d.jsx("div",{className:"flex items-center justify-center h-full",children:d.jsx(Ne,{size:"lg"})}):x&&!u?d.jsx("div",{className:"flex items-center justify-center h-full p-4",children:d.jsxs("div",{className:"text-center p-4 border border-destructive/50 rounded-md bg-destructive/10 text-destructive",children:[d.jsx("span",{className:"text-2xl mr-2",children:"⚠️"})," ",x]})}):!u||u.length===0?d.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Нет данных о цене за этот период."}):d.jsx(gN,{data:u,chartType:S,period:o});return f?d.jsx("div",{className:"flex items-center justify-center h-screen",children:d.jsx(Ne,{size:"lg"})}):i?d.jsxs("div",{className:"flex flex-col h-screen bg-background text-foreground p-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-4 flex-shrink-0",children:[d.jsxs(ce,{variant:"ghost",size:"icon",onClick:()=>n(`/asset/${e}`),className:"h-9 w-9",children:[" ",d.jsx(Et,{className:"h-5 w-5"})," "]}),d.jsxs("div",{className:"text-center",children:[" ",d.jsxs("h1",{className:"text-base font-semibold truncate",children:[i.ticker," - ",vg(i)]})," "]}),d.jsxs("div",{className:"flex items-center space-x-1",children:[d.jsx(ce,{variant:S==="line"?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:()=>c("line"),title:"Линейный график",children:d.jsx(xk,{className:"h-4 w-4"})}),d.jsx(ce,{variant:S==="candle"?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:()=>c("candle"),title:"Свечной график",disabled:o==="1D",children:d.jsx(fk,{className:"h-4 w-4"})})]})]}),d.jsx("div",{className:"mb-4 flex-shrink-0",children:d.jsx(fv,{defaultValue:o,onValueChange:C=>l(C),className:"w-full",children:d.jsxs(Wd,{className:"grid grid-cols-6 h-9 w-full",children:[d.jsx(Ot,{value:"1D",className:"text-xs h-full",children:"1D"}),d.jsx(Ot,{value:"1W",className:"text-xs h-full",children:"1W"}),d.jsx(Ot,{value:"1M",className:"text-xs h-full",children:"1M"}),d.jsx(Ot,{value:"1Y",className:"text-xs h-full",children:"1Y"}),d.jsx(Ot,{value:"5Y",className:"text-xs h-full",children:"5Y"}),d.jsx(Ot,{value:"ALL",className:"text-xs h-full",children:"All"})]})})}),d.jsx("div",{className:"flex-grow overflow-hidden",children:k()})]}):d.jsxs("div",{className:"p-4 text-center",children:[d.jsx(xt,{message:w||`Актив с ID ${e} не найден.`}),d.jsxs(ce,{variant:"outline",onClick:()=>n(-1),className:"mt-4",children:[d.jsx(Et,{className:"mr-2 h-4 w-4"})," Назад"]})]})},XH=()=>{const t=[{to:"/portfolio",label:"Мои счета",Icon:WO},{to:"/market",label:"Биржа",Icon:DO},{to:"/top10",label:"Топ 10",Icon:UO},{to:"/profile",label:"Профиль",Icon:NO}],e=()=>H("relative flex flex-col items-center justify-center flex-1 h-full group transition-all duration-200 ease-in-out","pt-1 p-1","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 focus-visible:ring-offset-background rounded-md"),n=()=>" text-primary",r=()=>"text-muted-foreground hover:text-foreground/90",i="bg-primary/10 dark:bg-primary/15 rounded-lg",s=({isActive:a})=>H("h-5 w-5 mb-0.5 transition-transform duration-150",a?"scale-105":"scale-100 opacity-80 group-hover:opacity-100"),o=({isActive:a})=>H("text-[11px] leading-tight block",a?"font-semibold":"font-normal"),l=d.jsx("div",{className:H("absolute inset-x-1.5 bottom-1 h-[3px] rounded-full bg-primary")});return d.jsx("nav",{className:H("fixed bottom-0 left-0 right-0 h-16 bg-background/95 backdrop-blur-sm border-t border-border/50 shadow-[0_-2px_10px_rgba(0,0,0,0.05)] dark:shadow-[0_-2px_10px_rgba(0,0,0,0.2)]","flex justify-around items-stretch","px-1","safe-padding-bottom z-50"),style:{paddingBottom:"env(safe-area-inset-bottom)"},children:t.map(({to:a,label:c,Icon:u})=>d.jsx(WA,{to:a,end:a==="/portfolio",children:({isActive:h})=>d.jsx("div",{className:H(e(),h?n():r()),children:d.jsxs("div",{className:H("relative flex flex-col items-center justify-center w-full h-full",h&&i),children:[d.jsx(u,{className:s({isActive:h}),strokeWidth:h?2.25:1.75}),d.jsx("span",{className:o({isActive:h}),children:c}),h&&l]})})},a))})};var Fv="ToastProvider",[Bv,QH,JH]=vd("Toast"),[BT,J9]=Mt("Toast",[JH]),[e9,Gd]=BT(Fv),VT=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=t,[l,a]=y.useState(null),[c,u]=y.useState(0),h=y.useRef(!1),f=y.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Fv}\`. Expected non-empty \`string\`.`),d.jsx(Bv.Provider,{scope:e,children:d.jsx(e9,{scope:e,label:n,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:c,viewport:l,onViewportChange:a,onToastAdd:y.useCallback(()=>u(p=>p+1),[]),onToastRemove:y.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};VT.displayName=Fv;var UT="ToastViewport",t9=["F8"],um="toast.viewportPause",dm="toast.viewportResume",WT=y.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=t9,label:i="Notifications ({hotkey})",...s}=t,o=Gd(UT,n),l=QH(n),a=y.useRef(null),c=y.useRef(null),u=y.useRef(null),h=y.useRef(null),f=Te(e,h,o.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;y.useEffect(()=>{const w=v=>{var b;r.length!==0&&r.every(S=>v[S]||v.code===S)&&((b=h.current)==null||b.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),y.useEffect(()=>{const w=a.current,v=h.current;if(g&&w&&v){const x=()=>{if(!o.isClosePausedRef.current){const C=new CustomEvent(um);v.dispatchEvent(C),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const C=new CustomEvent(dm);v.dispatchEvent(C),o.isClosePausedRef.current=!1}},S=C=>{!w.contains(C.relatedTarget)&&b()},k=()=>{w.contains(document.activeElement)||b()};return w.addEventListener("focusin",x),w.addEventListener("focusout",S),w.addEventListener("pointermove",x),w.addEventListener("pointerleave",k),window.addEventListener("blur",x),window.addEventListener("focus",b),()=>{w.removeEventListener("focusin",x),w.removeEventListener("focusout",S),w.removeEventListener("pointermove",x),w.removeEventListener("pointerleave",k),window.removeEventListener("blur",x),window.removeEventListener("focus",b)}}},[g,o.isClosePausedRef]);const m=y.useCallback(({tabbingDirection:w})=>{const x=l().map(b=>{const S=b.ref.current,k=[S,...p9(S)];return w==="forwards"?k:k.reverse()});return(w==="forwards"?x.reverse():x).flat()},[l]);return y.useEffect(()=>{const w=h.current;if(w){const v=x=>{var k,C,_;const b=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!b){const P=document.activeElement,O=x.shiftKey;if(x.target===w&&O){(k=c.current)==null||k.focus();return}const R=m({tabbingDirection:O?"backwards":"forwards"}),$=R.findIndex(M=>M===P);bf(R.slice($+1))?x.preventDefault():O?(C=c.current)==null||C.focus():(_=u.current)==null||_.focus()}};return w.addEventListener("keydown",v),()=>w.removeEventListener("keydown",v)}},[l,m]),d.jsxs(Dz,{ref:a,role:"region","aria-label":i.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&d.jsx(hm,{ref:c,onFocusFromOutsideViewport:()=>{const w=m({tabbingDirection:"forwards"});bf(w)}}),d.jsx(Bv.Slot,{scope:n,children:d.jsx(le.ol,{tabIndex:-1,...s,ref:f})}),g&&d.jsx(hm,{ref:u,onFocusFromOutsideViewport:()=>{const w=m({tabbingDirection:"backwards"});bf(w)}})]})});WT.displayName=UT;var HT="ToastFocusProxy",hm=y.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=t,s=Gd(HT,n);return d.jsx(Nd,{"aria-hidden":!0,tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const l=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(l))&&r()}})});hm.displayName=HT;var Zd="Toast",n9="toast.swipeStart",r9="toast.swipeMove",i9="toast.swipeCancel",s9="toast.swipeEnd",qT=y.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:s,...o}=t,[l=!0,a]=gn({prop:r,defaultProp:i,onChange:s});return d.jsx(Dr,{present:n||l,children:d.jsx(a9,{open:l,...o,ref:e,onClose:()=>a(!1),onPause:Tt(t.onPause),onResume:Tt(t.onResume),onSwipeStart:ae(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ae(t.onSwipeMove,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:ae(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ae(t.onSwipeEnd,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),a(!1)})})})});qT.displayName=Zd;var[o9,l9]=BT(Zd,{onClose(){}}),a9=y.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:l,onPause:a,onResume:c,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p,...g}=t,m=Gd(Zd,n),[w,v]=y.useState(null),x=Te(e,M=>v(M)),b=y.useRef(null),S=y.useRef(null),k=i||m.duration,C=y.useRef(0),_=y.useRef(k),P=y.useRef(0),{onToastAdd:O,onToastRemove:A}=m,T=Tt(()=>{var I;(w==null?void 0:w.contains(document.activeElement))&&((I=m.viewport)==null||I.focus()),o()}),R=y.useCallback(M=>{!M||M===1/0||(window.clearTimeout(P.current),C.current=new Date().getTime(),P.current=window.setTimeout(T,M))},[T]);y.useEffect(()=>{const M=m.viewport;if(M){const I=()=>{R(_.current),c==null||c()},L=()=>{const z=new Date().getTime()-C.current;_.current=_.current-z,window.clearTimeout(P.current),a==null||a()};return M.addEventListener(um,L),M.addEventListener(dm,I),()=>{M.removeEventListener(um,L),M.removeEventListener(dm,I)}}},[m.viewport,k,a,c,R]),y.useEffect(()=>{s&&!m.isClosePausedRef.current&&R(k)},[s,k,m.isClosePausedRef,R]),y.useEffect(()=>(O(),()=>A()),[O,A]);const $=y.useMemo(()=>w?JT(w):null,[w]);return m.viewport?d.jsxs(d.Fragment,{children:[$&&d.jsx(c9,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:$}),d.jsx(o9,{scope:n,onClose:T,children:fs.createPortal(d.jsx(Bv.ItemSlot,{scope:n,children:d.jsx(zz,{asChild:!0,onEscapeKeyDown:ae(l,()=>{m.isFocusedToastEscapeKeyDownRef.current||T(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:d.jsx(le.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":m.swipeDirection,...g,ref:x,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ae(t.onKeyDown,M=>{M.key==="Escape"&&(l==null||l(M.nativeEvent),M.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,T()))}),onPointerDown:ae(t.onPointerDown,M=>{M.button===0&&(b.current={x:M.clientX,y:M.clientY})}),onPointerMove:ae(t.onPointerMove,M=>{if(!b.current)return;const I=M.clientX-b.current.x,L=M.clientY-b.current.y,z=!!S.current,j=["left","right"].includes(m.swipeDirection),D=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,E=j?D(0,I):0,W=j?0:D(0,L),ee=M.pointerType==="touch"?10:2,N={x:E,y:W},se={originalEvent:M,delta:N};z?(S.current=N,vc(r9,h,se,{discrete:!1})):Bw(N,m.swipeDirection,ee)?(S.current=N,vc(n9,u,se,{discrete:!1}),M.target.setPointerCapture(M.pointerId)):(Math.abs(I)>ee||Math.abs(L)>ee)&&(b.current=null)}),onPointerUp:ae(t.onPointerUp,M=>{const I=S.current,L=M.target;if(L.hasPointerCapture(M.pointerId)&&L.releasePointerCapture(M.pointerId),S.current=null,b.current=null,I){const z=M.currentTarget,j={originalEvent:M,delta:I};Bw(I,m.swipeDirection,m.swipeThreshold)?vc(s9,p,j,{discrete:!0}):vc(i9,f,j,{discrete:!0}),z.addEventListener("click",D=>D.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),c9=t=>{const{__scopeToast:e,children:n,...r}=t,i=Gd(Zd,e),[s,o]=y.useState(!1),[l,a]=y.useState(!1);return h9(()=>o(!0)),y.useEffect(()=>{const c=window.setTimeout(()=>a(!0),1e3);return()=>window.clearTimeout(c)},[]),l?null:d.jsx(Ed,{asChild:!0,children:d.jsx(Nd,{...r,children:s&&d.jsxs(d.Fragment,{children:[i.label," ",n]})})})},u9="ToastTitle",KT=y.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return d.jsx(le.div,{...r,ref:e})});KT.displayName=u9;var d9="ToastDescription",YT=y.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return d.jsx(le.div,{...r,ref:e})});YT.displayName=d9;var GT="ToastAction",ZT=y.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?d.jsx(QT,{altText:n,asChild:!0,children:d.jsx(Vv,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${GT}\`. Expected non-empty \`string\`.`),null)});ZT.displayName=GT;var XT="ToastClose",Vv=y.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,i=l9(XT,n);return d.jsx(QT,{asChild:!0,children:d.jsx(le.button,{type:"button",...r,ref:e,onClick:ae(t.onClick,i.onClose)})})});Vv.displayName=XT;var QT=y.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...i}=t;return d.jsx(le.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function JT(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),f9(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...JT(r))}}),e}function vc(t,e,n,{discrete:r}){const i=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?Dk(i,s):i.dispatchEvent(s)}var Bw=(t,e,n=0)=>{const r=Math.abs(t.x),i=Math.abs(t.y),s=r>i;return e==="left"||e==="right"?s&&r>n:!s&&i>n};function h9(t=()=>{}){const e=Tt(t);st(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function f9(t){return t.nodeType===t.ELEMENT_NODE}function p9(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function bf(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var m9=VT,eP=WT,tP=qT,nP=KT,rP=YT,iP=ZT,sP=Vv;const g9=m9,oP=y.forwardRef(({className:t,...e},n)=>d.jsx(eP,{ref:n,className:H("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));oP.displayName=eP.displayName;const v9=yg("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground",success:"success group border-success bg-success text-success-foreground"}},defaultVariants:{variant:"default"}}),lP=y.forwardRef(({className:t,variant:e,...n},r)=>d.jsx(tP,{ref:r,className:H(v9({variant:e}),t),...n}));lP.displayName=tP.displayName;const y9=y.forwardRef(({className:t,...e},n)=>d.jsx(iP,{ref:n,className:H("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive group-[.success]:border-muted/40 group-[.success]:hover:border-success/30 group-[.success]:hover:bg-success group-[.success]:hover:text-success-foreground group-[.success]:focus:ring-success",t),...e}));y9.displayName=iP.displayName;const aP=y.forwardRef(({className:t,...e},n)=>d.jsx(sP,{ref:n,className:H("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600 group-[.success]:text-green-300 group-[.success]:hover:text-green-50 group-[.success]:focus:ring-green-400 group-[.success]:focus:ring-offset-green-600",t),"toast-close":"",...e,children:d.jsx(fd,{className:"h-4 w-4"})}));aP.displayName=sP.displayName;const cP=y.forwardRef(({className:t,...e},n)=>d.jsx(nP,{ref:n,className:H("text-sm font-semibold",t),...e}));cP.displayName=nP.displayName;const uP=y.forwardRef(({className:t,...e},n)=>d.jsx(rP,{ref:n,className:H("text-sm opacity-90",t),...e}));uP.displayName=rP.displayName;function x9(){const{toasts:t,dismiss:e}=ur();return d.jsxs(g9,{children:[t.map(function({id:n,title:r,description:i,action:s,...o}){return d.jsxs(lP,{...o,onClick:()=>e(n),className:"cursor-pointer",children:[d.jsxs("div",{className:"grid gap-1",children:[r&&d.jsx(cP,{children:r}),i&&d.jsx(uP,{children:i})]}),s,d.jsx(aP,{})]},n)}),d.jsx(oP,{})]})}const w9=()=>{const{tg:t}=Dn(),e=qi(r=>r.preference),n=()=>{const r=qi.getState().preference,i=(t==null?void 0:t.colorScheme)??(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");let s;r==="light"?s="light":r==="dark"?s="dark":s=i,console.log(`[ThemeManager Apply] Applying effective theme: ${s} (Preference: ${r}, TG: ${i})`),s==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")};return y.useEffect(()=>{if(!t){console.warn("[ThemeManager] Telegram SDK not ready on mount. Initial theme relies on localStorage/system."),n();return}return t.onEvent("themeChanged",n),console.log("[ThemeManager] Subscribed to Telegram themeChanged event."),n(),()=>{t&&(t.offEvent("themeChanged",n),console.log("[ThemeManager] Unsubscribed from Telegram themeChanged event."))}},[t]),y.useEffect(()=>{console.log(`[ThemeManager Preference Effect] Preference changed to: ${e}`),n()},[e]),null};class b9 extends y.Component{constructor(){super(...arguments);Uv(this,"state",{hasError:!1,error:null,errorInfo:null})}static getDerivedStateFromError(n){return{hasError:!0,error:n,errorInfo:null}}componentDidCatch(n,r){console.error("Uncaught error in ErrorBoundary:",n,r),this.setState({error:n,errorInfo:r})}render(){var n;return this.state.hasError?d.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 text-center",children:[d.jsx("h1",{className:"text-xl font-semibold text-destructive mb-4",children:"Что-то пошло не так..."}),d.jsx("p",{className:"text-destructive p-4 border border-destructive/50 rounded-md bg-destructive/10",children:((n=this.state.error)==null?void 0:n.message)||"Произошла ошибка рендеринга приложения."}),!1,d.jsx("button",{onClick:()=>window.location.reload(),className:"mt-6 px-4 py-2 bg-primary text-primary-foreground rounded hover:bg-primary/90",children:"Перезагрузить страницу"})]}):this.props.children}}const Vw=({children:t})=>{const{isAdminAuthenticated:e,isLoading:n}=Sr(),{isAuthenticated:r,isLoading:i,jwt:s}=An(),o=ar();if(n||i)return console.log("[AdminGuard Simple] Waiting for auth states to load..."),d.jsx("div",{className:"flex-grow flex items-center justify-center h-screen",children:d.jsx(Ne,{size:"lg"})});if(!r||!e||!s){console.log("[AdminGuard Simple] Access denied. Redirecting.",{isUserAuthenticated:r,isAdminAuthenticated:e,hasJwt:!!s});const l=r?"/admin/login":"/login";return d.jsx(di,{to:l,state:{from:o},replace:!0})}return console.log("[AdminGuard Simple] Access granted to admin panel."),t},Kr=({children:t})=>{const{isAuthenticated:e,isLoading:n}=An(),{accounts:r,isLoading:i,error:s,fetchPortfolio:o,isFetching:l,hasAttemptedFetch:a}=nr(),c=ar();if(y.useEffect(()=>{e&&!n&&!a&&!l&&!i&&(console.log("[ProtectedRoute Portfolio Effect] Authenticated. Triggering fetchPortfolio..."),o())},[e,n,a,l,i,o]),n)return console.log("[ProtectedRoute Render] Auth state is loading..."),d.jsx("div",{className:"flex-grow flex items-center justify-center h-screen",children:d.jsx(Ne,{size:"lg"})});if(!e)return c.pathname.startsWith("/admin")?(console.log(`[ProtectedRoute Render] User NOT authenticated on admin path ${c.pathname}. Passing through to AdminGuard.`),null):(console.log(`[ProtectedRoute Render] User NOT authenticated. Redirecting from ${c.pathname} to /login.`),d.jsx(di,{to:"/login",state:{from:c},replace:!0}));const u=c.pathname.startsWith("/faq")||c.pathname.startsWith("/asset/")||c.pathname.startsWith("/profile");if(!c.pathname.startsWith("/admin")&&!u){if(console.log(`[ProtectedRoute Render] User authenticated. Checking portfolio status for path: ${c.pathname}`),(l||i)&&!a)return console.log("[ProtectedRoute Render] Waiting for portfolio data (initial load)..."),d.jsx("div",{className:"flex-grow flex items-center justify-center h-screen",children:d.jsx(Ne,{size:"lg"})});if(a&&s&&!s.includes("401")&&!s.includes("Unauthorized"))return console.error("[ProtectedRoute Render] Portfolio fetch error:",s),d.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center p-4 text-center",children:[d.jsx(xt,{message:`Ошибка загрузки данных портфеля: ${s}`}),d.jsx(ce,{variant:"outline",onClick:()=>o(!0),className:"mt-4",children:"Повторить"})]});if(a&&r===null&&!s&&!i&&!l)return console.error("[ProtectedRoute Render] Portfolio fetch attempted, no error, but accounts is still null."),d.jsx("div",{className:"p-4 text-center text-destructive",children:"Не удалось загрузить данные портфеля. Обновите страницу."});if(r!==null){if(r.length===0&&c.pathname!=="/register-initial")return console.log("[ProtectedRoute Render] No accounts found, redirecting to /register-initial"),d.jsx(di,{to:"/register-initial",replace:!0});if(r.length>0&&c.pathname==="/register-initial")return console.log("[ProtectedRoute Render] Accounts exist, redirecting from /register-initial to /portfolio"),d.jsx(di,{to:"/portfolio",replace:!0})}}return console.log(`[ProtectedRoute Render] All checks passed for path ${c.pathname}. Rendering children.`),t},S9=({children:t})=>{const{isAuthenticated:e,isLoading:n}=An();return n?d.jsx("div",{className:"flex-grow flex items-center justify-center h-screen",children:d.jsx(Ne,{})}):e?d.jsx(di,{to:"/",replace:!0}):t},k9=()=>{const t=ar(),e=y.useRef(null),n=mr.getState().resetMarketState;return y.useEffect(()=>{const r=t.pathname;e.current==="/market"&&r!=="/market"&&!r.startsWith("/asset/")&&(console.log("[AppLayout Effect] Navigating away from Market via BottomNav/Other. Resetting Market state."),n()),e.current=r},[t.pathname]),d.jsxs("div",{className:"flex-grow flex flex-col overflow-hidden pb-16",children:[d.jsx("main",{className:"flex-grow overflow-y-auto no-scrollbar",children:d.jsxs(hS,{children:[d.jsx(tt,{index:!0,element:d.jsx(di,{to:"/portfolio",replace:!0})}),d.jsx(tt,{path:"/portfolio",element:d.jsx(IL,{})}),d.jsx(tt,{path:"/market",element:d.jsx(h5,{})}),d.jsx(tt,{path:"/top10",element:d.jsx(v5,{})}),d.jsx(tt,{path:"/profile",element:d.jsx(uF,{})}),d.jsx(tt,{path:"/portfolio/:accountId",element:d.jsx(wz,{})}),d.jsx(tt,{path:"*",element:d.jsx(di,{to:"/portfolio",replace:!0})})]})}),d.jsx(XH,{})]})};function C9(){const{tg:t}=Dn();return y.useEffect(()=>{t&&(t.ready(),t.expand())},[t]),d.jsxs("div",{className:"flex flex-col min-h-screen bg-background text-foreground",children:[d.jsx(w9,{}),d.jsx(x9,{}),d.jsx(b9,{children:d.jsxs(hS,{children:[d.jsx(tt,{path:"/login",element:d.jsx(S9,{children:d.jsx(wF,{})})}),d.jsx(tt,{path:"/register-initial",element:d.jsx(Kr,{children:d.jsx(gF,{})})}),d.jsx(tt,{path:"/asset/:id",element:d.jsx(Kr,{children:d.jsx(c5,{})})}),d.jsx(tt,{path:"/asset/:id/chart",element:d.jsx(Kr,{children:d.jsx(ZH,{})})}),d.jsx(tt,{path:"/portfolio/:accountId/operations",element:d.jsx(Kr,{children:d.jsx(y4,{})})}),d.jsx(tt,{path:"/faq",element:d.jsx(Kr,{children:d.jsx(z5,{})})}),d.jsx(tt,{path:"/faq/:categoryId",element:d.jsx(Kr,{children:d.jsx(D5,{})})}),d.jsx(tt,{path:"/faq/:categoryId/:articleId",element:d.jsx(Kr,{children:d.jsx(EH,{})})}),d.jsx(tt,{path:"/admin/login",element:d.jsx(_H,{})}),d.jsx(tt,{path:"/admin/panel",element:d.jsx(Vw,{children:d.jsx(KH,{})})}),d.jsx(tt,{path:"/admin/faq/:categoryId",element:d.jsx(Vw,{children:d.jsx(GH,{})})}),d.jsx(tt,{path:"/*",element:d.jsx(Kr,{children:d.jsx(k9,{})})})]})})]})}async function E9(){var t;try{await fO(),console.log("[index.tsx] Configuration loaded."),(t=window.Telegram)!=null&&t.WebApp?(window.Telegram.WebApp.ready(),window.Telegram.WebApp.expand(),console.log("[index.tsx] Telegram WebApp SDK initialized.")):console.warn("[index.tsx] Telegram WebApp SDK not found.");const e=document.getElementById("root");if(!e)throw new Error("Root element not found");Sf.createRoot(e).render(d.jsx(FA,{children:d.jsx(C9,{})})),console.log("[index.tsx] React App Rendered.")}catch(e){console.error("[index.tsx] Failed to start the application:",e);const n=document.getElementById("root");n&&!n.innerHTML.includes("Failed to load")&&(n.innerHTML='<div style="padding: 20px; text-align: center; color: red;">Critical error during application startup.</div>')}}E9();
